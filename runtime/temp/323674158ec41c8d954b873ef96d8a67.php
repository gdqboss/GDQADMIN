<?php /*a:4:{s:50:"/www/wwwroot/gdqshop.cn/app/view/member/index.html";i:1768023362;s:48:"/www/wwwroot/gdqshop.cn/app/view/public/css.html";i:1747926690;s:47:"/www/wwwroot/gdqshop.cn/app/view/public/js.html";i:1747926690;s:54:"/www/wwwroot/gdqshop.cn/app/view/public/copyright.html";i:1747926690;}*/ ?>
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title><?php echo t('会员'); ?>列表</title>
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css?v=20200519" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/layui/css/modules/formSelects-v4.css?v=20200516" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css?v=202406" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/font-awesome.min.css?v=20200516" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/webuploader/webuploader.css?v=<?php echo time(); ?>" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/designer.css?v=202410" media="all">
<link rel="stylesheet" type="text/css" href="/static/fonts/iconfont.css?v=20201218" media="all">
	<style>
	.orderdetail{background:#fff;width: 94%;box-sizing:border-box;margin:0 10px;display:flex;flex-direction:column;}
	.orderdetail *{box-sizing:border-box;}
	.orderinfo{ width:100%;margin-top:5px;padding: 5px;background: #FFF;}
	.orderinfo .item{display:flex;width:100%;padding:5px 0;border-bottom:1px dashed #ededed;}
	.orderinfo .item:last-child{ border-bottom: 0;}
	.orderinfo .item .t1{width:100px;}
	.orderinfo .item .t2{flex:1;text-align:right}
	.orderinfo .item .red{color:red}
	.layui-table-tool{background: #fff;border:none}
	</style>
</head>
<body>
  <div class="layui-fluid">
    <div class="layui-row layui-col-space15">
        <div class="layui-card layui-col-md12">
          <div class="layui-card-header">
				<?php if(input('param.fxmid')): ?>
				<div class="layui-tab layui-tab-brief">
					<ul class="layui-tab-title">
						<li <?php if(input('param.deep')=='1'): ?>class="layui-this"<?php endif; ?> onclick="location.href='<?php echo url('index'); ?>&deep=1&isopen=1&fxmid=<?php echo app('request')->param('fxmid'); ?>'">一级</li>
						<li <?php if(input('param.deep')=='2'): ?>class="layui-this"<?php endif; ?> onclick="location.href='<?php echo url('index'); ?>&deep=2&isopen=1&fxmid=<?php echo app('request')->param('fxmid'); ?>'">二级</li>
						<li <?php if(input('param.deep')=='3'): ?>class="layui-this"<?php endif; ?> onclick="location.href='<?php echo url('index'); ?>&deep=3&isopen=1&fxmid=<?php echo app('request')->param('fxmid'); ?>'">三级</li>
					</ul>
				</div>
				<?php else: ?>
				<?php echo t('会员'); ?>列表
				<?php endif; if(input('param.isopen')==1): ?><i class="layui-icon layui-icon-close" style="font-size:18px;font-weight:bold;cursor:pointer" onclick="closeself()"></i><?php endif; ?>
			</div>
          <div class="layui-card-body" pad15>
<!--						<div class="layui-col-md12" style="padding-bottom:10px;">-->
<!--							<?php if(getcustom('member_add')): ?>-->
<!--							<a class="layui-btn layuiadmin-btn-list" href="javascript:void(0)" onclick="openmax('<?php echo url('edit'); ?>')">添加</a>-->
<!--							<?php endif; ?>-->
<!--							<button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="datadel(0)">删除</button>-->
<!--							-->
<!--							<button class="layui-btn layui-btn-primary layuiadmin-btn-list" data-form-export="<?php echo url('excel'); ?>">导出</button>-->
<!--							<button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="daoru()">导入</button>-->

<!--							<?php if(getcustom('member_overdraft_money')): ?>-->
<!--							<?php if($rechargeOverdraftMoneyAuth): ?>-->
<!--							<button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="editLimitOverdraftmoney()">批量修改额度</button>-->
<!--							<?php endif; ?>-->
<!--							<?php endif; ?>-->
<!--						</div>-->
						<div class="layui-form layui-col-md12 layui-form-search">
							<div class="layui-inline">
								<label class="layui-form-label">ID</label>
								<div class="layui-input-inline">
									<input type="text" name="mid" autocomplete="off" class="layui-input">
								</div>
							</div>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">关键字</label>
								<div class="layui-input-inline" style="width:180px">
									<input type="text" name="nickname" autocomplete="off" class="layui-input" placeholder="昵称/姓名/手机号/会员卡号">
								</div>
							</div>
							<?php if(getcustom('member_set')): ?>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">资料自定义</label>
								<div class="layui-input-inline" style="width:180px">
									<input type="text" name="set_keywords" autocomplete="off" class="layui-input" placeholder="资料自定义内容">
								</div>
							</div>
							<?php endif; if(getcustom('register_fields_extend')): ?>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">扩展信息</label>
								<div class="layui-input-inline" style="width:180px">
									<input type="text" name="search_fields_extend" autocomplete="off" class="layui-input" placeholder="扩展信息">
								</div>
							</div>
							<?php endif; ?>
							<div class="layui-inline">
								<label class="layui-form-label">推荐人ID</label>
								<div class="layui-input-inline">
									<input type="text" name="pid" autocomplete="off" class="layui-input">
								</div>
							</div>
							<?php if(getcustom('up_change_pid')): ?>
							<div class="layui-inline">
								<label class="layui-form-label">原推荐人ID</label>
								<div class="layui-input-inline">
									<input type="text" name="pid_origin" autocomplete="off" class="layui-input">
								</div>
							</div>
							<?php endif; ?>
							<div class="layui-inline">
								<label class="layui-form-label">等级</label>
								<div class="layui-input-inline">
									<select name="levelid" lay-search>
										<option value="">全部</option>
										<?php foreach($levelArr as $k=>$v): ?>
										<option value="<?php echo $k; ?>"><?php echo $v; ?></option>
										<?php endforeach; ?>
									</select>
								</div>
							</div>
							<div class="layui-inline">
								<label class="layui-form-label">是否领卡</label>
								<div class="layui-input-inline">
									<select name="isgetcard">
										<option value="">全部</option>
										<option value="1">已领卡</option>
										<option value="2">未领卡</option>
									</select>
								</div>
							</div>
							
							<?php if(getcustom('plug_tengrui')): ?>
							<div class="layui-inline">
								<label class="layui-form-label">是否认证</label>
								<div class="layui-input-inline">
									<select name="tr_is_rzh">
										<option value="">全部</option>
										<option value="0">未认证</option>
										<option value="1">已认证</option>
									</select>
								</div>
							</div>
							<?php endif; if(getcustom('xixie') || getcustom('mendian_member_levelup_fenhong')): ?>
							<div class="layui-inline">
								<label class="layui-form-label">门店</label>
								<div class="layui-input-inline">
									<select name="mdid" lay-search>
										<option value="">全部</option>
										<?php foreach($mendian as $k=>$v): ?>
										<option value="<?php echo $v['id']; ?>"><?php echo $v['name']; ?></option>
										<?php endforeach; ?>
									</select>
								</div>
							</div>
							<?php endif; if(getcustom('member_business')): if($showbusiness && $blist): ?>
								<div class="layui-inline">
									<label class="layui-form-label">商户</label>
									<div class="layui-input-inline">
										<select name="bid" lay-search>
											<option value="">请选择商户</option>
											<option value="0">平台</option>
											<?php foreach($blist as $k=>$v): ?>
											<option value="<?php echo $v['id']; ?>"><?php echo $v['name']; ?></option>
											<?php endforeach; ?>
										</select>
									</div>
								</div>
								<?php endif; ?>
							<?php endif; ?>
							<div class="layui-inline">
								<label class="layui-form-label">加入时间</label>
								<div class="layui-input-inline" style="width:180px">
									<input type="text" name="ctime" id="ctime" autocomplete="off" class="layui-input">
								</div>
							</div>
							<?php if(getcustom('member_search_teamyejitime')): ?>
							<div class="layui-inline">
								<label class="layui-form-label">团队业绩时间</label>
								<div class="layui-input-inline" style="width:180px">
									<input type="text" name="teamyeji_time" id="teamyeji_time" autocomplete="off" class="layui-input">
								</div>
							</div>
							<?php endif; if(getcustom('ganer_fenxiao')): ?>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">代理省</label>
								<div class="layui-input-inline" style="width:80px">
									<input type="text" name="areafenhong_province" autocomplete="off" class="layui-input" placeholder="代理省">
								</div>
							</div>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">代理市</label>
								<div class="layui-input-inline" style="width:80px">
									<input type="text" name="areafenhong_city" autocomplete="off" class="layui-input" placeholder="代理市">
								</div>
							</div>
							<div class="layui-inline layuiadmin-input-useradmin">
								<label class="layui-form-label">代理区县</label>
								<div class="layui-input-inline" style="width:80px">
									<input type="text" name="areafenhong_area" autocomplete="off" class="layui-input" placeholder="代理区县">
								</div>
							</div>
							<?php endif; if(getcustom('member_tag')): ?>					
							<div class="layui-inline">
								<label class="layui-form-label">标签</label>
								<div class="layui-input-inline">
									<select name="tagid" >
										<option value="">请选择标签</option>
										<?php foreach($taglist as $k=>$v): ?>
										<option value="<?php echo $k; ?>"><?php echo $v; ?></option>
										<?php endforeach; ?>
									</select>
								</div>
							</div>
							<?php endif; ?>
							<div class="layui-inline">
								<button class="layui-btn layuiadmin-btn-replys" lay-submit="" lay-filter="LAY-app-forumreply-search">
									<i class="layui-icon layui-icon-search layuiadmin-button-btn"></i>
								</button>
							</div>
						</div>
						<div class="layui-col-md12">
							<table id="tabledata" lay-filter="tabledata"></table>
						</div>
          </div>
        </div>
    </div>
  </div>
	<div id="rechargeModel" style="width:500px;display:none;margin-top:30px">
		<div class="layui-form" lay-filter="">
			<input type="hidden" name="rechargemid" id="rechargemid"/>
			<div class="layui-form-item">
				<label class="layui-form-label">充值方式</label>
				<div class="layui-input-inline">
					<select name="rechargetype">
						<option value="wxpay">微信</option>
						<option value="alipay">支付宝</option>
						<option value="cash">现金</option>
						<option value="bank">银行卡</option>
					</select>
				</div>
				<div class="layui-form-mid layui-word-aux"></div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">充值金额</label>
				<div class="layui-input-inline">
					<input type="text" name="rechargemoney" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-mid layui-word-aux">输入负值表示扣除金额</div>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">备注</label>
				<div class="layui-input-inline">
					<input type="text" name="remark" placeholder="" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-mid layui-word-aux"></div>
			</div>
			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn layui-btn-normal" lay-submit lay-filter="formRecharge">确定充值</button>
				</div>
			</div>
		</div>
	</div>
	<div id="addktnumModel" style="width:500px;display:none;margin-top:30px">
		<div class="layui-form" lay-filter="">
			<input type="hidden" name="ktmid" id="ktmid"/>
			<div class="layui-form-item">
				<label class="layui-form-label">开团次数</label>
				<div class="layui-input-inline">
					<input type="text" name="ktnum" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-mid layui-word-aux">输入负值表示扣除开团次数</div>
			</div>
			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn layui-btn-normal" lay-submit lay-filter="formKtnum">确定</button>
				</div>
			</div>
		</div>
	</div>
	<div id="ywtimeModel" style="width:500px;display:none;margin-top:30px">
		<div class="layui-form" lay-filter="">
			<input type="hidden" name="ywtmid" id="ywtmid"/>

			<div class="layui-form-item">
				<label class="layui-form-label" style="width: 130px"><?php echo t('余额宝'); ?>收益:</label>
				<div class="layui-input-inline" style="width: 210px">
					<input type="number" name="ywrate" id="ywrate" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input" style="display: inline-block;width: 190px">%
				</div>
				<div class="layui-form-mid layui-word-aux" style="width: 400px;margin-left: 40px;">注意：1、填-1为关闭单独设置，填0为无收益 </div>
			</div>

			<div class="layui-form-item">
				<label class="layui-form-label" style="width: 130px"><?php echo t('余额宝'); ?>提现天数:</label>
				<div class="layui-input-inline">
					<input type="number" name="ywtime" id="ywtime" required lay-verify="required" placeholder="" autocomplete="off" class="layui-input">
				</div>
				<div class="layui-form-mid layui-word-aux" style="width: 400px;margin-left: 40px;">注意：1、必须为整数 2、填-1为关闭单独设置 3、填0为不限制，填其他数字，如填写10，为每10天可提现一次</div>
			</div>

			<div class="layui-form-item">
				<div class="layui-input-block">
					<button class="layui-btn layui-btn-normal" lay-submit lay-filter="formywtime">确定</button>
				</div>
			</div>
		</div>
	</div>
  		<?php if(getcustom('member_commission_max') && getcustom('add_commission_max')): ?>
	  <div id="commissionmaxModel" style="width:500px;display:none;margin-top:30px">
		  <div class="layui-form">
			  <div class="layui-form-item" style="margin-top:40px;margin-right:20px;">
				  <label class="layui-form-label" style="width:80px">增加数量：</label>
				  <div class="layui-input-inline" style="width:100px">
					  <input type="text" id="addcommissionmaxnum" class="layui-input"/>
					  </div>
				  <div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('佣金上限'); ?></div>
				  </div>
			  <div class="layui-form-item" style="">
				  <label class="layui-form-label" style="width:80px">来源：</label>
				  <div class="layui-input-inline"  style="width:300px">
					 <input type="radio" name="in_type" title="后台发放" value="1" checked="checked" />
					  <input type="radio" name="in_type" title="系统发放" value="0" />
				  </div>
			  </div>
			  <div class="layui-form-item" style="">
				  <label class="layui-form-label" style="width:80px">备注信息：</label>
				  <div class="layui-input-inline" style="width:200px">
					  <input type="text" id="addcommissionmaxremark" class="layui-input"/>
				  </div>
			  </div>
		  </div>
	  </div>
  	<?php endif; ?>
  <script type="text/html" id="leftbtn">
	  <div class="layui-btn-container">
		  <?php if(getcustom('member_add')): ?>
		  <button class="layui-btn " lay-event="getCheckData" onclick="openmax('<?php echo url('edit'); ?>')">添加</button>
		  <?php endif; ?>
		  <button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="datadel(0)">删除</button>
		  <button class="layui-btn layui-btn-primary layuiadmin-btn-list" data-form-export="<?php echo url('excel'); ?>">导出</button>
		  <button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="daoru()">导入</button>
		  <?php if(getcustom('member_overdraft_money')): if($rechargeOverdraftMoneyAuth): ?>
		  <button class="layui-btn layui-btn-primary layuiadmin-btn-list" onclick="editLimitOverdraftmoney()">批量修改额度</button>
		  <?php endif; ?>
		  <?php endif; ?>
	  </div>
  </script>
	<script type="text/javascript" src="/static/admin/layui/layui.all.js?v=20210226"></script>
<script type="text/javascript" src="/static/admin/layui/lay/modules/flow.js?v=1"></script>
<script type="text/javascript" src="/static/admin/layui/lay/modules/formSelects-v4.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery-ui.min.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/ueditor/ueditor.js?v=20220707"></script>
<script type="text/javascript" src="/static/admin/ueditor/135editor.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/webuploader/webuploader.js?v=2024"></script>
<script type="text/javascript" src="/static/admin/js/qrcode.min.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/js/dianda.js?v=2022"></script>
<script type="text/javascript" src="/static/admin/js/inputTags.js?v=2026"></script>

<div id="NewsToolBox"></div>
<script type="text/javascript">
		// 解释文字浮层展示
		$('.layui-text-popover').mouseenter(function(){
			let pageHeight = $(window).height() + $(document).scrollTop();
			let bottom = pageHeight - $(this).offset().top
			let topNum = ($(this).offset().top - $(document).scrollTop()).toFixed(2);
			let Height = $(this).find('.layui-textpopover-div').outerHeight();
			$(this).find('.layui-textpopover-div').show()
			let that = this;
			setTimeout(function(){
				if(topNum < (Height/2-15)){
					$(that).find('.layui-textpopover-div').css({'top':-topNum+10+'px','opacity':1,'transition':'opacity .3s'})	
				}else if(bottom < (Height/2-15)){
					$(that).find('.layui-textpopover-div').css({'top': bottom-Height-10 +'px','opacity':1,'transition':'opacity .3s'})	
				}else{
					$(that).find('.layui-textpopover-div').css({'top':-(Height/2-15)+'px','opacity':1,'transition':'opacity .3s'})	
				}
			},100)
		}) 
		$('.layui-text-popover').mouseleave(function(){
			$(this).find('.layui-textpopover-div').css({'opacity':0})	
			$(this).find('.layui-textpopover-div').hide()
		}) 
		$('.layui-textpopover-div').mouseenter(function(){
			$(this).find('.layui-textpopover-div').show()
		})
		$('.layui-textpopover-div').mouseleave(function(){
			$(this).find('.layui-textpopover-div').css({'opacity':0})
			$(this).find('.layui-textpopover-div').hide()
		})
		// 图片浮层展示 示例
		$('.layui-popover').mouseenter(function(){
			let pageHeight = $(window).height() + $(document).scrollTop();
			let bottom = pageHeight - $(this).offset().top
			let topNum = ($(this).offset().top - $(document).scrollTop()).toFixed(2);
			let Height = $(this).find('.layui-popover-div').outerHeight();
			$(this).find('.layui-popover-div').show()
			let that = this;
			setTimeout(function(){
				if(topNum < (Height/2-15)){
					$(that).find('.layui-popover-div').css({'top':-topNum+10+'px','opacity':1,'transition':'opacity .3s'})	
				}else if(bottom < (Height/2-15)){
					$(that).find('.layui-popover-div').css({'top': bottom-Height-10 +'px','opacity':1,'transition':'opacity .3s'})	
				}else{
					$(that).find('.layui-popover-div').css({'top':-(Height/2-15)+'px','opacity':1,'transition':'opacity .3s'})	
				}
			},100)
		}) 
		$('.layui-popover').mouseleave(function(){
			$(this).find('.layui-popover-div').css({'opacity':0})	
			$(this).find('.layui-popover-div').hide()
		}) 
    function copyText(text) {
        var top = document.documentElement.scrollTop;
        var textarea = document.createElement("textarea"); //创建input对象
        var currentFocus = document.activeElement; //当前获得焦点的元素
        var toolBoxwrap = document.getElementById('NewsToolBox'); //将文本框插入到NewsToolBox这个之后
        toolBoxwrap.appendChild(textarea); //添加元素
        textarea.value = text;
        textarea.focus();
        document.documentElement.scrollTop = top;
        if (textarea.setSelectionRange) {
            textarea.setSelectionRange(0, textarea.value.length); //获取光标起始位置到结束位置
        } else {
            textarea.select();
        }
        try {
            var flag = document.execCommand("copy"); //执行复制
        } catch (eo) {
            var flag = false;
        }
        toolBoxwrap.removeChild(textarea); //删除元素
        currentFocus.focus();
        if(flag) layer.msg('复制成功');
        return flag;
    }
		// 查看链接
		function viewLink(path,url=''){
			var pagepath = path;
			if(!url){
				var url = "<?php echo m_url('"+pagepath+"'); ?>"; //拼接 H5 链接
			}
			<?php if(!in_array('mp',$platform)): ?>
				showwxqrcode(pagepath);
				return;
			<?php endif; ?>
			var html = '';
			html+='<div style="margin:20px">';
			html+='	<div style="width:100%;margin:10px 0" id="urlqr"></div>';
			<?php if(in_array('wx',$platform)): ?>
			html+='	<div style="width:100%;text-align:center"><button class="layui-btn layui-btn-sm layui-btn-primary" onclick="showwxqrcode(\''+pagepath+'\')">查看小程序码</button></div>';
			<?php endif; ?>
			html+='	<div style="line-height:25px;"><div><span style="width: 70px;display: inline-block;">链接地址：</span><button class="layui-btn layui-btn-xs layui-btn-primary" onclick="copyText(\''+url+'\')">复制</button></div><div>'+url+'</div></div>';
			html+='	<div style="height:50px;line-height:25px;"><div><span style="width: 70px;display: inline-block;">页面路径：</span><button style="box-sizing: border-box;" class="layui-btn layui-btn-xs layui-btn-primary" onclick="copyText(\'/'+pagepath+'\')">复制</button></div><div>/'+pagepath+'</div></div>';
			html+='</div>';
			layer.open({type:1,'title':'查看链接',area:['500px','430px'],shadeClose:true,'content':html})
			var qrcode = new QRCode('urlqr', {
					text: 'your content',
					width: 200,
					height: 200,
					colorDark : '#000000',
					colorLight : '#ffffff',
					correctLevel : QRCode.CorrectLevel.L
				});
				qrcode.clear();
				qrcode.makeCode(url);
		}
		// 查看小程序码
		function showwxqrcode(pagepath){
			var index = layer.load();
			$.post("<?php echo url('DesignerPage/getwxqrcode'); ?>",{path:pagepath},function(res){
				layer.close(index);
				if(res.status==0){
					layer.open({type:1,area:['300px','350px'],content:'<div style="margin:auto auto;text-align:center"><div style="color:red;width:280px;height:180px;margin-top:100px">'+res.msg+'</div><div style="height:25px;line-height:25px;">'+'/'+pagepath+'</div></div>',title:false,shadeClose:true})
				}else{
					layer.open({type:1,area:['300px','350px'],content:'<div style="margin:auto auto;text-align:center"><img src="'+res.url+'" style="margin-top:20px;max-width:280px;max-height:280px"/><div style="height:25px;line-height:25px;">'+'/'+pagepath+'</div></div>',title:false,shadeClose:true})
				}
			})
		}
</script>
<!-------使用js导出excel文件--------->
<script src="/static/admin/excel/excel.js?v=2024"></script>
<script src="/static/admin/excel/layui_exts/excel.js"></script>
<script>

    var excel = new Excel();
    var excel_name = '<?php echo $excel_name; ?>';
    excel.bind(function (data,title) {
        var excel_field = JSON.parse('<?php echo $excel_field; ?>');
        if(title && title!=undefined){
            //接口返回的title
            var excel_title = title;
        }else{
            //excel_field.php 配置的title
            var excel_title = JSON.parse('<?php echo $excel_title; ?>');
        }
        if(!excel_title || excel_title.length<=0){
            //上面两种都没有title,读取table表格cols中的title，同时filed也更新为table表格cols中的field
            excel_title = [];
            excel_field = [];
            var cols = tableIns.config.cols;
            cols.forEach(function (cols_item, cols_index) {
                console.log(cols_item);
                cols_item.forEach(function (cols_item2, cols_index2) {
                    console.log(cols_item2);
                    if(cols_item2.title){
                        excel_title.push(cols_item2.title)
                        excel_field.push(cols_item2.field)
                    }
                })
            })
        }
        // if(!excel_title || excel_title.length<=0){
        //     layer.msg('未设置标题');
        //     return;
        // }

        // 设置表格内容
        data.forEach(function (item, index) {
            var _data = [];
            excel_title.forEach(function (title, index2) {
                var field = excel_field[index2];
                if(item[field] && item[field]!=undefined){
                    //有filed 匹配field
                    var field_val = item[field];
                    //是整数 长度为10 字段名包含time 判定为时间戳
                    if(parseInt(field_val) == field_val && (field_val.toString()).length==10 && field.includes('time')){
                        field_val = date('Y-m-d H:i:s',field_val);
                    }
                }else{
                    //没有filed 根据顺序来
                    var field_val = item[index2];
                }
                _data.push(field_val);
            })
            data[index] = _data;
        });
        // 设置表头内容
        if(excel_title && excel_title.length>0){
            data.unshift(excel_title);
        }
        // 应用表格样式
        return this.withStyle(data);

    }, excel_name+layui.util.toDateString(Date.now(), '_yyyyMMdd_HHmmss'));

</script>
	
  
	<script>
  var table = layui.table;
  var sortdata = "<?php echo $sort; ?>";
	var datawhere = {};
	<?php if(input('?param.fxmid') && input('param.fxmid')!==''): ?>
	datawhere['fxmid'] = "<?php echo app('request')->param('fxmid'); ?>";
	<?php endif; if(input('?param.deep') && input('param.deep')!==''): ?>
	datawhere['deep'] = "<?php echo app('request')->param('deep'); ?>";
	<?php endif; ?>
  //数据表
  var tableIns = table.render({
    elem: '#tabledata'
    ,url: '<?php echo app('request')->url(); ?>' //数据接口
    ,page: true //开启分页
		,checkbox: true
		,autoSort:false,
	toolbar: '#leftbtn',
	defaultToolbar: [
	  'filter', // 列筛选
	],
	cols: [[ //表头
			{type:"checkbox"},
      {field: 'id', title: 'ID',sort: true,width:60},
      {field: 'identity', title: '身份',sort: true,width:80},
      {field: 'supplier_id', title: '关联供货商ID',sort: true,width:120},
      {field: 'nickname', title: '推荐人',templet: function(d){
		  var html = '';

			if(d.parent && d.parent.id){
				html= '<img src="'+d.parent.headimg+'" style="height:30px"/><br>'+d.parent.nickname;
			}else{
				html= '无';
			}
		  if(d.parent_origin && d.parent_origin.id){
			  html += '<div><img src="'+d.parent_origin.headimg+'" style="height:30px"/><br>'+d.parent_origin.nickname+'(原推荐人)</div>';
		  }
		  return html;
		},width:70},

      {field: 'nickname', title: '头像昵称',templet:function(d){
				var html = '<img src="'+d.headimg+'" style="height:50px"/> '+d.nickname;
				if(d.remark){
					html += '<br><span style="color:#f55">'+d.remark+'</span>';
				}
				if(d.isfreeze == 1){
					html += '<br><span style="color:#f55">已冻结</span>';
				}
				return html;
			}},
			{field: 'realname', title: '会员信息',templet:function(d){
				var platform = d.platform;
				if(d.platform=='wx') platform = '小程序';
				if(d.platform=='mp') platform='公众号';
				if(d.platform=='h5') platform= 'H5';
				if(d.platform=='alipay') platform= '支付宝小程序';
				if(d.platform=='qq') platform= 'QQ小程序';
				if(d.platform=='baidu') platform= '百度小程序';
				if(d.platform=='toutiao') platform= '抖音小程序';
				if(d.platform=='app') platform= 'APP';
				if(d.platform=='qywx') platform= '企业微信';
				if(d.platform=='cashdesk') platform= '收银台';
				if(d.platform=='wx_channels') platform= '视频号小店';
				
				var html = '<ul style="line-height: 25px">';
				
				html+='<li>等&nbsp;&nbsp;级：'+d.levelname+'</li>';
				
				<?php if(in_array('mp',$platform) && in_array('wx',$platform)): ?>
				html+='<li>来&nbsp;&nbsp;源：'+platform+'</li>';
				<?php endif; ?>
					html+='<li ><?php echo t('优惠券'); ?>：<a  href="javascript:void(0)"  onclick="openmax(\'<?php echo url('Coupon/record'); ?>&isopen=1&mid='+d.id+'\')">'+d.coupon_count+'</a></li>';
				<?php if(in_array('mp',$platform)): ?>
					if(d.card_code){
						html+='<li >会员卡：<a href="javascript:void(0)"   onclick="showcarddetail(\''+d.card_id+'\',\''+d.card_code+'\')">'+d.card_code+'</a></li>';
					}else{
						 html+='<li>会员卡：未领取</li>';
					}
				<?php endif; ?>
			        var  realname = d.realname?d.realname:'';
					html+='<li>姓&nbsp;&nbsp;名：'+realname+'</li>';
					html+='<li>电&nbsp;&nbsp;话：'+d.tel+'</li>';
				<?php if(getcustom('member_realname_verify')): ?>
					var  usercard =  d.usercard?d.usercard:'';
					html+='<li>身份证号：'+usercard+'</li>';
				<?php endif; ?>
				html+' </ul>';
				return html;
			},width:150},
			<?php if(getcustom('register_fields_extend')): ?>
			{field: 'fields_extend_info', title: '扩展信息',width:160},
			<?php endif; ?>
			{field: 'money', title: '<?php echo t('余额'); ?>',sort: sortdata,width:100,templet:function(d){
				return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Money/moneylog'); ?>&isopen=1&mid='+d.id+'\')">'+d.money+'</a>';
			}},
			{field: 'score', title: '<?php echo t('积分'); ?>',sort: sortdata,width:80,templet:function(d){
				var html = '<ul style="line-height: 25px">';
				html+= '<li><?php echo t('积分'); ?>：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Score/scorelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.score+'</a></li>';
				
				<?php if(getcustom('score_withdraw')): ?>
				html+= '<li>允提<?php echo t('积分'); ?>：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Score/scorelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.score_withdraw+'</a></li>';
				<?php endif; if(getcustom('yx_score_freeze')): ?>
				html+= '<li><?php echo t('积分'); ?>冻结：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('ScoreFreeze/freezelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.score_freeze+'</a></li>';
				<?php endif; ?>
				html+=' </ul>';
				return html;
				
				// return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Score/scorelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.score+'</a>';
			},width:150},
			{field: 'commission', title: '<?php echo t('佣金'); ?>',sort: true,width:100,templet:function(d){
				var html = '<ul style="line-height: 25px">';
				html+= '<li><?php echo t('佣金'); ?>：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/commissionlog'); ?>&isopen=1&mid='+d.id+'\')">'+d.commission+'</a></li>';
				<?php if(getcustom('member_commission_max')): ?>
				html+= '<li>上限：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/maxlog'); ?>&isopen=1&mid='+d.id+'\')">'+d.commission_max+'</a></li>';
				html+= '<li>累计：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/commissionlog'); ?>&isopen=1&mid='+d.id+'\')">'+d.totalcommission+'</a></li>';
				<?php endif; if(getcustom('add_commission_max')): ?>
				html+= '<li>后台发放：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/maxlog'); ?>&isopen=1&in_type=1&mid='+d.id+'\')">'+d.commission_max_plate+'</a></li>';
				html+= '<li>系统发放：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/maxlog'); ?>&isopen=1&in_type=0&mid='+d.id+'\')">'+d.commission_max_self+'</a></li>';
				<?php endif; ?>
				html+=' </ul>';	
				return html;
			},width:150},
			<?php if(getcustom('member_business')): if($showbusiness): ?>
				{field: 'bname', title: '所属商户',width:160},
				<?php endif; ?>
			<?php endif; if(getcustom('xixie') || getcustom('mendian_member_levelup_fenhong')): ?>
			    {field: 'mendian_infor', title: '门店信息',sort: sortdata,width:100,templet:function(d){
			    	if(d.mendian_infor){
					  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('mendian/index'); ?>&isopen=1&id='+d.mdid+'\')">'+d.mendian_infor+'</a>';
			    	}else{
			    		return '无';
			    	}
				}},
			<?php endif; if(getcustom('network_slide_down_max')): ?>
		{field: 'slide_num', title: '上级滑落人数',srot:true},
		<?php endif; if(getcustom('other_money')): if($othermoney_status): ?>
	      {field: 'money2', title: '<?php echo t('余额2'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OtherMoney/moneylog'); ?>&type=money2&act=money&isopen=1&mid='+d.id+'\')">'+d.money2+'</a>';
	      }},
	      {field: 'money3', title: '<?php echo t('余额3'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OtherMoney/moneylog'); ?>&type=money3&act=money&isopen=1&mid='+d.id+'\')">'+d.money3+'</a>';
	      }},
	      {field: 'money4', title: '<?php echo t('余额4'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OtherMoney/moneylog'); ?>&type=money4&act=money&isopen=1&mid='+d.id+'\')">'+d.money4+'</a>';
	      }},
	      {field: 'money5', title: '<?php echo t('余额5'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OtherMoney/moneylog'); ?>&type=money5&act=money&isopen=1&mid='+d.id+'\')">'+d.money5+'</a>';
	      }},
	      {field: 'frozen_money', title: '<?php echo t('冻结金额'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OtherMoney/moneylog'); ?>&type=frozen_money&act=money&isopen=1&mid='+d.id+'\')">'+d.frozen_money+'</a>';
	      }},
	      <?php endif; ?>
      <?php endif; if(getcustom('product_service_fee') && ($auth_data=='all' || in_array('service_fee_switch',$auth_data))): ?>
		  {field: 'score', title: '<?php echo t('服务费'); ?>',sort: sortdata,width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('ServiceFee/servicefeeLog'); ?>&isopen=1&mid='+d.id+'\')">'+d.service_fee+'</a>';
			  }},
		  <?php endif; if($business_selfscore==1): ?>
			{field: 'score', title: '<?php echo t('商家积分'); ?>',sort: sortdata,width:100,templet:function(d){
				return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('BusinessScore/memberscore'); ?>&isopen=1&mid='+d.id+'\')">'+d.bscore+'</a>';
      }},
			<?php endif; if(getcustom('product_givetongzheng')): ?>
		  {field: 'fhcopies', title: '<?php echo t('通证'); ?>',width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Tongzheng/moneylog'); ?>&isopen=1&mid='+d.id+'\')">'+d.tongzheng+'</a>';
			  }},
		  <?php endif; if(getcustom('commission_duipeng_score_withdraw') && ($auth_data=='all' || in_array('CommissionWithdrawScorePower/authscorelog',$auth_data))): ?>
		  {field: 'fhcopies', title: '提现积分',width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('CommissionWithdrawScore/scorelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.commission_withdraw_score+'</a>';
			  }},
		  <?php endif; if(getcustom('shop_paiming_fenhong') && ($auth_data=='all' || in_array('PaimingFenhong/moneylog',$auth_data))): ?>
		  {field: 'paiming_fenhong_money', title: '<?php echo t('排名分红'); ?>',width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('PaimingFenhong/moneylog'); ?>&isopen=1&mid='+d.id+'\')">'+d.paiming_fenhong_money+'</a>';
			  }},
		  <?php endif; if(getcustom('member_overdraft_money')): if($rechargeOverdraftMoneyAuth): ?>
			  {field: 'overdraft_money', title: '欠款<?php echo t('信用额度'); ?>',sort: true, width:120,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('OverdraftMoney/moneylog'); ?>&isopen=1&mid='+d.id+'\')">'+d.overdraft_money+'</a>';
			  }},
			  {field: 'limit_overdraft_money', title: '<?php echo t('信用额度'); ?>',sort: true, width:120,templet:function(d){
				  if(d.open_overdraft_money==0){
					  if(d.limit_overdraft_money==0){
						  return '<span >0</span>';
					  }else{
						  return d.limit_overdraft_money;
					  }
				  }else{
					  return '<span >无限制</span>';
				  }
			  }},
			  <?php endif; ?>
			<?php endif; if(getcustom('fenhong_jiaquan_bylevel')): ?>
		{field: 'fhcopies', title: '分红份数',width:80,templet:function(d){
			return '<a href="javascript:void(0)" title="点击修改" onclick="updateCopies('+d.id+')">'+d.fhcopies+'</a>';
		}},
	  <?php endif; if((getcustom('commission_frozen') && $admin['commission_frozen'])): ?>
		{field: 'fuchi_money', title: '<?php echo t('扶持金'); ?>',sort: true,width:100,templet:function(d){
			return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/fuchiLog'); ?>&isopen=1&mid='+d.id+'\')">'+d.fuchi_money+'</a>';
		}},
		<?php endif; if((getcustom('member_gongxian') && $admin['member_gongxian_status'])): ?>
		{field: 'gongxian', title: '<?php echo t('贡献'); ?>',sort: true,width:100,templet:function(d){
			return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/gongxianlog'); ?>&isopen=1&mid='+d.id+'\')">'+d.gongxian+'</a>';
		}},
		<?php endif; if(getcustom('plug_yuebao') && $adminset['open_yuebao']): ?>
      	  {field: 'money', title: '<?php echo t('余额宝'); ?>',sort: sortdata,width:100,templet:function(d){
			    return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Yuebao/moneylog'); ?>&isopen=1&mid='+d.id+'\')">'+d.yuebao_money+'</a>';
      	  }},
      	  {field: 'yuebao_rate', title: '<?php echo t('余额宝'); ?>收益率',sort: sortdata,width:130,templet:function(d){
				return '<a href="javascript:void(0)">'+d.yuebao_rate+'%</a>';
	      }},
		  {field: 'yuebao_withdraw_time', title: '<?php echo t('余额宝'); ?>提现天数',sort: sortdata,width:130,templet:function(d){
				return '<a href="javascript:void(0)">'+d.yuebao_withdraw_time+'</a>';
	      }},
	  <?php endif; if(getcustom('pay_yuanbao')): ?>
      	  {field: 'yuanbao', title: '<?php echo t('元宝'); ?>',sort: sortdata,width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('YuanBao/yuanbaolog'); ?>&isopen=1&mid='+d.id+'\')">'+d.yuanbao+'</a>';
		   }},
	  <?php endif; if(getcustom('consumer_value_add') && ($auth_data=='all' || in_array('Consumer/*',$auth_data))): ?>
		  {field: 'green_score', title: '<?php echo t('绿色积分'); ?>',sort: sortdata,width:100,templet:function(d){
			  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('GreenScore/index'); ?>&isopen=1&mid='+d.id+'\')">'+d.green_score+'</a>';
		  }},
		  <?php endif; if(getcustom('active_coin') && ($auth_data=='all' || in_array('ActiveCoin/*',$auth_data))): ?>
			  {field: 'active_coin', title: '<?php echo t('激活币'); ?>',sort: sortdata,width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('ActiveCoin/index'); ?>&isopen=1&mid='+d.id+'\')">'+d.active_coin+'</a>';
			  }},
			  <?php endif; if(getcustom('plug_luckycollage')): ?>
		  {field: 'ktnum', title: '开团次数',sort: sortdata,width:100,templet:function(d){
				  return '<a href="javascript:void(0)">'+d.ktnum+'</a>';
	      }},
	  <?php endif; if(getcustom('memberlist_show_buymoney')): ?>
		  {field: 'buymoney', title: '个人业绩',width:100,templet:function(d){
			  return d.buymoney+'元';
		  },sort:true},
		  <?php endif; if(getcustom('memberlist_showteamyeji')): ?>
		{field: 'downcount', title: '团队业绩',width:100,templet:function(d){
			let html = d.downcount+'人<br>'+d.ordercount+'单<br>'+d.teamyeji+'元';
			if(d.prosum >= 0) html += '<br>'+d.prosum+'件';
			return html;
	      }},
	  <?php endif; if(getcustom('yeji_with_pronum')): ?>
		  {field: 'downcount', title: '业绩',width:100,templet:function(d){
			  let html = '个人：'+d.prosum_self+'件<br>团队：'+d.prosum+'件';
			  return html;
		  }},
		  <?php endif; if(getcustom('team_fenhong_yeji')): ?>
		  {field: 'teamyeji', title: '团队业绩',width:100},
		  <?php endif; if(getcustom('yeji_self_manually_product')): ?>
			{field: 'yeji_self_manually_product', title: '增加的个人业绩',width:110},
			<?php endif; if(getcustom('member_recharge_yj')): ?>
      	  {field: 'rechargeyj_money', title: '充值业绩',sort: sortdata,width:100,templet:function(d){
				  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('RechargeYjLog/index'); ?>&isopen=1&mid='+d.id+'\')">'+d.rechargeyj_money+'</a>';
		}},
	  <?php endif; if(getcustom('ganer_fenxiao')): ?>
		  {field: 'areafenhong_province', title: '代理省市区',width:100,templet:function(d){
			 return d.areafenhong_province+d.areafenhong_city+d.areafenhong_area;
		  }},
		  <?php endif; if(getcustom('fenhong_max')): ?>
		  {field: 'gudong_max', title: '股东分红信息',templet:function(d){
			  var html = '<ul>';
			  html+='<li>最大股东分红：'+d.gudong_max+'</li>';
			  html+='<li>已发股东分红：<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/fenhonglog'); ?>&isopen=1&fenhong_remark=股东分红&mid='+d.id+'\') ">'+d.gudong_total+'</a></li>';
			  html+' </ul>';
			  return html;
		  },width:150},	  
			  
	  <?php endif; if(getcustom('fenhong_gudong_huiben')): if($auth_data=='all' || in_array('gdfenhong_huiben',$auth_data)): ?>
		  {field: 'total_fenhong_huiben', title: '已发<?php echo t('回本股东分红'); ?>',width:100,templet:function(d){
			  return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Commission/fenhonglog'); ?>&isopen=1&fenhong_remark=<?php echo t('回本股东分红'); ?>&mid='+d.id+'\')">'+d.total_fenhong_huiben+'</a>';
		  }},
		  <?php endif; ?>
	  <?php endif; if(getcustom('member_tag')): ?>
		 {field: 'tagname', title: '标签',width:80},
	  <?php endif; ?>
      {field: 'subscribe', title: '关注状态',width:80,templet:function(d){
			if(d.subscribe==1){
				return '<span style="color:green">已关注</span>';
			}else{
				return '<span style="color:red">未关注</span>';
			}
		}},
	  <?php if(getcustom('plug_tengrui')): ?>
		{field: 'tr_is_rzh', title: '是否认证',width:80,templet:function(d){
			if(d.tr_is_rzh==1){
				return '<span style="color:green">已认证</span>';
			}else{
				return '<span style="color:red">未认证</span>';
			}
		}},
		{field: 'community_infor', title: '小区信息',width:150},
	  <?php endif; ?>
      {field: 'createtime', title: '加入时间',sort: true,templet:function(d){ return date('Y-m-d H:i',d.createtime)}},
			<?php if($adminset['reg_invite_code']!=0): ?>
      		{field: 'yqcode', title: '邀请码',width:70},
			<?php endif; if($adminset['reg_check']!=0): ?>
		  {field: 'checkst', title: '审核状态',width:70,templet:function(d){
					if(d.checkst == 0) return '<span style="color:blue">审核中</span>';
					if(d.checkst == 1) return '<span style="color:green">已通过</span>';
					if(d.checkst == 2) return '<span style="color:red">驳回,'+d.checkreason+'</span>';
		  }},
		<?php endif; if(getcustom('yx_cashback_yongjin')): ?>
			{field: 'cash_yongji_total', title: '佣金提现',width:100,templet:function(d){
				var html = '<ul>';
				html+='<li>累计佣金提现：'+d.cash_yongji_total+'</li>';
				html+='<li>累 计 返  现：'+d.cashback_total+'</li>';
				html+' </ul>';
				return html;
			},width:140},
		<?php endif; if(getcustom('product_bonus_pool')): if($auth_data=='all' || in_array('BonusPool/index',$auth_data)): ?>

			 {field: 'bonus_pool_money', title: '<?php echo t('贡献值'); ?>',width:100,templet:function(d){
				 var html = '<ul>';
				 html+='<li><?php echo t('贡献值'); ?>上限：'+d.bonus_pool_max_money+'</li>';
				 html+='<li>已获<?php echo t('贡献值'); ?>：'+d.bonus_pool_money+'</li>';
				 html+' </ul>';
				 return html;
			 },width:135},
			<?php endif; ?>
		<?php endif; if(getcustom('ciruikang_fenxiao')): ?>
			{field: 'crk_up_levelid', title: '一次性升级信息',width:140,templet:function(d){
				if(d.crk_up_levelid>0){
					return d.crk_up_info;
				}else{
					return '无';
				}
			}},
		<?php endif; if(getcustom('yx_buy_fenhong')): if($auth_data=='all' || in_array('BuyFenhong/*',$auth_data)): ?>
			{field: 'buy_fenhong_score_weight', title: '<?php echo t('积分'); ?>权',width:70},
			<?php endif; ?>
		<?php endif; if(getcustom('shop_label')): ?>
			{field: 'labelnames', title: '商品标签'},
		<?php endif; if(getcustom('product_baodan')): ?>
			{field: 'baodan_max', title: '报单冻结信息',templet:function(d){
				var html = '<ul>';
				html+='<li>冻结金额上限：'+d.baodan_max+'</li>';
				html+='<li>冻结金额：'+d.baodan_freeze+'</li>';
				html+' </ul>';
				return html;
			},width:140},
			<?php endif; if(getcustom('member_goldmoney_silvermoney')): if($showsilvermoney): ?>
		      {field: 'silvermoney', title: '<?php echo t('银值'); ?>',sort: sortdata,width:100,templet:function(d){
						return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Money/silvermoneylog'); ?>&type=silvermoney&act=money&isopen=1&mid='+d.id+'\')">'+d.silvermoney+'</a>';
		      }},
	      <?php endif; if($showgoldmoney): ?>
		      {field: 'goldmoney', title: '<?php echo t('金值'); ?>',sort: sortdata,width:100,templet:function(d){
						return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Money/goldmoneylog'); ?>&type=goldmoney&act=money&isopen=1&mid='+d.id+'\')">'+d.goldmoney+'</a>';
		      }},
	      <?php endif; ?>
      <?php endif; if(getcustom('team_minyeji_count')): ?>
		  {field: 'team_minyeji', title: '市场业绩',templet:function(d){
			  var html = '<ul>';
			  html+='<li>团队业绩：'+d.total_yeji+'</li>';
			  html+='<li>大区业绩：'+d.max_yeji+'</li>';
			  html+='<li>小区业绩：'+d.min_yeji+'</li>';
			  html+='<li>自身业绩：'+d.self_yeji+'</li>';
			  html+' </ul>';
			  return html;
		  },width:140},
		  <?php endif; if(getcustom('member_dedamount')): ?>
		  {field: 'dedamount', title: '抵扣金',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Money/dedamountlog'); ?>&isopen=1&mid='+d.id+'\')">'+d.dedamount+'</a>';
	      }},
		  <?php endif; if(getcustom('member_shopscore') && $membershopscoreauth): ?>
		  	{field: 'shopscore', title: '<?php echo t('产品积分'); ?>',sort: sortdata,width:100,templet:function(d){
					return '<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('Money/shopscorelog'); ?>&isopen=1&mid='+d.id+'\')">'+d.shopscore+'</a>';
	      }},
		  <?php endif; ?>
      {field: 'operation',fixed:'right', title: '操作',templet: function(d){
				var html = '';

				<?php if(getcustom('plug_luckycollage')): ?>
				html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addktnum('+d.id+')})">增加开团次数</button>';
				<?php endif; if($haverechargeAuth): ?>
				html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){recharge('+d.id+')})">充值</button>';
				<?php endif; if($haveaddscoreAuth): ?>
				html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addscore('+d.id+')})">加<?php echo t('积分'); ?></button>';
				<?php endif; if($haveaddservicefeeAuth): ?>
				html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addServiceFee('+d.id+')})">加<?php echo t('服务费'); ?></button>';
				<?php endif; if($haveaaddcommissionAuth): ?>
				html += '<button class="table-btn" id="yj" onclick="checklock('+d.islock+',function(){addcommission('+d.id+')})">加<?php echo t('佣金'); ?></button>';
				<?php endif; if(getcustom('pay_yuanbao') && $haveaddyuanbaoAuth): ?>
				html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addyuanbao('+d.id+')})">加<?php echo t('元宝'); ?></button>';
				<?php endif; if((getcustom('member_gongxian') && $admin['member_gongxian_status'])): if($haveaddgongxianAuth): ?>
					html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addgongxian('+d.id+')})">加<?php echo t('贡献'); ?></button>';
					<?php endif; ?>
				<?php endif; if(getcustom('other_money')): if($othermoney_status): if($haveaddmoney2Auth): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addOtherMoney('+d.id+',\'money2\')})">加<?php echo t('余额2'); ?></button>';
						<?php endif; if($haveaddmoney3Auth): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addOtherMoney('+d.id+',\'money3\')})">加<?php echo t('余额3'); ?></button>';
						<?php endif; if($haveaddmoney4Auth): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addOtherMoney('+d.id+',\'money4\')})">加<?php echo t('余额4'); ?></button>';
						<?php endif; if($haveaddmoney5Auth): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addOtherMoney('+d.id+',\'money5\')})">加<?php echo t('余额5'); ?></button>';
						<?php endif; if($haveaddfrozen_moneyAuth): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addOtherMoney('+d.id+',\'frozen_money\')})">加<?php echo t('冻结金额'); ?></button>';
						<?php endif; ?>
					<?php endif; ?>
				<?php endif; if(getcustom('product_givetongzheng') && ($auth_data=='all' || in_array('Member/addtongzheng',$auth_data))): ?>
				html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addtongzheng('+d.id+')})">加<?php echo t('通证'); ?></button>';
				<?php endif; if(getcustom('member_commission_max') && getcustom('add_commission_max')  && ($auth_data=='all' || in_array('Member/addcommissionMax',$auth_data))): ?>
				html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addcommissionMax('+d.id+')})">加<?php echo t('佣金上限'); ?></button>';
				<?php endif; if(getcustom('consumer_value_add') && getcustom('add_greenscore')  && ($auth_data=='all' || in_array('Member/addgreenscore',$auth_data))): ?>
				html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addgreenscore('+d.id+')})">加<?php echo t('绿色积分'); ?></button>';
				<?php endif; if(getcustom('member_shopscore') && $haveaddshopscoreAuth && $membershopscoreauth): ?>
					html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addshopscore('+d.id+')})">加<?php echo t('产品积分'); ?></button>';
				<?php endif; if(!getcustom('handle_auth') || ($auth_data=='all' || in_array('MemberOrder',$auth_data))): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('ShopOrder/index'); ?>/isopen/1/mid/'+d.id+'\')})">商城订单</button>';
				<?php endif; if(getcustom('hotel')  && ($auth_data=='all' || in_array('HotelOrder/*',$auth_data))): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('HotelOrder/index'); ?>/isopen/1/mid/'+d.id+'\')})"><?php echo $text['酒店']; ?>订单</button>';
				<?php endif; if(getcustom('huodong_baoming')  && ($auth_data=='all' || in_array('HuodongBaomingOrder/*',$auth_data))): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('HuodongBaomingOrder/index'); ?>/isopen/1/mid/'+d.id+'\')})">活动订单</button>';
				<?php endif; if(!getcustom('handle_auth') || $auth_data=='all' || in_array('MemberEdit',$auth_data)): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('edit'); ?>/id/'+d.id+'\')})">编辑</button>';
				<?php endif; if(!getcustom('handle_auth') || ($auth_data=='all' || in_array('MemberDel',$auth_data))): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){datadel('+d.id+')})">删除</button>';
				<?php endif; if($auth_data=='all' || in_array('Member/charts',$auth_data)): if(!getcustom('handle_auth') || ($auth_data=='all' || in_array('MemberCharts',$auth_data))): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('charts'); ?>/isopen/1/mid/'+d.id+'\')})">关系图</button>';
				<?php endif; ?>
				<?php endif; if(getcustom('plug_yuebao') && $adminset['open_yuebao']): ?>
				html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){setywtime('+d.id+','+d.self_yuebao_rate+','+d.self_yuebao_withdraw_time+')})">设置天数</button>';
				<?php endif; ?>
				if(d.checkst == 0){
					//html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){setst('+d.id+',1)})">通过</button>';		
					html+= '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('check'); ?>/id/'+d.id+'\')})">通过</button>';			
					html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){setst('+d.id+',2)})">驳回</button>';
				}
				if(d.is_audit_leader == 1){
					html+='<button class="table-btn" onclick="auditLeader('+d.id+')">团长审核</button>';
				}
				
				if(d.checkst == 2){
					//html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){setst('+d.id+',1)})">通过</button>';
					html+= '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('check'); ?>/id/'+d.id+'\')})">通过</button>';
				}
				<?php if(getcustom('member_freeze')): ?>
				if(d.checkst == 1){
					if(d.isfreeze == 1){
						html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){setfreeze('+d.id+',0)})">解冻</button>';
					}else{
						html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){setfreeze('+d.id+',1)})">冻结</button>';
					}
				}
				<?php endif; ?>
					if(d.pid_origin > 0){
						<?php if(getcustom('up_giveparent')): if($auth_data=='all' || in_array('up_giveparent',$auth_data)): ?>
						html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){huigui('+d.id+')})">脱离回归</button>';
						<?php endif; ?>
						<?php endif; ?>
					}

				  <?php if((getcustom('commission_frozen') && $admin['commission_frozen'])): if($auth_data=='all' || in_array('Member/unfrozenFuchi',$auth_data)): ?>
	  				html+='<button class="table-btn" onclick="checklock('+d.islock+',function(){unfrozenFuchi('+d.id+')})">解冻<?php echo t('扶持金'); ?></button>';
					<?php endif; ?>
				  <?php endif; if(getcustom('yuyueworker_searchmember')): ?>
				html += '<button class="table-btn" id="cz"  onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('coupon/record'); ?>/bid/all/mid/'+d.id+'\')})">计次卡</button>';
				html += '<button class="table-btn" id="cz"  onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('YuyueOrder/index'); ?>/bid/all/isopen/1/mid/'+d.id+'\')})">预约订单</button>';
					if(d.tel){
						html += '<button class="table-btn" id="cz"  onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('Form/record'); ?>/bid/all/tel/'+d.tel+'\')})">病例档案</button>';
					}
				<?php endif; if(getcustom('edit_locking') && session('IS_ADMIN')>0): ?>
				if(d.islock == 1){
					html += '<button class="table-btn" onClick="checklock('+d.islock+',function(){dolock('+d.id+',0)})">解锁</button>';
				}else{
					html += '<button class="table-btn" onClick="dolock('+d.id+',1)">锁定</button>';
				}
				<?php endif; if(getcustom('yunyuzhou')): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('Member/index'); ?>/deep/1/isopen/1/fxmid/'+d.id+'\')})">下线名单</button>';
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('ShopOrder/index'); ?>/isopen/1/fxmid/'+d.id+'\')})">分销订单</button>';
				<?php endif; if(getcustom('member_archives')): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('MemberArchives/index'); ?>/isopen/1/mid/'+d.id+'\')})">录入档案</button>';
				<?php endif; if(getcustom('team_auth')): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('MemberTeam/index'); ?>/isopen/1/mid/'+d.id+'\')})">查看团队和业绩</button>';
				<?php endif; if(getcustom('member_friend') && $haveFriendAuth): ?>
				html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('Friend/index'); ?>/mid/'+d.id+'\')})">会员好友</button>';
				<?php endif; if(getcustom('member_overdraft_money')): if($rechargeOverdraftMoneyAuth): ?>
					html += '<button class="table-btn" id="overdraft_money_recharge" onclick="overdraftRecharge('+d.id+',\''+d.overdraft_money+'\','+'\''+d.limit_overdraft_money+'\','+'\''+d.open_overdraft_money+'\')"><?php echo t("信用额度"); ?></button>';
					<?php endif; ?>
				<?php endif; if(getcustom('coupon_xianxia_buy')): ?>
					html += '<button class="table-btn"  onclick="openmax(\'<?php echo url('yejitongji'); ?>/mid/'+d.id+'\')">线下<?php echo t("优惠券"); ?>业绩统计</button>';
				<?php endif; if(getcustom('member_level_salary_bonus')): ?>
				html += '<button class="table-btn"  onclick="showTeamYeji('+d.id+')">查看团队业绩</button>';
				<?php endif; if(getcustom('member_goldmoney_silvermoney')): if($showsilvermoney): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addSilvermoney('+d.id+')})">加<?php echo t('银值'); ?></button>';
						<?php endif; if($showgoldmoney): ?>
							html += '<button class="table-btn" id="cz" onclick="checklock('+d.islock+',function(){addGoldmoney('+d.id+')})">加<?php echo t('金值'); ?></button>';
						<?php endif; ?>
				<?php endif; if(getcustom('team_fenhong_yeji') && !getcustom('team_yeji_memberlist_excel')): ?>
					html += '<button class="table-btn" onclick="checklock('+d.islock+',function(){openmax(\'<?php echo url('Member/fenhong_yeji_log'); ?>/isopen/1/mid/'+d.id+'\')})">查看业绩明细</button>';
					<?php endif; if(getcustom('yeji_self_manually_product') && ($auth_data=='all' || in_array('Member/addselfyeji',$auth_data))): ?>
					html += '<button class="table-btn" id="jf" onclick="checklock('+d.islock+',function(){addselfyeji('+d.id+')})">增加个人业绩</button>';
				<?php endif; ?>
				return html;
      },width:170}
    ]]
  });
	function openedit(id){
		layer.open({type:2,content:"<?php echo url('edit'); ?>/id/"+id,title:id?'<?php echo t('会员'); ?>编辑':'添加<?php echo t('会员'); ?>',area:['100%','100%']})
	}
	function setst(id,st){
		if(st == 1){
			layer.confirm('确定要通过吗?',{icon: 7, title:'操作确认'}, function(index){
				var index = layer.load();
				$.post("<?php echo url('setst'); ?>",{id:id,st:st},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(setstLayer);
					tableIns.reload()
				})
			})
		}else{
			var html = '';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">驳回原因：</label>';
			html+='		<div class="layui-input-inline" style="width:200px">';
			html+='			<input type="text" id="checkreason" class="layui-input"/>';
			html+='		</div>';
			html+='	</div>';
			var setstLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var index = layer.load();
					$.post("<?php echo url('setst'); ?>",{id:id,st:st,checkreason:$('#checkreason').val()},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(setstLayer);
						tableIns.reload()
					})
				}
			})
		}
	}
	function addscore(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="text" id="addscorescore" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('积分'); ?></div>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width:350px">';
		html+='			<input type="text" id="addscoreremark" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var addscoreLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addscore'); ?>",{id:id,score:$('#addscorescore').val(),remark:$('#addscoreremark').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addscoreLayer);
					tableIns.reload()
				})
			}
		})
	}

	<?php if(getcustom('product_service_fee') && ($auth_data=='all' || in_array('service_fee_switch',$auth_data))): ?>
	function addServiceFee(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加金额：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="text" id="addServiceFee" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux" style="margin-right: 5px;">输入负值表示扣除<?php echo t('服务费'); ?></div>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width:350px">';
		html+='			<input type="text" id="addServiceFeeRemark" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var addServiceFeeLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addServiceFee'); ?>",{id:id,service_fee:$('#addServiceFee').val(),remark:$('#addServiceFeeRemark').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addServiceFeeLayer);
					tableIns.reload()
				})
			}
		})
	}
	<?php endif; if(getcustom('fenhong_jiaquan_bylevel')): ?>
		function updateCopies(id){
			var html = '';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">增加份数：</label>';
			html+='		<div class="layui-input-inline" style="width:200px">';
			html+='			<input type="text" id="addcopies" class="layui-input"/>';
			html+='		</div>';
			html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除</div>';
			html+='	</div>';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
			html+='		<div class="layui-input-inline" style="width:250px">';
			html+='			<input type="text" id="addcopiesremark" class="layui-input"/>';
			html+='		</div>';
			html+='	</div>';
			var addcopiesLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var index = layer.load();
					$.post("<?php echo url('addfhcopies'); ?>",{id:id,copies:$('#addcopies').val(),remark:$('#addcopiesremark').val()},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(addcopiesLayer);
						tableIns.reload()
					})
				}
			})
		}
   <?php endif; if(getcustom('member_level_salary_bonus')): ?>
	function showTeamYeji(id){
		var index = layer.load();
		$.get("<?php echo url('getTeamYeji'); ?>",{id:id},function(res){
			layer.close(index);
			if(res.member){
				var html = '<div style="padding-top:20px;">';
				var member = res.member;
				html+='	<div class="layui-form-item">';
				html+='		<label class="layui-form-label" style="width:100px;font-weight: bold;">会员：</label>';
				html+='		<div class="layui-input-inline" style="padding-top: 10px;">';
				html+='			'+member.nickname+'('+member.id+')';
				html+='		</div>';
				html+='	</div>';
				html+='	<div class="layui-form-item">';
				html+='		<label class="layui-form-label" style="width:100px;font-weight: bold;">团队业绩：</label>';
				html+='		<div class="layui-input-inline" style="padding-top: 10px;">';
				html+='			'+member.teamyeji;
				html+='		</div>';
				html+='	</div>';
				html+='	<div class="layui-form-item" style="padding-top: 8px;">';
				html+='		<label class="layui-form-label" style="width:100px;font-weight: bold;">小市场业绩：</label>';
				html+='		<div class="layui-input-inline" style="padding-top: 10px;">';
				html+='			'+member.teamyeji_mini;
				html+='		</div>';
				html+='	</div></div>';
				layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true})
			}else{
				layer.msg(res.msg)
			}
		})
	}
	<?php endif; ?>


	function addgongxian(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
		html+='		<div class="layui-input-inline" style="width:180px">';
		html+='			<input type="text" id="addgongxianscore" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('贡献'); ?></div>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width:350px">';
		html+='			<input type="text" id="addgongxianremark" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var addgongxianLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addgongxian'); ?>",{id:id,score:$('#addgongxianscore').val(),remark:$('#addgongxianremark').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addgongxianLayer);
					tableIns.reload()
				})
			}
		})
	}
	function addcommission(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加金额：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="text" id="addcommissionnuml" class="layui-input" />';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('佣金'); ?></div>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width:350px">';
		html+='			<input type="text" id="addcommissionremark" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var addscoreLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addcommission'); ?>",{id:id,commission:$('#addcommissionnuml').val(),remark:$('#addcommissionremark').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addscoreLayer);
					tableIns.reload()
				})
			}
		})
	}
	function addyuanbao(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="text" id="addyuanbao" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('元宝'); ?></div>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width:350px">';
		html+='			<input type="text" id="addyuanbaoremark" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var addyuanbaoLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addyuanbao'); ?>",{id:id,yuanbao:$('#addyuanbao').val(),remark:$('#addyuanbaoremark').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addyuanbaoLayer);
					tableIns.reload()
				})
			}
		})
	}
		<?php if(getcustom('product_givetongzheng')): ?>
		function addtongzheng(id){
			var html = '';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
			html+='		<div class="layui-input-inline" style="width:180px">';
			html+='			<input type="text" id="addtongzheng" class="layui-input"/>';
			html+='		</div>';
			html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('通证'); ?></div>';
			html+='	</div>';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
			html+='		<div class="layui-input-inline" style="width:350px">';
			html+='			<input type="text" id="addtongzhengremark" class="layui-input"/>';
			html+='		</div>';
			html+='	</div>';
			var addtongzhengLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var index = layer.load();
					$.post("<?php echo url('addtongzheng'); ?>",{id:id,tongzheng:$('#addtongzheng').val(),remark:$('#addtongzhengremark').val()},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(addtongzhengLayer);
						tableIns.reload()
					})
				}
			})
		}
		<?php endif; if(getcustom('member_commission_max')): ?>
			function addcommissionMax(id){
				var addscoreLayer = layer.open({type:1,area:['500px','300px'],title:false,content:$('#commissionmaxModel'),shadeClose:true,btn: ['确定', '取消'],
					yes:function(){
						var index = layer.load();
						$.post("<?php echo url('addcommissionMax'); ?>",{id:id,commission:$('#addcommissionmaxnum').val(),remark:$('#addcommissionmaxremark').val(),in_type:$('input[name="in_type"]:checked').val()},function(res){
							layer.close(index);
							dialog(res.msg,res.status);
							layer.close(addscoreLayer);
							tableIns.reload()
						})
					}
				})
			}
			<?php endif; if(getcustom('consumer_value_add') && getcustom('add_greenscore')): ?>
				function addgreenscore(id){
					var html = '';
					html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
					html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
					html+='		<div class="layui-input-inline" style="width:200px">';
					html+='			<input type="text" id="addgreenscore" class="layui-input"/>';
					html+='		</div>';
					html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('绿色积分'); ?></div>';
					html+='	</div>';
					html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
					html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
					html+='		<div class="layui-input-inline" style="width:350px">';
					html+='			<input type="text" id="addgreenscoreremark" class="layui-input"/>';
					html+='		</div>';
					html+='	</div>';
					var addscoreLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
						yes:function(){
							var index = layer.load();
							$.post("<?php echo url('addgreenscore'); ?>",{id:id,commission:$('#addgreenscore').val(),remark:$('#addgreenscoreremark').val()},function(res){
								layer.close(index);
								dialog(res.msg,res.status);
								layer.close(addscoreLayer);
								tableIns.reload()
							})
						}
					})
				}
				<?php endif; ?>
	var rechargelayer
	function recharge(id){
		$('#rechargemid').val(id);
		rechargelayer = layer.open({type:1,area: ['500px', '380px'],title:'<?php echo t('余额'); ?>充值',content:$('#rechargeModel'),shadeClose:true})
	}
	//充值提交
  layui.form.on('submit(formRecharge)', function(obj){
		var index= layer.load();
    $.post("<?php echo url('recharge'); ?>",obj.field,function(data){
			layer.close(index);
			dialog(data.msg,data.status,data.url);
			if(data.status==1){
				tableIns.reload({
					where: datawhere
				});
			}
			layer.close(rechargelayer);
		})
  });
	//排序
	table.on('sort(tabledata)', function(obj){
		datawhere.field = obj.field;
		datawhere.order = obj.type;
		tableIns.reload({
			initSort: obj,
			where: datawhere
		});
	});
	//日期范围选择
	layui.laydate.render({
		elem: '#ctime',
		trigger: 'click',
		range: '~' //或 range: '~' 来自定义分割字符
	});
	//团队业绩日期范围选择
	layui.laydate.render({
		elem: '#teamyeji_time',
		trigger: 'click',
		range: '~' //或 range: '~' 来自定义分割字符
	});
	//检索
	layui.form.on('submit(LAY-app-forumreply-search)', function(obj){
		var field = obj.field
		var olddatawhere = datawhere
		datawhere = field
		datawhere.field = olddatawhere.field
		datawhere.order = olddatawhere.order
		tableIns.reload({
			where: datawhere,
			page: {curr: 1}
		});
	})
	//删除
	function datadel(id){
		var ids = [];
		if(id==0){
			var checkStatus = table.checkStatus('tabledata')
			var checkData = checkStatus.data; //得到选中的数据
			if(checkData.length === 0){
				 return layer.msg('请选择数据');
			}
			var ids = [];
			for(var i=0;i<checkData.length;i++){
				ids.push(checkData[i]['id']);
			}
		}else{
			ids.push(id)
		}
		layer.confirm('确定要删除吗？删除后无法恢复！',{icon: 7, title:'操作确认'}, function(index){
			//do something
			layer.close(index);
			var index = layer.load();
			$.post("<?php echo url('del'); ?>",{ids:ids},function(data){
				layer.close(index);
				dialog(data.msg,data.status);
				tableIns.reload()
			})
		});
	}
	//导入
	function daoru(){
		var html = '<div style="margin:20px auto;">';
		html+='<div class="layui-form" lay-filter="">';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label" style="width:150px">上传EXCEL文件：</label>';
		html+='		<div class="layui-input-inline" style="width:300px">';
		html+='			<input type="text" name="upload_file" id="upload_file" class="layui-input">';
		html+='		</div>';
		html+='		<button style="float:left;" type="button" class="layui-btn layui-btn-primary uploadexcel" upload-input="upload_file">上传</button>';
		html+='	</div>';
		html+='	<div class="layui-form-item" style="padding:0 20px">';
		html+='		<div class="layui-form-mid" style="color:red;">注意：手机号(必填)、公众号openid、小程序openid 中任意一项在<?php echo t('会员'); ?>列表中已存在则表示该会员已存在，导入时将不会新增<?php echo t('会员'); ?>而是修改<?php echo t('会员'); ?>信息；<?php echo t('会员'); ?>等级必须与当前系统设置的<?php echo t('会员'); ?>等级名称一致</div>';
		html+='	</div>';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label" style="width:150px"></label>';
		<?php if(getcustom('member_import') && !getcustom('member_import_pid_origin')): ?>
			html+='		<div class="layui-form-mid"> <a href="/static/demo_member2.xls">点击下载查看导入格式</a></div>';
		<?php elseif(getcustom('member_import_dyzx')): ?>
			html+='		<div class="layui-form-mid"> <a href="/static/demo_member3.xls">点击下载查看导入格式</a></div>';
		<?php elseif(getcustom('member_import_pid_origin')): ?>
		html+='		<div class="layui-form-mid"> <a href="/static/demo_member_pid_origin.xls">点击下载查看导入格式</a></div>';
		<?php else: ?>
			html+='		<div class="layui-form-mid"> <a href="/static/demo_member.xls">点击下载查看导入格式</a></div>';
		<?php endif; ?>
		html+='	</div>';
		html+='	<div class="layui-form-item" style="margin-top:30px">';
		html+='		<label class="layui-form-label" style="width:150px"></label>';
		html+='		<div class="layui-input-inline">';
		html+='			<button class="layui-btn layui-btn-normal" lay-submit lay-filter="submit_excel">确定导入</button>';
		html+='		</div>';
		html+='	</div>';
		html+='</div>';
		html+='</div>'
		layer.open({type:1,area: ['600px', '360px'],title:'导入<?php echo t('会员'); ?>信息',content:html,shadeClose:true})
		layui.form.render();
		//文件上传
		layui.upload.render({
			elem: '.uploadexcel',
			accept:'file',
			url: "<?php echo url('upload/index'); ?>",
			done: function(res){
				if(res.status==0){
					dialog(res.msg,0);
				}else{
					var item = this.item;
					var inputid = $(this.item).attr('upload-input');
					if(inputid){
						$('#'+inputid).val(res.url);
						$('#'+inputid).change();
					}
				}
			}
		});
		layui.form.on('submit(submit_excel)', function(obj){
			var field = obj.field;
			console.log(field);
			var index= layer.load();
			var url = "<?php echo url('importexcel'); ?>";
			<?php if(getcustom('member_import_dyzx')): ?>
			url = "<?php echo url('importexcel_dyzx'); ?>";
			<?php endif; if(getcustom('member_import_pid_origin')): ?>
				url = "<?php echo url('importexcel_pid_origin'); ?>";
				<?php endif; ?>
			$.post(url,{file:field.upload_file},function(data){
				layer.close(index);
				dialog(data.msg,data.status);
				tableIns.reload()
			})
		})
	}

	//查看详情
	function showcarddetail(card_id,card_code){
		var index = layer.load();
		$.post("<?php echo url('getcarddetail'); ?>",{card_id:card_id,card_code:card_code},function(res){
			layer.close(index);
			var info = res.data
			var html='';
			html+='<div class="orderdetail">';
			html+='<div class="orderinfo">';
			html+='<div class="item">';
			html+='	<span class="t1">粉丝信息</span>';
			html+='	<span class="t2"><img src="'+info.headimg+'" style="width:40px"/> '+info.nickname+'</span>';
			html+='</div>';
			if(info.card_id){
				html+='<div class="item">';
				html+='	<span class="t1">卡券ID</span>';
				html+='	<span class="t2">'+info.card_id+'</span>';
				html+='</div>';
			}
			if(info.card_code){
				html+='<div class="item">';
				html+='	<span class="t1">会员卡号</span>';
				html+='	<span class="t2">'+info.card_code+'</span>';
				html+='</div>';
			}
			if(info.name){
				html+='<div class="item">';
				html+='	<span class="t1">姓名</span>';
				html+='	<span class="t2">'+info.name+'</span>';
				html+='</div>';
			}
			if(info.mobile){
				html+='<div class="item">';
				html+='	<span class="t1">手机号</span>';
				html+='	<span class="t2">'+info.mobile+'</span>';
				html+='</div>';
			}
			if(info.sex){
				html+='<div class="item">';
				html+='	<span class="t1">性别</span>';
				html+='	<span class="t2">'+info.sex+'</span>';
				html+='</div>';
			}
			if(info.birthday){
				html+='<div class="item">';
				html+='	<span class="t1">生日</span>';
				html+='	<span class="t2">'+info.birthday+'</span>';
				html+='</div>';
			}
			if(info.email){
				html+='<div class="item">';
				html+='	<span class="t1">邮箱</span>';
				html+='	<span class="t2">'+info.email+'</span>';
				html+='</div>';
			}
			if(info.idcard){
				html+='<div class="item">';
				html+='	<span class="t1">身份证</span>';
				html+='	<span class="t2">'+info.idcard+'</span>';
				html+='</div>';
			}
			if(info.education){
				html+='<div class="item">';
				html+='	<span class="t1">学历</span>';
				html+='	<span class="t2">'+info.education+'</span>';
				html+='</div>';
			}
			if(info.industry){
				html+='<div class="item">';
				html+='	<span class="t1">行业</span>';
				html+='	<span class="t2">'+info.industry+'</span>';
				html+='</div>';
			}
			if(info.income){
				html+='<div class="item">';
				html+='	<span class="t1">年收入</span>';
				html+='	<span class="t2">'+info.income+'</span>';
				html+='</div>';
			}
			if(info.habit){
				html+='<div class="item">';
				html+='	<span class="t1">爱好</span>';
				html+='	<span class="t2">'+info.habit+'</span>';
				html+='</div>';
			}
			if(info.location){
				html+='<div class="item">';
				html+='	<span class="t1">地址</span>';
				html+='	<span class="t2">'+info.location+'</span>';
				html+='</div>';
			}
			if(info.sex){
				html+='<div class="item">';
				html+='	<span class="t1">性别</span>';
				html+='	<span class="t2">'+info.sex+'</span>';
				html+='</div>';
			}
			if(info.field1){
				var field1 = (info.field1).split(' :  ');
				html+='<div class="item">';
				html+='	<span class="t1">'+field1[0]+'</span>';
				html+='	<span class="t2">'+field1[1]+'</span>';
				html+='</div>';
			}
			if(info.field2){
				var field2 = (info.field2).split(' :  ');
				html+='<div class="item">';
				html+='	<span class="t1">'+field2[0]+'</span>';
				html+='	<span class="t2">'+field2[1]+'</span>';
				html+='</div>';
			}
			if(info.field3){
				var field3 = (info.field3).split(' :  ');
				html+='<div class="item">';
				html+='	<span class="t1">'+field3[0]+'</span>';
				html+='	<span class="t2">'+field3[1]+'</span>';
				html+='</div>';
			}
			if(info.field4){
				var field4 = (info.field4).split(' :  ');
				html+='<div class="item">';
				html+='	<span class="t1">'+field4[0]+'</span>';
				html+='	<span class="t2">'+field4[1]+'</span>';
				html+='</div>';
			}
			if(info.field5){
				var field5 = (info.field5).split(' :  ');
				html+='<div class="item">';
				html+='	<span class="t1">'+field5[0]+'</span>';
				html+='	<span class="t2">'+field5[1]+'</span>';
				html+='</div>';
			}
			html+='<div class="item">';
			html+='	<span class="t1">领取时间</span>';
			html+='	<span class="t2">'+date('Y-m-d H:i:s',info.createtime)+'</span>';
			html+='</div>';
			html+='<div class="item">';
			html+='	<span class="t1">状态</span>';
			if(info.status==1){
				html+='	<span class="t2">正常</span>';
			}
			if(info.status==2){
				html+='	<span class="t2">已删除</span>';
			}
			if(info.status==3){
				html+='	<span class="t2">已注销</span>';
			}
			html+='</div>';
			html+='</div>';
			html+='</div>';
			layer.open({type:1,area:['300px','460px'],content:html,title:false,shadeClose:true});
		})
	}

		var addktnumlayer
		function addktnum(id){
			$('#ktmid').val(id);
			addktnumlayer = layer.open({type:1,area: ['500px', '200px'],title:'开团次数',content:$('#addktnumModel'),shadeClose:true})
		}
		//增加开团次数
		 layui.form.on('submit(formKtnum)', function(obj){
				var index= layer.load();
			$.post("<?php echo url('addktnum'); ?>",obj.field,function(data){
					layer.close(index);
					dialog(data.msg,data.status,data.url);
					if(data.status==1){
						tableIns.reload({
							where: datawhere
						});
					}
					layer.close(addktnumlayer);
				})
		 });

		var setywtimelayer
		function setywtime(id,ywrate,ywtime){
			$('#ywtmid').val(id);
			$('#ywrate').val(ywrate);
			$('#ywtime').val(ywtime);
			setywtimelayer = layer.open({type:1,area: ['500px', '400px'],title:'设置余额宝提现天数',content:$('#ywtimeModel'),shadeClose:true})
		}
		//余额宝收益率、提现天数
		layui.form.on('submit(formywtime)', function(obj){
			var index= layer.load();
			$.post("<?php echo url('setywtime'); ?>",obj.field,function(data){
					layer.close(index);
					dialog(data.msg,data.status,data.url);
					if(data.status==1){
						tableIns.reload({
							where: datawhere
						});
					}
					layer.close(setywtimelayer);
			})
		});
		
	function setfreeze(id,st){
		layer.confirm('确定要'+(st==1?'冻结':'解冻')+'吗?',{icon: 7, title:'操作确认'}, function(index){
			var index = layer.load();
			$.post("<?php echo url('setfreeze'); ?>",{id:id,st:st},function(res){
				layer.close(index);
				dialog(res.msg,res.status);
				tableIns.reload()
			})
		})
	}
  function unfrozenFuchi(id){
	  layer.confirm('确定要解冻吗？解冻后不会继续冻结',{icon: 7, title:'操作确认'}, function(index){
		  var index = layer.load();
		  $.post("<?php echo url('unfrozenFuchi'); ?>",{id:id},function(res){
			  layer.close(index);
			  dialog(res.msg,res.status);
			  tableIns.reload()
		  })
	  })
  }
  function huigui(id)
  {
	  layer.confirm('确定要回归吗？操作后不可撤销',{icon: 7, title:'操作确认'}, function(index){
		  var index = layer.load();
		  $.post("<?php echo url('huigui'); ?>",{id:id},function(res){
			  layer.close(index);
			  dialog(res.msg,res.status);
			  tableIns.reload()
		  })
	  })
}

	
	function dolock(id,st){
		layer.confirm('确定要'+(st==1?'锁定':'解除锁定')+'吗?',{icon: 7, title:'操作确认'}, function(index){
			//do something
			layer.close(index);
			var index = layer.load();
			$.post("<?php echo url('dolock'); ?>",{id:id,st:st},function(data){
				layer.close(index);
				dialog(data.msg,data.status);
				tableIns.reload()
			})
		});
	}
	function auditLeader(id)
	{
	    layer.confirm('确定要通过该用户的团长申请吗?', {
          title: "操作提示",
          icon: 7,
          btn: ['通过','拒绝','取消'],
          btnAlign: "r",
        }, function(index, layero){
          //按钮【按钮一】的回调
          	$.post("<?php echo url('auditLeader'); ?>",{id:id,st:1},function(data){
				layer.close(index);
				dialog(data.msg,data.status);
				tableIns.reload()
			})
        },function(index,layero){
            $.post("<?php echo url('auditLeader'); ?>",{id:id,st:2},function(data){
				layer.close(index);
				dialog(data.msg,data.status);
				tableIns.reload()
			})
        },function(index,layero){
             layer.close(index);
        });
	}
	function checklock(islock,func){
		if(islock == 0){
			func();return;
		}
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:140px">输入解锁密码：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="password" id="lockpwd" class="layui-input"/>';
		html+='		</div>';
		html+='	</div>';
		var openmaxneedpwdLayer = layer.open({type:1,area:['600px','200px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('inputlockpwd'); ?>",{lockpwd:$('#lockpwd').val()},function(data){
					layer.close(index);
					if(data.status == 1){
						layer.close(openmaxneedpwdLayer);
						func();
					}else{
						dialog(data.msg,data.status);
					}
				});
			}
		});
	}
	<?php if(getcustom('other_money')): ?>
		function addOtherMoney(id,type){
			var name = '';
			if(type == 'money2'){
				name = "<?php echo t('余额2'); ?>";
			}else if(type == 'money3'){
				name = "<?php echo t('余额3'); ?>";
			}else if(type == 'money4'){
				name = "<?php echo t('余额4'); ?>";
			}else if(type == 'money5'){
				name = "<?php echo t('余额5'); ?>";
			}else if(type == 'frozen_money'){
				name = "<?php echo t('冻结金额'); ?>";
			}else{
				alert('添加类型错误');
				return;
			}
			var html = '';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label">增加数量：</label>';
			html+='		<div class="layui-input-inline" style="width:200px">';
			html+='			<input type="text" id="addOtherMoney" class="layui-input"/>';
			html+='		</div>';
			html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除'+name+'</div>';
			html+='	</div>';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label">备注信息：</label>';
			html+='		<div class="layui-input-inline" style="width:350px">';
			html+='			<input type="text" id="addOtherMoneyremark" class="layui-input"/>';
			html+='		</div>';
			html+='	</div>';
			var addOtherMoneyLayer = layer.open({type:1,area:['600px','300px'],title:'加'+name,content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var index = layer.load();
					$.post("<?php echo url('addOtherMoney'); ?>",{id:id,type:type,money:$('#addOtherMoney').val(),remark:$('#addOtherMoneyremark').val()},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(addOtherMoneyLayer);
						tableIns.reload()
					})
				}
			})
		}
	<?php endif; if(getcustom('member_overdraft_money')): ?>
	function overdraftRecharge(mid,od_money,limit_money,open_overdraft_money){
		var checked0 ='';
		var checked1 ='';
		if(open_overdraft_money == '1'){
			checked1 = 'checked';
		}else{
			checked0 = 'checked';
		}
		var html = '<div class="layui-form" style="margin-top:20px;">';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label"><?php echo t('信用额度'); ?>：</label>';
		html+='		<div class="layui-input-inline">';
		html+='			<input type="text" id="overdraftMoneyLimit" class="layui-input" value="'+limit_money+'"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">0表示无额度</div>';
		html+='	</div>';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label" >无限额度：</label>';
		html+='		<div class="layui-input-inline">';
		html+='			<input type="radio" name="open_overdraft_money_radio" value="0" title="关闭" '+checked0+' >';
		html+='			<input type="radio" name="open_overdraft_money_radio" value="1" title="开启" '+checked1+ ' >';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">开启后表示无限额度</div>';
		html+='	</div>';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label">欠款总额：</label>';
		html+='		<div class="layui-input-inline" style="padding-top: 10px;color: #ff1717;font-weight: bold;">';
		html+=		od_money;
		html+='		</div>';
		html+='	</div>';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label">充值数量：</label>';
		html+='		<div class="layui-input-inline">';
		html+='			<input type="text" id="overdraftMoneyAdd" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除</div>';
		html+='	</div>';
		html+='	<div class="layui-form-item">';
		html+='		<label class="layui-form-label">备注信息：</label>';
		html+='		<div class="layui-input-inline" style="width: 300px;">';
		html+='			<textarea id="overdraftMoneyAddRemark" class="layui-textarea"></textarea>';
		html+='		</div>';
		html+='	</div>';
		html+='	</div>';
		var addOtherMoneyLayer = layer.open({type:1,area:['500px','550px'],title:'<?php echo t("信用额度"); ?>充值',content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var remark = $('#overdraftMoneyAddRemark').val();
				var money = $('#overdraftMoneyAdd').val();
				var limit_money = $('#overdraftMoneyLimit').val();
				var open_overdraft_money = $("input[name='open_overdraft_money_radio']:checked").val();
				if(isNaN(money)===true){
					layer.msg('充值数量有误');return;
				}
				if(money && remark==''){
					layer.msg('请填写备注信息');return;
				}
				var index = layer.load();
				$.post("<?php echo url('OverdraftMoney/recharge'); ?>",{mid:mid,money:money,remark:remark,limit_money:limit_money,open_overdraft_money:open_overdraft_money},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					if(res.status==1){
						layer.close(addOtherMoneyLayer);
						tableIns.reload()
					}
				})				
			}
		})
		layui.form.render();
	}
	<?php endif; ?>

		//批量编辑额度
		function editLimitOverdraftmoney(){
			var ids = [];
			var checkStatus = table.checkStatus('tabledata')
			var checkData = checkStatus.data; //得到选中的数据
			if(checkData.length === 0){
				 return layer.msg('请选择需要编辑列表');
			}
			for(var i=0;i<checkData.length;i++){
				ids.push(checkData[i]['id']);
			}
			var html = '<div class="layui-form" style="margin-top:20px;">';
			html+='	<div class="layui-form-item">';
			html+='		<label class="layui-form-label"><?php echo t('信用额度'); ?>：</label>';
			html+='		<div class="layui-input-inline">';
			html+='			<input type="text" id="overdraftMoneyLimitmore" class="layui-input" value=""/>';
			html+='		</div>';
			html+='		<div class="layui-form-mid layui-word-aux">0表示无额度</div>';
			html+='	</div>';
			html+='	</div>';
			var checkLayer = layer.open({type:1,area:['500px','200px'],title:'批量编辑额度',content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var limit_money = $('#overdraftMoneyLimitmore').val();
					if(limit_money.length <=0){
						layer.msg('请填写额度');
						return false;
					}
					var index = layer.load();
					$.post("<?php echo url('OverdraftMoney/batchLimitOverdrafmoney'); ?>",{ids:ids,limit_money:limit_money},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(checkLayer);
						tableIns.reload();
					})
				}
			});
			layui.form.render();
	
	}
	<?php if(getcustom('member_goldmoney_silvermoney')): if($showgoldmoney): ?>
			function addGoldmoney(id){
				var html = '';
				html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
				html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
				html+='		<div class="layui-input-inline" style="width:200px">';
				html+='			<input type="text" id="addgoldmoney" class="layui-input"/>';
				html+='		</div>';
				html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('金值'); ?></div>';
				html+='	</div>';
				html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
				html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
				html+='		<div class="layui-input-inline" style="width:350px">';
				html+='			<input type="text" id="addgoldmoneyremark" class="layui-input"/>';
				html+='		</div>';
				html+='	</div>';
				var addgoldmoneyLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
					yes:function(){
						var index = layer.load();
						$.post("<?php echo url('addGoldmoney'); ?>",{id:id,goldmoney:$('#addgoldmoney').val(),remark:$('#addgoldmoneyremark').val()},function(res){
							layer.close(index);
							dialog(res.msg,res.status);
							layer.close(addgoldmoneyLayer);
							tableIns.reload()
						})
					}
				})
			}
		<?php endif; if($showsilvermoney): ?>
			function addSilvermoney(id){
				var html = '';
				html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
				html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
				html+='		<div class="layui-input-inline" style="width:200px">';
				html+='			<input type="text" id="addsilvermoney" class="layui-input"/>';
				html+='		</div>';
				html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('银值'); ?></div>';
				html+='	</div>';
				html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
				html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
				html+='		<div class="layui-input-inline" style="width:350px">';
				html+='			<input type="text" id="addsilvermoneyremark" class="layui-input"/>';
				html+='		</div>';
				html+='	</div>';
				var addsilvermoneyLayer = layer.open({type:1,area:['500px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
					yes:function(){
						var index = layer.load();
						$.post("<?php echo url('addSilvermoney'); ?>",{id:id,silvermoney:$('#addsilvermoney').val(),remark:$('#addsilvermoneyremark').val()},function(res){
							layer.close(index);
							dialog(res.msg,res.status);
							layer.close(addsilvermoneyLayer);
							tableIns.reload()
						})
					}
				})
			}
		<?php endif; ?>
	<?php endif; if(getcustom('member_shopscore') && $membershopscoreauth): ?>
		function addshopscore(id){
			var html = '';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
			html+='		<div class="layui-input-inline" style="width:200px">';
			html+='			<input type="text" id="addshopscorescore" class="layui-input"/>';
			html+='		</div>';
			html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除<?php echo t('产品积分'); ?></div>';
			html+='	</div>';
			html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
			html+='		<label class="layui-form-label" style="width:80px">备注信息：</label>';
			html+='		<div class="layui-input-inline" style="width:350px">';
			html+='			<input type="text" id="addshopscoreremark" class="layui-input"/>';
			html+='		</div>';
			html+='	</div>';
			var addshopscoreLayer = layer.open({type:1,area:['600px','300px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
				yes:function(){
					var index = layer.load();
					$.post("<?php echo url('addshopscore'); ?>",{id:id,shopscore:$('#addshopscorescore').val(),remark:$('#addshopscoreremark').val()},function(res){
						layer.close(index);
						dialog(res.msg,res.status);
						layer.close(addshopscoreLayer);
						tableIns.reload()
					})
				}
			})
		}
	<?php endif; if(getcustom('yeji_self_manually_product')): ?>
	function addselfyeji(id){
		var html = '';
		html+='	<div class="layui-form-item" style="margin-top:40px;margin-right:20px;">';
		html+='		<label class="layui-form-label" style="width:80px">增加数量：</label>';
		html+='		<div class="layui-input-inline" style="width:200px">';
		html+='			<input type="text" id="addselfyeji" class="layui-input"/>';
		html+='		</div>';
		html+='		<div class="layui-form-mid layui-word-aux">输入负值表示扣除个人业绩</div>';
		html+='	</div>';
		var addselfyejiLayer = layer.open({type:1,area:['600px','200px'],title:false,content:html,shadeClose:true,btn: ['确定', '取消'],
			yes:function(){
				var index = layer.load();
				$.post("<?php echo url('addselfyeji'); ?>",{id:id,selfyeji:$('#addselfyeji').val()},function(res){
					layer.close(index);
					dialog(res.msg,res.status);
					layer.close(addselfyejiLayer);
					tableIns.reload()
				})
			}
		})
	}
	<?php endif; ?>
	</script>
	
</body>
</html>
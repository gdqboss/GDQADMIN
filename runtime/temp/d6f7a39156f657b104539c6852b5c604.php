<?php /*a:101:{s:55:"/www/wwwroot/gdqshop.cn/app/view/shop_product/edit.html";i:1768759919;s:48:"/www/wwwroot/gdqshop.cn/app/view/public/css.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/designer_editor.html";i:1768342992;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-topbar2.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-topbar.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-shop.html";i:1747926690;s:76:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-plugin-mendian.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-notice.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-menu.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-banner.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-picture.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-pictures.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-title.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-dhlist.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-text.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-search.html";i:1747926690;s:71:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-lbssearch.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-line.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-blank.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-product.html";i:1766024920;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-cycle.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-collage.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-kanjia.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-seckill.html";i:1747926690;s:71:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-scoreshop.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-coupon.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-richtext.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-cube.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-video.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-article.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-form.html";i:1747926690;s:65:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-map.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-button.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-cover.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-business.html";i:1747926690;s:72:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-shortvideo.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-liveroom.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-hotspot.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-userinfo.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-wxad.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-adset.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-jidian.html";i:1747926690;s:65:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-tab.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-kecheng.html";i:1747926690;s:72:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-carhailing.html";i:1747926690;s:80:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-restaurant_product.html";i:1747926690;s:80:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-restaurant_product.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-tuangou.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-topbar.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-shop.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-notice.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-menu.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-banner.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-picture.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-pictures.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-title.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-dhlist.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-text.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-search.html";i:1747926690;s:71:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-lbssearch.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-line.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-blank.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-product.html";i:1765997345;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-cycle.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-collage.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-kanjia.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-seckill.html";i:1747926690;s:71:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-scoreshop.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-coupon.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-richtext.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-cube.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-video.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-article.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-form.html";i:1747926690;s:65:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-map.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-button.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-cover.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-business.html";i:1747926690;s:72:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-shortvideo.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-liveroom.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-hotspot.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-userinfo.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-yuyue.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-yuyue.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-tuangou.html";i:1747926690;s:74:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-luckycollage.html";i:1747926690;s:74:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-luckycollage.html";i:1747926690;s:66:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-wxad.html";i:1747926690;s:67:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-adset.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-jidian.html";i:1747926690;s:65:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-tab.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-kecheng.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-zhaopin.html";i:1747926690;s:69:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-zhaopin.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-qiuzhi.html";i:1747926690;s:68:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-qiuzhi.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/edit-form-log.html";i:1747926690;s:70:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-form-log.html";i:1747926690;s:72:"/www/wwwroot/gdqshop.cn/app/view/designer_page/temp/show-carhailing.html";i:1747926690;s:47:"/www/wwwroot/gdqshop.cn/app/view/public/js.html";i:1747926690;s:54:"/www/wwwroot/gdqshop.cn/app/view/public/copyright.html";i:1747926690;}*/ ?>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>商品管理</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" type="text/css" href="/static/admin/layui/css/layui.css?v=20200519" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/layui/css/modules/formSelects-v4.css?v=20200516" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/admin.css?v=202406" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/font-awesome.min.css?v=20200516" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/webuploader/webuploader.css?v=<?php echo time(); ?>" media="all">
<link rel="stylesheet" type="text/css" href="/static/admin/css/designer.css?v=202410" media="all">
<link rel="stylesheet" type="text/css" href="/static/fonts/iconfont.css?v=20201218" media="all">
	<style>
		#ggnamediv .layui-input,#ggvaldiv .layui-input{ display:inline;height:30px}
		.guigeimg{display: inline-block; position: relative}
		.guigeimg_close{width: 25px;height: 22px;right: -14px;top:-14px;}
		.layui-imgbox .layui-imgbox-close{z-index: 6;}
		#jieti_discountdiv .layui-input,#jieti_discountdiv .layui-input{ display:inline;height:30px}
		.mt5 {margin-bottom: 5px}
	</style>
</head>
<body>
<div class="layui-fluid">
	<div class="layui-row layui-col-space15">
		<div class="layui-card layui-col-md12">
			<div class="layui-card-header">
					<?php if(!$info['id']): ?><i class="fa fa-plus"></i> 添加商品<?php else: ?><i class="fa fa-pencil"></i> 编辑商品<?php endif; ?>
					<i class="layui-icon layui-icon-close" style="font-size:18px;font-weight:bold;cursor:pointer" onclick="closeself()"></i>
					<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="selectPreviousRecord()" style="margin-left:10px;">选择上一次记录</button>
				</div>
			<div class="layui-card-body" pad15>
				<?php if($info['ischecked']==2): ?><blockquote class="layui-elem-quote" style="color:red">商品未审核通过，驳回原因：<?php echo $info['check_reason']; ?></blockquote><?php endif; ?>
				<div class="layui-form form-label-w6">
					<div class="layui-tab" lay-filter="mytab">
						<ul class="layui-tab-title">
							<li class="layui-this" lay-id="1">商品信息</li>
							<li lay-id="2">商品参数</li>
							<li lay-id="3">商品详情</li>
							<li lay-id="4">分享设置</li>
						</ul>
						<div class="layui-tab-content">
							<div class="layui-tab-item layui-show">
								<input type="hidden" name="id" value="<?php echo $info['id']; ?>"/>
								<?php if(input('param.bid')): ?><input type="hidden" name="info[bid]" value="<?php echo app('request')->param('bid'); ?>"/><?php endif; if(getcustom('douyin_groupbuy')): if($info['dyg_product_id']>0): ?>
	                                <div class="layui-form-item" >
	                                    <label class="layui-form-label">抖音端商品id：</label>
	                                    <div class="layui-input-inline">
	                                        <input type="text" disabled="true" class="layui-input" value="<?php echo $info['dyg_product_id']; ?>">
	                                    </div>
	                                </div>
	                                <?php endif; ?>
                                <?php endif; if(getcustom('supply_zhenxin')): if($info['sproid']>0 && $info['source'] == 'supply_zhenxin'): ?>
	                                <div class="layui-form-item" >
	                                    <label class="layui-form-label">甄新汇选端商品id：</label>
	                                    <div class="layui-input-inline">
	                                        <input type="text" disabled="true" class="layui-input" value="<?php echo $info['sproid']; ?>">
	                                    </div>
	                                </div>
	                                <?php endif; ?>
                                <?php endif; ?>
								<div class="layui-form-item">
					<label class="layui-form-label"><span class="redstar">*</span>商品名称：</label>
					<div class="layui-input-inline" style="width:400px">
						<input type="text" name="info[name]" lay-verify="required" lay-verType="tips" class="layui-input" value="<?php echo $info['name']; ?>">
					</div>
					<button type="button" class="layui-btn layui-btn-primary" onclick="showChooseStoreProduct()">选择仓库商品</button>
					<button type="button" class="layui-btn layui-btn-primary" style="margin-left:10px;" onclick="loadLastRecord()">选择上一次记录</button>
				</div>
								<div class="layui-form-item">
									<label class="layui-form-label">商品别名：</label>
									<div class="layui-input-inline" style="width:300px">
										<input type="text" name="info[print_name]" lay-verType="tips" class="layui-input" value="<?php echo $info['print_name']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">小票打印使用别名替代商品名称，留空使用商品名称</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label"><span class="redstar">*</span>商品主图：</label>
									<!-- <input type="hidden" name="info[pic]" id="pic" lay-verify="required" lay-verType="tips" class="layui-input" value="<?php echo $info['pic']; ?>"> -->
									<button style="float:left;" type="button" class="layui-btn layui-btn-primary" upload-input="pic" upload-preview="picPreview" onclick="uploader(this)">上传图片</button>
									<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">建议尺寸：640×640像素</div>
									<div id="picPreview" class="picsList-class-padding">
										<div class="layui-imgbox imgbox-required">
											<a <?php if($info['pic']): ?>style="display: block;" <?php else: ?> style="display: none;"  <?php endif; ?> class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().find('img').attr('src','').hide();getpicsval('pic','picPreview');$(this).hide();" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
											<div class="layui-imgbox-img">
												<img src="<?php echo $info['pic']; ?>"/>
											</div>
											<input autocomplete='off' type="text" id="pic" name="info[pic]" lay-verify="required" lay-verType="tips" value="<?php echo $info['pic']; ?>" style="cursor:default;">
										</div>
									</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label">商品图片：</label>
									<input type="hidden" name="info[pics]" value="<?php echo $info['pics']; ?>" id="pics">
									<button style="float:left;" type="button" class="layui-btn layui-btn-primary" onclick="uploader(this,true)" upload-input="pics" upload-preview="picList" >批量上传</button>
									<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">建议尺寸：640×640像素</div>
									<div id="picList" class="picsList-class-padding">
										<?php if($info['pics']): $pics = explode(',',$info['pics']); foreach($pics as $pic): ?>
										<div class="layui-imgbox">
											<a class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().remove();getpicsval('pics','picList')" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
											<span class="layui-imgbox-img"><img src="<?php echo $pic; ?>"></span>
										</div>
										<?php endforeach; ?><?php endif; ?>
									</div>
								</div>
								<?php if(getcustom('diy_light') && $auth['diy_light']): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">配灯图片：</label>
									<input type="hidden" name="info[diypics]" value="<?php echo $info['diypics']; ?>" id="diypics">
									<button style="float:left;" type="button" class="layui-btn layui-btn-primary" onclick="uploader(this,true)" upload-input="diypics" upload-preview="diypicList" >批量上传</button>
									<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">建议尺寸：640×640像素，png格式透明背景</div>
									<div id="diypicList" style="float:left;padding-top:10px;padding-left:130px;clear: both;">
										<?php if($info['diypics']): $diypics = explode(',',$info['diypics']); foreach($diypics as $pic): ?>
										<div class="layui-imgbox">
											<a class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().remove();getpicsval('diypics','diypicList')" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
											<span class="layui-imgbox-img"><img src="<?php echo $pic; ?>"></span>
										</div>
										<?php endforeach; ?><?php endif; ?>
									</div>
								</div>
								<?php endif; ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品视频：</label>
									<div class="layui-input-inline" style="width:400px">
										<input type="text" name="info[video]" id="video" lay-verType="tips" class="layui-input" value="<?php echo $info['video']; ?>">
									</div>
									<input type="hidden" name="info[video_duration]" id="video_duration" value="<?php echo $info['video_duration']; ?>">
									<button style="float:left;" type="button" class="layui-btn layui-btn-primary" upload-input="video" onclick="uploader(this)">上传视频</button>
									<button style="float:left;" type="button" class="layui-btn layui-btn-primary"  onclick="toChooseVideoList('video')">选择视频</button>
									<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">填写视频链接或上传视频，视频链接必须为mp4格式的源链接，视频大小须在50MB以内</div>
								</div>
								<!-- <div class="layui-form-item">
                                    <label class="layui-form-label">商品服务：</label>
                                    <div class="layui-input-inline" style="width:400px">
                                        <input type="text" name="info[fuwupoint]" class="layui-input" value="<?php echo $info['fuwupoint']; ?>">
                                    </div>
                                    <div class="layui-form-mid layui-word-aux">多个用空格隔开,如: 7天退换 48小时发货 假一赔十</div>
                                </div> -->
								<div class="layui-form-item">
									<label class="layui-form-label">商品卖点：</label>
									<div class="layui-input-inline" style="width:400px">
										<input type="text" name="info[sellpoint]" class="layui-input" value="<?php echo $info['sellpoint']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">在商品详情页标题下面展示商品卖点，建议60字以内</div>
								</div>
								<?php if(getcustom('product_keyword')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品关键字：</label>
									<div class="layui-input-inline" style="width:400px">
										<input type="text" name="info[keyword]" class="layui-input" value="<?php echo $info['keyword']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">可通过商品关键字检索商品</div>
								</div>
								<?php endif; ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品分类：</label>
									<div class="layui-input-inline" style="width:400px">
										<select name="info[cid]" id="cid" xm-select="selectCid" xm-select-max="5" xm-select-search >
											<option value="">--请选择--</option>
											<?php foreach($clist as $cv): ?>
											<option value="<?php echo $cv['id']; ?>" <?php if(in_array($cv['id'],$info['cid'])): ?>selected<?php endif; ?>><?php echo $cv['name']; ?></option>
											<?php foreach($cv['child'] as $k=>$v): if($k < count($cv['child'])-1): ?>
											<option value="<?php echo $v['id']; ?>" <?php if(in_array($v['id'],$info['cid'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;├ <?php echo $v['name']; ?></option>
											<?php else: ?>
											<option value="<?php echo $v['id']; ?>" <?php if(in_array($v['id'],$info['cid'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;└ <?php echo $v['name']; ?></option>
											<?php endif; foreach($v['child'] as $k2=>$v2): if($k2 < count($v['child'])-1): ?>
											<option value="<?php echo $v2['id']; ?>" <?php if(in_array($v2['id'],$info['cid'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├ <?php echo $v2['name']; ?></option>
											<?php else: ?>
											<option value="<?php echo $v2['id']; ?>" <?php if(in_array($v2['id'],$info['cid'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└ <?php echo $v2['name']; ?></option>
											<?php endif; ?>
											<?php endforeach; ?>
											<?php endforeach; ?>
											<?php endforeach; ?>
										</select>
									</div>
									<div class="layui-form-mid layui-word-aux">最多可选5个分类</div>
									<!-- <div class="layui-form-mid layui-word-aux"><a href="categoryadd.php">创建分类</a></div> -->
								</div>
								<?php if($bid > 0): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商家商品分类：</label>
									<div class="layui-input-inline" style="width:400px">
										<select name="info[cid2]" id="cid2" xm-select="selectCid2" xm-select-max="5" xm-select-search >
											<option value="">--请选择--</option>
											<?php foreach($clist2 as $cv): ?>
											<option value="<?php echo $cv['id']; ?>" <?php if(in_array($cv['id'],$info['cid2'])): ?>selected<?php endif; ?>><?php echo $cv['name']; ?></option>
											<?php foreach($cv['child'] as $k=>$v): if($k < count($cv['child'])-1): ?>
											<option value="<?php echo $v['id']; ?>" <?php if(in_array($v['id'],$info['cid2'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;├ <?php echo $v['name']; ?></option>
											<?php else: ?>
											<option value="<?php echo $v['id']; ?>" <?php if(in_array($v['id'],$info['cid2'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;└ <?php echo $v['name']; ?></option>
											<?php endif; foreach($v['child'] as $k2=>$v2): if($k2 < count($v['child'])-1): ?>
											<option value="<?php echo $v2['id']; ?>" <?php if(in_array($v2['id'],$info['cid2'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;├ <?php echo $v2['name']; ?></option>
											<?php else: ?>
											<option value="<?php echo $v2['id']; ?>" <?php if(in_array($v2['id'],$info['cid2'])): ?>selected<?php endif; ?>>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;└ <?php echo $v2['name']; ?></option>
											<?php endif; ?>
											<?php endforeach; ?>
											<?php endforeach; ?>
											<?php endforeach; ?>
										</select>
									</div>
									<div class="layui-form-mid layui-word-aux">最多可选5个分类</div>
								</div>
								<?php endif; if(getcustom('product_brand')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品品牌：</label>
									<div class="layui-input-inline" style="width:400px">
										<select name="info[brand_id]" id="brandid" xm-select="selectBrandid" xm-select-max="1" xm-select-search >
											<option value="">--请选择--</option>
											<?php foreach($brandlist as $brand): ?>
											<option value="<?php echo $brand['id']; ?>" <?php if($brand['id'] == $info['brand_id']): ?>selected<?php endif; ?>><?php echo $brand['name']; ?></option>
											<?php endforeach; ?>
										</select>
									</div>
									<div class="layui-form-mid layui-word-aux">最多可选1个品牌</div>
								</div>
								<?php endif; ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品分组：</label>
									<div class="layui-input-inline" style="width:600px">
										<?php  $gids = explode(',',$info['gid']); foreach($glist as $g): ?><input type="checkbox" name="info[gid][]" value="<?php echo $g['id']; ?>" <?php if(in_array($g['id'],$gids)): ?>checked<?php endif; ?> title="<?php echo $g['name']; ?>" lay-skin="primary"><?php endforeach; ?>
									</div>
									<!-- <div class="layui-form-mid layui-word-aux"><a href="groupadd.php">创建分组</a></div> -->
								</div>
								<?php if(getcustom('product_xieyi') && ($auth_data=='all' || in_array('ProductXieyi/*',$auth_data))): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品协议ID：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[xieyi_id]" value="<?php echo $info['xieyi_id']; ?>" class="layui-input" />
									</div>
									<a href="javascript:vodi(0)" class="layui-btn layui-btn-primary" onclick="chooseproductxieyi()">查找商品协议ID</a>
								</div>
								<script>
									function chooseproductxieyi(){
										layer.open({type:2,title:'选择协议',content:"<?php echo url('ProductXieyi/choosexieyi'); ?>/args/promoter",area:['900px','600px'],shadeClose:true});
									}
									function choosexieyi(data){
										console.log(data);
										$('input[name="info[xieyi_id]"]').val(data.id)
									}
							</script>
						<?php endif; if(getcustom('product_supplier')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">供应商：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[supplier_id]" value="<?php echo $info['supplier_id']; ?>" class="layui-input" />
									</div>
									<a href="javascript:vodi(0)" class="layui-btn layui-btn-primary" onclick="chooseProductSupplier()">查找供应商ID</a>
								</div>
								<script>
									function chooseProductSupplier(){
										layer.open({type:2,title:'选择供应商',content:"<?php echo url('ProductSupplier/chooseSupplier'); ?>/args/promoter",area:['900px','600px'],shadeClose:true});
									}
									function chooseSupplier(data){
										$('input[name="info[supplier_id]"]').val(data.id)
									}
								</script>
								<?php endif; ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品服务：</label>
									<div class="layui-input-inline" style="width:600px">
										<?php  $fwids = explode(',',$info['fwid']); foreach($fuwulist as $fuwu): ?><input type="checkbox" name="info[fwid][]" value="<?php echo $fuwu['id']; ?>" <?php if(in_array($fuwu['id'],$fwids)): ?>checked<?php endif; ?> title="<?php echo $fuwu['name']; ?>" lay-skin="primary"><?php endforeach; ?>
									</div>
									<!-- <div class="layui-form-mid layui-word-aux"><a href="groupadd.php">创建分组</a></div> -->
								</div>
								<?php if(getcustom('shop_label')): ?>
                                <div class="layui-form-item">
                                    <label class="layui-form-label">商品标签：</label>
                                    <div class="layui-input-inline" style="width:300px">
                                    	<?php  $labelids = explode(',',$info['labelid']); ?>
                                        <select name="info[labelid]" id="labelid" xm-select="selectLabelid" xm-select-max="" xm-select-search >
                                            <option value="">--请选择--</option>
                                            <?php foreach($labels as $cv): ?>
                                            <option value="<?php echo $cv['id']; ?>" <?php if(in_array($cv['id'],$labelids)): ?>selected<?php endif; ?>><?php echo $cv['name']; ?></option>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                    <div class="layui-form-mid layui-word-aux"></div>
                                </div>
                                <div class="layui-form-item">
                                  <label class="layui-form-label">标签背景色：</label>
                                  <div class="layui-input-inline">
                                    <input type="text" name="info[labelbgcolor]" value="<?php echo $info['labelbgcolor']; ?>" class="layui-input">
                                  </div>
                                  <div class="_colorpicker" style="float:left"></div>
                                  <div class="layui-form-mid layui-word-aux">商品标签背景色，不填写默认商城主色调</div>
                                </div>
                                <div class="layui-form-item">
                                  <label class="layui-form-label">标签字体色：</label>
                                  <div class="layui-input-inline">
                                    <input type="text" name="info[labelcolor]" value="<?php echo $info['labelcolor']; ?>" class="layui-input">
                                  </div>
                                  <div class="_colorpicker" style="float:left"></div>
                                  <div class="layui-form-mid layui-word-aux">商品标签字体色，不填写默认白色</div>
                                </div>
								<?php endif; if(getcustom('product_bind_mendian')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">销售门店：</label>
									<div class="layui-input-inline" style="width:80%">
						<?php  $bind_mendian_ids = $info['bind_mendian_ids']?explode(',',$info['bind_mendian_ids']):[]; ?>
						<input type="checkbox" name="info[bind_mendian_ids][]" value="-1" <?php if(in_array('-1',$bind_mendian_ids)): ?>checked<?php endif; ?> title="所有" lay-skin="primary">
						<?php foreach($mendianlist as $mendian): ?>
						<input type="checkbox" name="info[bind_mendian_ids][]" value="<?php echo $mendian['id']; ?>" <?php if(in_array($mendian['id'],$bind_mendian_ids)): ?>checked<?php endif; ?> title="<?php echo $mendian['name']; ?>" lay-skin="primary">
						<?php endforeach; ?>
					</div>
									<!-- <div class="layui-form-mid layui-word-aux"><a href="groupadd.php">创建分组</a></div> -->
								</div>
								<?php endif; ?>
								
								<div class="layui-form-item">
									<label class="layui-form-label">
										<?php if(in_array('procode',$requiredField)): ?><span class="redstar">*</span><?php endif; ?>商品编码：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[procode]" class="layui-input" value="<?php echo $info['procode']; ?>" <?php if(in_array('procode',$requiredField)): ?>lay-verify="required" lay-verType="tips"<?php endif; ?>>
									</div>
								</div>

								<div class="layui-form-item">
									<label class="layui-form-label">商品条码：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[barcode]" class="layui-input" value="<?php echo $info['barcode']; ?>">
									</div>
								</div>

								<?php if(getcustom('product_unit')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品单位：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[product_unit]" class="layui-input" value="<?php echo $info['product_unit']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">拼接在价格后展示</div>
								</div>
								<?php endif; if(getcustom('to86yk')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">对应tid：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[to86yk_tid]" class="layui-input" value="<?php echo $info['to86yk_tid']; ?>">
									</div>
								</div>
								<?php endif; if(getcustom('pay_yuanbao')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label"><?php echo t('元宝'); ?>价：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[yuanbao]" class="layui-input" value="<?php echo $info['yuanbao']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">大于0时启用，设置后还需要支付<?php echo $yuanbao_money_ratio; ?>%比例的现金</div>
								</div>
								<?php endif; if(getcustom('product_extend')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">商品类型：</label>
									<div class="layui-input-inline" style="width: 50%">
										<input type="radio" name="info[product_type]" value="0" lay-filter="productType" class="layui-input" <?php if(!$info || $info['product_type']==0): ?>checked<?php endif; ?> title="普通商品">
										<?php if(getcustom('product_glass')): ?>
										<input type="radio" name="info[product_type]" value="1" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==1): ?>checked<?php endif; ?> title="眼镜商品">
										<?php endif; if(getcustom('product_weight') && ($auth_data=='all' || in_array('ProductWeight',$auth_data))): ?>
										<input type="radio" name="info[product_type]" value="2" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==2): ?>checked<?php endif; ?> title="称重商品">
										<?php endif; if(getcustom('product_handwork')): if($auth_data=='all' || in_array('ProductHand',$auth_data)): ?>
											<input type="radio" name="info[product_type]" value="3" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==3): ?>checked<?php endif; ?> title="手工活商品">
											<input type="hidden" class="product_type" value="<?php echo !empty($info['product_type']) ? $info['product_type'] : '0'; ?>" class="layui-input">
											<?php endif; ?>
										<?php endif; if(getcustom('product_wholesale')): ?>
										<input type="radio" name="info[product_type]" value="4" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==4): ?>checked<?php endif; ?> title="批发商品">
										<input type="hidden" class="product_type" value="<?php echo !empty($info['product_type']) ? $info['product_type'] : '0'; ?>" class="layui-input">
										<?php endif; if(getcustom('shop_product_fenqi_pay')): ?>
										<input type="radio" name="info[product_type]" value="5" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==5): ?>checked<?php endif; ?> title="分期商品">
										<input type="hidden" class="product_type" value="<?php echo !empty($info['product_type']) ? $info['product_type'] : '0'; ?>" class="layui-input">
										<?php endif; if(getcustom('more_productunit_guige')): ?>
										<input type="radio" name="info[product_type]" value="6" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==6): ?>checked<?php endif; ?> title="启用多单位">
										<input type="hidden" class="product_type" value="<?php echo !empty($info['product_type']) ? $info['product_type'] : '0'; ?>" class="layui-input">
										<?php endif; if(getcustom('product_quanyi')): ?>
										<input type="radio" name="info[product_type]" value="8" lay-filter="productType" class="layui-input" <?php if($info && $info['product_type']==8): ?>checked<?php endif; ?> title="<?php echo t('权益商品'); ?>">
										<input type="hidden" class="product_type" value="<?php echo !empty($info['product_type']) ? $info['product_type'] : '0'; ?>" class="layui-input">
										<?php endif; if(getcustom('product_pingce')): if($auth_data=='all' || in_array('ProductPingce',$auth_data)): ?>
											<input type="radio" name="info[product_type]" value="9" lay-filter="productType" class="layui-input" <?php if(!$info || $info['product_type']==9): ?>checked<?php endif; ?> title="测评商品">
											<?php endif; ?>
										<?php endif; ?>
									</div>
								</div>
								<?php endif; if(!getcustom('product_extend')): ?>
								<input type="hidden" name="info[product_type]" value="0">
								<?php endif; if(getcustom('product_quanyi')): ?>
								<div class="quanyi_pro" style="<?php if($info['product_type']!=8): ?>display:none<?php endif; ?>">
									<div class="layui-form-item">
										<label class="layui-form-label">总核销次数：</label>
										<div>
											<div class="layui-input-inline" style="width:100px"><input type="text" name="info[hexiao_num]" value="<?php echo $info['hexiao_num']; ?>" class="layui-input"></div>
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">核销周期：</label>
										<div class="layui-input-inline" style="width: 300px;">
											<input type="radio" name="info[quanyi_hexiao_circle]" value="1" <?php if($info['quanyi_hexiao_circle']==0): ?>checked<?php endif; ?> title="每月" />
											<input type="radio" name="info[quanyi_hexiao_circle]" value="0" <?php if($info['quanyi_hexiao_circle']==1): ?>checked<?php endif; ?> title="每周" />
											<input type="radio" name="info[quanyi_hexiao_circle]" value="1" <?php if($info['quanyi_hexiao_circle']==2): ?>checked<?php endif; ?> title="每天" />
										</div>
										<div>
											<div class="layui-form-mid">每周期核销次数</div>
											<div class="layui-input-inline" style="width:100px"><input type="text" name="info[circle_hexiao_num]" value="<?php echo $info['circle_hexiao_num']; ?>" class="layui-input"></div>
										</div>
									</div>
									<?php if($product_quanyi_return): ?>
									<div class="layui-form-item">
										<label class="layui-form-label">核销完成返还：</label>
										<div class="layui-input-inline">
											<input type="radio" name="info[quanyi_hexiao_return]" value="1" <?php if(!$info['quanyi_hexiao_return'] || $info['quanyi_hexiao_return']==1): ?>checked<?php endif; ?> title="是"/>
											<input type="radio" name="info[quanyi_hexiao_return]" value="0" <?php if($info['quanyi_hexiao_return']===0): ?>checked<?php endif; ?> title="否"/>
										</div>
										<div class="layui-form-mid layui-word-aux" style="margin-left:10px;"></div>
									</div>
									<?php endif; ?>
								</div>
								<?php endif; if(getcustom('shop_product_fenqi_pay')): ?>
								<div class="fenqi_pro"  style="<?php if($info['product_type']!=5): ?>display:none<?php endif; ?>">
								<div class="layui-form-item fenqi_pro">
									<label class="layui-form-label">赠送<?php echo t('优惠券'); ?>：</label>
									<button class="layui-btn layui-btn-primary selectcoupon" onclick="showChooseCoupon(1)" style="margin-left:5px;padding:0 12px;">选择</button>
									<div class="layui-input-inline">
										<input type="text" name="info[fenqigive_couponid]" class="layui-input" value="<?php echo $info['fenqigive_couponid']; ?>">
									</div>
								</div>
								<div class="layui-form-item fenqi_pro">
									<label class="layui-form-label">分销奖励<?php echo t('优惠券'); ?>：</label>
									<button class="layui-btn layui-btn-primary selectcoupon" onclick="showChooseCoupon(2)" style="margin-left:5px;padding:0 12px;">选择</button>
									<div class="layui-input-inline">
										<input type="text" name="info[fenqigive_fx_couponid]" class="layui-input" value="<?php echo $info['fenqigive_fx_couponid']; ?>">
									</div>
								</div>
								<div >
									<div class="layui-form-item">
										<label class="layui-form-label">赠送<?php echo t('优惠券'); ?>数量：</label>
										<div class="layui-input-inline layui-module-itemL">
											<div >购买赠送数量</div>
											<input type="text" name="info[fenqigive_couponnum]" class="layui-input" value="<?php echo $info['fenqigive_couponnum']; ?>">
										</div>
										<div class="layui-input-inline layui-module-itemL">
											<div>分销奖励数量：</div>
											<input type="text" name="info[fenqigive_couponnum_fenxiao]" class="layui-input" value="<?php echo $info['fenqigive_couponnum_fenxiao']; ?>">
										</div>
										<div class="layui-form-mid layui-word-aux layui-clear">一次购买赠送<?php echo t('优惠券'); ?>数量
											<br>分销奖励数量 一次购买分销奖励上级<?php echo t('优惠券'); ?>数量
										</div>
									</div>
								</div>	
								<!-- <div class="layui-form-item fenqi_pro">
										<label class="layui-form-label">购买赠送数量：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[fenqigive_couponnum]" value="<?php echo $info['fenqigive_couponnum']; ?>" class="layui-input">
										</div>
										<div class="layui-form-mid layui-word-aux">一次购买赠送<?php echo t('优惠券'); ?>数量</div>
								</div>
								<div class="layui-form-item fenqi_pro">
									<label class="layui-form-label">分销奖励数量：</label>
									<div class="layui-input-inline">
										<input type="text" name="info[fenqigive_couponnum_fenxiao]" value="<?php echo $info['fenqigive_couponnum_fenxiao']; ?>" class="layui-input">
									</div>			
									<div class="layui-form-mid layui-word-aux">一次购买分销奖励<?php echo t('优惠券'); ?>数量</div>
								</div> -->
								<div class="layui-form-item fenqi_pro">
									<label class="layui-form-label">分期设置：</label>
									<div class="layui-input-inline" style="width:auto">
										<table id="fenqi_data_div"  class="layui-table" style="width:700px">
											<thead>
											<tr>
												<th>分期比例%</th>
												<th>赠送数量</th>
												<th>分销奖励数量</th>
												<th>操作</th>
											</tr>
											</thead>
											<?php  $fenqi_data = json_decode($info['fenqi_data']); if($fenqi_data): foreach($fenqi_data as $k=>$jditem): ?>
											<tr>
												<td>
													<input type="number" class="layui-input" name="fenqi_num_ratio[]" value="<?php echo $jditem->fenqi_num_ratio; ?>" placeholder="期数" style="width:90px">
												</td>
												<td>
													<input type="number" class="layui-input" name="fenqi_give_num[]" value="<?php echo $jditem->fenqi_give_num; ?>" placeholder="赠送数量" style="width:90px">
												</td>
												<td>
													<input type="number" class="layui-input" name="fenqi_fx_start_num[]" value="<?php echo $jditem->fenqi_fx_start_num; ?>" placeholder="第一笔数量" style="width:90px">
												</td>
												<!-- <td>
														<input type="number" class="layui-input" name="fenqi_fx_end_num[]" value="<?php echo $jditem->fenqi_fx_end_num; ?>" placeholder="最后一笔数量" style="width:90px">														
												</td> -->
												<?php if($k==0): ?>
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addfenqi_data()">添加</button></td>
												<?php else: ?>
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>
												<?php endif; ?>
											</tr>
											<?php endforeach; else: ?>
											<tr>
												<td>
													<input type="number" class="layui-input" name="fenqi_num_ratio[]" value="" placeholder="分期比例" style="width:90px">
												</td>
												<td>
													<input type="number" class="layui-input" name="fenqi_give_num[]" value="" placeholder="赠送数量" style="width:90px">
												</td>
												
												<td>
													<input type="number" class="layui-input" name="fenqi_fx_start_num[]" value="" placeholder="分销奖励数量" style="width:90px">
												</td>
												<!-- <td>
														<input type="number" class="layui-input" name="fenqi_fx_end_num[]" value="" placeholder="最后一笔数量" style="width:90px">														
												</td> -->
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addfenqi_data()">添加</button></td>
											</tr>
											<?php endif; ?>
										</table>
										<div class="layui-word-aux">添加</div>
									</div>
								</div>
								<script>
									function addfenqi_des(obj){
										var fenqiobj = $(obj).parent().parent().append('<div class="layui-input-inline layui-module-itemL"><input class="layui-input" name="fenqi_pay_radio[]" type="text" style="width:90px;" value="" placeholder="支付比例">%<input class="layui-input" name="fenqi_give_num[]" type="text" style="width:90px;" value="" placeholder="赠送数量"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().remove()" style="margin-top:-3px;"><i class="fa fa-remove" style="font-size:14px!important"></i></button></div>');
									}
									
								function addfenqi_data(){
									var jdhtml = '<tr>';

										jdhtml += '<td>';
										jdhtml += '<input type="number" class="layui-input" name="fenqi_num_ratio[]" value="" placeholder="分期比例" style="width:90px;">';
										jdhtml += '</td>';
	
										jdhtml += '<td>';
										jdhtml += '<input type="number" class="layui-input" name="fenqi_give_num[]" value="" placeholder="赠送数量" style="width:90px;">';
										jdhtml += '</td>';
	
										jdhtml += '<td>';
										jdhtml += '<input type="number" class="layui-input" name="fenqi_fx_start_num[]" value="" placeholder="第一笔数量" style="width:90px;">';
										jdhtml += '</td>';
	
										// jdhtml += '<td>';
										// jdhtml += '<input type="number" class="layui-input" name="fenqi_fx_end_num[]" value="" placeholder="最后一笔数量" style="width:90px;">';
										// jdhtml += '</td>';														
	
										jdhtml += '<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>';
										jdhtml += '</tr>';
									$('#fenqi_data_div').append(jdhtml);
									layui.form.render('select');
									initcolorpicker();
								}
								</script>
								</div>								
								<?php endif; if(getcustom('product_wholesale')): ?>
								<div class="layui-form-item jieti_discount" style="<?php if($info['product_type']!=4): ?>display:none<?php endif; ?>">
									<label class="layui-form-label">批发类型：</label>
									<div class="layui-input-inline">
										<input type="radio" name="info[jieti_discount_type]" value="1" title="整批" <?php if(!$info['id'] || $info['jieti_discount_type']==1): ?>checked<?php endif; ?> lay-filter=""/>
										<input type="radio" name="info[jieti_discount_type]" value="0" title="混批" <?php if($info['id'] && $info['jieti_discount_type']==0): ?>checked<?php endif; ?> lay-filter=""/>
									</div>
									<div class="layui-form-mid layui-word-aux">混批:所有规格的商品的数量达标，整批：单个规格的购买数量达标</div>
								</div>
								<div class="layui-form-item jieti_discount" style="<?php if($info['product_type']!=4): ?>display:none<?php endif; ?>">
									<label class="layui-form-label">阶梯价格：</label>
									<div class="layui-input-inline" style="width:auto">
										<table id="jieti_discountdiv"  class="layui-table" style="width:700px">
											<thead>
											<tr>
												<th>购买数量阶梯设置价格折扣比例</th>
												<th>操作</th>
											</tr>
											</thead>
											<?php  $jieti_discount_data = json_decode($info['jieti_discount_data']); if($jieti_discount_data): foreach($jieti_discount_data as $k=>$jditem): ?>
											<tr>
												<td width="550">
													<div>
														<input type="number" class="layui-input" name="jd_start_num[]" value="<?php echo $jditem->start_num; ?>" placeholder="起始数量" style="width:90px"> ~
														<input type="number" class="layui-input" name="jd_end_num[]" value="<?php echo $jditem->end_num; ?>" style="width:200px" placeholder="数量(最高时可不填写)"/>
														<input type="number" class="layui-input" name="jd_ratio[]" value="<?php echo $jditem->ratio; ?>" style="width:90px" placeholder="比例"/> %
													</div>	
												</td>
												<?php if($k==0): ?>
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addjieti_discount()">添加</button></td>
												<?php else: ?>
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>
												<?php endif; ?>
											</tr>
											<?php endforeach; else: ?>
											<tr>
												<td width="550">
													<div>
														<input type="number" class="layui-input" name="jd_start_num[]" value="" placeholder="起始数量" style="width:90px"> ~
														<input type="number" class="layui-input" name="jd_end_num[]" value="" style="width:200px" placeholder="结束数量(最高时可不填写)"/>
														<input type="number" class="layui-input" name="jd_ratio[]" value="" style="width:90px" placeholder="比例"/> %
													</div>
												</td>
												<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addjieti_discount()">添加</button></td>
											</tr>
											<?php endif; ?>
										</table>
										<div class="layui-word-aux"></div>
									</div>
								</div>
								<script>
								function addjieti_discount(){
									var jdhtml = '<tr>';
										jdhtml += '<td width="550">';
										jdhtml += '<div>';
										jdhtml += '<input type="number" class="layui-input" name="jd_start_num[]" value="" placeholder="起始数量" style="width:90px;"> ~';
										jdhtml += '<input type="number" class="layui-input" name="jd_end_num[]" value="" style="width:200px;margin-left:4px" placeholder="结束数量(最高时可不填写)"/>';
										jdhtml += '<input type="number" class="layui-input" name="jd_ratio[]" value="" style="width:90px;margin-left:4px" placeholder="比例"/> %';
										jdhtml += '</div>';
										jdhtml += '</td>';

										jdhtml += '<td width="50"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>';
										jdhtml += '</tr>';
									$('#jieti_discountdiv').append(jdhtml);
									layui.form.render('select');
									initcolorpicker();
								}
								</script>
								<?php endif; if(getcustom('product_field_buy')): ?>
									<div class="layui-form-item">
										<label class="layui-form-label">规格：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[guige]" class="layui-input" value="<?php echo $info['guige']; ?>">
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">品牌：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[brand]" class="layui-input" value="<?php echo $info['brand']; ?>">
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">单位：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[unit]" class="layui-input" value="<?php echo $info['unit']; ?>">
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">有效期：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[valid_time]" class="layui-input" value="<?php echo $info['valid_time']; ?>">
										</div>
									</div>
									<div class="layui-form-item">
										<label class="layui-form-label">备注：</label>
										<div class="layui-input-inline">
											<input type="text" name="info[remark]" class="layui-input" value="<?php echo $info['remark']; ?>">
										</div>
									</div>
								<?php endif; if(getcustom('product_pingce')): ?>
								<div class="layui-form-item product_type9" style="<?php if($info['product_type']!=9): ?>display:none<?php endif; ?>">
									<label class="layui-form-label">测评报告类型：</label>
									<div class="layui-input-inline" style="width:800px">
										<input type="checkbox" name="info[pingce_report][]" value="1" title="32种人才心理特质报告" lay-skin="primary" <?php if(in_array('1',$info['pingce_report'])): ?>checked<?php endif; ?>/>
										<input type="checkbox" name="info[pingce_report][]" value="2" title="42种职场岗位适配报告" lay-skin="primary" <?php if(in_array('2',$info['pingce_report'])): ?>checked<?php endif; ?>/>
									</div>
									<div class="layui-form-mid layui-word-aux">购买测评后可以看到几个报告</div>
								</div>
								<?php endif; if(getcustom('more_productunit_guige')): ?>
								<div class="layui-form-item prounit_show" style="<?php if($info['product_type']!=6): ?>display:none<?php endif; ?>">
									<label class="layui-form-label">设置单位：</label>
									<div class="layui-input-inline" id="prounit"  >
										<?php  $prounit = json_decode($info['prounit']);
										if(empty($info['prounit'])){
											$prounit = [''];
										}
										 foreach($prounit as $key=>$value): ?>
										<div style="display:flex;align-items:center;"><input style="width:50%;" type="text" name="info[prounit][]" class="layui-input" value="<?php echo $value; ?>"> 
											<?php if($key == 0): ?>
											<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addprounit(this)" style="margin-top:-3px;margin-left:5px;"><i class="fa fa-plus" style="font-size:14px!important"></i>添加单位</button>
											<?php else: ?>
											 <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().remove()" style="margin-top:-3px;margin-left:5px;"><i class="fa fa-remove" style="font-size:14px!important"></i>删除单位</button>
											<?php endif; ?>
										</div>
										<?php endforeach; ?>
									</div>
									<div class="layui-form-mid layui-word-aux layui-clear">最高支持6级单位，有多单位的，规格第一栏按照单位添加</div>
								</div>
								<script>
									function addprounit(){
										var html = '<div style="display:flex;align-items:center;"><input style="width:50%;" type="text" name="info[prounit][]" class="layui-input" value=""> <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().remove()" style="margin-top:-3px;margin-left:5px;"><i class="fa fa-remove" style="font-size:14px!important"></i>删除单位</button></div>';
										$('#prounit').append(html);
									}
								</script>
								<?php endif; if(getcustom('product_show_guige_type')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">规格展示方式：</label>
									<div class="layui-input-inline" style="width:260px;overflow: hidden;">
										<input type="radio" name="info[guige_show_type]" value="0" title="默认" <?php if(!$info['id'] || $info['guige_show_type']==0): ?>checked<?php endif; ?>/>
										<input type="radio" name="info[guige_show_type]" value="1" title="纵横交叉" <?php if($info['id'] && $info['guige_show_type']==1): ?>checked<?php endif; ?>/>
									</div>
									<div class="layui-form-mid layui-word-aux">前端规格展示方式 纵横交叉：规格分组生成X和Y轴，最多设置两个规格分组；</div>
								</div>
								<?php endif; ?>
								<div class="layui-form-item" id="setgg">
									<label class="layui-form-label">设置规格：</label>
									<div class="layui-input-inline" style="width:auto">
										<table id="ggnamediv"  class="layui-table" style="width:700px">
											<thead>
											<tr>
												<th>规格分组</th>
												<th>规格名称</th>
												<th>操作</th>
											</tr>
											</thead>
											<?php  $guigedata = json_decode($info['guigedata']); if($guigedata): foreach($guigedata as $k=>$gg): ?>
											<tr>
												<td><input type="text" class="layui-input" name="ggname" value="<?php echo $gg->title; ?>" style="width:120px;margin-bottom: 5px;"/></td>
												<td>
													<?php foreach($gg->items as $k2=>$ggitem): ?>
													<div>
														<input type="text" name="ggnameguige"  class="layui-input"style="width:180px;margin-bottom:5px" value="<?php echo $ggitem->title; ?>" placeholder="请输入规格名称">
														<?php if($k2==0): ?>
														<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addggname(this)" style="margin-top:-3px;"><i class="fa fa-plus" style="font-size:14px!important"></i></button>
														<?php else: ?>
														<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" data-id="<?php echo $gg->k; ?>" id="<?php echo $ggitem->k; ?>" onclick="delggname(this,0)" style="margin-top:-3px;"><i class="fa fa-remove" style="font-size:14px!important"></i></button>
														<?php endif; if(getcustom('more_productunit_guige')): ?>
														<button title="上移" type="button" class="layui-btn layui-btn-primary layui-btn-sm prounit_show" style="margin-top:-3px;<?php if($info['product_type']!=6): ?>display:none<?php endif; ?>" onclick="toup(this)"><i class="fa fa-arrow-up" style="font-size:14px!important"></i></button>
														<?php endif; if(getcustom('product_wholesale') && $k==0): ?>
														<div id="ggpic_wholesale<?php echo $k2; ?>" class="jieti_discount" style="<?php if($info['product_type']!=4): ?>display:none<?php endif; ?>">
															<input type="hidden" name="ggpic_wholesale" id="ggpic_wholesale_val<?php echo $k2; ?>" value="<?php echo $ggitem->ggpic_wholesale; ?>"/>
															<div class="guigeimg" style="margin-bottom:6px;">
																<img class="thumb_img" src="<?php echo $ggitem->ggpic_wholesale; ?>" style="max-width:50px;"/>
																<a <?php if($ggitem->ggpic_wholesale=='' || $ggitem->ggpic_wholesale==null): ?>style="display: none;" <?php endif; ?>  class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().find('img').attr('src','').hide();$(this).parent().prev('input').val('');getpicsval('pic','picPreview');$(this).hide();" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
															</div>
															<button class="layui-btn layui-btn-sm layui-btn-primary" style="margin-bottom:6px;" onclick="uploader(this)" upload-input="ggpic_wholesale_val<?php echo $k2; ?>" upload-preview="ggpic_wholesale<?php echo $k2; ?>" type="button">上传</button>
														</div>
														<?php endif; ?>
													</div>
													<?php endforeach; ?>
												</td>
												
												<?php if($k==0): ?>
												<td><?php if($canaddgg): ?><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addggtype()">添加</button><?php endif; ?></td>
												<?php else: ?>
												<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>
												<?php endif; ?>
											</tr>
											<?php endforeach; else: ?>
											<tr>
												<td><input type="text" class="layui-input" name="ggname" value="规格" style="width:120px;margin-bottom: 5px;"/></td>
												<td>
													<div>
													<input name="ggnameguige" type="text" class="layui-input" style="width:180px;margin-bottom:5px" value="默认规格" placeholder="请输入规格名称"> <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addggname(this)" style="margin-top:-3px;"><i class="fa fa-plus" style="font-size:14px!important"></i></button>
													<?php if(getcustom('more_productunit_guige')): ?>
													<button title="上移" type="button" class="layui-btn layui-btn-primary layui-btn-sm prounit_show" style="margin-top:-3px;<?php if($info['product_type']!=6): ?>display:none<?php endif; ?>" onclick="toup(this)"><i class="fa fa-arrow-up" style="font-size:14px!important"></i></button>
													<?php endif; if(getcustom('product_wholesale')): ?>
													<div id="ggpic_wholesale" class="jieti_discount" style="<?php if($info['product_type']!=4): ?>display:none<?php endif; ?>">
														<input type="hidden" name="ggpic_wholesale" id="ggpic_wholesale_val" value=""/>
														<div class="guigeimg" style="margin-bottom:6px;" ><img class="thumb_img" src="" style="max-width:50px;"/>
															<a style="display: none;" class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().find('img').attr('src','').hide();$(this).parent().prev('input').val('');getpicsval('pic','picPreview');$(this).hide();" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
														</div> <button class="layui-btn layui-btn-sm layui-btn-primary" style="margin-bottom:6px;"  onclick="uploader(this)" upload-input="ggpic_wholesale_val" upload-preview="ggpic_wholesale" type="button">上传</button>													
													</div>
													<?php endif; ?>
													</div>
												</td>
												<td><?php if($canaddgg): ?><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addggtype()">添加</button><?php endif; ?></td>
											</tr>
											<?php endif; ?>
										</table>
										<div class="layui-word-aux">提示：先点击“添加按钮”添加规格分组，如：“颜色”，“尺码”，若只有一种规格则不需要添加规格分组；<br/>然后分别点击"＋"号添加规格名称，如：“红色”，“蓝色”；“大号”，“小号”；<br/>设置完成后点击“刷新规格项目表”按钮进行编辑各个规格的价格、库存等信息<br>
										<?php if(getcustom('supply_zhenxin')): if($info['sproid']>0 && $info['source'] == 'supply_zhenxin'): ?>注意：甄新汇选端商品规格不能随意变动，不能添加多余规格<?php endif; ?>
		                                <?php endif; ?>
										</div>
										<button type="button"  class="layui-btn layui-btn-sm layui-btn-primary" onclick="refreshgg()"><i class="fa fa-refresh" style="font-size:14px!important"></i>刷新规格项目表</button>
										<?php if($bid==0 || $bset['product_showset']==1): ?><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="lvpriceset()" id="lvpricebtn"><?php if($info['lvprice']==1): ?>关闭<?php else: ?>开启<?php endif; ?>会员价</button><?php endif; if(getcustom('product_service_fee') && ($auth_data == 'all' || in_array('service_fee_switch',$auth_data))): if(($info['bid']) == 0): ?>
												<button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="serviceFeeSet()" id="serviceFeeBtn"><?php if($info['service_fee_switch']==1): ?>关闭<?php else: ?>开启<?php endif; ?><?php echo t('服务费'); ?></button>
											<?php endif; ?>
										<?php endif; if(getcustom('member_level_price_rate')): if($bid==0 || $bset['product_showset']==1): ?><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="lvpricesetWithRate()" id="lvpricesetWithRate"<?php if($info['lvprice'] == 0): ?> style="display:none"<?php endif; ?>>填充价格</button><?php endif; ?><?php endif; ?>
										<input type="hidden" name="info[lvprice]" value="<?php echo !empty($info['id']) ? $info['lvprice'] : '0'; ?>"/>
										<?php if(getcustom('product_service_fee')): ?>
										<input type="hidden" name="info[service_fee_switch]" value="<?php echo !empty($info['id']) ? $info['service_fee_switch'] : '0'; ?>"/>
										<?php endif; ?>
										<table id="ggvaldiv" class="layui-table" style="margin-top:20px;">
										</table>
										<?php if($bid==0): ?>
										<div class="layui-form-mid layui-word-aux">
											注：开启会员价可设置不同会员等级显示不同价格；赠<?php echo t('积分'); ?>确认收货才赠送，与系统设置中的消费赠送<?php echo t('积分'); ?>(支付就赠送<?php echo t('积分'); ?>)兼得<br>
											<?php if($bid==0): if($ShopSendSilvermoney): ?> 赠<?php echo t('银值'); ?>确认收货才赠送;<?php endif; if($ShopSendGoldmoney): ?>赠<?php echo t('金值'); ?>确认收货才赠送; <?php endif; ?>
											<?php endif; ?>
										</div>
										<?php endif; ?>
										<input type="hidden" name="specs" value=""/>
									</div>
								</div>
								<?php if(getcustom('shop_product_jialiao')): ?>
							
								<div class="layui-form-item">
									<label class="layui-form-label">加料：</label>
									<div class="layui-input-inline" style="width:300px">
										<table  class="layui-table" style="width:600px">
											<thead>
											<tr>
												<th>名称</th>
												<th>价格</th>
												<th>限购</th>
												<th>操作</th>
											</tr>
											</thead>
											<tbody id="jldiv" >
											<?php if($jialiao): foreach($jialiao as $k=>$jl): ?>
											<tr>
												<input type="hidden"  class="layui-input"  value="<?php echo $jl['id']; ?>" name="jl[id][]" />
												<td ><input type="text" placeholder="请输入加料名称" class="layui-input" name="jl[title][]" value="<?php echo $jl['title']; ?>"  /></td>
												<td ><input type="number" class="layui-input" value="<?php echo $jl['price']; ?>"   min="0" placeholder="请输入价格" lay-verify="" name="jl[price][]"></td>
												<td ><input type="number" name="jl[limit_num][]" class="layui-input"  value="<?php echo $jl['limit_num']; ?>" placeholder="请输入限购数量" lay-verify="" min="1"></td>
												<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>
											</tr>
											<?php endforeach; ?>
											<?php endif; ?>
											</tbody>
											<tr><td colspan="4" style="text-align:center;"><button type="button" class="layui-btn  " onclick="addjl()">添加</button></td></tr>
										</table>
									</div>
						
								<script>
									function addjl(){
										var gghtml = '<tr>';
										gghtml += '<input type="hidden"  class="layui-input"  value="" name="jl[id][]" /><td ><input type="text" class="layui-input" name="jl[title][]" value="" placeholder="请输入加料名称" lay-verify="" /></td>';
										gghtml += '<td ><input type="number" class="layui-input" name="jl[price][]" value="0.00" placeholder="请输入价格" lay-verify="" min="0"></td>';
										gghtml += '<td ><input type="number" class="layui-input" name="jl[limit_num][]" value="1" placeholder="请输入限购数量" lay-verify="" min="1"></td>';
										gghtml += '<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>';
										gghtml += '</tr>';
										$('#jldiv').append(gghtml);
									}
								</script>
								<div class="layui-form-item">
									<label class="layui-form-label">加料名称：</label>
									<div class="layui-input-inline" style="width:220px">
										<input type="text" name="info[jl_title]"  lay-verType="tips" class="layui-input" value="<?php echo (isset($info['jl_title']) && ($info['jl_title'] !== '')?$info['jl_title']:加料); ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">手机端功能的名称，默认：加料</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label">最大选择数量：</label>
									<div class="layui-input-inline" style="width:220px">
										<input type="text" name="info[jl_total_max]"  lay-verType="tips" class="layui-input" value="<?php echo $info['jl_total_max']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">加料最大选择数量，大于0生效，当最大和最小相同时，必须选择该数量</div>
								</div>
								<div class="layui-form-item">
									<label class="layui-form-label">最小选择数量：</label>
									<div class="layui-input-inline" style="width:220px">
										<input type="text" name="info[jl_total_min]"  lay-verType="tips" class="layui-input" value="<?php echo $info['jl_total_min']; ?>">
									</div>
									<div class="layui-form-mid layui-word-aux">加料最小选择数量，大于0生效，当最大和最小相同时，必须选择该数量</div>
								</div>
							</div>
								<?php endif; if(getcustom('discount_code_zhongchuang')): ?>
								<div class="layui-form-item">
									<div class="layui-form-label">优惠码价格：</div>
									<div class="layui-input-inline">
										<input class="layui-input" name="info[price_discount_code_zc]" value="<?php echo $info['price_discount_code_zc']; ?>"/>
									</div>
									<div class="layui-form-mid layui-word-aux">中创优惠码</div>
								</div>
								<?php endif; if(getcustom('product_givescore_time') && ($bid==0 || $business_selfscore==1)): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">积分赠送时间：</label>
									<div class="layui-input-inline" style="width:500px">
										<input type="radio" name="info[givescore_time]" value="0" title="确认收货后" <?php if(!$info['id'] || $info['givescore_time']==0): ?>checked<?php endif; ?> lay-filter=""/>
										<input type="radio" name="info[givescore_time]" value="1" title="付款后" <?php if($info['id'] && $info['givescore_time']==1): ?>checked<?php endif; ?> lay-filter=""/>
									</div>
								</div>
								<?php endif; if(getcustom('member_commission_max') && $member_commission_max==1): ?>
								<div class="layui-form-item">
									<label class="layui-form-label"><?php echo t('佣金上限'); ?>赠送时间：</label>
									<div class="layui-input-inline" style="width:500px">
										<input type="radio" name="info[givecommax_time]" value="0" title="确认收货后" <?php if(!$info['id'] || $info['givecommax_time']==0): ?>checked<?php endif; ?> lay-filter=""/>
										<input type="radio" name="info[givecommax_time]" value="1" title="付款后" <?php if($info['id'] && $info['givecommax_time']==1): ?>checked<?php endif; ?> lay-filter=""/>
										<input type="radio" name="info[givecommax_time]" value="-1" title="不参与" <?php if($info['id'] && $info['givecommax_time']==-1): ?>checked<?php endif; ?> lay-filter=""/>
									</div>
								</div>
								<?php endif; ?>
								<div class="layui-form-item">
									<label class="layui-form-label">价格模式：</label>
									<div class="layui-input-inline" style="width:260px;overflow: hidden;">
										<input type="radio" name="info[price_type]" value="0" title="默认" <?php if(!$info['id'] || $info['price_type']==0): ?>checked<?php endif; ?> lay-filter="price_type"/>
										<input type="radio" name="info[price_type]" value="1" title="询价" <?php if($info['id'] && $info['price_type']==1): ?>checked<?php endif; ?> lay-filter="price_type"/>
										<?php if(getcustom('shop_other_infor')): ?>
										<input type="text" name="info[xunjia_text]" id="xunjia_text" lay-verType="tips" class="layui-input" style="width: 100px;float: right;" value="<?php echo !empty($info['xunjia_text']) ? $info['xunjia_text'] : '联系TA'; ?>">
										<?php endif; ?>
									</div>
									<div class="layui-form-mid layui-word-aux">默认：展示售价，详情页展示购买和加入购物车，可下单；询价：不设置售价时不展示，详情页展示联系按钮（点击展示系统设置的商家名称和服务电话），不可下单。</div>
								</div>
								<?php if(getcustom('product_xunjia_btn')): ?>
								<div id="xunjia_item" <?php if($info['price_type']!=1): ?>style="display:none;"<?php endif; ?>>
									<hr>
									<div class="layui-form-item">
										<label class="layui-form-label">联系Ta：</label>
										<div class="layui-input-inline">
											<input type="radio" name="info[show_xunjia_btn]" value="1" <?php if(!$info['show_xunjia_btn'] || $info['show_xunjia_btn']==1): ?>checked<?php endif; ?> title="显示" lay-filter="show_xunjia_btn" />
											<input type="radio" name="info[show_xunjia_btn]" value="0" <?php if($info['show_xunjia_btn']===0): ?>checked<?php endif; ?> title="不显示" lay-filter="show_xunjia_btn" />
										</div>
										<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">商品详情页，咨询商品，是否显示咨询按钮以及设置按钮文案</div>
									</div>
									<div id="xunjia_btn_txt" <?php if($info['id'] && $info['show_xunjia_btn']!=1): ?>style="display:none;"<?php endif; ?>>
										<div class="layui-form-item">
											<label class="layui-form-label">联系Ta文字：</label>
											<div class="layui-input-inline">
												<input type="text" class="layui-input" name="info[xunjia_text]" value="<?php echo (isset($info['xunjia_text']) && ($info['xunjia_text'] !== '')?$info['xunjia_text']:'联系TA'); ?>"/>
											</div>
											<div class="layui-form-mid layui-word-aux">联系Ta文本</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label">联系Ta背景色：</label>
											<div class="layui-input-inline">
												<input type="text" name="info[xunjia_btn_bgcolor]" value="<?php echo (isset($info['xunjia_btn_bgcolor']) && ($info['xunjia_btn_bgcolor'] !== '')?$info['xunjia_btn_bgcolor']:'#FE9800'); ?>" class="layui-input">
											</div>
											<div class="_colorpicker" style="float:left"></div>
											<div class="layui-form-mid layui-word-aux">如：#FE9800</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label">联系Ta字体色：</label>
											<div class="layui-input-inline">
												<input type="text" name="info[xunjia_btn_color]" value="<?php echo (isset($info['xunjia_btn_color']) && ($info['xunjia_btn_color'] !== '')?$info['xunjia_btn_color']:'#FFFFFF'); ?>" class="layui-input">
											</div>
											<div class="_colorpicker" style="float:left"></div>
											<div class="layui-form-mid layui-word-aux">如：#FFFFFF</div>
										</div>
										<div class="layui-form-item">
											<label class="layui-form-label">联系Ta链接：</label>
											<div class="layui-input-inline" style="width:30%;">
												<input type="text" id="xunjia_btn_url" name="info[xunjia_btn_url]" value="<?php echo $info['xunjia_btn_url']; ?>" class="layui-input">
											</div>
											<div class="layui-input-inline"><button class="layui-btn" onclick="showChooseContactLink('xunjia_btn_url')">选择链接</button></div>
										</div>
									</div>
									<hr>
								</div>
								<?php endif; if(getcustom('freight_selecthxbids') && $bid==0): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">计次商品：</label>
									<div class="layui-input-inline" style="width:260px;overflow: hidden;">
										<input type="radio" name="info[isjici]" value="0" title="否" <?php if(!$info['id'] || $info['isjici']==0): ?>checked<?php endif; ?>/>
										<input type="radio" name="info[isjici]" value="1" title="是" <?php if($info['id'] && $info['isjici']==1): ?>checked<?php endif; ?>/>
									</div>
									<div class="layui-form-mid layui-word-aux"></div>
								</div>
								<?php endif; if($iszhenxin): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">甄新汇选配送：</label>
									<div id="zxhtml" class="layui-input-inline" style="max-width:500px;width: auto;display: flex;align-items:center;flex-wrap:wrap;min-height: 38px;">
										<?php echo $info['zxhtml']; ?>
									</div>
									<div class="layui-input-inline"><button class="layui-btn" onclick="refreshzxfreight(<?php echo $info['id']; ?>)">点击刷新</button></div>
								</div>
								<?php endif; ?>
								<!--*****配送模板 start*****-->
								<?php if($canaddfreight): ?>
								<div class="layui-form-item freighttype" <?php if($info['product_type'] == 9): ?> style="display: none;"<?php endif; ?>>
									<label class="layui-form-label">配送模板：</label>
									<div class="layui-input-inline" style="width:500px">
										<input type="radio" name="info[freighttype]"  value="1"  title="全部模板" <?php if(!$info['id'] || $info['freighttype']==1): ?>checked<?php endif; ?> lay-filter="freighttypeset"/>
										<input type="radio" name="info[freighttype]"  value="0"   title="选择模板" <?php if($info['id'] && $info['freighttype']==0): ?>checked<?php endif; ?> lay-filter="freighttypeset"/>
										<input type="radio" name="info[freighttype]"   value="3" title="自动发货" <?php if($info['id'] && $info['freighttype']==3): ?>checked<?php endif; ?> lay-filter="freighttypeset"/>
										<input type="radio" name="info[freighttype]"  value="4"   title="在线卡密" <?php if($info['id'] && $info['freighttype']==4): ?>checked<?php endif; ?> lay-filter="freighttypeset"/>
									</div>

									<div id="freighttype3_4" style="<?php if(($info['freighttype']!=3 && $info['freighttype']!=4)): ?>display:none<?php endif; ?>">
										<div class="layui-form-item">
											<label class="layui-form-label"></label>
											<div class="layui-form-mid">
												<input type="checkbox" name="info[contact_require]" title="必填联系人、手机号信息" value="1" <?php if($info['contact_require']==1): ?>checked<?php endif; ?>>
											</div>
										</div>
									</div>

									<div id="freighttype3" style="<?php if($info['freighttype']!=3): ?>display:none<?php endif; ?>">
										<div class="layui-form-item">
											<label class="layui-form-label"></label>
											<div class="layui-input-inline" style="width:500px">
												<textarea type="text" name="info[freightcontent]" placeholder="请输入发货信息" class="layui-textarea"><?php echo $info['freightcontent']; ?></textarea>
											</div>
										</div>
									</div>
									<div id="freighttype4" style="<?php if($info['freighttype']!=4): ?>display:none<?php endif; ?>">
										<div class="layui-form-item">
											<label class="layui-form-label"></label>
											<div class="layui-form-mid">请保存商品信息后在商品列表中上传卡密信息；用户购买几件将发送几个卡密信息</div>
										</div>
									</div>

									<div id="setfreight" style="clear:both;<?php if(!$info['id'] || $info['freighttype']!=0): ?>display:none<?php endif; ?>">
										<label class="layui-form-label"></label>
										<div class="layui-input-inline" style="width:auto">
											<table id="setfreightdiv"  class="layui-table" style="width:500px">
												<thead>
												<tr>
													<th>模板ID</th>
													<th>模板名称</th>
													<th>操作</th>
												</tr>
												</thead>
												<?php if($freightdata): foreach($freightdata as $k=>$ff): ?>
												<tr class="freightlisttr"><td><?php echo $ff['id']; ?></td><td><?php echo $ff['name']; ?></td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delfreight(this,<?php echo $ff['id']; ?>)">删除</button></td></tr>
												<?php endforeach; ?>
												<?php endif; ?>
												<tr id="freightaddtr">
													<td colspan="3"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="showChooseFreight()">添加</button></td>
												</tr>
											</table>
											<input type="hidden" name="info[freightdata]" value="<?php echo $info['freightdata']; ?>"/>
										</div>
									</div>
								</div>
								<script>
				function selectPreviousRecord() {
					$.ajax({
						url: '<?php echo url('Product/getPreviousRecord'); ?>',
						type: 'GET',
						dataType: 'json',
						success: function(res) {
							if (res.code == 1) {
								// 排除商品名称，填充其他字段
								var data = res.data;
								for (var key in data) {
									if (key != 'name') {
										var selector = '[name="info[' + key + ']"]';
										if ($(selector).length > 0) {
											$(selector).val(data[key]);
										}
									}
								}
								layui.form.render();
								dialog('成功加载上一次记录');
							} else {
								dialog(res.msg);
							}
						}
					});
				}
				
				var chooseFreightLayer;
				function showChooseFreight(){ //
					chooseFreightLayer = layer.open({type:2,title:'选择配送模板',content:"<?php echo url('Freight/choosefreight'); ?>&bid=<?php echo $info['bid']; ?>",area:['1000px','600px'],shadeClose:true});
				}
									function chooseFreight(fid,fname){
										layer.close(chooseFreightLayer);
										var freightlistids = [];
										var isadd = 0;
										$('.freightlisttr').each(function(){
											var thisfid = $(this).find('td:eq(0)').html();
											if(thisfid == fid){
												isadd = 1
												dialog('该配送模板已添加过了');
											}
											freightlistids.push(thisfid)
										})
										if(isadd == 0){
											freightlistids.push(fid)
											$("input[name='info[freightdata]']").val(freightlistids.join(','));
											$('#freightaddtr').before('<tr class="freightlisttr"><td>'+fid+'</td><td>'+fname+'</td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delfreight(this,'+fid+')">删除</button></td></tr>');
										}
										console.log(freightlistids)
									}
									function delfreight(obj,fid){
										$(obj).parent().parent().remove();
										var freightlistids = [];
										$('.freightlisttr').each(function(){
											freightlistids.push($(this).find('td:eq(0)').html())
										})
										$("input[name='info[freightdata]']").val(freightlistids.join(','));
									}
								</script>
								<?php endif; ?>
								<!--*****配送模板 end*****-->

								<?php if(getcustom('weight_template')): ?>
								<div class="layui-form-item">
									<label class="layui-form-label"><?php echo t('包装费'); ?>：</label>
									<div class="layui-input-inline" style="width:500px">
										<input type="radio" name="info[weighttype]" value="1" title="全部模板" <?php if(!$info['id'] || $info['weighttype']==1): ?>checked<?php endif; ?> lay-filter="weighttype"/>
										<input type="radio" name="info[weighttype]" value="2" title="选择模板" <?php if($info['id'] && $info['weighttype']==2): ?>checked<?php endif; ?> lay-filter="weighttype"/>
										<input type="radio" name="info[weighttype]" value="0" title="关闭" <?php if($info['id'] && $info['weighttype']==0): ?>checked<?php endif; ?> lay-filter="weighttype"/>
									</div>

									<div id="setweight" style="clear:both;<?php if(!$info['id'] || $info['weighttype']!=2): ?>display:none<?php endif; ?>">
										<label class="layui-form-label"></label>
										<div class="layui-input-inline" style="width:auto">
											<table id="setfreightdiv"  class="layui-table" style="width:500px">
												<thead>
												<tr>
													<th>模板ID</th>
													<th>模板名称</th>
													<th>操作</th>
												</tr>
												</thead>
												<?php if($weightdata): foreach($weightdata as $k=>$ff): ?>
												<tr class="weightlisttr"><td><?php echo $ff['id']; ?></td><td><?php echo $ff['name']; ?></td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delfreight(this,<?php echo $ff['id']; ?>)">删除</button></td></tr>
												<?php endforeach; ?>
												<?php endif; ?>
												<tr id="weightaddtr">
													<td colspan="3"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="showChooseWeight()">添加</button></td>
												</tr>
											</table>
											<input type="hidden" name="info[weightdata]" value="<?php echo $info['weightdata']; ?>"/>
										</div>
									</div>
								</div>
								<script>
									var chooseWeghtLayer;
									function showChooseWeight(){ //
										chooseWeghtLayer = layer.open({type:2,title:'选择重量模板',content:"<?php echo url('ShopWeightTemplate/chooseweight'); ?>&bid=<?php echo $info['bid']; ?>",area:['1000px','600px'],shadeClose:true});
									}
									function chooseWeight(fid,fname){
										layer.close(chooseWeghtLayer);
										var weightlistids = [];
										var isadd = 0;
										$('.weightlisttr').each(function(){
											var thisfid = $(this).find('td:eq(0)').html();
											if(thisfid == fid){
												isadd = 1
												dialog('该重量模板已添加过了');
											}
											weightlistids.push(thisfid)
										})
										if(isadd == 0){
											weightlistids.push(fid)
											$("input[name='info[weightdata]']").val(weightlistids.join(','));
											$('#weightaddtr').before('<tr class="weightlisttr"><td>'+fid+'</td><td>'+fname+'</td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delweight(this,'+fid+')">删除</button></td></tr>');
										}
										console.log(weightlistids)
									}
									function delweight(obj,fid){
										$(obj).parent().parent().remove();
										var weightlistids = [];
										$('.weightlisttr').each(function(){
											weightlistids.push($(this).find('td:eq(0)').html())
										})
										$("input[name='info[weightdata]']").val(weightlistids.join(','));
									}
								</script>
								<?php endif; ?><!--weight_template end-->

								<div class="layui-form-item" <?php if($info['lvprice']==0): ?>style="display:none"<?php endif; ?> id="commissionset4input">
									<label class="layui-form-label"><?php echo t('等级价格极差分销'); ?>：</label>
									<div class="layui-input-inline" style="width:170px">
										<input type="radio" name="info[commissionset4]" value="0" title="关闭" <?php if(!$info['id'] || $info['commissionset4']==0): ?>checked<?php endif; ?>>
										<input type="radio" name="info[commissionset4]" value="1" title="开启" <?php if($info['commissionset4']==1): ?>checked<?php endif; ?>>
									</div>
									<?php if(getcustom('lvprice_jicha_lv')): ?>
									<div class="layui-form-mid">最多发放</div>
									<div class="layui-input-inline" style="width:100px">
										<input type="text" name="info[lvprice_jicha_lv]" class="layui-input" value="<?php echo $info['lvprice_jicha_lv']; ?>">
									</div>
									<div class="layui-form-mid">层</div>
									<div class="layui-input-inline" style="width:150px">
										<input type="checkbox" name="info[lvprice_jicha_origin]" value="1" title="发放原上级" lay-skin="primary" <?php if($info['lvprice_jicha_origin'] == 1): ?>checked<?php endif; ?>/>
									</div>
									<?php endif; ?>
									<div class="layui-form-mid layui-word-aux layui-clear">
										开启时，如果设置了不同的会员等级的价格不同，如果上级与下级之间存在价格差，则此价格差作为<?php echo t('佣金'); ?>返给上级（所有上级）
										<?php if(getcustom('lvprice_jicha_lv')): ?>
										<br/>设置层级后，最多发放人数不会超过层级限制，有紧缩，设置0代表不限制
										<br/>勾选发放原上级，代表按会员原上级推荐关系发放
										<?php endif; ?>
									</div>
								</div>
								<?php if(getcustom('commission_two_level')): ?>
									<!--二级分销 start-->
									<div class="layui-form-item">
										<label class="layui-form-label"><?php echo t('二级分销'); ?>：</label>
										<div class="layui-input-block">
											<input type="radio" name="info[two_level_commission]" value="0" <?php if(!$info['id'] || $info['two_level_commission']==0): ?>checked<?php endif; ?> title="关闭" lay-filter="diandaSwitchMulti">
											<input type="radio" name="info[two_level_commission]" value="1" <?php if($info['two_level_commission']==1): ?>checked<?php endif; ?> title="开启" lay-filter="diandaSwitchMulti">

										</div>
										<div class="layui-form-mid layui-word-aux">
											一级：如果没有原上级，就给上级，有原上级就给原上级<br/>
											二级：给原上级的原上级，没有原上级的原上级就给原上级的现上级，一级如果是发的现上级，二级就给现上级的原上级，找不到就给现上级的现上级
										</div>
									</div>
									<?php 
									$two_level_commissiondata = json_decode($info['two_level_commissiondata'],true);
									if(!$two_level_commissiondata) $two_level_commissiondata = [];
									 ?>
									<div id="two_level_commission" diandaSwitchMulti="info[two_level_commission]" data-val="1" <?php if($info['two_level_commission']!=1): ?>style="display:none"<?php endif; ?>>
										<?php foreach($aglevellist as $level): ?>
										<div class="layui-form-item">
											<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
											<div class="layui-input-inline layui-module-itemL">
												<div> 一级(元) </div>
												<input type="text" name="two_level_commissiondata[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $two_level_commissiondata[$level['id']]['commission1']; ?>">
											</div>
											<?php if($level['can_agent']>1): ?>
											<div class="layui-input-inline layui-module-itemL">
												<div>二级(元)</div>
												<input type="text" name="two_level_commissiondata[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $two_level_commissiondata[$level['id']]['commission2']; ?>">
											</div>
											<?php endif; ?>
										</div>
										<?php endforeach; ?>
									</div>
									<!--二级分销 end-->
								<?php endif; if($bid==0 || $bset['commission_canset']==1): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">分销设置：</label>
									<div class="layui-input-block">
						<input type="radio" name="info[commissionset]" value="0" <?php if($info['commissionset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="commissionset">
						<input type="radio" name="info[commissionset]" value="1" <?php if(!$info['id'] || $info['commissionset']==1): ?>checked<?php endif; ?> title="单独设置提成比例" lay-filter="commissionset">
										<input type="radio" name="info[commissionset]" value="2" <?php if($info['commissionset']==2): ?>checked<?php endif; ?> title="单独设置提成金额" lay-filter="commissionset">
										<?php if($bid==0): ?>
										<input type="radio" name="info[commissionset]" value="3" <?php if($info['commissionset']==3): ?>checked<?php endif; ?> title="分销送<?php echo t('积分'); ?>" lay-filter="commissionset">
										<?php if(getcustom('commission_score_percent')): ?><input type="radio" name="info[commissionset]" value="7" <?php if($info['commissionset']==7): ?>checked<?php endif; ?> title="分销按比例送<?php echo t('积分'); ?>" lay-filter="commissionset"><?php endif; ?>
										<input type="radio" name="info[commissionset]" value="5" <?php if($info['commissionset']==5): ?>checked<?php endif; ?> title="提成比例+<?php echo t('积分'); ?>" lay-filter="commissionset">
										<input type="radio" name="info[commissionset]" value="6" <?php if($info['commissionset']==6): ?>checked<?php endif; ?> title="提成金额+<?php echo t('积分'); ?>" lay-filter="commissionset">
										<?php endif; ?>
										<!-- <span <?php if($info['lvprice']==0): ?>style="display:none"<?php endif; ?> id="commissionset4input">
                                        <input type="radio" name="info[commissionset]" value="4" <?php if($info['commissionset']==4): ?>checked<?php endif; ?> title="按差价拿<?php echo t('佣金'); ?>" lay-filter="commissionset">
                                        </span> -->
										<input type="radio" name="info[commissionset]" value="-1" <?php if($info['commissionset']==-1): ?>checked<?php endif; ?> title="不参与分销" lay-filter="commissionset">
									</div>
									<div class="layui-form-mid layui-word-aux">按照<?php echo t('会员'); ?>等级：按照<?php echo t('会员'); ?>等级中设置的提成比例进行提成分配，提成=对应<?php echo t('会员'); ?>等级的提成比例×<?php echo $jiesuantypeDesc; ?>×购买数量<br>
										单独设置提成比例：按照单独设置的提成比例进行提成分配，提成=设置的百分比×<?php echo $jiesuantypeDesc; ?>×购买数量<br>
										单独设置提成金额：按照单独设置的提成金额进行提成分配，提成=提成金额×购买数量<br>
										分销送<?php echo t('积分'); ?>：分销提成不给<?php echo t('佣金'); ?>而是给<?php echo t('积分'); ?>，得到的积分=提成<?php echo t('积分'); ?>×购买数量<br>
										<?php if(getcustom('commission_score_percent')): ?>
										分销按比例送<?php echo t('积分'); ?>：分销提成不给<?php echo t('佣金'); ?>而是给<?php echo t('积分'); ?>，得到的积分=设置的百分比×<?php echo $jiesuantypeDesc; ?>×购买数量，四舍五入取整<br>
										<?php endif; ?>
										* 当商家开启独立收款并且开启商家返款扣除分销佣金时，提成金额比例+平台抽成金额比例不能超过30%（微信支付分账限制）
										<!-- <span id="commissionset4tips" <?php if($info['lvprice']==0): ?>style="display:none"<?php endif; ?>>按差价拿<?php echo t('佣金'); ?>：当开启会员价时，不同的会员等级存在价格差，如果上级与下级之间存在价格差，则此价格差作为<?php echo t('佣金'); ?>返给上级</span> -->
									</div>
								</div>
								<?php 
								$commissiondata1 = json_decode($info['commissiondata1'],true);
								if(!$commissiondata1) $commissiondata1 = [];
								$commissiondata2 = json_decode($info['commissiondata2'],true);
								if(!$commissiondata2) $commissiondata2 = [];
								$commissiondata3 = json_decode($info['commissiondata3'],true);
								if(!$commissiondata3) $commissiondata3 = [];
								$commissiondata4 = json_decode($info['commissiondata4'],true);
								if(!$commissiondata4) $commissiondata4 = [];
								 ?>
					<div id="commissionset1" <?php if($info['id'] && $info['commissionset']!=1 && $info['commissionset']!=5): ?>style="display:none"<?php endif; ?>>
								<?php if(!$aglevellist): ?>
								<div class="layui-form-item">
									<label class="layui-form-label">提成比例：</label>
									<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
								</div>
								<?php else: foreach($aglevellist as $level): ?>
								<div class="layui-form-item">
									<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
									<div class="layui-input-inline layui-module-itemL">
										<div> 一级(%) </div>
						<input type="text" name="commissiondata1[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php if(!$info['id']): ?>2<?php else: ?><?php echo $commissiondata1[$level['id']]['commission1']; ?><?php endif; ?>">
									</div>
									<?php if($level['can_agent']>1): ?>
									<div class="layui-input-inline layui-module-itemL">
										<div>二级(%)</div>
						<input type="text" name="commissiondata1[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php if(!$info['id']): ?>1<?php else: ?><?php echo $commissiondata1[$level['id']]['commission2']; ?><?php endif; ?>">
									</div>
									<?php endif; if($level['can_agent']>2): ?>
									<div class="layui-input-inline layui-module-itemL">
										<div>三级(%)</div>
						<input type="text" name="commissiondata1[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php if(!$info['id']): ?>1<?php else: ?><?php echo $commissiondata1[$level['id']]['commission3']; ?><?php endif; ?>">
									</div>
									<?php endif; ?>
								</div>
								<?php endforeach; ?>
								<?php endif; ?>
							</div>
							<div id="commissionset2" <?php if($info['commissionset']!=2 && $info['commissionset']!=6): ?>style="display:none"<?php endif; ?>>
							<?php if(!$aglevellist): ?>
							<div class="layui-form-item">
								<label class="layui-form-label">提成金额：</label>
								<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
							</div>
							<?php else: foreach($aglevellist as $level): ?>
							<div class="layui-form-item">
								<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
								<div class="layui-input-inline layui-module-itemL">
									<div> 一级(元) </div>
									<input type="text" name="commissiondata2[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commissiondata2[$level['id']]['commission1']; ?>">
								</div>
								<?php if($level['can_agent']>1): ?>
								<div class="layui-input-inline layui-module-itemL">
									<div>二级(元)</div>
									<input type="text" name="commissiondata2[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commissiondata2[$level['id']]['commission2']; ?>">
								</div>
								<?php endif; if($level['can_agent']>2): ?>
								<div class="layui-input-inline layui-module-itemL">
									<div>三级(元)</div>
									<input type="text" name="commissiondata2[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php echo $commissiondata2[$level['id']]['commission3']; ?>">
								</div>
								<?php endif; ?>
							</div>
							<?php endforeach; ?>
							<?php endif; if(getcustom('fengdanjiangli')): ?>
							<div class="layui-form-item">
								<label class="layui-form-label">逢单奖励：</label>
								<div class="layui-input-inline" style="width:210px;">
									<input type="text" name="info[fengdanjiangli]" class="layui-input" value="<?php echo $info['fengdanjiangli']; ?>">
								</div>
								<div class="layui-form-mid layui-word-aux">即尾数为第几单给奖励,用英文逗号","分割,如:3,6,9</div>
							</div>
							<?php endif; ?>
						</div>
						<div id="commissionset3" <?php if($info['commissionset']!=3 && $info['commissionset']!=5 && $info['commissionset']!=6): ?>style="display:none"<?php endif; ?>>
							<?php if(!$aglevellist): ?>
							<div class="layui-form-item">
								<label class="layui-form-label">提成<?php echo t('积分'); ?>：</label>
								<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
							</div>
							<?php else: foreach($aglevellist as $level): ?>
							<div class="layui-form-item">
								<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
								<div class="layui-input-inline layui-module-itemL">
									<div> 一级(<?php echo t('积分'); ?>) </div>
									<input type="text" name="commissiondata3[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commissiondata3[$level['id']]['commission1']; ?>">
								</div>
								<?php if($level['can_agent']>1): ?>
								<div class="layui-input-inline layui-module-itemL">
									<div>二级(<?php echo t('积分'); ?>)</div>
									<input type="text" name="commissiondata3[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commissiondata3[$level['id']]['commission2']; ?>">
								</div>
								<?php endif; if($level['can_agent']>2): ?>
								<div class="layui-input-inline layui-module-itemL">
									<div>三级(<?php echo t('积分'); ?>)</div>
									<input type="text" name="commissiondata3[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php echo $commissiondata3[$level['id']]['commission3']; ?>">
								</div>
								<?php endif; ?>
							</div>
							<?php endforeach; ?>
							<?php endif; ?>
						</div>
				<!---分销份数-->
				<?php if(getcustom('commission_max_times')): ?>
				<fieldset class="layui-elem-field">
					<legend>分销份数</legend>
					<?php if(!$aglevellist): ?>
					<div class="layui-form-item">
						<label class="layui-form-label"></label>
						<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限,0为不限制</div>
					</div>
					<?php else: ?>
					<div class="layui-form-item">
						<label class="layui-form-label">分销份数：</label>
						<div class="layui-input-block" >
							<input type="radio" name="info[commission_max_times_status]" title="开启" value="1" <?php if($info['commission_max_times_status']==1): ?>checked<?php endif; ?> lay-filter="commission_max_times_status"/>
							<input type="radio" name="info[commission_max_times_status]" title="关闭" value="0" <?php if($info['commission_max_times_status']=='0'): ?>checked<?php endif; ?> lay-filter="commission_max_times_status"/>
						</div>
						<div class="layui-form-mid layui-word-aux">开启后每个分销商分销此商品只能拿设置好的几份1级佣金和几份2级佣金</div>
					</div>
					<div id="commission_max_times_status" <?php if(empty($info['commission_max_times_status'])): ?>style="display:none;"<?php endif; ?> >
						<?php 
						$commission_max_times = json_decode($info['commission_max_times'],true);
						 foreach($levellist as $level): ?>
						<div class="layui-form-item">
							<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
							<div class="layui-input-inline layui-module-itemL">
								<div> 一级 </div>
								<input type="text" name="commission_max_times[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commission_max_times[$level['id']]['commission1']; ?>" />
							</div>
							<?php if($level['can_agent']>1): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div>二级</div>
								<input type="text" name="commission_max_times[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commission_max_times[$level['id']]['commission2']; ?>" />
							</div>
							<?php endif; ?>
						</div>
					<?php endforeach; ?>
					</div>
					<?php endif; ?>
				</fieldset>
				<?php endif; if(getcustom('member_level_parent_not_commission')): ?>
				<fieldset class="layui-elem-field">
					<legend>上级无任何分销奖励</legend>
					<?php if(!$aglevellist): ?>
					<div class="layui-form-item">
						<label class="layui-form-label"></label>
						<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
					</div>
					<?php else: foreach($levellist as $level): ?>
					<div class="layui-form-item">
						<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
						<div class="layui-input-inline" style="width:70%">
							<input type="radio" name="parent_not_commission_json[<?php echo $level['id']; ?>]" value="-1" title="跟随会员等级" <?php if($parent_not_commission_json[$level['id']] == '-1' || $parent_not_commission_json[$level['id']] == ''): ?>checked<?php endif; ?> >
							<input type="radio" name="parent_not_commission_json[<?php echo $level['id']; ?>]" value="0" title="关闭" <?php if($parent_not_commission_json[$level['id']]==0 && $parent_not_commission_json[$level['id']] != ''): ?>checked<?php endif; ?> >
							<input type="radio" name="parent_not_commission_json[<?php echo $level['id']; ?>]" value="1" title="开启" <?php if($parent_not_commission_json[$level['id']]==1): ?>checked<?php endif; ?>>
						</div>
						<div class="layui-form-mid layui-word-aux layui-clear">开启后该等级购买下单，他的上级不享受任何分销奖励</div>
					</div>
					<?php endforeach; ?>
					<?php endif; ?>
				</fieldset>
				<?php endif; if(getcustom('commission_score_percent')): ?>
					<div id="commissionset4" <?php if($info['commissionset']!=7): ?>style="display:none"<?php endif; ?>>
						<?php if(!$aglevellist): ?>
						<div class="layui-form-item">
							<label class="layui-form-label">提成<?php echo t('积分'); ?>比例：</label>
							<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
						</div>
						<?php else: foreach($aglevellist as $level): ?>
						<div class="layui-form-item">
							<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
							<div class="layui-input-inline layui-module-itemL">
								<div> 一级(<?php echo t('积分'); ?>%) </div>
								<input type="text" name="commissiondata4[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commissiondata4[$level['id']]['commission1']; ?>">
							</div>
							<?php if($level['can_agent']>1): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div>二级(<?php echo t('积分'); ?>%)</div>
								<input type="text" name="commissiondata4[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commissiondata4[$level['id']]['commission2']; ?>">
							</div>
							<?php endif; if($level['can_agent']>2): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div class="layui-form-mid">三级(<?php echo t('积分'); ?>%)</div>
								<input type="text" name="commissiondata4[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php echo $commissiondata4[$level['id']]['commission3']; ?>">
							</div>
							<?php endif; ?>
						</div>
						<?php endforeach; ?>
						<?php endif; ?>
					</div>
					<?php endif; if(getcustom('commission_butie')): ?>
				<div id="commission_butie" <?php if(!in_array($info['commissionset'],[2,6])): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">分期发放金额：</label>
					</div>
					<div class="layui-form-item">
						<?php if(!$aglevellist): ?>
						<div class="layui-form-item">
							<label class="layui-form-label"></label>
							<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
						</div>
						<?php else: foreach($aglevellist as $level): ?>
						<div class="layui-form-item">
							<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
							<div class="layui-input-inline layui-module-itemL">
								<div> 一级 </div>
								<input type="text" name="commissionbutie[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commissionbutie[$level['id']]['commission1']; ?>">
							</div>
							<?php if($level['can_agent']>1): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div>二级</div>
								<input type="text" name="commissionbutie[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commissionbutie[$level['id']]['commission2']; ?>">
							</div>
							<?php endif; if($level['can_agent']>2): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div class="layui-form-mid">三级</div>
								<input type="text" name="commissionbutie[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php echo $commissionbutie[$level['id']]['commission3']; ?>">
							</div>
							<?php endif; ?>
						</div>
						<?php endforeach; ?>
						<?php endif; ?>
						<div class="layui-form-mid layui-word-aux layui-input-block">
							获得分销提成按照《系统设置》->《分销分红》->《分销补贴》处设置分期发放
						</div>
					</div>
				</div>
				<div id="commission_butie2" <?php if(!in_array($info['commissionset'],[1,5])): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">分期发放比例：</label>
					</div>
					<div class="layui-form-item">
						<?php if(!$aglevellist): ?>
						<div class="layui-form-item">
							<label class="layui-form-label">提成<?php echo t('积分'); ?>比例：</label>
							<div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div>
						</div>
						<?php else: foreach($aglevellist as $level): ?>
						<div class="layui-form-item">
							<label class="layui-form-label"><?php echo $level['name']; ?>：</label>
							<div class="layui-input-inline layui-module-itemL">
								<div> 一级(%) </div>
								<input type="text" name="commissionbutie2[<?php echo $level['id']; ?>][commission1]" class="layui-input" value="<?php echo $commissionbutie2[$level['id']]['commission1']; ?>">
							</div>
							<?php if($level['can_agent']>1): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div>二级(%)</div>
								<input type="text" name="commissionbutie2[<?php echo $level['id']; ?>][commission2]" class="layui-input" value="<?php echo $commissionbutie2[$level['id']]['commission2']; ?>">
							</div>
							<?php endif; if($level['can_agent']>2): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div class="layui-form-mid">三级(%)</div>
								<input type="text" name="commissionbutie2[<?php echo $level['id']; ?>][commission3]" class="layui-input" value="<?php echo $commissionbutie2[$level['id']]['commission3']; ?>">
							</div>
							<?php endif; ?>
						</div>
						<?php endforeach; ?>
						<?php endif; ?>
						<div class="layui-form-mid layui-word-aux layui-input-block">
							获得分销提成按照《系统设置》->《分销分红》->《分销补贴》处设置分期发放
						</div>
					</div>
				</div>
				<?php endif; if(getcustom('commission_jicha')): if($auth_data=='all' || in_array('commission_jicha',$auth_data)): ?>
				<div class="layui-form-item">
					<label class="layui-form-label">分销级差：</label>
					<div class="layui-input-block" >
						<input type="radio" name="info[fx_differential]" title="跟随系统设置" value="-1" <?php if($info['fx_differential']==-1 || $info['fx_differential']==''): ?>checked<?php endif; ?>/>
						<input type="radio" name="info[fx_differential]" title="是" value="1" <?php if($info['fx_differential']==1): ?>checked<?php endif; ?>/>
						<input type="radio" name="info[fx_differential]" title="否" value="0" <?php if($info['fx_differential']=='0'): ?>checked<?php endif; ?>/>
					</div>
					<div class="layui-form-mid layui-word-aux">开启后分销将按照级差进行计算，仅限按金额和比例方式</div>
				</div>
				<?php endif; ?>
				<?php endif; if(getcustom('commission_parent_pj_stop_product')): ?>
				<div class="layui-form-item">
					<label class="layui-form-label">提成平级奖</label>
    	<div class="layui-input-block" >
    		<input type="radio" name="info[commission_parent_pj_status]" value="0" title="按会员等级" <?php if($info['commission_parent_pj_status']==0): ?>checked<?php endif; ?>  lay-filter="commissionpj">
    		<input type="radio" name="info[commission_parent_pj_status]" value="1" title="单独设置" <?php if($info['commission_parent_pj_status']==1): ?>checked<?php endif; ?>  lay-filter="commissionpj">
    		<input type="radio" name="info[commission_parent_pj_status]" value="-1" title="关闭" <?php if(!$info['id'] || $info['commission_parent_pj_status']==-1): ?>checked<?php endif; ?>  lay-filter="commissionpj">
    	</div>
					<div class="layui-input-inline layui-module-itemL commissionpj" style="<?php if($info['commission_parent_pj_status']==0): ?>display:none;<?php endif; ?>">
						<div>平级级数</div>
						<input type="text" name="info[commission_parent_pj_lv]" class="layui-input" value="<?php echo (isset($info['commission_parent_pj_lv']) && ($info['commission_parent_pj_lv'] !== '')?$info['commission_parent_pj_lv']:0); ?>">
					</div>
					<div class="layui-input-inline layui-module-itemL commissionpj" style="<?php if($info['commission_parent_pj_status']==0): ?>display:none;<?php endif; ?>">
						<div>平级奖(元)</div>
						<input type="text" name="info[commission_parent_pj]" class="layui-input" value="<?php echo $info['commission_parent_pj']; ?>">
					</div>
					<div class="layui-input-inline layui-module-itemL commissionpj" style="<?php if($info['commission_parent_pj_status']==0): ?>display:none;<?php endif; ?>">
						<div>支付金额比例(%)</div>
						<input type="text" name="info[commission_parent_pj_order]" class="layui-input" value="<?php echo $info['commission_parent_pj_order']; ?>">
					</div>
					<div class="layui-form-mid layui-word-aux layui-clear">
						1、开启平级奖后推荐人级别和下级相等时只发放平级奖不发放提成<br/>
						2、开启平级奖后推荐人级别小于下级不发放提成<br/>
						3、平级级数代表处理团队多少级以内的会员，超出级数不再发放奖金，0表示不限制
					</div>
				</div>
				<?php endif; if(getcustom('commission_parent_pj') && !getcustom('commission_parent_pj_stop') && ($auth_data=='all' || in_array('commission_parent_pj',$auth_data))): ?>
				<div class="layui-form-item">
					<label class="layui-form-label">平级奖：</label>
    	<div class="layui-input-block" style="width:700px">
    		<input type="radio" name="info[commissionpingjiset]" value="0" <?php if($info['id'] && $info['commissionpingjiset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="commissionpingjiset">
						<input type="radio" name="info[commissionpingjiset]" value="1" <?php if($info['commissionpingjiset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="commissionpingjiset">
						<input type="radio" name="info[commissionpingjiset]" value="2" <?php if($info['commissionpingjiset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="commissionpingjiset">
    		<input type="radio" name="info[commissionpingjiset]" value="-1" <?php if(!$info['id'] || $info['commissionpingjiset']==-1): ?>checked<?php endif; ?> title="不参与平级奖" lay-filter="commissionpingjiset">
    	</div>
					<div class="layui-form-mid layui-word-aux">下级等级和自己等级相同时拿下级分销金额的奖励百分比或奖励金额，只给最近的上级</div>
				</div>
				<?php 
				$commissionpingjidata1 = json_decode($info['commissionpingjidata1'],true);
				if(!$commissionpingjidata1) $commissionpingjidata1 = [];
				$commissionpingjidata2 = json_decode($info['commissionpingjidata2'],true);
				if(!$commissionpingjidata2) $commissionpingjidata2  = [];
				 ?>
				<div id="commissionpingjiset1" <?php if($info['commissionpingjiset']!=1): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">奖励比例：</label>
						<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div><?php endif; foreach($aglevellist as $level): ?>
						<div class="layui-input-inline layui-module-itemL">
							<div> <?php echo $level['name']; ?>(%) </div>
							<input type="text" name="commissionpingjidata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionpingjidata1[$level['id']]['commission']; ?>">
						</div>
						<?php endforeach; ?>
					</div>
				</div>
				<div id="commissionpingjiset2" <?php if($info['commissionpingjiset']!=2): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">奖励金额：</label>
						<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($aglevellist as $level): ?>
						<div class="layui-input-inline layui-module-itemL">
							<div> <?php echo $level['name']; ?>(元) </div>
							<input type="text" name="commissionpingjidata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionpingjidata2[$level['id']]['commission']; ?>">
						</div>
						<?php endforeach; ?>
					</div>
				</div>
			<?php endif; if(getcustom('commission_parent_bcy_send_once')): ?>
				<div class="layui-form-item">
					<label class="layui-form-label">被超越奖：</label>
					<div class="layui-input-block" style="width:700px">
						<input type="radio" name="info[commissionbcyset]" value="0" <?php if(!$info['id'] || $info['commissionbcyset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="commissionbcyset">
						<input type="radio" name="info[commissionbcyset]" value="1" <?php if($info['commissionbcyset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="commissionbcyset">
						<input type="radio" name="info[commissionbcyset]" value="2" <?php if($info['commissionbcyset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="commissionbcyset">
						<input type="radio" name="info[commissionbcyset]" value="-1" <?php if($info['commissionbcyset']==-1): ?>checked<?php endif; ?> title="不参与被超越奖" lay-filter="commissionbcyset">
					</div>
					<div class="layui-form-mid layui-word-aux">当下级超越上级的时候，下级以下团队再出现订单会有一个被超越奖给最近的上级，只发一次</div>
				</div>
				<?php 
				$commissionbcydata1 = json_decode($info['commissionbcydata1'],true);
				if(!$commissionbcydata1) $commissionbcydata1 = [];
				$commissionbcydata2 = json_decode($info['commissionbcydata2'],true);
				if(!$commissionbcydata2) $commissionbcydata2  = [];
				 ?>
				<div id="commissionbcyset1" <?php if($info['commissionbcyset']!=1): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">奖励比例：</label>
						<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div><?php endif; foreach($aglevellist as $level): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div> <?php echo $level['name']; ?>(%) </div>
								<input type="text" name="commissionbcydata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionbcydata1[$level['id']]['commission']; ?>">
							</div>
						<?php endforeach; ?>
					</div>
				</div>
				<div id="commissionbcyset2" <?php if($info['commissionbcyset']!=2): ?>style="display:none"<?php endif; ?>>
					<div class="layui-form-item">
						<label class="layui-form-label">奖励金额：</label>
						<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($aglevellist as $level): ?>
							<div class="layui-input-inline layui-module-itemL">
								<div> <?php echo $level['name']; ?>(元) </div>
								<input type="text" name="commissionbcydata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionbcydata2[$level['id']]['commission']; ?>">
							</div>
						<?php endforeach; ?>
					</div>
				</div>
			<?php endif; if(getcustom('commission_bole')): ?>
			<div class="layui-form-item">
				<label class="layui-form-label">分销伯乐奖：</label>
				<div class="layui-input-block" style="width:700px">
					<input type="radio" name="info[commissionboleset]" value="0" <?php if(!$info['id'] || $info['commissionboleset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="commissionboleset">
					<input type="radio" name="info[commissionboleset]" value="1" <?php if($info['commissionboleset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="commissionboleset">
					<input type="radio" name="info[commissionboleset]" value="2" <?php if($info['commissionboleset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="commissionboleset">
					<input type="radio" name="info[commissionboleset]" value="-1" <?php if($info['commissionboleset']==-1): ?>checked<?php endif; ?> title="不参与伯乐奖" lay-filter="commissionboleset">
				</div>
				<div class="layui-form-mid layui-word-aux">拿下级会员分销提成的奖金比例或金额</div>
			</div>
			<?php 
			$commissionboledata1 = json_decode($info['commissionboledata1'],true);
			if(!$commissionboledata1) $commissionboledata1 = [];
			$commissionboledata2 = json_decode($info['commissionboledata2'],true);
			if(!$commissionboledata2) $commissionboledata2  = [];
			 ?>
			<div id="commissionboleset1" <?php if($info['commissionboleset']!=1): ?>style="display:none"<?php endif; ?>>
			<div class="layui-form-item">
				<label class="layui-form-label">奖励比例：</label>
				<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div><?php endif; foreach($aglevellist as $level): ?>
				<div class="layui-input-inline layui-module-itemL">
					<div> <?php echo $level['name']; ?>(%) </div>
					<input type="text" name="commissionboledata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionboledata1[$level['id']]['commission']; ?>">
				</div>
				<?php endforeach; ?>
			</div>
			</div>
			<div id="commissionboleset2" <?php if($info['commissionboleset']!=2): ?>style="display:none"<?php endif; ?>>
			<div class="layui-form-item">
				<label class="layui-form-label">奖励金额：</label>
				<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($aglevellist as $level): ?>
				<div class="layui-input-inline layui-module-itemL">
					<div> <?php echo $level['name']; ?>(元) </div>
					<input type="text" name="commissionboledata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $commissionboledata2[$level['id']]['commission']; ?>">
				</div>
				<?php endforeach; ?>
			</div>
			</div>
			<?php endif; ?>


	<!--************************直推平级奖start 20231115******************************-->
	<?php if(getcustom('zhitui_pj')): ?>
		<div class="layui-form-item">
			<label class="layui-form-label">直推平级奖：</label>
			<div class="layui-form-mid">
				推荐相同等级会员购物奖励<br/>
			</div>
		</div>
		<?php foreach($levellist as $level): ?>
		<div class="layui-form-item">
			<label class="layui-form-label"></label>
			<div class="layui-input-inline layui-module-itemL">
				<div><?php echo $level['name']; ?>推荐<?php echo $level['name']; ?></div>
				<input type="text" name="info[zhitui_pj][<?php echo $level['id']; ?>]" class="layui-input" value="<?php echo (isset($zhitui_pj[$level['id']]) && ($zhitui_pj[$level['id']] !== '')?$zhitui_pj[$level['id']]:0); ?>">元
			</div>
		</div>
		<?php endforeach; ?>
	<?php endif; ?>
	<!--************************直推平级奖end 20231115******************************-->

	<!--***********************************购车基金 start***************************************-->
	<?php if(getcustom('teamfenhong_gouche')): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('购车基金'); ?>：</label>
		<div class="layui-input-block" style="width:700px">
			<input type="radio" name="info[gouchebonusset]" value="0" <?php if(!$info['id'] || $info['gouchebonusset']==0): ?>checked<?php endif; ?> title="不参与<?php echo t('购车基金'); ?>" lay-filter="gouchebonusset">
			<input type="radio" name="info[gouchebonusset]" value="1" <?php if($info['gouchebonusset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="gouchebonusset">
			<input type="radio" name="info[gouchebonusset]" value="2" <?php if($info['gouchebonusset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="gouchebonusset">
		</div>
		<div class="layui-form-mid layui-word-aux">拿团队分红的同时根据等级分销<?php echo t('购车基金'); ?>条件拿奖励</div>
	</div>
	<?php 
	$gouchebonusdata1 = json_decode($info['gouchebonusdata1'],true);
	if(!$gouchebonusdata1) $gouchebonusdata1 = [];
	$gouchebonusdata2 = json_decode($info['gouchebonusdata2'],true);
	if(!$gouchebonusdata2) $gouchebonusdata2  = [];
	 ?>
	<div id="gouchebonusset1" <?php if($info['gouchebonusset']!=1): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励比例：</label>
			<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div><?php endif; foreach($aglevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL">
				<div> <?php echo $level['name']; ?>(%) </div>
				<input type="text" name="gouchebonusdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gouchebonusdata1[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<div id="gouchebonusset2" <?php if($info['gouchebonusset']!=2): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励金额：</label>
			<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($aglevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL">
				<div> <?php echo $level['name']; ?>(元) </div>
				<input type="text" name="gouchebonusdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gouchebonusdata2[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; ?>
	<!--***********************************购车基金 end***************************************-->

	<!--***********************************旅游基金 start***************************************-->
	<?php if(getcustom('teamfenhong_lvyou')): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('旅游基金'); ?>：</label>
		<div class="layui-input-block" style="width:700px">
			<input type="radio" name="info[lvyoubonusset]" value="0" <?php if(!$info['id'] || $info['lvyoubonusset']==0): ?>checked<?php endif; ?> title="不参与<?php echo t('旅游基金'); ?>" lay-filter="lvyoubonusset">
			<input type="radio" name="info[lvyoubonusset]" value="1" <?php if($info['lvyoubonusset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="lvyoubonusset">
			<input type="radio" name="info[lvyoubonusset]" value="2" <?php if($info['lvyoubonusset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="lvyoubonusset">
		</div>
		<div class="layui-form-mid layui-word-aux">拿团队分红的同时根据等级分销<?php echo t('旅游基金'); ?>条件拿奖励</div>
	</div>
	<?php 
	$lvyoubonusdata1 = json_decode($info['lvyoubonusdata1'],true);
	if(!$lvyoubonusdata1) $lvyoubonusdata1 = [];
	$lvyoubonusdata2 = json_decode($info['lvyoubonusdata2'],true);
	if(!$lvyoubonusdata2) $lvyoubonusdata2  = [];
	 ?>
	<div id="lvyoubonusset1" <?php if($info['lvyoubonusset']!=1): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励比例：</label>
			<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分销权限</div><?php endif; foreach($aglevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL">
				<div> <?php echo $level['name']; ?>(%) </div>
				<input type="text" name="lvyoubonusdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $lvyoubonusdata1[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<div id="lvyoubonusset2" <?php if($info['lvyoubonusset']!=2): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励金额：</label>
			<?php if(!$aglevellist): ?><div class="layui-form-mid" style="color:red">未设置具有分销权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($aglevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL">
				<div> <?php echo $level['name']; ?>(元) </div>
				<input type="text" name="lvyoubonusdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $lvyoubonusdata2[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; ?>
	<!--***********************************旅游基金 end***************************************-->

<?php endif; if($bid==0 && ($auth_data=='all' || in_array('gdfenhong',$auth_data) || in_array('teamfenhong',$auth_data) || in_array('areafenhong',$auth_data))): ?>
    <div class="layui-form-item">
    	<label class="layui-form-label">分红设置：</label>
    	<div class="layui-input-block" style="width:800px">
    		<input type="radio" name="info[fenhongset]" value="1" <?php if($info['id'] && $info['fenhongset']==1): ?>checked<?php endif; ?> title="参与" lay-filter="fenhongset">
    		<input type="radio" name="info[fenhongset]" value="0" <?php if(!$info['id'] || $info['fenhongset']==0): ?>checked<?php endif; ?> title="不参与" lay-filter="fenhongset">
    	</div>
    </div>
<div id="fenhongset" <?php if($info['id'] && $info['fenhongset']==0): ?>style="display:none"<?php endif; ?>>
<?php if($auth_data=='all' || in_array('teamfenhong',$auth_data)): ?>
    <div class="layui-form-item">
    	<label class="layui-form-label">团队分红：</label>
    	<div class="layui-input-block" style="width:850px">
    		<input type="radio" name="info[teamfenhongset]" value="0" <?php if($info['id'] && $info['teamfenhongset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongset]" value="1" <?php if($info['teamfenhongset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongset]" value="2" <?php if($info['teamfenhongset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<?php if(getcustom('fenhong_score_percent')): ?>
		<input type="radio" name="info[teamfenhongset]" value="4" <?php if($info['teamfenhongset']==4): ?>checked<?php endif; ?> title="单独设置分红<?php echo t('积分'); ?>比例" lay-filter="diandaSwitchMulti">
		<?php endif; if(getcustom('fenhong_score_percent') && getcustom('teamfenhong_score_num')): ?>
		<input type="radio" name="info[teamfenhongset]" value="6" <?php if($info['teamfenhongset']==6): ?>checked<?php endif; ?> title="单独设置分红数量" lay-filter="diandaSwitchMulti">
		<?php endif; if(getcustom('teamfenhong_wuxian')): ?>
		<input type="radio" name="info[teamfenhongset]" value="5" <?php if($info['teamfenhongset']==5): ?>checked<?php endif; ?> title="比例分红" lay-filter="diandaSwitchMulti">
		<?php endif; ?>
    		<input type="radio" name="info[teamfenhongset]" value="-1" <?php if(!$info['id'] || $info['teamfenhongset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
    	</div>
	<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单的分红金额或比例，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamfenhongdata1 = json_decode($info['teamfenhongdata1'],true);
if(!$teamfenhongdata1) $teamfenhongdata1 = [];
$teamfenhongdata2 = json_decode($info['teamfenhongdata2'],true);
if(!$teamfenhongdata2) $teamfenhongdata2  = [];
 ?>
<div diandaSwitchMulti="info[teamfenhongset]" data-val="1" <?php if($info['teamfenhongset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamfenhongdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongdata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[teamfenhongset]" data-val="2" <?php if($info['teamfenhongset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamfenhongdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php if(getcustom('fenhong_score_percent')): ?>
<div diandaSwitchMulti="info[teamfenhongset]" data-val="4" <?php if($info['teamfenhongset']!=4): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红<?php echo t('积分'); ?>比例：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamfenhongdata1[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $teamfenhongdata1[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; if(getcustom('fenhong_score_percent') && getcustom('teamfenhong_score_num')): ?>
<div diandaSwitchMulti="info[teamfenhongset]" data-val="6" <?php if($info['teamfenhongset']!=6): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红<?php echo t('积分'); ?>数量：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo $level['name']; ?> </div>
		<input type="text" name="teamfenhongdata2[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $teamfenhongdata2[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; if(getcustom('teamfenhong_wuxian')): ?>
<div diandaSwitchMulti="info[teamfenhongset]" data-val="5" <?php if($info['teamfenhongset']!=5): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">无限层级设置：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> 奖励金额 </div>
		<input type="text" name="teamfenhongdata1[commission]" class="layui-input" value="<?php echo $teamfenhongdata1['commission']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> 奖励比例(%) </div>
		<input type="text" name="teamfenhongdata1[bili]" class="layui-input" value="<?php echo $teamfenhongdata1['bili']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> 层级 </div>
		<input type="text" name="teamfenhongdata1[lv]" class="layui-input" value="<?php echo $teamfenhongdata1['lv']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux">奖励=（奖励金额-上级累计奖励）*比例，直到达到分红层级或者金额不足0.01停止，层级不设置或设置0代表不限制</div>
</div>
</div>
<?php endif; if(getcustom('active_coin')): 
$teamfenhongwallet = json_decode($info['teamfenhongwallet'],true);
if(!$teamfenhongwallet) $teamfenhongwallet = [];
 ?>
<div class="layui-form-item">
	<label class="layui-form-label">团队分红去向：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[teamfenhongwalletset]" value="0" <?php if(!$info['id'] || $info['teamfenhongwalletset']==0): ?>checked<?php endif; ?> title="关闭" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongwalletset]" value="1" <?php if($info['teamfenhongwalletset']==1): ?>checked<?php endif; ?> title="开启" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后团队分红按分配比例进入不同的钱包</div>
</div>
<div class="layui-form-item" diandaSwitchMulti="info[teamfenhongwalletset]" data-val="1" <?php if($info['teamfenhongwalletset']!=1): ?>style="display:none"<?php endif; ?>>
	<label class="layui-form-label">分配比例：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo t('佣金'); ?>(%) </div>
		<input type="text" name="teamfenhongwallet[commission]" class="layui-input" value="<?php echo $teamfenhongwallet['commission']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo t('积分'); ?>(%) </div>
		<input type="text" name="teamfenhongwallet[score]" class="layui-input" value="<?php echo $teamfenhongwallet['score']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo t('余额'); ?>(%) </div>
		<input type="text" name="teamfenhongwallet[money]" class="layui-input" value="<?php echo $teamfenhongwallet['money']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo t('扶持金'); ?>(%) </div>
		<input type="text" name="teamfenhongwallet[fuchi]" class="layui-input" value="<?php echo $teamfenhongwallet['fuchi']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux">团队分红奖金分配去向</div>
</div>
<?php endif; ?>
<?php endif; if(getcustom('teamfenhong_pingji') && ($auth_data == 'all' || in_array('teamfenhong_pingji',$auth_data))): ?>
<div class="layui-form-item">
	<label class="layui-form-label">团队分红平级奖：</label>
    		<div class="layui-input-block" style="width:850px">
    			<input type="radio" name="info[teamfenhongpjset]" value="0" <?php if($info['id'] && $info['teamfenhongpjset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongpjset]" value="1" <?php if($info['teamfenhongpjset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongpjset]" value="2" <?php if($info['teamfenhongpjset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="diandaSwitchMulti">
		<?php if(getcustom('fenhong_score_percent')): ?>
		<input type="radio" name="info[teamfenhongpjset]" value="4" <?php if($info['teamfenhongpjset']==4): ?>checked<?php endif; ?> title="单独设置奖励<?php echo t('积分'); ?>比例" lay-filter="diandaSwitchMulti">
		<?php endif; ?>
    			<input type="radio" name="info[teamfenhongpjset]" value="-1" <?php if(!$info['id'] || $info['teamfenhongpjset']==-1): ?>checked<?php endif; ?> title="不参与奖励" lay-filter="diandaSwitchMulti">
    		</div>
	<div class="layui-form-mid layui-word-aux">请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamfenhongpjdata1 = json_decode($info['teamfenhongpjdata1'],true);
if(!$teamfenhongpjdata1) $teamfenhongpjdata1 = [];
$teamfenhongpjdata2 = json_decode($info['teamfenhongpjdata2'],true);
if(!$teamfenhongpjdata2) $teamfenhongpjdata2  = [];
 ?>
<div diandaSwitchMulti="info[teamfenhongpjset]" data-val="1" <?php if($info['teamfenhongpjset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">奖励比例：</label>
	<?php if(!$teampjlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红平级奖权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teampjlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL mt5">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamfenhongpjdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongpjdata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[teamfenhongpjset]" data-val="2" <?php if($info['teamfenhongpjset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">奖励金额：</label>
	<?php if(!$teampjlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teampjlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamfenhongpjdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongpjdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php if(getcustom('fenhong_score_percent')): ?>
<div diandaSwitchMulti="info[teamfenhongpjset]" data-val="4" <?php if($info['teamfenhongpjset']!=4): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">奖励<?php echo t('积分'); ?>比例：</label>
	<?php if(!$teampjlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teampjlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamfenhongpjdata1[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $teamfenhongpjdata1[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; ?>
<?php endif; if(getcustom('teamfenhong_jicha')): ?>
<fieldset class="layui-elem-field">
	<legend>团队级差分红</legend>
<div id="teamfenhong_jiuqianset">
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('团队级差分红'); ?>：</label>
    		<div class="layui-input-block" style="width:850px">
    			<input type="radio" name="info[teamjichaset]" value="0" <?php if($info['id'] && $info['teamjichaset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamjichaset]" value="1" <?php if($info['teamjichaset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamjichaset]" value="2" <?php if($info['teamjichaset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
    			<input type="radio" name="info[teamjichaset]" value="-1" <?php if(!$info['id'] || $info['teamjichaset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
    		</div>
		<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单的分红金额或比例</div>
	</div>
<?php 
$teamjichadata1 = json_decode($info['teamjichadata1'],true);
if(!$teamjichadata1) $teamjichadata1 = [];
$teamjichadata2 = json_decode($info['teamjichadata2'],true);
if(!$teamjichadata2) $teamjichadata2  = [];
 ?>
	<div diandaSwitchMulti="info[teamjichaset]" data-val="1" <?php if($info['teamjichaset']!=1): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">分红比例：</label>
		<!--	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>-->
			<?php foreach($teamjichalevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL mt5">
				<div> <?php echo $level['name']; ?>(%) </div>
				<input type="text" name="teamjichadata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjichadata1[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<div diandaSwitchMulti="info[teamjichaset]" data-val="2" <?php if($info['teamjichaset']!=2): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">分红金额：</label>
		<!--	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>-->
			<?php foreach($teamjichalevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL mt5">
				<div> <?php echo $level['name']; ?>(元) </div>
				<input type="text" name="teamjichadata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjichadata2[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>

	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('团队级差分红'); ?>平级奖：</label>
		<div class="layui-input-block" style="width:850px">
			<input type="radio" name="info[teamjichapjset]" value="0" <?php if(!$info['id'] || $info['teamjichapjset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamjichapjset]" value="1" <?php if($info['teamjichapjset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamjichapjset]" value="2" <?php if($info['teamjichapjset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamjichapjset]" value="-1" <?php if($info['teamjichapjset']==-1): ?>checked<?php endif; ?> title="不参与奖励" lay-filter="diandaSwitchMulti">
		</div>
		<div class="layui-form-mid layui-word-aux"></div>
	</div>
<?php 
$teamjichapjdata1 = json_decode($info['teamjichapjdata1'],true);
if(!$teamjichapjdata1) $teamjichapjdata1 = [];
$teamjichapjdata2 = json_decode($info['teamjichapjdata2'],true);
if(!$teamjichapjdata2) $teamjichapjdata2  = [];
 ?>
	<div diandaSwitchMulti="info[teamjichapjset]" data-val="1" <?php if($info['teamjichapjset']!=1): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励比例：</label>
			<?php if(!$teamjichalevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红平级奖权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjichalevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL mt5">
				<div> <?php echo $level['name']; ?>(%) </div>
				<input type="text" name="teamjichapjdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjichapjdata1[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
	<div  diandaSwitchMulti="info[teamjichapjset]" data-val="2" <?php if($info['teamjichapjset']!=2): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label">奖励金额：</label>
			<?php if(!$teamjichalevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjichalevellist as $level): ?>
			<div class="layui-input-inline layui-module-itemL">
				<div> <?php echo $level['name']; ?>(元) </div>
				<input type="text" name="teamjichapjdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjichapjdata2[$level['id']]['commission']; ?>">
			</div>
			<?php endforeach; ?>
		</div>
	</div>
</div>
</fieldset>
<?php endif; if(getcustom('team_leader_fh')): ?>
<fieldset class="layui-elem-field">
	<legend>团队长分红</legend>
	<div id="teamleader_fenhong_set">
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('团队长分红'); ?>：</label>
		<div class="layui-input-block" style="width:850px">
			<input type="radio" name="info[teamleader_fenhongset]" value="0" <?php if(!$info['id'] || $info['teamleader_fenhongset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamleader_fenhongset]" value="1" <?php if($info['teamleader_fenhongset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamleader_fenhongset]" value="2" <?php if($info['teamleader_fenhongset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
			<input type="radio" name="info[teamleader_fenhongset]" value="-1" <?php if($info['teamleader_fenhongset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
		</div>
		<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单的分红金额或比例</div>
	</div>
	<?php 
	$teamleader_fenhongdata1 = json_decode($info['teamleader_fenhongdata1'],true);
	if(!$teamleader_fenhongdata1) $teamleader_fenhongdata1 = [];
	$teamleader_fenhongdata2 = json_decode($info['teamleader_fenhongdata2'],true);
	if(!$teamleader_fenhongdata2) $teamleader_fenhongdata2  = [];
	 ?>
	<div diandaSwitchMulti="info[teamleader_fenhongset]" data-val="1" <?php if($info['teamleader_fenhongset']!=1): ?>style="display:none"<?php endif; ?>>
	<div class="layui-form-item">
		<label class="layui-form-label">分红比例：</label>
		<!--	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>-->
		<?php foreach($teamjichalevellist as $level): ?>
		<div class="layui-input-inline layui-module-itemL">
			<div> <?php echo $level['name']; ?>(%) </div>
			<input type="text" name="teamleader_fenhongdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamleader_fenhongdata1[$level['id']]['commission']; ?>">
		</div>
		<?php endforeach; ?>
	</div>
</div>
<div diandaSwitchMulti="info[teamleader_fenhongset]" data-val="2" <?php if($info['teamleader_fenhongset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<!--	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; ?>-->
	<?php foreach($teamjichalevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamleader_fenhongdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamleader_fenhongdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>

</div>
</fieldset>
<?php endif; if(getcustom('teamfenhong_bole') && ($auth_data=='all' || in_array('teamfenhong_bole',$auth_data))): ?>
<div class="layui-form-item">
	<label class="layui-form-label">团队分红伯乐奖：</label>
	<div class="layui-input-block" style="width:700px">
		<input type="radio" name="info[teamfenhongblset]" value="0" <?php if(!$info['id'] || $info['teamfenhongblset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongblset]" value="1" <?php if($info['teamfenhongblset']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongblset]" value="2" <?php if($info['teamfenhongblset']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="diandaSwitchMulti">

		<input type="radio" name="info[teamfenhongblset]" value="-1" <?php if($info['teamfenhongblset']==-1): ?>checked<?php endif; ?> title="不参与奖励" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamfenhongbldata1 = json_decode($info['teamfenhongbldata1'],true);
if(!$teamfenhongbldata1) $teamfenhongbldata1 = [];
$teamfenhongbldata2 = json_decode($info['teamfenhongbldata2'],true);
if(!$teamfenhongbldata2) $teamfenhongbldata2  = [];
 ?>
<div diandaSwitchMulti="info[teamfenhongblset]" data-val="1" <?php if($info['teamfenhongblset']!=1): ?>style="display:none"<?php endif; ?>>
	<div class="layui-form-item">
		<label class="layui-form-label">奖励比例：</label>
		<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红平级奖权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
		<div class="layui-input-inline layui-module-itemL mt5">
			<div> <?php echo $level['name']; ?>(%) </div>
			<input type="text" name="teamfenhongbldata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongbldata1[$level['id']]['commission']; ?>">
			<input type="text" name="teamfenhongbldata1[<?php echo $level['id']; ?>][commission_tuoli]" class="layui-input" value="<?php echo $teamfenhongbldata1[$level['id']]['commission_tuoli']; ?>" placeholder="脱离比例">
		</div>
		<?php endforeach; ?>
	</div>
</div>
<div  diandaSwitchMulti="info[teamfenhongblset]" data-val="2" <?php if($info['teamfenhongblset']!=2): ?>style="display:none"<?php endif; ?>>
	<div class="layui-form-item">
		<label class="layui-form-label">奖励金额：</label>
		<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamlevellist as $level): ?>
		<div class="layui-input-inline layui-module-itemL mt5">
			<div> <?php echo $level['name']; ?>(元) </div>
			<input type="text" name="teamfenhongbldata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongbldata2[$level['id']]['commission']; ?>">
			<input type="text" name="teamfenhongbldata2[<?php echo $level['id']; ?>][commission_tuoli]" class="layui-input" value="<?php echo $teamfenhongbldata2[$level['id']]['commission_tuoli']; ?>" placeholder="脱离金额">
		</div>
		<?php endforeach; ?>
	</div>
</div>
<?php endif; if($auth_data=='all' || in_array('gdfenhong',$auth_data)): ?>
<div class="layui-form-item">
	<label class="layui-form-label">股东分红：</label>
	<div class="layui-input-block" style="width:980px">
		<input type="radio" name="info[gdfenhongset]" value="0" <?php if(!$info['id'] || $info['gdfenhongset']==0): ?>checked<?php endif; ?> title="按照会员等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[gdfenhongset]" value="1" <?php if($info['gdfenhongset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[gdfenhongset]" value="2" <?php if($info['gdfenhongset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<?php if(getcustom('gdfenhong_score')): ?>
		<input type="radio" name="info[gdfenhongset]" value="3" <?php if($info['gdfenhongset']==3): ?>checked<?php endif; ?> title="单独设置分红<?php echo t('积分'); ?>" lay-filter="diandaSwitchMulti">
		<?php endif; if(getcustom('fenhong_score_percent')): ?>
		<input type="radio" name="info[gdfenhongset]" value="4" <?php if($info['gdfenhongset']==4): ?>checked<?php endif; ?> title="单独设置分红<?php echo t('积分'); ?>比例" lay-filter="diandaSwitchMulti">
		<?php endif; ?>
		<input type="radio" name="info[gdfenhongset]" value="-1" <?php if($info['gdfenhongset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">用于股东分红或合伙人分红，开启后相应等级的所有<?php echo t('会员'); ?>平均分摊设置的分红金额或比例</div>
</div>
<?php 
$gdfenhongdata1 = json_decode($info['gdfenhongdata1'],true);
if(!$gdfenhongdata1) $gdfenhongdata1 = [];
$gdfenhongdata2 = json_decode($info['gdfenhongdata2'],true);
if(!$gdfenhongdata2) $gdfenhongdata2  = [];
 ?>
<div diandaSwitchMulti="info[gdfenhongset]" data-val="1" <?php if($info['gdfenhongset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$gdlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="gdfenhongdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gdfenhongdata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[gdfenhongset]" data-val="2" <?php if($info['gdfenhongset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$gdlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="gdfenhongdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gdfenhongdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[gdfenhongset]" data-val="3" <?php if($info['gdfenhongset']!=3): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红<?php echo t('积分'); ?>：</label>
	<?php if(!$gdlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?> </div>
		<input type="text" name="gdfenhongdata2[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $gdfenhongdata2[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div  diandaSwitchMulti="info[gdfenhongset]" data-val="4" <?php if($info['gdfenhongset']!=4): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红<?php echo t('积分'); ?>比例：</label>
	<?php if(!$gdlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="gdfenhongdata1[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $gdfenhongdata1[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; if($auth_data=='all' || in_array('areafenhong',$auth_data)): ?>
<div class="layui-form-item">
	<label class="layui-form-label">区域代理分红：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[areafenhongset]" value="0" <?php if(!$info['id'] || $info['areafenhongset']==0): ?>checked<?php endif; ?> title="按照会员等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[areafenhongset]" value="1" <?php if($info['areafenhongset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[areafenhongset]" value="2" <?php if($info['areafenhongset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<?php if(getcustom('fenhong_score_percent')): ?>
		<input type="radio" name="info[areafenhongset]" value="4" <?php if($info['areafenhongset']==4): ?>checked<?php endif; ?> title="单独设置分红<?php echo t('积分'); ?>比例" lay-filter="diandaSwitchMulti">
		<?php endif; ?>
		<input type="radio" name="info[areafenhongset]" value="-1" <?php if($info['areafenhongset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">设置分红比例或分红金额后该等级的同一个代理区域的人平均分摊所有商城内该区域的订单的分红提成比例或分红金额</div>
</div>
<?php 
$areafenhongdata1 = json_decode($info['areafenhongdata1'],true);
if(!$areafenhongdata1) $areafenhongdata1 = [];
$areafenhongdata2 = json_decode($info['areafenhongdata2'],true);
if(!$areafenhongdata2) $areafenhongdata2  = [];
 ?>
<div diandaSwitchMulti="info[areafenhongset]" data-val="1" <?php if($info['areafenhongset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$areafhlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有区域代理分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($areafhlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="areafenhongdata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $areafenhongdata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[areafenhongset]" data-val="2" <?php if($info['areafenhongset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$areafhlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有区域代理分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($areafhlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="areafenhongdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $areafenhongdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[areafenhongset]" data-val="4" <?php if($info['areafenhongset']!=4): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红<?php echo t('积分'); ?>比例：</label>
	<?php if(!$areafhlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有区域代理分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($areafhlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="areafenhongdata1[<?php echo $level['id']; ?>][score]" class="layui-input" value="<?php echo $areafenhongdata1[$level['id']]['score']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; ?>
<!--团队见单分红start-->
<?php if(getcustom('teamfenhong_jiandan') && ($auth_data=='all' || in_array('teamfenhongJiandan',$auth_data))): ?>
<div class="layui-form-item">
	<label class="layui-form-label">团队见单分红：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[teamfenhongjdset]" value="0" <?php if(!$info['id'] || $info['teamfenhongjdset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongjdset]" value="1" <?php if($info['teamfenhongjdset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongjdset]" value="2" <?php if($info['teamfenhongjdset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongjdset]" value="-1" <?php if($info['teamfenhongjdset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单的分红金额或比例，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamfenhongjddata1 = $info['teamfenhongjddata1']?json_decode($info['teamfenhongjddata1'],true):[];
$teamfenhongjddata2 = $info['teamfenhongjddata2']?json_decode($info['teamfenhongjddata2'],true):[];
 ?>
<div diandaSwitchMulti="info[teamfenhongjdset]" data-val="1" <?php if($info['teamfenhongjdset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$teamlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamfenhongjddata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongjddata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[teamfenhongjdset]" data-val="2" <?php if($info['teamfenhongjdset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$teamjdlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjdlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamfenhongjddata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongjddata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; ?>
<!--团队见单分红end-->



<?php if(getcustom('teamfenhong_freight_money')): if($auth_data=='all' || in_array('teamfenhong_freight',$auth_data)): ?>
<!--运费补贴start-->
<fieldset class="layui-elem-field">
	<legend>运费补贴</legend>
<div class="layui-form-item">
	<label class="layui-form-label">运费补贴：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[teamfenhongfreightset]" value="0" <?php if(!$info['id'] || $info['teamfenhongfreightset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongfreightset]" value="2" <?php if($info['teamfenhongfreightset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongfreightset]" value="-1" <?php if($info['teamfenhongfreightset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单运费的分红金额或比例，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamfenhongfreightdata2 = $info['teamfenhongfreightdata2']?json_decode($info['teamfenhongfreightdata2'],true):[];
 ?>
<div diandaSwitchMulti="info[teamfenhongfreightset]" data-val="2" <?php if($info['teamfenhongfreightset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$teamfreightlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamfreightlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamfenhongfreightdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongfreightdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>

<?php endif; ?>
<!--运费补贴团队分红end-->
<!--运费补贴平级设置start-->
<?php if($auth_data == 'all' || in_array('teamfenhong_freight_pingji',$auth_data)): ?>
<div class="layui-form-item">
	<label class="layui-form-label">运费补贴平级奖：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[teamfenhongfreightpjset]" value="0" <?php if(!$info['id'] || $info['teamfenhongfreightpjset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongfreightpjset]" value="2" <?php if($info['teamfenhongfreightpjset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamfenhongfreightpjset]" value="-1" <?php if($info['teamfenhongfreightpjset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux"></div>
</div>
<?php 
$teamfenhongfreightpjdata2 = $info['teamfenhongfreightpjdata2']?json_decode($info['teamfenhongfreightpjdata2'],true):[];
 ?>
<div diandaSwitchMulti="info[teamfenhongfreightpjset]" data-val="2" <?php if($info['teamfenhongfreightpjset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">奖励金额：</label>
	<?php if(!$teamfreightpjlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamfreightpjlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamfenhongfreightpjdata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamfenhongfreightpjdata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; ?>
</fieldset>
<!--运费补贴平级设置end-->
<?php endif; ?>  <!--teamfenhong_freight_money定制结束-->




<?php if(getcustom('level_teamfenhong')): ?>
<!-- 等级团队分红s -->
	<?php if($auth_data=='all' || in_array('level_teamfenhong',$auth_data)): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('等级团队分红'); ?>：</label>
		<div class="layui-input-block" style="width:850px">
			<input type="radio" name="info[level_teamfenhongset]" value="0" <?php if(!$info['id'] || $info['level_teamfenhongset']==0): ?>checked<?php endif; ?> title="按照<?php echo t('会员'); ?>等级" lay-filter="level_teamfenhongset">
			<input type="radio" name="info[level_teamfenhongset]" value="1" <?php if($info['level_teamfenhongset']==1): ?>checked<?php endif; ?> title="单独设置" lay-filter="level_teamfenhongset">
			<input type="radio" name="info[level_teamfenhongset]" value="-1" <?php if($info['level_teamfenhongset']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="level_teamfenhongset">
		</div>
	</div>
	<div id="levelteamfenhongset" class="layui-form-item" <?php if($info['level_teamfenhongset'] != 1): ?>style="display:none"<?php endif; ?>>
		<?php foreach($levellist as $v): ?>
		<div class="layui-form-item">
			<label class="layui-form-label"><?php echo $v['name']; ?>：</label>
			<input type="hidden" name="levelteamfenhongs[<?php echo $v['id']; ?>][id]" class="layui-input" value="<?php echo !empty($levelteamfenhongs[$v['id']]['id']) ? $levelteamfenhongs[$v['id']]['id'] : $v['id']; ?>">
			<div class="layui-input-inline layui-module-itemL">
				<div>团队等级ID</div>
				<input type="text" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhong_ids]" class="layui-input" value="<?php echo $levelteamfenhongs[$v['id']]['level_teamfenhong_ids']; ?>">
			</div>
			<div class="layui-input-inline layui-module-itemL">
				<div>分红级数</div>
				<input type="text" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhonglv]" class="layui-input" value="<?php echo (isset($levelteamfenhongs[$v['id']]['level_teamfenhonglv']) && ($levelteamfenhongs[$v['id']]['level_teamfenhonglv'] !== '')?$levelteamfenhongs[$v['id']]['level_teamfenhonglv']:0); ?>">
			</div>
			<div class="layui-input-inline" style="width: 130px;margin-right: 0;">
				<select name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhongbl_type]" lay-verify="required">
					<option value="0" <?php if(!$levelteamfenhongs[$v['id']]['level_teamfenhongbl_type'] || $levelteamfenhongs[$v['id']]['level_teamfenhongbl_type'] == 0): ?>selected<?php endif; ?> >分红比例(%)</option>
					<option value="1" <?php if($levelteamfenhongs[$v['id']]['level_teamfenhongbl_type'] == 1): ?>selected<?php endif; ?> >分红固定金额</option>
				</select>
			</div>
			<div class="layui-input-inline layui-module-itemL">
				<input type="text" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhongbl]" class="layui-input" value="<?php echo (isset($levelteamfenhongs[$v['id']]['level_teamfenhongbl']) && ($levelteamfenhongs[$v['id']]['level_teamfenhongbl'] !== '')?$levelteamfenhongs[$v['id']]['level_teamfenhongbl']:0); ?>">
			</div>
			<div class="layui-input-inline layui-module-itemL">
				<div>每单分红金额</div>
				<input type="text" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhong_money]" class="layui-input" value="<?php echo (isset($levelteamfenhongs[$v['id']]['level_teamfenhong_money']) && ($levelteamfenhongs[$v['id']]['level_teamfenhong_money'] !== '')?$levelteamfenhongs[$v['id']]['level_teamfenhong_money']:0); ?>">
			</div>
			<div class="layui-form-mid">只给最近的上级分红</div>
			<div class="layui-input-inline" style="width: 100px;">
				<input type="checkbox" lay-skin="switch" lay-text="开启|关闭" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_teamfenhongonly]" value="1" <?php if($levelteamfenhongs[$v['id']]['level_teamfenhongonly']==1): ?>checked<?php endif; ?> title="只返最近的上级" lay-skin="primary">
			</div>
			<div class="layui-form-mid">直属下级等级超越此等级</div>
			<div class="layui-input-inline" style="width: 100px;">
				<input type="checkbox" lay-skin="switch" lay-text="开启|关闭" name="levelteamfenhongs[<?php echo $v['id']; ?>][level_surpass]" value="1" <?php if($levelteamfenhongs[$v['id']]['level_surpass']==1): ?>checked<?php endif; ?> title="直属下级等级超越此等级" lay-skin="primary">
			</div>
			<div class="layui-form-mid">级差</div>
			<div class="layui-input-inline" style="width: 130px;margin-right: 0;">
				<select name="levelteamfenhongs[<?php echo $v['id']; ?>][level_jicha]" lay-verify="required">
					<option value="-1" <?php if($levelteamfenhongs[$v['id']]['level_jicha'] == -1): ?>selected<?php endif; ?> >关闭</option>
					<option value="0" <?php if(!$levelteamfenhongs[$v['id']]['level_jicha'] || $levelteamfenhongs[$v['id']]['level_jicha'] == 0): ?>selected<?php endif; ?> >跟随系统设置</option>
					<option value="1" <?php if($levelteamfenhongs[$v['id']]['level_jicha'] == 1): ?>selected<?php endif; ?> >开启</option>
				</select>
			</div>
		</div>
		<?php endforeach; ?>
		<div class="layui-form-mid layui-word-aux layui-clear">
			等级ID：多个用英文逗号“,”分隔；设置等级ID、分红级数和分红比例后伞下该等级的人可以拿到其下等级几代ID下[分红级数]所有<?php echo t('会员'); ?>的所有商城订单的分红提成比例或分红固定金额+每单分红金额；
			<br>开启只给最近的上级分红表示如果下单人有多个上级均符合分红条件则只给离他最近的上级分红，其他上级不分红
			<br>开启直属下级等级超越此级别后，需要直属下级等级大于此等级，且直属下级及直属下级的下级团队符合[团队等级ID]设置
		</div>
	</div>
	<?php endif; ?>
<!-- 等级团队分红e -->
<?php endif; ?>
<!--团队见点奖start-->
<?php if(getcustom('team_jiandian') && ($auth_data=='all' || in_array('team_jiandian',$auth_data))): ?>
<div class="layui-form-item">
	<label class="layui-form-label">团队见点奖：</label>
	<div class="layui-input-block" style="width:850px">
		<input type="radio" name="info[teamjiandianset]" value="0" <?php if(!$info['id'] || $info['teamjiandianset']==0): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamjiandianset]" value="1" <?php if($info['teamjiandianset']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[teamjiandianset]" value="2" <?php if($info['teamjiandianset']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后可以拿到团队中所有<?php echo t('会员'); ?>的所有商城订单的分红金额或比例，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置分红级数</div>
</div>
<?php 
$teamjiandiandata1 = $info['teamjiandiandata1']?json_decode($info['teamjiandiandata1'],true):[];
$teamjiandiandata2 = $info['teamjiandiandata2']?json_decode($info['teamjiandiandata2'],true):[];
 ?>
<div diandaSwitchMulti="info[teamjiandianset]" data-val="1" <?php if($info['teamjiandianset']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$teamjiandianlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队见点奖权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjiandianlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="teamjiandiandata1[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjiandiandata1[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[teamjiandianset]" data-val="2" <?php if($info['teamjiandianset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$teamjiandianlevellist): ?><div class="layui-form-mid" style="color:red">未设置具有团队分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($teamjiandianlevellist as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="teamjiandiandata2[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $teamjiandiandata2[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<?php endif; ?>
<!--团队见点奖end-->
</div>
<?php endif; if(getcustom('fenhong_gudong_huiben')): if($auth_data=='all' || in_array('gdfenhong_huiben',$auth_data)): ?>
<!--回本股东分红 start-->
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('回本股东分红'); ?>：</label>
	<div class="layui-input-block" style="width:980px">
		<input type="radio" name="info[gdfenhongset_huiben]" value="0" <?php if(!$info['id'] || $info['gdfenhongset_huiben']==0): ?>checked<?php endif; ?> title="按照会员等级" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[gdfenhongset_huiben]" value="1" <?php if($info['gdfenhongset_huiben']==1): ?>checked<?php endif; ?> title="单独设置分红比例" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[gdfenhongset_huiben]" value="2" <?php if($info['gdfenhongset_huiben']==2): ?>checked<?php endif; ?> title="单独设置分红金额" lay-filter="diandaSwitchMulti">
		<input type="radio" name="info[gdfenhongset_huiben]" value="-1" <?php if($info['gdfenhongset_huiben']==-1): ?>checked<?php endif; ?> title="不参与分红" lay-filter="diandaSwitchMulti">
	</div>
	<div class="layui-form-mid layui-word-aux">用于<?php echo t('回本股东分红'); ?>或合伙人分红，开启后相应等级的所有<?php echo t('会员'); ?>平均分摊设置的分红金额或比例</div>
</div>
<?php 
$gdfenhongdata1_huiben = json_decode($info['gdfenhongdata1_huiben'],true);
if(!$gdfenhongdata1_huiben) $gdfenhongdata1_huiben = [];
$gdfenhongdata2_huiben = json_decode($info['gdfenhongdata2_huiben'],true);
if(!$gdfenhongdata2_huiben) $gdfenhongdata2_huiben = [];
 ?>
<div diandaSwitchMulti="info[gdfenhongset_huiben]" data-val="1" <?php if($info['gdfenhongset_huiben']!=1): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红比例：</label>
	<?php if(!$gdlevellist_huiben): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist_huiben as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(%) </div>
		<input type="text" name="gdfenhongdata1_huiben[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gdfenhongdata1_huiben[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<div diandaSwitchMulti="info[gdfenhongset_huiben]" data-val="2" <?php if($info['gdfenhongset_huiben']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label">分红金额：</label>
	<?php if(!$gdlevellist_huiben): ?><div class="layui-form-mid" style="color:red">未设置具有股东分红权限的<?php echo t('会员'); ?>等级，请先在[<?php echo t('会员'); ?>]-[等级及分销]设置</div><?php endif; foreach($gdlevellist_huiben as $level): ?>
	<div class="layui-input-inline layui-module-itemL">
		<div> <?php echo $level['name']; ?>(元) </div>
		<input type="text" name="gdfenhongdata2_huiben[<?php echo $level['id']; ?>][commission]" class="layui-input" value="<?php echo $gdfenhongdata2_huiben[$level['id']]['commission']; ?>">
	</div>
	<?php endforeach; ?>
</div>
</div>
<!--回本股东分红 end-->
<?php endif; ?>
<?php endif; if(getcustom('product_commission_mid')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">指定<?php echo t('会员'); ?>佣金：</label>
	<div class="layui-input-block" style="width:800px">
		<table class="layui-table product_commission_mid" style="width:540px" id="product_commission_mid">
			<thead>
			<tr>
				<th><?php echo t('会员'); ?>ID</th>
				<th>名称</th>
				<th>提成比例(%)</th>
				<th>提成金额</th>
				<th>操作</th>
			</tr>
			</thead>
			<?php if($info['commission_mid']): foreach($info['commission_mid'] as $k=>$item): ?>
			<tr class="choose-tr-list">
				<td><input type="text" name="commission_mid[<?php echo $item['ks']; ?>][mid]" value="<?php echo $item['mid']; ?>" class="layui-input" style="width:70px"/></td>
				<td><input type="text" name="commission_mid[<?php echo $item['ks']; ?>][name]" value="<?php echo $item['name']; ?>" class="layui-input" style="width:120px"/></td>
				<td><input type="text" name="commission_mid[<?php echo $item['ks']; ?>][percent]" value="<?php echo $item['percent']; ?>" class="layui-input" style="width:70px"/></td>
				<td><input type="text" name="commission_mid[<?php echo $item['ks']; ?>][money]" value="<?php echo $item['money']; ?>" class="layui-input" style="width:70px"/></td>
				<td><input type="hidden" name="commission_mid[<?php echo $item['ks']; ?>][ks]" value="<?php echo $item['ks']; ?>"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delChooseTrUp(this)">删除</button></td>
			</tr>
			<?php endforeach; ?>
			<?php endif; ?>
			<tr class="choose-tr-add">
				<td colspan="5" align="center"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addChooseTrUp()">添加</button></td>
			</tr>
		</table>
		<script>
			let ks_c = <?php echo count($info['commission_mid']); ?>;
			function addChooseTrUp(){
				var chooseClassName = '.product_commission_mid';
				var tr = '<tr class="choose-tr-list">' +
						'<td><input type="text" name="commission_mid['+ks_c+'][mid]" value="" class="layui-input" style="width:70px"/></td>'+
						'<td><input type="text" name="commission_mid['+ks_c+'][name]" value="" class="layui-input" style="width:120px"/></td>'+
						'<td><input type="text" name="commission_mid['+ks_c+'][percent]" value="" class="layui-input" style="width:70px"/></td>'+
						'<td><input type="text" name="commission_mid['+ks_c+'][money]" value="" class="layui-input" style="width:70px"/></td>'+
						'<td><input type="hidden" name="commission_mid['+ks_c+'][ks]" value="'+ks_c+'"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delChooseTrUp(this)">删除</button></td>' +
						'</tr>';
				ks_c +=1;
				$(chooseClassName).find('.choose-tr-add').before(tr);
			}
			function delChooseTrUp(obj){
				$(obj).closest('.choose-tr-list').remove();
			}
		</script>
	</div>
</div>
<?php endif; ?>
<!--加权分红S-->
<?php if(getcustom('fenhong_jiaquan_bylevel')): ?>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('加权分红'); ?>：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[fenhong_jq_status]" value="0" <?php if(!$info['id'] || $info['fenhong_jq_status']==0): ?>checked<?php endif; ?> title="不参与">
		<input type="radio" name="info[fenhong_jq_status]" value="1" <?php if($info['id'] && $info['fenhong_jq_status']==1): ?>checked<?php endif; ?> title="参与">
	</div>
</div>
<?php endif; ?>
<!--加权分红E-->
<?php if($bid==0 || $business_selfscore == 1): ?>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('积分'); ?>抵扣：</label>
    	<div class="layui-input-block" style="width:800px">
    		<input type="radio" name="info[scoredkmaxset]" value="0" <?php if($info['id'] && $info['scoredkmaxset']==0): ?>checked<?php endif; ?> title="按照系统设置抵扣" lay-filter="scoredkmaxset">
		<input type="radio" name="info[scoredkmaxset]" value="1" <?php if($info['scoredkmaxset']==1): ?>checked<?php endif; ?> title="单独设置抵扣比例" lay-filter="scoredkmaxset">
		<input type="radio" name="info[scoredkmaxset]" value="2" <?php if($info['scoredkmaxset']==2): ?>checked<?php endif; ?> title="单独设置抵扣金额" lay-filter="scoredkmaxset">
    		<input type="radio" name="info[scoredkmaxset]" value="-1" <?php if(!$info['id'] || $info['scoredkmaxset']==-1): ?>checked<?php endif; ?> title="不可用<?php echo t('积分'); ?>抵扣" lay-filter="scoredkmaxset">
    	</div>
</div>
<div id="scoredkmaxset1" <?php if($info['scoredkmaxset']!=1 && $info['scoredkmaxset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label"></label>
	<div class="layui-input-inline layui-module-itemL">
		<div>最多抵扣(<span id="scoredkmaxunit"><?php echo $info['scoredkmaxset']==1 ? '%' : '元'; ?></span>) </div>
		<input type="text" name="info[scoredkmaxval]" value="<?php echo $info['scoredkmaxval']; ?>" class="layui-input">
	</div>
</div>
</div>
<?php if($info['bid']>0): ?>
<div class="layui-form-item">
	<label class="layui-form-label">抽成费率：</label>
	<div class="layui-input-inline" style="width:200px">
		<input type="text" name="info[feepercent]" class="layui-input" value="<?php echo $info['feepercent']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">%，平台收取的佣金比例，留空使用商户统一费率，如设置10%，平台抽佣10%，商家得90%；设置0则不抽成</div>
</div>
<?php endif; else: ?>
<div class="layui-form-item">
	<label class="layui-form-label">抽成费率：</label>
	<div class="layui-input-inline" style="width:200px">
		<input type="text" name="" disabled readonly class="layui-input layui-disabled" value="<?php echo $info['feepercent']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">%，平台收取的佣金比例，留空使用商户统一费率(商家不可修改)</div>
</div>
<?php endif; if(getcustom('product_givetongzheng')): ?>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('通证'); ?>抵扣：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[tongzhengdkmaxset]" value="0" <?php if(!$info['id'] || $info['tongzhengdkmaxset']==0): ?>checked<?php endif; ?> title="按照系统设置抵扣" lay-filter="tongzhengdkmaxset">
		<input type="radio" name="info[tongzhengdkmaxset]" value="1" <?php if($info['tongzhengdkmaxset']==1): ?>checked<?php endif; ?> title="单独设置抵扣比例" lay-filter="tongzhengdkmaxset">
		<input type="radio" name="info[tongzhengdkmaxset]" value="2" <?php if($info['tongzhengdkmaxset']==2): ?>checked<?php endif; ?> title="单独设置抵扣金额" lay-filter="tongzhengdkmaxset">
		<input type="radio" name="info[tongzhengdkmaxset]" value="-1" <?php if($info['tongzhengdkmaxset']==-1): ?>checked<?php endif; ?> title="不可用<?php echo t('通证'); ?>抵扣" lay-filter="tongzhengdkmaxset">
	</div>
</div>
<div id="tongzhengdkmaxset1" <?php if($info['tongzhengdkmaxset']!=1 && $info['tongzhengdkmaxset']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label"></label>
	<div class="layui-input-inline layui-module-itemL">
		<div>最多抵扣(<span id="tongzhengdkmaxunit"><?php echo $info['tongzhengdkmaxset']==1 ? '%' : '元'; ?></span>) </div>
		<input type="text" name="info[tongzhengdkmaxval]" value="<?php echo $info['tongzhengdkmaxval']; ?>" class="layui-input">
	</div>
</div>
</div>
<?php endif; ?>
<!--奖金池设置 start-->
<?php if(getcustom('bonus_pool_gold')): if(bid==0 && $bonuspool_set['status']==1): ?>
<div class="layui-form-item">
	<label class="layui-form-label">商户购买<?php echo t('金币'); ?>金额：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[bonuspool_gold_set]" value="0" title="跟随系统设置" <?php if($info['id'] && $info['bonuspool_gold_set']==0): ?>checked<?php endif; ?>  lay-filter="bonuspool_gold_set"/>
		<input type="radio" name="info[bonuspool_gold_set]" value="1" title="单独设置比例" <?php if(!$info['id'] ||  $info['bonuspool_gold_set']==1): ?>checked<?php endif; ?>  lay-filter="bonuspool_gold_set"/>
		<input type="radio" name="info[bonuspool_gold_set]" value="2" title="单独设置金额" <?php if(!$info['id'] ||  $info['bonuspool_gold_set']==2): ?>checked<?php endif; ?>  lay-filter="bonuspool_gold_set"/>
		<input type="radio" name="info[bonuspool_gold_set]" value="-1" title="不参与奖金池" <?php if(!$info['id'] ||  $info['bonuspool_gold_set']==-1): ?>checked<?php endif; ?>  lay-filter="bonuspool_gold_set"/>
	</div>
</div>
<div id="bonuspool_gold_set" <?php if($info['bonuspool_gold_set']!=1 && $info['bonuspool_gold_set']!=2): ?>style="display:none"<?php endif; ?>>
	<div class="layui-form-item">
		<label class="layui-form-label"></label>
		<div class="layui-input-inline layui-module-itemL">
			<div> 进入<?php echo t('奖金池'); ?><span class="bonuspool_gold_set_text"><?php echo $info['bonuspool_gold_set']==1 ? '比例(%)' : '元'; ?></span> </div>
			<input type="text" name="info[bonuspool_gold]" class="layui-input" value="<?php echo $info['bonuspool_gold']; ?>">
		</div>
		<div class="layui-form-mid layui-word-aux layui-clear"></div>
	</div>
</div>

<div class="layui-form-item">
	<label class="layui-form-label">会员购买<?php echo t('金币'); ?>金额：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[member_gold_set]" value="0" title="跟随系统设置" <?php if($info['id'] && $info['member_gold_set']==0): ?>checked<?php endif; ?>  lay-filter="member_gold_set"/>
		<input type="radio" name="info[member_gold_set]" value="1" title="单独设置比例" <?php if($info['id'] &&  $info['member_gold_set']==1): ?>checked<?php endif; ?>  lay-filter="member_gold_set"/>
		<input type="radio" name="info[member_gold_set]" value="2" title="单独设置金额" <?php if($info['id'] &&  $info['member_gold_set']==2): ?>checked<?php endif; ?>  lay-filter="member_gold_set"/>
		<input type="radio" name="info[member_gold_set]" value="-1" title="不参与奖金池" <?php if(!$info['id'] ||  $info['member_gold_set']==-1): ?>checked<?php endif; ?>  lay-filter="member_gold_set"/>
	</div>
</div>
<div id="member_gold_set" <?php if($info['member_gold_set']!=1 && $info['member_gold_set']!=2): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<label class="layui-form-label"></label>
	<div class="layui-input-inline layui-module-itemL">
		<div> 进入<?php echo t('奖金池'); ?><span class="member_gold_set_text"><?php echo $info['member_gold_set']==1 ? '比例(%)' : '元'; ?></span> </div>
		<input type="text" name="info[member_gold]" class="layui-input" value="<?php echo $info['member_gold']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux layui-clear"></div>
</div>
</div>

<?php endif; ?>
<?php endif; ?>
<!--奖金池设置 end-->
<?php if(getcustom('product_baodan')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">报单产品：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[product_baodan]" value="0" <?php if($info['id'] && $info['product_baodan']==0): ?>checked<?php endif; ?> title="否" >
		<input type="radio" name="info[product_baodan]" value="1" <?php if($info['product_baodan']==1): ?>checked<?php endif; ?> title="是">
	</div>
</div>
<?php endif; if($auth_data=='all' || in_array('QueueFree/index',$auth_data)): if(getcustom('yx_queue_free')): ?>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('排队免单'); ?>：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[queue_free_status]" value="0" <?php if(!$info['id'] || $info['queue_free_status']==0): ?>checked<?php endif; ?> title="不参与" >
		<input type="radio" name="info[queue_free_status]" value="1" <?php if($info['queue_free_status']==1): ?>checked<?php endif; ?> title="参与">
	</div>
</div>
<?php endif; if(getcustom('yx_queue_free_product_not_queue')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">不参加排队：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[queue_free_not_queue]" value="0" <?php if(!$info['id'] || $info['queue_free_not_queue']==0): ?>checked<?php endif; ?> title="关闭" >
		<input type="radio" name="info[queue_free_not_queue]" value="1" <?php if($info['queue_free_not_queue']==1): ?>checked<?php endif; ?> title="开启">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后该商品不参加<?php echo t('排队免单'); ?>的排队，只参与返利</div>
</div>
<?php endif; if(getcustom('yx_queue_free_product_not_back')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">不参加返利：</label>
	<div class="layui-input-block" style="width:800px">
		<input type="radio" name="info[queue_free_not_back]" value="0" <?php if(!$info['id'] || $info['queue_free_not_back']==0): ?>checked<?php endif; ?> title="关闭" >
		<input type="radio" name="info[queue_free_not_back]" value="1" <?php if($info['queue_free_not_back']==1): ?>checked<?php endif; ?> title="开启">
	</div>
	<div class="layui-form-mid layui-word-aux">开启后该商品参加<?php echo t('排队免单'); ?>的排队，但不参与返利</div>
</div>
<?php endif; ?>
<?php endif; if(getcustom('member_realname_verify')): if($member_realname_set['status'] == 1): ?>
	<div class="layui-form-item">
		<label class="layui-form-label">实名购买：</label>
		<div class="layui-input-inline">
			<input type="radio" name="info[realname_buy_status]" value="0" <?php if(!$info['id'] || $info['realname_buy_status']==0): ?>checked<?php endif; ?> title="关闭" >
			<input type="radio" name="info[realname_buy_status]" value="1" <?php if($info['realname_buy_status']==1): ?>checked<?php endif; ?> title="开启">
		</div>
		<div class="layui-form-mid layui-word-aux">开启后未实名不可购买，并跳转实名认证页面</div>
	</div>
<?php endif; ?>
<?php endif; if(getcustom('member_levelup_givechild')): if($auth_data=='all' || in_array('MemberLevel/memberlevelupgivechild',$auth_data)): ?>
<div class="layui-form-item">
	<label class="layui-form-label">购买送下级升级数量：</label>
	<div class="layui-input-inline">
		<input type="radio" name="info[give_team_levelup]" value="0" <?php if(!$info['id'] || $info['give_team_levelup']==0): ?>checked<?php endif; ?> title="关闭" lay-filter="give_team_levelup" >
		<input type="radio" name="info[give_team_levelup]" value="1" <?php if($info['give_team_levelup']==1): ?>checked<?php endif; ?> title="开启" lay-filter="give_team_levelup">
	</div>
	<div class="layui-form-mid layui-word-aux">确认收货后赠送，不可退回</div>
</div>
<div class="layui-form-item team_levelup_div" style="<?php if($info['give_team_levelup']!=1): ?> display:none <?php endif; ?>">
	<label class="layui-form-label">给下级升级设置:</label>
	
	<div style="float:left;" >

		<div class="layui-input-inline" style="width:auto">
			<table id="setcategorydiv"  class="layui-table" style="width:400px">
				<thead>
				<tr>
					<th style="width:100px">名称</th>
					<th style="width:100px">升级数量</th>
					
				</tr>
				</thead>
				<?php if($levellist): foreach($levellist as $v): ?>
				<tr><td><?php echo $v['name']; ?></td><td><input type="number" name="team_levelup_data[<?php echo $v['id']; ?>]" value="<?php echo (isset($team_levelup_data[$v['id']]) && ($team_levelup_data[$v['id']] !== '')?$team_levelup_data[$v['id']]:0); ?>" class="layui-input" style="width:70px" /></td></tr>
				<?php endforeach; ?>
				<?php endif; ?>
			</table>
		</div>
	</div>
	<div class="layui-form-mid layui-word-aux">可以给下级升级的等级和数量,只能给比自己低的等级升级，升级后可升级的数量累计</div>
</div>
<?php endif; ?>
<?php endif; if(getcustom('shoporder_ranking')): if($auth_data=='all' || in_array('ShoporderRanking/*',$auth_data)): ?>
	<div class="layui-form-item">
		<label class="layui-form-label">消费排行榜：</label>
		<div class="layui-input-block" style="width:800px">
			<input type="radio" name="info[rankingset]" value="0" <?php if(!$info['id'] || $info['rankingset']==0): ?>checked<?php endif; ?> title="按照系统设置" lay-filter="rankingset">
			<input type="radio" name="info[rankingset]" value="1" <?php if($info['rankingset']==1): ?>checked<?php endif; ?> title="单独设置" lay-filter="rankingset">
			<input type="radio" name="info[rankingset]" value="-1" <?php if($info['rankingset']==-1): ?>checked<?php endif; ?> title="不参与" lay-filter="rankingset">
		</div>
		<div class="layui-form-mid layui-word-aux">分红比例按商品实际消费金计算</div>
	</div>
	<div id="rankingset1" <?php if($info['rankingset']!=1): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label"></label>
			<div class="layui-input-inline layui-module-itemL">
				<div>分红比例</div>
				<input type="text" name="info[ranking_radio]" value="<?php echo $info['ranking_radio']; ?>" class="layui-input" style="margin-right: 0;">
				<div>%</div>
			</div>
			<div class="layui-input-inline layui-module-itemL" style="background-color: #fff">
				<div style="background-color: #fff">+</div>
			</div>
			<div class="layui-input-inline layui-module-itemL">
				<div>分红金额</div>
				<input type="text" name="info[ranking_money]" value="<?php echo $info['ranking_money']; ?>" class="layui-input" style="margin-right: 0;">
				<div>元</div>
			</div>
		</div>
	</div>
	<?php endif; ?>
<?php endif; if($bid==0): if($ShopSendSilvermoney): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('银值'); ?>最大抵扣：</label>
		<div class="layui-input-inline">
			<input type="text" name="info[silvermoneydec_ratio]" class="layui-input" value="<?php echo $info['silvermoneydec_ratio']; ?>">
		</div>
		<div class="layui-form-mid layui-word-aux">%，默认0时不用<?php echo t('银值'); ?>抵扣</div>
	</div>
	<?php endif; if($ShopSendGoldmoney): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('金值'); ?>最大抵扣：</label>
		<div class="layui-input-inline">
			<input type="text" name="info[goldmoneydec_ratio]" class="layui-input" value="<?php echo $info['goldmoneydec_ratio']; ?>">
		</div>
		<div class="layui-form-mid layui-word-aux">%，默认0时不用<?php echo t('金值'); ?>抵扣</div>
	</div>
	<?php endif; ?>
<?php endif; if(getcustom('money_dec_product')): ?>
	<div class="layui-form-item">
		<label class="layui-form-label"><?php echo t('余额'); ?>抵扣：</label>
		<div class="layui-input-block" style="width:800px">
			<input type="radio" name="info[moneydecset]" value="0" <?php if(!$info['id'] || $info['moneydecset']==0): ?>checked<?php endif; ?> title="跟随系统设置" lay-filter="moneydecset">
			<input type="radio" name="info[moneydecset]" value="1" <?php if($info['moneydecset']==1): ?>checked<?php endif; ?> title="单独设置抵扣比例" lay-filter="moneydecset">
			<input type="radio" name="info[moneydecset]" value="2" <?php if($info['moneydecset']==2): ?>checked<?php endif; ?> title="单独设置抵扣金额" lay-filter="moneydecset">
			<input type="radio" name="info[moneydecset]" value="-1" <?php if($info['moneydecset']==-1): ?>checked<?php endif; ?> title="禁用" lay-filter="moneydecset">
		</div>
		<div class="layui-form-mid layui-word-aux">注意：商城商品使用<?php echo t('余额'); ?>抵扣后支付页面<?php echo t('余额'); ?>支付将不显示</div>
	</div>
	<div id="moneydecset1" <?php if($info['moneydecset']!=1 && $info['moneydecset']!=2): ?>style="display:none"<?php endif; ?>>
		<div class="layui-form-item">
			<label class="layui-form-label"></label>
			<div class="layui-input-inline layui-module-itemL">
				<div>最高抵扣(<span id="moneydecunit"><?php echo $info['moneydecset']==1 ? '%' : '元'; ?></span>) </div>
				<input type="text" name="info[moneydecval]" value="<?php echo $info['moneydecval']; ?>" class="layui-input">
			</div>
		</div>
	</div>
<?php endif; ?>
<div class="layui-form-item">
	<label class="layui-form-label">销量：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[sales]" value="<?php echo !empty($info['id']) ? $info['sales'] : '0'; ?>" class="layui-input">
		<input type="hidden" name="info[oldsales]" value="<?php echo !empty($info['id']) ? $info['sales'] : '0'; ?>" class="layui-input">
	</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">起售数量：</label>
	<div class="layui-input-inline">
		<input type="number" name="info[limit_start]" value="<?php echo !empty($info['id']) ? $info['limit_start'] : '0'; ?>" class="layui-input">
	</div>
	<div class="layui-form-mid layui-word-aux">多少件起卖，0表示不限购</div>
	<div class="layui-form-mid layui-word-aux jieti_discount">整批：单规格数量限制，混批:不同规格总数量限制</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">每人限购：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[perlimit]" value="<?php echo !empty($info['id']) ? $info['perlimit'] : '0'; ?>" class="layui-input">
	</div>
	<div class="layui-form-mid layui-word-aux">每人最多可购买多少件，0表示不限购</div>
</div>
<?php if(getcustom('member_realname_verify')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">每人限购条件：</label>
	<div class="layui-input-inline" style="width:800px">
		<input type="checkbox" name="info[limittj][]" value="0" title="会员账号" lay-skin="primary" <?php if(!$info['id'] || in_array('0',$info['limittj'])): ?>checked<?php endif; ?>/>
		<?php if($member_realname_set['status'] == 1): ?>
		<input type="checkbox" name="info[limittj][]" value="1" title="实名身份证号" lay-skin="primary" <?php if(in_array('1',$info['limittj'])): ?>checked<?php endif; ?>/>
		<?php endif; ?>
		<input type="checkbox" name="info[limittj][]" value="2" title="微信" lay-skin="primary" <?php if(in_array('2',$info['limittj'])): ?>checked<?php endif; ?>/>
		<input type="checkbox" name="info[limittj][]" value="3" title="手机号" lay-skin="primary" <?php if(in_array('3',$info['limittj'])): ?>checked<?php endif; ?>/>
	</div>
	<div class="layui-form-mid layui-word-aux">开启后未绑定相关账号的无法购买</div>
</div>
<?php endif; ?>
<div class="layui-form-item">
	<label class="layui-form-label">每单限购：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[perlimitdan]" value="<?php echo !empty($info['id']) ? $info['perlimitdan'] : '0'; ?>" class="layui-input">
	</div>
	<div class="layui-form-mid layui-word-aux">每单最多可购买多少件，0表示不限购</div>
</div>

<?php if(getcustom('product_memberlevel_limit')): ?>
	<!--会员等级限购 Start-->
	<div class="layui-form-item">
		<label class="layui-form-label">会员等级限购：</label>
		<div class="layui-input-inline" style="width:auto; ">
			<table class="layui-table choose-level" style="width:500px;" id="choose-level">
				<thead>
				<tr>
					<th>等级ID</th>
					<th>会员等级</th>
					<th>限购天数</th>
					<th>限购数量</th>
					<th>操作</th>
				</tr>
				</thead>
				<?php foreach($levellimitdata as $k=>$v): ?>
				<tr class="choose-tr-list">
					<td><?php echo $v['level_id']; ?><input type="hidden" value='<?php echo $v['level_id']; ?>' name="level_id[]"></td>
					<td><?php echo $v['name']; ?></td>
					<td><input type="text" name="days[]" value="<?php echo $v['days']; ?>" class="layui-input" style="width:70px"/></td>
					<td><input type="text" name="limit_num[]" value="<?php echo $v['limit_num']; ?>" class="layui-input" style="width:70px"/></td>
					<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delChooseTr(this,<?php echo $ff['id']; ?>)">删除</button></td>
				</tr>
				<?php endforeach; ?>
			
				<tr class="choose-tr-add">
					<td colspan="5" align="center"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="showChooseLevel()">添加</button></td>
				</tr>
			</table>
		</div>
		<script>
			var chooseLevelLayer;
			function showChooseLevel(){
				chooseLevelLayer = layer.open({type:2,title:'选择<?php echo t('等级'); ?>',content:"<?php echo url('MemberLevel/chooselevel'); ?>",area:['1000px','600px'],shadeClose:true});
			}
			function chooselevel(res){
				var detail = res;
				var chooseClassName = '.choose-level';
				layer.close(chooseLevelLayer);
				var objIds = [];
				var isadd = 0;
				$(chooseClassName).find('.choose-tr-list').each(function(){
					var thisfid = $(this).find('td:eq(0)').html();
					if(thisfid == detail.id){
						isadd = 1
						dialog('该项已添加过了');
					}
					objIds.push(thisfid)
				});
				if(isadd == 0){
					objIds.push(detail.id)

					var html='';
					html+='<tr class="choose-tr-list">';
					html+='<td>'+detail.id+'</td>';
					html+='<td>'+detail.name+'<input type="hidden" value='+detail.id+' name="level_id[]"></td>';
					html+='<td><input type="text" name="days[]" value="1" class="layui-input" style="width:70px"/></td>';
					html+='<td><input type="text" name="limit_num[]" value="1" class="layui-input" style="width:70px"/></td>';
					html+= '<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delChooseTr(this,'+detail.id+')">删除</button></td></tr>';

					$(chooseClassName).find('.choose-tr-add').before(html);
				}
				layui.form.render();
			}
			function delChooseTr(obj,fid){
				$(obj).closest('.choose-tr-list').remove();
				var objIds = [];
				$('#choose-level').find('.choose-tr-list').each(function(){
					objIds.push($(this).find('td:eq(0)').html())
				})
	
			}
		</script>
	</div>
	<!--会员等级限购 End-->
<?php endif; if(getcustom('shop_yuding')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">预定库存：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[yuding_stock]" value="<?php echo !empty($info['yuding_stock']) ? $info['yuding_stock'] : '0'; ?>" lay-verify="positiveWholeNumberRequiredTrue"  class="layui-input">
	</div>
	<div class="layui-form-mid layui-word-aux">普通库存为0，预定库存大于0时显示预定按钮</div>
</div>
<?php endif; ?>
<div class="layui-form-item">
	<label class="layui-form-label">序号：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[sort]" value="<?php echo !empty($info['sort']) ? $info['sort'] : '0'; ?>" class="layui-input">
	</div>
	<div class="layui-form-mid layui-word-aux">用于排序,越大越靠前</div>
</div>

<?php if(getcustom('shop_product_recommend')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">商品推荐：</label>
	<div class="layui-input-inline" style="width:500px">
		<input type="radio" name="info[show_recommend]" value="0" <?php if(!info['id'] || $info['show_recommend']==0): ?>checked<?php endif; ?> title="关闭" lay-filter="show_recommend"/>
		<input type="radio" name="info[show_recommend]" value="1" <?php if($info['show_recommend']==1): ?>checked<?php endif; ?> title="随机" lay-filter="show_recommend"/>
		<input type="radio" name="info[show_recommend]" value="2" <?php if($info['show_recommend']==2): ?>checked<?php endif; ?> title="自选" lay-filter="show_recommend"/>
	</div>
</div>
<div class="show_recommend2" style="clear:both;<?php if($info['show_recommend']!=2): ?>display:none<?php endif; ?>">
	<label class="layui-form-label"></label>
	<div class="layui-input-inline" style="width:auto">
		<table id="setproductdiv"  class="layui-table" style="width:500px">
			<thead>
			<tr>
				<th>商品ID</th>
				<th>商品名称</th>
				<th>操作</th>
			</tr>
			</thead>
			<?php 
			$productdata = array();
			if($info && $info['recommend_productids']){
			$productdata = \think\facade\Db::name('shop_product')->where('aid',aid)->where('id','in',$info['recommend_productids'])->order(\think\facade\Db::raw('field(id,'.$info['recommend_productids'].')'))->select()->toArray();
			}
			 if($productdata): foreach($productdata as $k=>$ff): ?>
			<tr class="productlisttr"><td><?php echo $ff['id']; ?></td><td><?php echo $ff['name']; ?></td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delProduct(this,<?php echo $ff['id']; ?>)">删除</button></td></tr>
			<?php endforeach; ?>
			<?php endif; ?>
			<tr id="productaddtr">
				<td colspan="3"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="showChooseProduct()">添加</button></td>
			</tr>
		</table>
		<input type="hidden" name="info[recommend_productids]" value="<?php echo $info['recommend_productids']; ?>"/>
	</div>
</div>
<script>
	var chooseProductLayer;
	function showChooseProduct(){
		chooseProductLayer = layer.open({type:2,title:'选择商品',content:"<?php echo url('ShopProduct/chooseproduct'); ?>/type/2/hidebid/1",area:['1000px','600px'],shadeClose:true});
	}
	function choosepro2(res){
		console.log(res)
		var product = res.product
		layer.close(chooseProductLayer);
		var recommend_productids = [];
		var isadd = 0;
		$('.productlisttr').each(function(){
			var thisfid = $(this).find('td:eq(0)').html();
			if(thisfid == product.id){
				isadd = 1
				dialog('该商品已添加过了');
			}
			recommend_productids.push(thisfid)
		})
		if(isadd == 0){
			recommend_productids.push(product.id)
			$("input[name='info[recommend_productids]']").val(recommend_productids.join(','));
			$('#productaddtr').before('<tr class="productlisttr"><td>'+product.id+'</td><td>'+product.name+'</td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delProduct(this,'+product.id+')">删除</button></td></tr>');
		}
		console.log(recommend_productids)
	}
	function delProduct(obj,fid){
		$(obj).parent().parent().remove();
		var recommend_productids = [];
		$('.productlisttr').each(function(){
			recommend_productids.push($(this).find('td:eq(0)').html())
		})
		$("input[name='info[recommend_productids]']").val(recommend_productids.join(','));
	}
</script>
<?php endif; if(getcustom('plug_tengrui')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">认证<?php echo t('会员'); ?>：</label>
	<div class="layui-input-inline">
		<input type="radio" name="info[is_rzh]" value="0" <?php if(!$info['id'] || $info['is_rzh']==0): ?>checked<?php endif; ?> title="否"/>
		<input type="radio" name="info[is_rzh]" value="1" <?php if($info['id'] && $info['is_rzh']==1): ?>checked<?php endif; ?> title="是"/>
	</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('会员'); ?>关系：</label>
	<div class="layui-input-inline" style="width:500px">
		<input type="radio" name="info[relation_type]" value="-1" <?php if(!$info['id'] || $info['relation_type']==-1): ?>checked<?php endif; ?> title="所有"/>
		<input type="radio" name="info[relation_type]" value="0" <?php if($info['id'] && $info['relation_type']==0): ?>checked<?php endif; ?> title="业主"/>
		<input type="radio" name="info[relation_type]" value="1" <?php if($info['id'] && $info['relation_type']==1): ?>checked<?php endif; ?> title="家属"/>
		<input type="radio" name="info[relation_type]" value="2" <?php if($info['id'] && $info['relation_type']==2): ?>checked<?php endif; ?> title="租户"/>
		<input type="radio" name="info[relation_type]" value="3" <?php if($info['id'] && $info['relation_type']==3): ?>checked<?php endif; ?> title="买断"/>
		<input type="radio" name="info[relation_type]" value="4" <?php if($info['id'] && $info['relation_type']==4): ?>checked<?php endif; ?> title="租用"/>
	</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">一户仅限一次：</label>
	<div class="layui-input-inline">
		<input type="radio" name="info[house_status]" value="0" <?php if($info['id'] && $info['house_status']==0): ?>checked<?php endif; ?> title="否"/>
		<input type="radio" name="info[house_status]" value="1" <?php if(!$info['id'] || $info['house_status']==1): ?>checked<?php endif; ?> title="是"/>
	</div>
	<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">需是认证用户，且同一个小区的同一户只限一人购买，即一户仅限一次</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">授权小区：</label>
	<div class="layui-input-inline" style="width:500px">
		<input type="radio" name="info[group_status]" value="0" <?php if($info['group_status']==0): ?>checked<?php endif; ?> title="关闭" lay-filter="group_status"/>
		<input type="radio" name="info[group_status]" value="1" <?php if($info['group_status']==1): ?>checked<?php endif; ?> title="开启" lay-filter="group_status"/>
	</div>
	<div class="group_status1 fwtypeExtend" style="clear:both;<?php if($info['group_status']!=1): ?>display:none<?php endif; ?>">
		<label class="layui-form-label"></label>
		<div class="layui-input-inline" style="width:auto">
			<table id="setgroupdiv"  class="layui-table" style="width:500px">
				<thead>
				<tr>
					<th>小区ID</th>
					<th>小区名称</th>
					<th>操作</th>
				</tr>
				</thead>
				<?php if($groupdata): foreach($groupdata as $gk=>$gv): ?>
				<tr class="grouplisttr"><td><?php echo $gv['id']; ?></td><td><?php echo $gv['fullName']; ?></td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delGroup(this,<?php echo $gv['id']; ?>)">删除</button></td></tr>
				<?php endforeach; ?>
				<?php endif; ?>
				<tr id="groupaddtr">
					<td colspan="3"><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="showChooseGroup()">添加</button></td>
				</tr>
			</table>
			<input type="hidden" name="info[group_ids]" value="<?php echo $info['group_ids']; ?>"/>
		</div>
	</div>
	<script>
		var chooseGroupLayer;
		function showChooseGroup(){
			chooseGroupLayer = layer.open({type:2,title:'选择分组',content:"<?php echo url('MemberTrGroup/choosegroup'); ?>",area:['1000px','600px'],shadeClose:true});
		}
		function chooseGroup(fid,fname){
			layer.close(chooseGroupLayer);
			var group_ids = [];
			var isadd = 0;
			$('.grouplisttr').each(function(){
				var thisfid = $(this).find('td:eq(0)').html();
				if(thisfid == fid){
					isadd = 1
					dialog('该分组已添加过了');
				}
				group_ids.push(thisfid)
			})
			if(isadd == 0){
				group_ids.push(fid)
				$("input[name='info[group_ids]']").val(group_ids.join(','));
				$('#groupaddtr').before('<tr class="grouplisttr"><td>'+fid+'</td><td>'+fname+'</td><td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delGroup(this,'+fid+')">删除</button></td></tr>');
			}
			console.log(group_ids)
		}
		function delGroup(obj,fid){
			$(obj).parent().parent().remove();
			var group_ids = [];
			$('.grouplisttr').each(function(){
				group_ids.push($(this).find('td:eq(0)').html())
			})
			$("input[name='info[group_ids]']").val(group_ids.join(','));
		}
	</script>
</div>
<?php endif; if($bid==0 || $bset['product_showset']==1): ?>
<div class="layui-form-item">
	<label class="layui-form-label">显示条件：</label>
	<div class="layui-input-inline" style="width:800px">
		<input type="checkbox" name="info[showtj][]" value="-1" title="所有人" lay-skin="primary" <?php if(!$info['id'] || in_array('-1',$info['showtj'])): ?>checked<?php endif; ?>/>
		<input type="checkbox" name="info[showtj][]" value="-2" title="未登录用户" lay-skin="primary" <?php if(!$info['id'] || in_array('-2',$info['showtj'])): ?>checked<?php endif; ?>/>
		<input type="checkbox" name="info[showtj][]" value="0" title="关注用户" lay-skin="primary" <?php if(in_array('0',$info['showtj'])): ?>checked<?php endif; ?>/>
		<?php foreach($levellist as $v): ?>
		<input type="checkbox" name="info[showtj][]" value="<?php echo $v['id']; ?>" title="<?php echo $v['name']; ?>" lay-skin="primary" <?php if(in_array($v['id'],$info['showtj'])): ?>checked<?php endif; ?>/>
		<?php endforeach; ?>
	</div>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">购买条件：</label>
	<div class="layui-input-inline" style="width:800px">
		<input type="checkbox" name="info[gettj][]" value="-1" title="所有人" lay-skin="primary" <?php if(!$info['id'] || in_array('-1',$info['gettj'])): ?>checked<?php endif; ?> lay-filter="gettjset"/>
		<input type="checkbox" name="info[gettj][]" value="0" title="关注用户" lay-skin="primary" <?php if(in_array('0',$info['gettj'])): ?>checked<?php endif; ?>/>
		<?php foreach($levellist as $v): ?>
		<input type="checkbox" name="info[gettj][]" value="<?php echo $v['id']; ?>" title="<?php echo $v['name']; ?>" lay-skin="primary" <?php if(in_array($v['id'],$info['gettj'])): ?>checked<?php endif; ?>/>
		<?php endforeach; ?>
	</div>
</div>
<?php endif; if(getcustom('product_yeji_level')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">统计业绩等级：</label>
	<div class="layui-input-inline" style="width:800px">
		<input type="checkbox" name="info[yeji_level][]" value="-1" title="所有人" lay-skin="primary" <?php if(!$info['id'] || in_array('-1',$info['yeji_level'])): ?>checked<?php endif; ?>/>
		<?php foreach($levellist as $v): ?>
		<input type="checkbox" name="info[yeji_level][]" value="<?php echo $v['id']; ?>" title="<?php echo $v['name']; ?>" lay-skin="primary" <?php if(in_array($v['id'],$info['yeji_level'])): ?>checked<?php endif; ?>/>
		<?php endforeach; ?>
	</div>
</div>
<?php endif; ?>
<div id="gettjset" <?php if(!$info['id'] || in_array('-1',$info['gettj'])): ?>style="display:none"<?php endif; ?>>
<div class="layui-form-item">
	<div class="layui-form-label">无权限提示：</div>
	<div class="layui-input-inline">
		<input class="layui-input" name="info[gettjtip]" value="<?php if(!$info['id']): ?>您没有权限购买该商品<?php else: ?><?php echo $info['gettjtip']; ?><?php endif; ?>"/>
	</div>
	<div class="layui-form-mid"></div>
</div>
<div class="layui-form-item">
	<div class="layui-form-label">无权限跳转：</div>
	<div class="layui-input-inline">
		<input class="layui-input" name="info[gettjurl]" value="<?php echo $info['gettjurl']; ?>" id="gettjurl"/>
	</div>
	<div class="layui-btn layui-btn-primary" style="float:left" onclick="chooseUrl2('gettjurl')">选择链接</div>
</div>
</div>
<?php if(getcustom('buy_selectmember')): ?>
<div class="layui-form-item">
	<div class="layui-form-label">尾款：</div>
	<div class="layui-input-inline">
		<input class="layui-input" name="info[balance]" value="<?php echo $info['balance']; ?>"/>
	</div>
	<div class="layui-form-mid">%</div>
</div>
<?php endif; if(getcustom('product_payaftergive')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">支付后赠送：</label>
	<div class="layui-input-inline layui-module-itemL">
		<div>抽奖次数</div>
		<input type="text" name="info[paygive_choujiangtimes]" class="layui-input" value="<?php echo $info['paygive_choujiangtimes']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL">
		<div>抽奖活动ID</div>
		<input type="text" name="info[paygive_choujiangid]" class="layui-input" value="<?php echo $info['paygive_choujiangid']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL">
		<div>余额</div>
		<input type="text" name="info[paygive_money]" class="layui-input" value="<?php echo $info['paygive_money']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL">
		<div>积分</div>
		<input type="text" name="info[paygive_score]" class="layui-input" value="<?php echo $info['paygive_score']; ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL">
		<div>优惠券ID</div>
		<input type="text" name="info[paygive_couponid]" class="layui-input" value="<?php echo $info['paygive_couponid']; ?>">
	</div>
</div>
<?php endif; if(getcustom('payaftertourl')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">支付后跳转按钮：</label>
	<div class="layui-input-inline">
		<input class="layui-input" name="info[payafterbtntext]" value="<?php echo $info['payafterbtntext']; ?>" placeholder="只有H5端链接为打开小程序时能够展示" />
	</div>
	<div class="layui-input-inline" style="width: 300px">
		<div class="layui-btn layui-btn-primary" style="float:left" onclick="chooseUrl2('payaftertourl')">选择链接</div>
		<input class="layui-input" name="info[payaftertourl]" id="payaftertourl" value="<?php echo $info['payaftertourl']; ?>" style="display: inline-block;width: 200px;margin-left: 5px;" />
	</div>
</div>
<?php endif; if(getcustom('product_fenzhangmoney') && session('BST_ID')): ?>
<div class="layui-form-item">
	<div class="layui-form-label">固定分账金额：</div>
	<div class="layui-input-inline" style="width: 400px;">
		<input class="layui-input" name="info[product_fenzhangmoney]" value="<?php echo $info['product_fenzhangmoney']; ?>"/>
		<div class="layui-form-mid layui-word-aux"></div>
	</div>
	<div class="layui-form-mid">元</div>
	<div class="layui-form-mid layui-word-aux"> 默认-1,表示根据系统设置的分账比例分账</div>
</div>
<?php endif; if(getcustom('everyday_hongbao') && $ehb_status): ?>
<div class="layui-form-item">
	<div class="layui-form-label">红包额度比例：</div>
	<div class="layui-input-inline" style="width: 400px;">
		<input class="layui-input" name="info[everyday_hongbao_bl]" value="<?php echo $info['everyday_hongbao_bl']; ?>"/>
		<div class="layui-form-mid layui-word-aux">购买商品给<?php echo t('会员'); ?>的红包额度，留空使用系统设置比例，0则不参与红包活动</div>
	</div>

	<div class="layui-form-mid layui-word-aux">%</div>
</div>
<?php endif; if(getcustom('shopproduct_rewardedvideoad') && in_array('wx',$platform)): ?>
<div class="layui-form-item">
	<label class="layui-form-label">小程序激励广告：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[rewardedvideoad]" class="layui-input" value="<?php echo $info['rewardedvideoad']; ?>">
	</div>
	<div class="layui-form-mid layui-word-aux">填写广告位ID 在小程序后台"流量主-广告管理-激励广告"中查找，设置后进入商品详情页必须先看完激励广告视频</div>
</div>
<?php endif; if(getcustom('product_level_discount')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">会员等级折扣：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[no_discount]" value="0" title="参与" <?php if(!$info['id'] || $info['no_discount']==0): ?>checked<?php endif; ?>/>
		<input type="radio" name="info[no_discount]" value="1" title="不参与" <?php if($info['id'] && $info['no_discount']==1): ?>checked<?php endif; ?>/>
	</div>
</div>
<?php endif; if(getcustom('product_moneypay')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">余额支付：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[product_moneypay]" value="1" title="开启" <?php if(!$info['id'] || $info['product_moneypay']==1): ?>checked<?php endif; ?>/>
		<input type="radio" name="info[product_moneypay]" value="0" title="关闭" <?php if($info['id'] && $info['product_moneypay']==0): ?>checked<?php endif; ?>/>
		<input type="radio" name="info[product_moneypay]" value="2" title="仅限余额" <?php if($info['id'] && $info['product_moneypay']==2): ?>checked<?php endif; ?>/>
	</div>
</div>
<?php endif; if(getcustom('commission_xiaofei')): ?>
<div class="layui-form-item">
	<label class="layui-form-label"><?php echo t('冻结佣金'); ?>支付：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[product_xiaofeipay]" value="1" title="支持" <?php if(!$info['id'] || $info['product_xiaofeipay']==1): ?>checked<?php endif; ?>/>
		<input type="radio" name="info[product_xiaofeipay]" value="0" title="不支持" <?php if($info['id'] && $info['product_xiaofeipay']==0): ?>checked<?php endif; ?>/>
	</div>
</div>
<?php endif; if(getcustom('buybutton_custom')): if($buybtn_status == 1): ?>
<div class="layui-form-item">
	<label class="layui-form-label">购买按钮：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[buybtn_name]" lay-verify="required" lay-verType="tips" class="layui-input" value="<?php echo !empty($info['buybtn_name']) ? $info['buybtn_name'] : '立即购买'; ?>">
	</div>
	<div class="layui-input-inline" style="width: 300px">
		<input type="hidden" id="buybtn_link_name" name="info[buybtn_link_name]" value="<?php echo $info['buybtn_link_name']; ?>">
		<span class="layui-btn  layui-btn-primary" style="float: left;" onclick="chooseUrlWindow()">选择链接</span>
		<input type="text" id="buybtn_link_url" name="info[buybtn_link_url]" value="<?php echo $info['buybtn_link_url']; ?>"  class="layui-input" style="display: inline-block;width: 200px;margin-left: 5px;">
	</div>
	<div class="buybtn_link_name" style="line-height: 38px"><?php echo $info['buybtn_link_name']; ?></div>
</div>
<?php endif; ?>
<?php endif; if(getcustom('addcart_button_custom') && $addcart_button_custom_status): ?>
<div class="layui-form-item">
	<label class="layui-form-label">加入购物车按钮：</label>
	<div class="layui-input-inline">
		<input type="text" name="info[addcart_name]" lay-verify="required" lay-verType="tips" class="layui-input" value="<?php echo !empty($info['addcart_name']) ? $info['addcart_name'] : '加入购物车'; ?>">
	</div>
	<div class="layui-input-inline" style="width: 300px">
		<input type="hidden" id="addcart_link_name" name="info[addcart_link_name]" value="<?php echo $info['addcart_link_name']; ?>">
		<span class="layui-btn  layui-btn-primary" style="float: left;" onclick="chooseUrlWindow2()">选择链接</span>
		<input type="text" id="addcart_link_url" name="info[addcart_link_url]" value="<?php echo $info['addcart_link_url']; ?>"  class="layui-input" style="display: inline-block;width: 200px;margin-left: 5px;">
	</div>
	<div class="addcart_link_name" style="line-height: 38px"><?php echo $info['addcart_link_name']; ?></div>
</div>
<?php endif; if(getcustom('product_bonus_pool')): if($product_bonus_pool_status): ?>
	<div class="layui-form-item">
		<label class="layui-form-label">奖金池比例：</label>
		<div class="layui-input-inline">
			<input type="text" name="info[bonus_pool_ratio]" value="<?php echo $info['bonus_pool_ratio']; ?>"  class="layui-input">
		</div>
		<div class="layui-form-mid">%</div>
		<div class="layui-form-mid layui-word-aux">奖金池金额 = 付款金额 * 奖金池比例，不填为不开启</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">奖金池份数：</label>
		<div class="layui-input-inline">
			<input type="text" name="info[bonus_pool_num]" value="<?php echo $info['bonus_pool_num']; ?>"   class="layui-input">
		</div>
		<div class="layui-form-mid">份</div>
		<div class="layui-form-mid layui-word-aux">贡献值金额 = 付款价格*奖金池比例 /奖金池份数  </div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">奖金池分类：</label>
		<div class="layui-input-inline">
			<select name="info[bonus_pool_cid]" id="bonus_pool_cid" xm-select-search >
				<?php foreach($bonuspoolclist as $cv): ?>
				<option value="<?php echo $cv['id']; ?>" <?php if($cv['id'] == $info['bonus_pool_cid']): ?>selected<?php endif; ?>><?php echo $cv['name']; ?></option>
				<?php endforeach; ?>
			</select>
		</div>
		<div class="layui-form-mid layui-word-aux">产生的奖金将加入该分类</div>
	</div>

	<div class="layui-form-item">
		<label class="layui-form-label">是否进行释放：</label>
		<div class="layui-input-inline" >
			<input type="radio" name="info[bonus_pool_isrelease]" value="1" title="释放" <?php if($info['bonus_pool_isrelease']==1): ?>checked<?php endif; ?> lay-filter=""/>
			<input type="radio" name="info[bonus_pool_isrelease]" value="0" title="不释放" <?php if($info['id'] && $info['bonus_pool_isrelease']==0): ?>checked<?php endif; ?> lay-filter=""/>
		</div>
		<div class="layui-form-mid layui-word-aux">【释放】产生奖金可释放；【不释放】产生奖金不释放，释放给其他有资格会员</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">释放条件：</label>
		<div class="layui-input-inline" style="width:800px">
			<input type="checkbox" name="info[bonus_pool_releasetj][]" value="-1" title="所有人" lay-skin="primary" <?php if(!$info['id'] || in_array('-1',$info['bonus_pool_releasetj'])): ?>checked<?php endif; ?> />
			<?php foreach($levellist as $v): ?>
			<input type="checkbox" name="info[bonus_pool_releasetj][]" value="<?php echo $v['id']; ?>" title="<?php echo $v['name']; ?>" lay-skin="primary" <?php if(in_array($v['id'],$info['bonus_pool_releasetj'])): ?>checked<?php endif; ?>/>
			<?php endforeach; ?>
		</div>
		<div class="layui-form-mid layui-word-aux">开启释放后才能生效</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">奖金池上限：</label>
		<div class="layui-input-inline">
			<input type="number" name="info[bonus_pool_money_max]" value="<?php echo $info['bonus_pool_money_max']; ?>"   class="layui-input" min="0">
		</div>
		<div class="layui-form-mid layui-word-aux">当前产品的发放总献值金额上限，大于0生效  </div>
	</div>
<?php endif; ?>
<?php endif; if(getcustom('mendian_hexiao_givemoney')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">门店核销提成：</label>
	<div class="layui-input-inline layui-module-itemL">
		<div>提成比例(%)</div>
		<input style="width: 120px;" type="text" id="hexiaogivepercent" name="info[hexiaogivepercent]" class="layui-input" value="<?php echo (isset($info['hexiaogivepercent']) && ($info['hexiaogivepercent'] !== '')?$info['hexiaogivepercent']:''); ?>">
	</div>
	<div class="layui-input-inline layui-module-itemL">
		<div>提成金额(元)</div>
		<input style="width: 120px;" type="text" id="hexiaogivemoney" name="info[hexiaogivemoney]" class="layui-input" value="<?php echo (isset($info['hexiaogivemoney']) && ($info['hexiaogivemoney'] !== '')?$info['hexiaogivemoney']:''); ?>">
	</div>
	<div class="layui-form-mid layui-word-aux">此商品提成=（商品金额*提成比例+提成金额）*购买数量。注意：商品独立设置优先级高于门店设置，留空使用门店设置</div>
</div>
	<?php if(getcustom('mendian_hexiao_commission_to_money')): ?>
        <div class="layui-form-item">
            <label class="layui-form-label">提成转到<?php echo t('余额'); ?>：</label>
            <div class="layui-input-inline">
                <input type="radio" name="info[commission_to_money]" value="1" title="是" <?php if($info['commission_to_money']==1): ?>checked<?php endif; ?>>
                <input type="radio" name="info[commission_to_money]" value="0" title="否" <?php if(!$info['id'] || $info['commission_to_money']==0): ?>checked<?php endif; ?>>
            </div>
            <div class="layui-form-mid layui-word-aux">核销获得的佣金自动转到绑定的会员账号<?php echo t('余额'); ?></div>
        </div>
    <?php endif; ?>
<?php endif; if(getcustom('mendian_hexiao_give_score')): ?>
<div class="layui-form-item">
    <label class="layui-form-label">核销送<?php echo t('积分'); ?>：</label>
    <div class="layui-input-inline layui-module-itemL">
    	<div>提成比例(%)</div>
        <input style="width: 120px;" type="text"  name="info[hexiao_give_score_bili]" class="layui-input" value="<?php echo (isset($info['hexiao_give_score_bili']) && ($info['hexiao_give_score_bili'] !== '')?$info['hexiao_give_score_bili']:''); ?>">
    </div>
    <div class="layui-form-mid layui-word-aux"><?php echo t('门店'); ?>核销送<?php echo t('积分'); ?>到绑定会员账号，商品金额*提成比例*购买数量，计算结果向下取整数。注意：商品独立设置优先级高于门店设置，留空使用门店设置</div>
</div>
<?php endif; if($showmendian_upgrade): ?>
<fieldset class="layui-elem-field">
	<legend><?php echo t('门店'); ?>核销提成</legend>
	<div class="layui-field-box">
		<div class="layui-form-item">
			<label class="layui-form-label"><?php echo t('门店'); ?>核销提成：</label>
			<div class="layui-input-block" style="width:700px">
				<input type="radio" name="info[mendian_hexiao_set]" value="0" <?php if(!$info['id'] || $info['mendian_hexiao_set']==0): ?>checked<?php endif; ?> title="按照<?php echo t('门店'); ?>等级" lay-filter="mendianhexiaoset">
				<input type="radio" name="info[mendian_hexiao_set]" value="1" <?php if($info['mendian_hexiao_set']==1): ?>checked<?php endif; ?> title="单独设置奖励比例" lay-filter="mendianhexiaoset">
				<input type="radio" name="info[mendian_hexiao_set]" value="2" <?php if($info['mendian_hexiao_set']==2): ?>checked<?php endif; ?> title="单独设置奖励金额" lay-filter="mendianhexiaoset">
				<input type="radio" name="info[mendian_hexiao_set]" value="-1" <?php if($info['mendian_hexiao_set']==-1): ?>checked<?php endif; ?> title="关闭提成" lay-filter="mendianhexiaoset">
			</div>
		</div>
		<?php 
		$mendianhexiaodata1 = json_decode($info['mendianhexiaodata1'],true);
		if(!$mendianhexiaodata1) $mendianhexiaodata1 = [];
		$mendianhexiaodata2 = json_decode($info['mendianhexiaodata2'],true);
		if(!$mendianhexiaodata2) $mendianhexiaodata2  = [];
		 ?>
		<div id="mendianhexiaoset1" <?php if($info['mendian_hexiao_set']!=1): ?>style="display:none"<?php endif; ?>>
			<div class="layui-form-item">
				<label class="layui-form-label">提成比例：</label>
				<?php if(!$mendianlevellist): ?><div class="layui-form-mid" style="color:red">未设<?php echo t('门店'); ?>等级，请先在[<?php echo t('门店'); ?>]等级中添加</div><?php endif; foreach($mendianlevellist as $level): ?>
				<div class="layui-input-inline layui-module-itemL">
					<div> <?php echo $level['name']; ?>(%) </div>
					<input type="text" name="mendianhexiaodata1[<?php echo $level['id']; ?>][ticheng]" class="layui-input" value="<?php echo $mendianhexiaodata1[$level['id']]['ticheng']; ?>">
				</div>
				<?php endforeach; ?>
			</div>
		</div>
		<div id="mendianhexiaoset2" <?php if($info['mendian_hexiao_set']!=2): ?>style="display:none"<?php endif; ?>>
			<div class="layui-form-item">
				<label class="layui-form-label">提成金额：</label>
				<?php if(!$mendianlevellist): ?><div class="layui-form-mid" style="color:red">未设<?php echo t('门店'); ?>等级，请先在[<?php echo t('门店'); ?>]等级中添加</div><?php endif; foreach($mendianlevellist as $level): ?>
				<div class="layui-input-inline layui-module-itemL">
					<div> <?php echo $level['name']; ?>(元) </div>
					<input type="text" name="mendianhexiaodata2[<?php echo $level['id']; ?>][ticheng]" class="layui-input" value="<?php echo $mendianhexiaodata2[$level['id']]['ticheng']; ?>">
				</div>
				<?php endforeach; ?>
			</div>
			<div class="layui-form-item">
				<label class="layui-form-label">计算方式：</label>
				<div class="layui-input-inline" style="width: 300px">
					<input type="radio" name="info[mendianhexiaodata2_cal_type]" value="order_num" title="按单量" <?php if($info['mendianhexiaodata2_cal_type']=='order_num'): ?>checked<?php endif; ?>>
					<input type="radio" name="info[mendianhexiaodata2_cal_type]" value="goods_num" title="按购买数量" <?php if($info['mendianhexiaodata2_cal_type']=='goods_num'): ?>checked<?php endif; ?>>
				</div>
				<div class="layui-form-mid layui-word-aux">按单量：此商品提成=订单数量*提成金额；按购买数量：此商品提成=商品购买数量*提成金额</div>
			</div>
		</div>
	</div>
</fieldset>
<?php endif; if(getcustom('reward_business_score')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">店长奖励<?php echo t('积分'); ?>：</label>
	<div class="layui-input-inline layui-module-itemL">
		<div><?php echo t('积分'); ?>数量</div>
		<input style="width: 120px;" type="text" name="info[reward_business_score]" class="layui-input" value="<?php echo (isset($info['reward_business_score']) && ($info['reward_business_score'] !== '')?$info['reward_business_score']:''); ?>" <?php if($bid>0): ?>readonly style="background:#e6e6e6;"<?php endif; ?>>
	</div>
	<div class="layui-form-mid layui-word-aux">奖励到商家对应绑定的会员账号，店长奖励<?php echo t('积分'); ?>=店长奖励<?php echo t('积分'); ?>*数量，订单确认收货发放</div>
</div>
<?php endif; if(getcustom('zhongkang_sync')): ?>
<div class="layui-form-item">
	<div class="layui-form-label">中康APPID：</div>
	<div class="layui-input-inline" >
		<input type="text" class="layui-input" name="info[zhongkang_appid]" value="<?php echo $info['zhongkang_appid']; ?>"/>
	</div>
	<div class="layui-form-mid layui-word-aux">调用中康时代接口的APPID</div>
</div>
<div class="layui-form-item">
	<div class="layui-form-label">中康等级ID：</div>
	<div class="layui-input-inline" >
		<input  type="number" class="layui-input" name="info[zhongkang_levelid]" value="<?php echo $info['zhongkang_levelid']; ?>"/>
	</div>
	<div class="layui-form-mid layui-word-aux">中康时代等级ID</div>
</div>
<?php endif; if(getcustom('product_service_fee')): ?>
<div class="layui-form-item">
	<label class="layui-form-label">送货单备注：</label>
	<div class="layui-input-inline" style="width: 400px">
		<input type="text" name="info[shd_remark]" value="<?php echo (isset($info['shd_remark']) && ($info['shd_remark'] !== '')?$info['shd_remark']:''); ?>"  class="layui-input">
	</div>
</div>
<?php endif; if(getcustom('product_deposit_mode') && $product_deposit_mode == 1 && $bid == 0): ?>
<div class="layui-form-item">
	<label class="layui-form-label">押金购买模式：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[deposit_mode]" value="1" title="开启" <?php if($info['id'] && $info['deposit_mode']==1): ?>checked<?php endif; ?> />
		<input type="radio" name="info[deposit_mode]" value="0" title="关闭" <?php if(!$info['id'] || $info['deposit_mode']==0): ?>checked<?php endif; ?> />
	</div>
</div>
<?php endif; ?>
<div class="layui-form-item">
	<label class="layui-form-label">状态：</label>
	<div class="layui-input-inline" style="width:600px">
		<input type="radio" name="info[status]" value="1" title="已上架" <?php if(!$info['id'] || $info['status']==1): ?>checked<?php endif; ?> lay-filter="set_status"/>
		<input type="radio" name="info[status]" value="0" title="未上架" <?php if($info['id'] && $info['status']==0): ?>checked<?php endif; ?> lay-filter="set_status"/>
		<input type="radio" name="info[status]" value="2" title="设置上架时间" <?php if($info['id'] && $info['status']==2): ?>checked<?php endif; ?> lay-filter="set_status"/>
		<input type="radio" name="info[status]" value="3" title="设置上架周期" <?php if($info['id'] && $info['status']==3): ?>checked<?php endif; ?> lay-filter="set_status"/>
	</div>
</div>

<div class="layui-form-item" id="set_status2" <?php if($info['status']!=2): ?>style="display:none"<?php endif; ?>>
<label class="layui-form-label">上架时间：</label>
<div class="layui-input-inline" style="width:150px">
	<input type="text" name="info[start_time]" class="layui-input" value="<?php echo $info['start_time']; ?>" id="start_time" autocomplete="off">
</div>
<div class="layui-form-mid">到</div>
<div class="layui-input-inline" style="width:150px">
	<input type="text" name="info[end_time]" class="layui-input" value="<?php echo $info['end_time']; ?>" id="end_time" autocomplete="off">
</div>
<div class="layui-form-mid layui-word-aux" style="clear:left;margin-left:110px"></div>
</div>
<div class="layui-form-item" id="set_status3" <?php if($info['status']!=3): ?>style="display:none"<?php endif; ?>>
<label class="layui-form-label">上架周期：</label>
<div class="layui-input-inline" style="width:150px">
	<input type="text" name="info[start_hours]" class="layui-input" value="<?php echo $info['start_hours']; ?>" id="start_hours" autocomplete="off">
</div>
<div class="layui-form-mid">到</div>
<div class="layui-input-inline" style="width:150px">
	<input type="text" name="info[end_hours]" class="layui-input" value="<?php echo $info['end_hours']; ?>" id="end_hours" autocomplete="off">
</div>
<div class="layui-form-mid layui-word-aux layui-clear">结束时间小于或等于开始时间表示跨天,如:16:00到06:00表示下午4点到次日早晨6点</div>
</div>

<?php if($fromwxvideo): ?>
<div class="layui-form-item">
	<label class="layui-form-label">类目ID：</label>
	<div class="layui-input-inline" style="width:200px">
		<input type="text" name="info[wxvideo_third_cat_id]" lay-verify="required" lay-verType="tips" class="layui-input" value="<?php echo $info['wxvideo_third_cat_id']; ?>">
	</div>
	<button type="button" class="layui-btn layui-btn-primary" onclick="showChooseCategory()">选择</button>
</div>
<div class="layui-form-item">
	<label class="layui-form-label">品牌：</label>
	<div class="layui-input-inline" style="width:200px">
		<select name="info[wxvideo_brand_id]">
			<?php foreach($brand_list as $v): ?>
			<option value="<?php echo $v['brand_id']; ?>" <?php if($info['wxvideo_brand_id'] == $v['brand_id']): ?>selected<?php endif; ?>><?php echo $v['brand_wording']; ?></option>
			<?php endforeach; ?>
		</select>
	</div>
</div>

<div class="layui-form-item" id="trademark_registration_certificate_div">
	<label class="layui-form-label">资质图片：</label>
	<input type="hidden" name="info[wxvideo_qualification_pics]" value="<?php echo $info['wxvideo_qualification_pics']; ?>" id="wxvideo_qualification_pics">
	<button style="float:left;" type="button" class="layui-btn layui-btn-primary" onclick="uploader(this,true)" upload-input="wxvideo_qualification_pics" upload-preview="qualification_picsList" >上传图片</button>
	<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">如所选类目需要商品资质，请在此上传</div>
	<div id="qualification_picsList" style="float:left;padding-top:10px;padding-left:110px;clear: both;">
		<?php if($info['wxvideo_qualification_pics']): $pics = explode(',',$info['wxvideo_qualification_pics']); foreach($pics as $pic): ?>
		<div class="layui-imgbox">
			<a class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).parent().remove();getpicsval('wxvideo_qualification_pics','qualification_picsList')" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a>
			<span class="layui-imgbox-img"><img src="<?php echo $pic; ?>"></span>
		</div>
		<?php endforeach; ?><?php endif; ?>
	</div>
</div>
<?php endif; ?>


<div class="layui-form-item">
	<label class="layui-form-label"></label>
	<div class="layui-input-block">
		<button class="layui-btn layui-btn-normal" onclick="gonext(2)">下一步:编辑商品参数</button>
		<button class="layui-btn layui-btn-danger" lay-submit lay-filter="formsubmit">提 交</button>
	</div>
</div>

</div>

<div class="layui-tab-item">
	<div class="paramTab">
		<?php if(!$paramList): ?><div class="layui-form-item"><label class="layui-form-label"></label><div class="layui-form-mid">暂未添加商品参数或当前商品分类下无参数，<a href="javascript:void(0)" onclick="openmax('<?php echo url('ShopParam/index'); ?>&isopen=1')">去添加</a></div></div><?php endif; foreach($paramList as $k=>$param): ?>
		<div class="layui-form-item">
			<label class="layui-form-label"><?php if($param['is_required']==1): ?><span class="redstar">*</span><?php endif; ?><?php echo $param['name']; ?>：</label>
			<?php if($param['type'] == '0'): ?>
			<div class="layui-input-inline" style="width:240px">
				<input type="text" class="layui-input" name="paramdata[<?php echo $param['name']; ?>]" value="<?php echo $paramdata[$param['name']]; ?>" <?php if($param['is_required']==1): ?>lay-verify="required" lay-verType="tips"<?php endif; ?> placeholder="<?php echo $param['tips']; ?>"/>
			</div>
			<?php elseif($param['type'] == '1'): ?>
			<div class="layui-input-inline" style="width:240px">
				<select name="paramdata[<?php echo $param['name']; ?>]" <?php if($param['is_required']==1): ?>lay-verify="required" lay-verType="tips"<?php endif; ?>>
				<option value=""><?php echo $param['tips']; ?></option>
				<?php  $params = json_decode($param['params'],true); foreach($params as $pm): ?><option <?php if($paramdata[$param['name']] == $pm): ?>selected<?php endif; ?>><?php echo $pm; ?></option><?php endforeach; ?>
				</select>
			</div>
			<?php elseif($param['type'] == '2'): ?>
			<div class="layui-input-inline" style="width:500px">
				<?php  $params = json_decode($param['params'],true); foreach($params as $pm): ?>
				<input type="checkbox" name="paramdata[<?php echo $param['name']; ?>][]" value="<?php echo $pm; ?>" title="<?php echo $pm; ?>" lay-skin="primary" <?php if(in_array($pm,$paramdata[$param['name']])): ?>checked<?php endif; ?>>
				<?php endforeach; ?>
			</div>
			<div class="layui-form-mid layui-word-aux" style="clear:left;margin-left:130px"><?php echo $param['tips']; ?></div>
			<?php endif; ?>
		</div>
		<?php endforeach; ?>
	</div>

	<div class="layui-form-item">
		<label class="layui-form-label"></label>
		<div class="layui-input-block">
			<button class="layui-btn layui-btn-normal" onclick="gonext(3)">下一步:编辑商品详情</button>
			<button class="layui-btn layui-btn-danger" lay-submit lay-filter="formsubmit">提 交</button>
		</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label"></label>
		<div class="layui-input-inline" style="width:500px"></div>
		<div class="layui-form-mid layui-word-aux">使用商品对应的分类参数+未关联分类参数</div>
	</div>
</div>

<div class="layui-tab-item">
	<!-- 详情编辑器 -->
	<?php
									$pagetitle='商品详情';
									$pagedata= $info['detail'] && json_decode($info['detail']) ? $info['detail'] : '[{"id":"M0000000000000","temp":"richtext","params":{bgcolor:"#FFFFFF",margin_x:"0",margin_y:"0",padding_x:"10",padding_y:"10","quanxian":{"all":true},"platform":{"all":true}},"data":"","other":"","content":""}]';
									//商品分类
$clist = db('shop_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
foreach($clist as $k=>$v){
	$clist[$k]['child'] = db('shop_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',$v['id'])->order('sort desc,id')->select()->toArray();
}
if($bid > 0){
	$clist2 = db('shop_category2')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
	foreach($clist2 as $k=>$v){
		$clist2[$k]['child'] = db('shop_category2')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',$v['id'])->order('sort desc,id')->select()->toArray();
	}
}
//商品分组
$glist = db('shop_group')->where('aid',aid)->order('sort desc,id')->select()->toArray();
$gids = [0=>true];
foreach($glist as $g){
	$gids[$g['id']] = true;
}
//文章分类
$aclist = db('article_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
foreach($aclist as $k=>$v){
	$aclist[$k]['child'] = db('article_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',$v['id'])->order('sort desc,id')->select()->toArray();
}
$default_cid = db('member_level_category')->where('aid',aid)->where('isdefault', 1)->value('id');
$default_cid = $default_cid ? $default_cid : 0;
$memberlevelList = db('member_level')->where('aid',aid)->where('cid',$default_cid)->order('sort,id')->select()->toArray();
// 会员身份列表
$identityList = [
    ['id' => '2', 'name' => '顾客'],
    ['id' => '1', 'name' => '店主'],
    ['id' => '3', 'name' => '公司员工'],
    ['id' => '4', 'name' => '供货商'],
    ['id' => '5', 'name' => '店员'],
    ['id' => '6', 'name' => '仓管']
];
//拼团分类
$collage_clist = db('collage_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();

//预约分类
$yuyue_clist = db('yuyue_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
if($bid == 0){
	//积分兑换分类
	$scoreshop_clist = db('scoreshop_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
	//商家分类
	$blist = db('business_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->order('sort desc,id')->select()->toArray();
	//商家
	$bnlist = db('business')->field('id,name,logo,address')->where('aid',aid)->where('status',1)->order('sort desc,id')->select()->toArray();
}
if($bid == 0){
	$shortvideo_clist = db('shortvideo_category')->where('aid',aid)->where('status',1)->order('sort desc,id')->select()->toArray();
}else{
	$shortvideo_clist = db('shortvideo_category')->where('aid',aid)->where('bid',$bid)->where('status',1)->order('sort desc,id')->select()->toArray();
}

//幸运拼团分类
$luckycollage_clist = db('lucky_collage_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();

//团购分类
$tuangou_clist = db('tuangou_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();

//课程类型
$kecheng_clist = db('kecheng_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
foreach($kecheng_clist as $k=>$v){
	$kecheng_clist[$k]['child'] = db('kecheng_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',$v['id'])->order('sort desc,id')->select()->toArray();
}
//周期购分类
$cycle_clist = db('cycle_category')->field('id,name,pic')->where('aid',aid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();

if(getcustom('car_hailing')){
	$carhailing_clist = db('car_hailing_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',0)->order('sort desc,id')->select()->toArray();
	foreach($carhailing_clist as $k=>$v){
		$carhailing_clist[$k]['child'] = db('car_hailing_category')->field('id,name,pic')->where('aid',aid)->where('bid',$bid)->where('status',1)->where('pid',$v['id'])->order('sort desc,id')->select()->toArray();
	}
}

//设计组件权限 默认全部开启
$noshow_modules = [];
if(getcustom('design_module_auth')){
	//查询平台权限组
	$user = db('admin_user')->where('aid',$aid)->where('isadmin','>',0)->field('auth_data,auth_type,groupid')->find();
	//如果开启了组件权限控制
	if($user){
		$neecheck = false;
		if($user['auth_type'] == 1){
			$neecheck = true;
		}else{
			if($user['groupid']){
                $user['auth_data'] = Db::name('admin_user_group')->where('id',$user['groupid'])->value('auth_data');
            }
			$admin_auth = $user['auth_data']?json_decode($user['auth_data'],true):'';
			if(!$admin_auth || in_array('DesignModule,DesignModule',$admin_auth)){
				$neecheck = true;
			}
		}
		if($neecheck){
			$neecheck2 = false;
			if($bid>0){
				//查询商户权限组设置
				$user2 = db('admin_user')->where('aid',$aid)->where('bid',$bid)->where('isadmin','>',0)->field('auth_data,auth_type,groupid')->find();
				//如果开启了组件权限控制
				if($user2 && $user2['auth_type'] != 1){
					if($user2['groupid'] && $user2['groupid']>0){
		                $user2['auth_data'] = Db::name('admin_user_group')->where('id',$user2['groupid'])->value('auth_data');
		            }
					$admin_auth2 = $user2['auth_data']?json_decode($user2['auth_data'],true):'';
					if(!$admin_auth2 || in_array('DesignModule,DesignModule',$admin_auth2)){
						$neecheck2 = true;
					}
				}
			}
			if(($user['auth_type'] !=1 && !in_array('ModuleNotice,ModuleNotice',$admin_auth)) || ($neecheck2 && !in_array('ModuleNotice,ModuleNotice',$admin_auth2)))   $noshow_modules[]='ModuleNotice';
			if(($user['auth_type'] !=1 && !in_array('ModuleBanner,ModuleBanner',$admin_auth)) || ($neecheck2 && !in_array('ModuleBanner,ModuleBanner',$admin_auth2)))   $noshow_modules[]='ModuleBanner';
			if(($user['auth_type'] !=1 && !in_array('ModuleShop,ModuleShop',$admin_auth)) || ($neecheck2 && !in_array('ModuleShop,ModuleShop',$admin_auth2)))     $noshow_modules[]='ModuleShop';
			if(($user['auth_type'] !=1 && !in_array('ModuleSearch,ModuleSearch',$admin_auth)) || ($neecheck2 && !in_array('ModuleSearch,ModuleSearch',$admin_auth2)))   $noshow_modules[]='ModuleSearch';
			if(($user['auth_type'] !=1 && !in_array('ModulePicture,ModulePicture',$admin_auth)) || ($neecheck2 && !in_array('ModulePicture,ModulePicture',$admin_auth2)))  $noshow_modules[]='ModulePicture';
			if(($user['auth_type'] !=1 && !in_array('ModulePictures,ModulePictures',$admin_auth)) || ($neecheck2 && !in_array('ModulePictures,ModulePictures',$admin_auth2))) $noshow_modules[]='ModulePictures';
			if(($user['auth_type'] !=1 && !in_array('ModuleCube,ModuleCube',$admin_auth)) || ($neecheck2 && !in_array('ModuleCube,ModuleCube',$admin_auth2)))     $noshow_modules[]='ModuleCube';
			if(($user['auth_type'] !=1 && !in_array('ModuleRichtext,ModuleRichtext',$admin_auth)) || ($neecheck2 && !in_array('ModuleRichtext,ModuleRichtext',$admin_auth2))) $noshow_modules[]='ModuleRichtext';

			if(($user['auth_type'] !=1 && !in_array('ModuleVideo,ModuleVideo',$admin_auth)) || ($neecheck2 && !in_array('ModuleVideo,ModuleVideo',$admin_auth2)))  $noshow_modules[]='ModuleVideo';
			if(($user['auth_type'] !=1 && !in_array('ModuleTitle,ModuleTitle',$admin_auth)) || ($neecheck2 && !in_array('ModuleTitle,ModuleTitle',$admin_auth2)))  $noshow_modules[]='ModuleTitle';
			if(($user['auth_type'] !=1 && !in_array('ModuleDhlist,ModuleDhlist',$admin_auth)) || ($neecheck2 && !in_array('ModuleDhlist,ModuleDhlist',$admin_auth2))) $noshow_modules[]='ModuleDhlist';
			if(($user['auth_type'] !=1 && !in_array('ModuleText,ModuleText',$admin_auth)) || ($neecheck2 && !in_array('ModuleText,ModuleText',$admin_auth2)))   $noshow_modules[]='ModuleText';
			if(($user['auth_type'] !=1 && !in_array('ModuleButton,ModuleButton',$admin_auth)) || ($neecheck2 && !in_array('ModuleButton,ModuleButton',$admin_auth2))) $noshow_modules[]='ModuleButton';
			if(($user['auth_type'] !=1 && !in_array('ModuleMenu,ModuleMenu',$admin_auth)) || ($neecheck2 && !in_array('ModuleMenu,ModuleMenu',$admin_auth2)))   $noshow_modules[]='ModuleMenu';
			if(($user['auth_type'] !=1 && !in_array('ModuleCover,ModuleCover',$admin_auth)) || ($neecheck2 && !in_array('ModuleCover,ModuleCover',$admin_auth2)))  $noshow_modules[]='ModuleCover';
			if(($user['auth_type'] !=1 && !in_array('ModuleLine,ModuleLine',$admin_auth)) || ($neecheck2 && !in_array('ModuleLine,ModuleLine',$admin_auth2)))   $noshow_modules[]='ModuleLine';

			if(($user['auth_type'] !=1 && !in_array('ModuleBlank,ModuleBlank',$admin_auth)) || ($neecheck2 && !in_array('ModuleBlank,ModuleBlank',$admin_auth2)))     $noshow_modules[]='ModuleBlank';
			if(($user['auth_type'] !=1 && !in_array('ModuleTab,ModuleTab',$admin_auth)) || ($neecheck2 && !in_array('ModuleTab,ModuleTab',$admin_auth2)))       $noshow_modules[]='ModuleTab';
			if(($user['auth_type'] !=1 && !in_array('ModuleMap,ModuleMap',$admin_auth)) || ($neecheck2 && !in_array('ModuleMap,ModuleMap',$admin_auth2)))       $noshow_modules[]='ModuleMap';
			if(($user['auth_type'] !=1 && !in_array('ModuleHotspot,ModuleHotspot',$admin_auth)) || ($neecheck2 && !in_array('ModuleHotspot,ModuleHotspot',$admin_auth2)))   $noshow_modules[]='ModuleHotspot';
			if(($user['auth_type'] !=1 && !in_array('ModuleProduct,ModuleProduct',$admin_auth)) || ($neecheck2 && !in_array('ModuleProduct,ModuleProduct',$admin_auth2)))   $noshow_modules[]='ModuleProduct';
			if(($user['auth_type'] !=1 && !in_array('ModuleArticle,ModuleArticle',$admin_auth)) || ($neecheck2 && !in_array('ModuleArticle,ModuleArticle',$admin_auth2)))   $noshow_modules[]='ModuleArticle';

			if(($user['auth_type'] !=1 && !in_array('ModuleShortvideo,ModuleShortvideo',$admin_auth)) || ($neecheck2 && !in_array('ModuleShortvideo,ModuleShortvideo',$admin_auth2))) $noshow_modules[]='ModuleShortvideo';

			if(($user['auth_type'] !=1 && !in_array('ModuleWxad,ModuleWxad',$admin_auth)) || ($neecheck2 && !in_array('ModuleWxad,ModuleWxad',$admin_auth2)))      $noshow_modules[]='ModuleWxad';
			if(($user['auth_type'] !=1 && !in_array('ModuleUserinfo,ModuleUserinfo',$admin_auth)) || ($neecheck2 && !in_array('ModuleUserinfo,ModuleUserinfo',$admin_auth2)))  $noshow_modules[]='ModuleUserinfo';

			if(($user['auth_type'] !=1 && !in_array('ModulePlatform,ModulePlatform',$admin_auth)) || ($neecheck2 && !in_array('ModulePlatform,ModulePlatform',$admin_auth2)))  $noshow_modules[]='ModulePlatform';
			if(($user['auth_type'] !=1 && !in_array('ModuleQuanxian,ModuleQuanxian',$admin_auth)) || ($neecheck2 && !in_array('ModuleQuanxian,ModuleQuanxian',$admin_auth2)))  $noshow_modules[]='ModuleQuanxian';
		}
	}
}


$categroy_selmore = false;//分类多选

$invite_redpacket = false;//邀请分红包
if(getcustom('extend_invite_redpacket')){
    //查询权限组
    $user = db('admin_user')->where('aid',$aid)->where('isadmin','>',0)->field('auth_type,auth_data')->find();
    //如果开启了设计组件邀请分红包
    if($user['auth_type'] == 1){
        $invite_redpacket = true;//邀请分红包
    }else{
        if($user['groupid']){
            $user['auth_data'] = Db::name('admin_user_group')->where('id',$user['groupid'])->value('auth_data');
        }
        $admin_auth = json_decode($user['auth_data'],true);
        if(in_array('InviteRedpacket/index,InviteRedpacket/*',$admin_auth)){
            $invite_redpacket = true;//邀请分红包
        }
    }
}

$membershopscoreauth = false;//产品积分权限
if(getcustom('member_shopscore')){
    //查询权限组
    $user = db('admin_user')->where('aid',$aid)->where('isadmin','>',0)->field('auth_type,auth_data')->find();
    //如果开启了设计组件邀请分红包
    if($user['auth_type'] == 1){
        $membershopscoreauth = true;
    }else{
        $admin_auth = json_decode($user['auth_data'],true);
        if(in_array('MemberShopscoreAuth,MemberShopscoreAuth',$admin_auth)){
            $membershopscoreauth = true;
        }
    }
}
?>
<div class='panel-body flex' ng-app="FoxEditor" ng-controller="FoxController">
	<div class="dsn-phone">
		<div class="dsn-phone-left"></div>
		<div class="dsn-phone-center">
			<div class="dsn-phone-top"></div>
			<div class="dsn-phone-main">
				<div id="editor">
					<div class="dsn-mod dsn-topbar dsn-mod-nohover" style="color:#fff;background:#000">
						<div style="float:left;width:100%;font-size:12px">
							<div style="float:left;width:30%">&nbsp;<i class="fa fa-signal"></i> wechat <i class="fa fa-wifi"></i></div>
							<div style="float:left;text-align:center;width:40%">12:00</div>
							<div style="float:left;text-align:right;width:30%">100% <i class="fa fa-battery-full"></i>&nbsp;</div>
						</div>
						<div style="float:left;width:98%;margin:2px 1% 0 1%;">
							<div style="float:left;width:30%">&nbsp;</div>
							<div style="float:left;text-align:center;width:40%;font-size:16px;height:27px;line-height:27px"><?php echo $pagetitle; ?></div>
							<!-- <div style="float:right;width:30%;border-radius:20px;width:70px;height: 25px;border:1px solid rgba(255,255,255,0.2);text;text-align:center;overflow:hidden">
								<div style="float:left;width:49%;font-size:17px;height:27px;line-height:27px">
									<div style="float:left;margin-left:2px">&nbsp;&bull;</div>
									<div style="float:left;font-size:27px">&bull;</div>
									<div style="float:left;">&bull;</div>
								</div>
								<div style="float:left;width:2%;"><span style="border-right:1px solid;opacity:0.2;"></span></div>
								<div style="float:right;width:49%;"><i class="fa fa-dot-circle-o" style="font-size:19px;height:25px;line-height:25px"></i></div>
							</div> -->
						</div>
					</div>
					<div id="editor-content">
						<div style="height: 50px;" ng-show="pages[0].params.guide==1"></div>

						<div ng-repeat="Item in Items" class="dsn-repeat" style="{{Item.temp=='cover'?'position:fixed;z-index:'+(9999+$index)+';top:'+(Item.params.top*5.6+contenttop)+'px;left:'+(Item.params.left*3.4+contentleft)+'px;':''}}" ng-mouseover="over(Item.id)" ng-mouseleave="out(Item.id)">
							<div ng-show="Item.temp!='cover'" class="dsn-mod-move" ng-mouseover="drag(Item.id)" ng-click="setfocus(Item.id,$event)"></div>
							<div ng-include="'show-'+Item.temp+'.html'" class="dsn-parent" id="{{Item.id}}" ng-show="Item" mid="{{Item.id}}" on-finish-render-filters></div>
							<div class="dsn-del" ng-click="delItem(Item.id)">移除</div>
						</div>
					</div>
				</div>
			</div>
			<div class="dsn-phone-bottom"></div>
		</div>
		<div class="dsn-phone-right"></div>
	</div>
	<div class="dsn-panel">
		<div class="dsn-panel-menu">
			<div ng-repeat="nav in navs">
				<nav ng-bind="nav.name" ng-click="addItem(nav.id)"></nav>
			</div>
		</div>
		<!-- editor start -->
		<div class="dsn-panel-editor" ng-show="focus" style="">
			<!-- <div class="dsn-panel-editor-ico"></div> -->
			<div ng-repeat="Edit in pages">
				<div ng-include="'edit-'+Edit.temp+'.html'" ng-show="focus==Edit.id" Editid="{{Edit.id}}" ></div>
			</div>
			<div ng-repeat="Edit in Items">
				<div ng-include="'edit-'+Edit.temp+'.html'" ng-show="focus==Edit.id" Editid="{{Edit.id}}" tab-index="-1"></div>
			</div>
		</div>
		<!-- editor end -->
	</div>

	<!-- editor template  page start -->
	<?php if($info['ishome']==2): ?>
	<script type="text/ng-template" id="edit-topbar.html"><div class="dsn-panel-editor-title">页面信息设置<span style="font-size: 12px; margin-left: 10px;"></span></div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">页面标题</div>
    <div class="layui-input-inline">
        <input class="layui-input" placeholder="页面标题，手机端的页面标题" ng-model="Edit.params.title" />
    </div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input type="text" name="menu_bgcolor" class="layui-input" ng-model="Edit.params.bgcolor">
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	
</div>
</script>
	<?php else: ?>
	<script type="text/ng-template" id="edit-topbar.html"><div class="dsn-panel-editor-title">页面信息设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">页面标题</div>
		<div class="layui-input-inline">
			<input type="text" name="menu_name" class="layui-input" ng-model="Edit.params.title">
		</div>
		<div class="layui-form-mid layui-word-aux">手机端的页面标题</div>
	</div>
	
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input type="text" name="menu_bgcolor" class="layui-input" ng-model="Edit.params.bgcolor">
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<?php if(getcustom('design_cat')): ?>
		<div class="layui-form-item">
			<label class="layui-form-label">分类：</label>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:100%;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.cid">
					<option value="">请选择</option>
					<?php foreach($cat_list as $v): ?>
					<option value="<?php echo $v['id']; ?>"><?php echo $v['name']; ?></option>
					<?php endforeach; ?>
				</select>
			</div>
		</div>
	<?php endif; ?>
	
	<div class="layui-form-item">
		<div class="layui-form-label">强制登录</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" title="关闭"  name="{{Edit.id}}_needlogin" value="0" ng-model="Edit.params.needlogin">
			<input class="radio" type="radio" title="开启"  name="{{Edit.id}}_needlogin" value="1" ng-model="Edit.params.needlogin">
		</div>
	</div>
	<?php if(!$info || $info['ishome'] == 0): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">查看权限</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php if(!$type): foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
			<?php endif; if(getcustom('form_query')): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="管理员" name="{{Edit.id}}_quanxian['gly']" ng-model="Edit.params.quanxian['gly']"/>
			<?php endif; ?>
		</div>
	</div>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
		<div class="layui-form-label">无权限提示</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.quanxiantips" />
		</div>
		<div class="layui-form-mid"></div>
	</div>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">无权限跳转</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl2"/>
    </div>
		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -2)">选择链接</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">付费查看</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" title="否"  name="{{Edit.id}}_fufei" value="0" ng-model="Edit.params.fufei">
			<input class="radio" type="radio" title="是"  name="{{Edit.id}}_fufei" value="1" ng-model="Edit.params.fufei">
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.fufei==1">
		<div class="layui-form-label">支付金额</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.money" />
		</div>
		<div class="layui-form-mid">元</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item">
		<div class="layui-form-label">开屏广告</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" title="关闭"  name="{{Edit.id}}_showgg" value="0" ng-model="Edit.params.showgg">
			<?php if(getcustom('design_guanggao_video')): ?>
			<input class="radio" type="radio" title="图片"  name="{{Edit.id}}_showgg" value="1" ng-model="Edit.params.showgg">
			<input class="radio" type="radio" title="视频"  name="{{Edit.id}}_showgg" value="2" ng-model="Edit.params.showgg">
			<?php endif; if(!getcustom('design_guanggao_video')): ?>
			<input class="radio" type="radio" title="开启"  name="{{Edit.id}}_showgg" value="1" ng-model="Edit.params.showgg">
			<?php endif; ?>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showgg==1">
		<div class="layui-form-label">广告图片</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.guanggao" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'guanggao')" style="float:left">选择图片</button>
		<img ng-src="{{Edit.params.guanggao}}" style="width:60px;height:60px;margin-top:4px;margin-left:10px;cursor:pointer" onclick="window.open($(this).attr('src'))">
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showgg==2">
		<div class="layui-form-label">广告视频</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.guanggao" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'guanggao')" style="float:left">选择视频</button>
		<img ng-show="Edit.params.showgg==1" ng-src="{{Edit.params.guanggao}}" style="width:60px;height:60px;margin-top:4px;margin-left:10px;cursor:pointer" onclick="window.open($(this).attr('src'))">
		<?php if(getcustom('design_guanggao_video')): ?>
		<video ng-show="Edit.params.showgg==2" ng-src="{{Edit.params.guanggao}}" height="60" width="140" style="margin-left:10px;" controls></video>
		<?php endif; ?>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showgg>0">
		<div class="layui-form-label">展示人群</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人"  name="{{Edit.id}}_ggrenqun[0]" ng-model="Edit.params.ggrenqun[0]"/>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="已关注"  name="{{Edit.id}}_ggrenqun[-1]" ng-model="Edit.params.ggrenqun[-1]"/>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="未关注"  name="{{Edit.id}}_ggrenqun[-2]" ng-model="Edit.params.ggrenqun[-2]"/>
			<?php if(!$type): foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_ggrenqun[<?php echo $lv['id']; ?>]" ng-model="Edit.params.ggrenqun[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
			<?php endif; ?>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showgg>0">
		<div class="layui-form-label">展示方式</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" title="首次"  name="{{Edit.id}}_cishu" value="0" ng-model="Edit.params.cishu">
			<input class="radio" type="radio" title="每次"  name="{{Edit.id}}_cishu" value="1" ng-model="Edit.params.cishu">
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showgg==1">
    <div class="layui-form-label">跳转链接</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
    </div>
		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
	</div>
</div></script>
	<?php endif; ?>
	<script type="text/ng-template" id="edit-shop.html"><div class="dsn-panel-editor-title">店招设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">选择样式</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" title="样式一" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" />
			<input class="radio" type="radio" title="样式二" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商城logo</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" title="显示" name="{{Edit.id}}_logo" value="1" ng-model="Edit.params.logo" />
			<input class="radio" type="radio" title="不显示" name="{{Edit.id}}_logo" value="2" ng-model="Edit.params.logo" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商城名称</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" title="显示" name="{{Edit.id}}_name" value="1" ng-model="Edit.params.name" />
			<input class="radio" type="radio" title="不显示" name="{{Edit.id}}_name" value="2" ng-model="Edit.params.name" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">默认导航</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" title="显示" name="{{Edit.id}}_menu" value="1" ng-model="Edit.params.menu" />
			<input class="radio" type="radio" title="不显示" name="{{Edit.id}}_menu" value="2" ng-model="Edit.params.menu" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.navcolor}}" ng-model="Edit.params.navcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.navcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景图片</div>
		<div class="layui-input-inline">
			<div class="dsn-panel-editor-upload" ng-click="shopImg(Edit.id)">
				<img ng-src="{{Edit.params.bgimg}}" width="100%" ng-show="Edit.params.bgimg" />
				<div class="dsn-panel-editor-upload-choose2" ng-show="Edit.params.bgimg">重新选择背景图片</div>
				<div class="dsn-panel-editor-upload-choose1" ng-show="!Edit.params.bgimg"><i class="fa fa-plus-circle"></i> 选择图片</div>
			</div>
		</div>
	</div>
	<div ng-repeat="menu in Edit.data" ng-show="Edit.params.menu == 1" class="dsn-panel-editor-relative" style="width:600px">
		<div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-line-right">
				<div class="layui-form-item" style="margin-bottom:5px">
					<div class="layui-form-label">按钮文字</div>
					<div class="layui-input-inline">
						<input class="layui-input" value="" ng-model="menu.text" placeholder="请填写按钮文字" />
					</div>
				</div>
				<div class="layui-form-item" style="margin-bottom:5px">
					<div class="layui-form-label">链接地址</div>
					<div class="layui-input-inline">
						<input class="layui-input"  value="" ng-model="menu.hrefurl" placeholder=""/>
					</div>
					<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, menu.id)">选择链接</div>
					<div class="layui-form-mid">
						<span style="margin-left:10px">{{menu.hrefname}}</span>
					</div>
				</div>
				<div class="layui-form-item" style="margin-bottom:5px">
					<div class="layui-form-label">图 标</div>
					<div class="layui-form-mid" style="margin-top:-5px">
						<input class="hide"  value="" ng-model="menu.icon" placeholder=""/>
						<div class="layui-btn layui-btn-sm layui-btn-primary" ng-click="uploadImgChild(Edit.id, menu.id)">选择图标</div>
						<span style="margin-left:10px;font-size:18px"><img ng-src="{{menu.imgurl}}" style="width:30px;height:30px"/></span>
					</div>
				</div>
			</div>
		</div>
	</div>
	<hr>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-notice.html"><div class="dsn-panel-editor-title">公告设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">公告图标</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showimg" title="不显示" value="0" ng-model="Edit.params.showimg"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showimg" title="显示" value="1" ng-model="Edit.params.showimg" />
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showimg==1">
		<div class="layui-form-label">选择图标</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.img" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'img')" style="float:left">上传图片</button>
		<img ng-src="{{Edit.params.img}}" style="width:60px;height:30px;margin-top:4px;margin-left:10px">
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">小图标</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showicon" title="不显示" value="0" ng-model="Edit.params.showicon"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showicon" title="显示" value="1" ng-model="Edit.params.showicon" />
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==1">
		<div class="layui-form-label">选择图标</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.icon" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'icon')" style="float:left">上传图片</button>
		<img ng-src="{{Edit.params.icon}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px">
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">文字颜色</div>
		<div class="layui-input-inline" style="width:134px">
			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>
		</div>
		<div class="colorpicker" ng-model="Edit.params.color"></div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">文字大小</div>
		<div class="slider" min="10" max="40" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span">
			<input ng-model="Edit.params.fontsize" class="slider-input"/> px
		</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline" style="width:134px">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<div class="colorpicker" ng-model="Edit.params.bgcolor"></div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">滚动速度</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.scroll"></div>
		<span class="slider-span"><input ng-model="Edit.params.scroll" class="slider-input"/> 秒 <span style="color:#999"></span></span>
	</div>

	<div ng-repeat="item in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,item.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,item.id)">×</div>
    <div class="dsn-panel-editor-line" style="padding-left:20px">
			<div class="layui-form-item" style="margin-bottom:2px">
				<div class="layui-form-label">标题名称</div>
				<div class="layui-input-inline">
					<input class="layui-input" ng-model="item.title" />
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0">
				<div class="layui-form-label">跳转链接</div>
				<div class="layui-input-inline">
					<input class="layui-input" value="" ng-model="item.hrefurl"/>
				</div>
				<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id,item.id)">选择链接</div>
				<div class="layui-form-mid">
					<span style="margin-left:10px">{{item.hrefname}}</span>
				</div>
			</div>
		</div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('notice2', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个公告</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-menu.html"><div class="dsn-panel-editor-title">按钮导航设置</div>
<div class="dsn-panel-editor-content">
	<!-- <div class="layui-form-item">
    <div class="layui-form-label">图标样式</div>
    <div class="layui-input-inline">
        <input class="radio" type="radio" name="{{Edit.id}}_style" value="0" ng-model="Edit.params.style"> 正方形
        <input class="radio" type="radio" name="{{Edit.id}}_style" value="100%" ng-model="Edit.params.style"> 圆形
    </div>
	</div> -->
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">每行显示</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_num" value="2" ng-model="Edit.params.num" title="两个">
      <input class="radio" type="radio" name="{{Edit.id}}_num" value="3" ng-model="Edit.params.num" title="三个">
      <input class="radio" type="radio" name="{{Edit.id}}_num" value="4" ng-model="Edit.params.num" title="四个">
      <input class="radio" type="radio" name="{{Edit.id}}_num" value="5" ng-model="Edit.params.num" title="五个">
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">每页显示</div>
    <div class="slider" min="4" max="10" ng-model="Edit.params.pernum"></div>
		<span class="slider-span"><input ng-model="Edit.params.pernum"/> 个</span>
		<span class="slider-span layui-word-aux">注: 超出将左右滑动显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">图标</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_showicon" value="1" ng-model="Edit.params.showicon" title="显示">
      <input class="radio" type="radio" name="{{Edit.id}}_showicon" value="0" ng-model="Edit.params.showicon" title="不显示">
    </div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==1">
		<div class="layui-form-label">图标大小</div>
		<div class="slider" min="10" max="60" ng-model="Edit.params.iconsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.iconsize"/> px</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==1">
		<div class="layui-form-label">圆角度数</div>
		<div class="slider" ng-model="Edit.params.radius"></div>
		<span class="slider-span layui-word-aux">注: 0是方形 100是圆形</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">标题</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_showtitle" value="1" ng-model="Edit.params.showtitle" title="显示">
      <input class="radio" type="radio" name="{{Edit.id}}_showtitle" value="0" ng-model="Edit.params.showtitle" title="不显示">
    </div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showtitle==1">
		<div class="layui-form-label">标题内容</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.title"/>
    </div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showtitle==1">
    <div class="layui-form-label">标题大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.titlesize"></div>
		<span class="slider-span"><input ng-model="Edit.params.titlesize"/> px</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showtitle==1">
    <div class="layui-form-label" ng-model="Edit.params.bgcolor">标题颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.titlecolor}}" ng-model="Edit.params.titlecolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.titlecolor"></span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==0">
		<div class="layui-form-label">中间竖线</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_showline" value="1" ng-model="Edit.params.showline" title="显示">
      <input class="radio" type="radio" name="{{Edit.id}}_showline" value="0" ng-model="Edit.params.showline" title="不显示">
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label" ng-model="Edit.params.bgcolor">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">字体大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">字体行高</div>
    <div class="slider" min="20" max="60" ng-model="Edit.params.fontheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontheight"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.boxradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.boxradius"/> px</span>
	</div>

	<div ng-repeat="menu in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,menu.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,menu.id)">×</div>
    <div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-goodimg flex0" ng-click="uploadImgChild(Edit.id, menu.id)" style="height:120px; width:120px;">
				<img ng-src="{{menu.imgurl}}" width="100%" ng-show="menu.imgurl" />
				<div class="dsn-panel-editor-goodimg-t1" ng-show="!menu.imgurl" style="line-height:120px;"><i class="fa fa-plus-circle"></i> 选择图片</div>
				<div class="dsn-panel-editor-goodimg-t2" ng-show="menu.imgurl" style="width:120px;">重新选择图片</div>
			</div>
			<div class="dsn-panel-editor-line-right ">
				<div class="layui-form-item" style="margin-bottom:5px">
					<div class="layui-form-label">按钮文字</div>
					<div class="layui-input-inline">
						<input class="layui-input" value="" ng-model="menu.text" placeholder="请填写按钮文字" />
          </div>
				</div>
				<div class="layui-form-item" style="margin-bottom:0">
					<div class="layui-form-label">跳转链接</div>
					<div class="layui-input-inline">
						<input class="layui-input" value="" ng-model="menu.hrefurl"/>
					</div>
					<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id,menu.id)">选择链接</div>
					<div class="layui-form-mid" style="margin-left: 90px;">
						<span style="margin-left:10px">{{menu.hrefname}}</span>
					</div>
				</div>
				<div class="layui-form-item" style="margin-bottom:0px">
					<div class="layui-form-label">文字颜色</div>
					<div class="layui-input-inline">
						<input class="layui-input" value="{{menu.color}}" ng-model="menu.color"/>
					</div>
					<span class="colorpicker" ng-model="menu.color"></span>
				</div>
			</div>
    </div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('menu', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个按钮</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-banner.html"><div class="dsn-panel-editor-title">轮播设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>

	
	<div class="layui-form-item">
		<div class="layui-form-label">是否显示指示点</div>
		<div class="layui-input-inline">
			<input class="radio" title="显示" type="radio" name="{{Edit.id}}_indicatordots" value="1" ng-model="Edit.params.indicatordots">
			<input class="radio" title="不显示" type="radio" name="{{Edit.id}}_indicatordots" value="0" ng-model="Edit.params.indicatordots">
    </div>
	</div>
	<div ng-show="Edit.params.indicatordots==1">
	<div class="layui-form-item">
    <div class="layui-form-label">指示点形状</div>
    <div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_shape" value="" ng-model="Edit.params.shape" title="默认">
        <input class="radio" type="radio" name="{{Edit.id}}_shape" value="shape1" ng-model="Edit.params.shape" title="长方形">
        <input class="radio" type="radio" name="{{Edit.id}}_shape" value="shape2" ng-model="Edit.params.shape" title="正方形">
        <input class="radio" type="radio" name="{{Edit.id}}_shape" value="shape3" ng-model="Edit.params.shape" title="圆形">
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">指示点位置</div>
    <div class="layui-input-inline" style="width:500px">
        <input class="radio" type="radio" name="{{Edit.id}}_align" value="left" ng-model="Edit.params.align" title="居左">
        <input class="radio" type="radio" name="{{Edit.id}}_align" value="center" ng-model="Edit.params.align" title="居中">
        <input class="radio" type="radio" name="{{Edit.id}}_align" value="right" ng-model="Edit.params.align" title="居右">
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">指示点与下方距离</div>
    <div class="slider" min="0" max="{{Edit.params.height}}" ng-model="Edit.params.dotSite"></div>
		<span class="slider-span"><input ng-model="Edit.params.dotSite"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">指示点颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.indicatorcolor}}" ng-model="Edit.params.indicatorcolor"/>
    </div>
		<span class="colorpicker" coloralpha="1" ng-model="Edit.params.indicatorcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">选中指示点颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.indicatoractivecolor}}" ng-model="Edit.params.indicatoractivecolor"/>
    </div>
		<span class="colorpicker" coloralpha="1" ng-model="Edit.params.indicatoractivecolor"></span>
	</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">轮播图高度</div>
    <div class="slider" min="100" max="500" ng-model="Edit.params.height"></div>
		<span class="slider-span"><input ng-model="Edit.params.height"/> px</span>
	</div>
	<div class="layui-form-item">
        <div class="layui-form-label">圆角度</div>
        <div class="slider" min="0" max="100" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">自动切换时间</div>
    <div class="slider" min="2" max="20" ng-model="Edit.params.interval"></div>
		<span class="slider-span"><input ng-model="Edit.params.interval"/> 秒</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" coloralpha="1" ng-model="Edit.params.bgcolor"></span>
	</div>

	<!--<div class="layui-form-item">
    <div class="layui-form-label">前边距</div>
    <div class="slider" min="0" max="100" ng-model="Edit.params.previous_margin"></div>
		<span class="slider-span">
			<input ng-model="Edit.params.previous_margin"/> px
			<span style="color:#999">可用于露出前一项的一小部分</span>
		</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">后边距</div>
    <div class="slider" min="0" max="100" ng-model="Edit.params.next_margin"></div>
		<span class="slider-span">
			<input ng-model="Edit.params.next_margin"/> px
			<span style="color:#999">可用于露出后一项的一小部分</span>
		</span>
	</div>-->


	<div ng-repeat="banner in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,banner.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id, banner.id)">×</div>
    <div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-goodimg flex0" ng-click="uploadImgChild(Edit.id, banner.id)">
				<img ng-src="{{banner.imgurl}}" width="100%" ng-show="banner.imgurl" />
				<div class="dsn-panel-editor-goodimg-t1" ng-show="!banner.imgurl"><i class="fa fa-plus-circle"></i> 选择图片</div>
				<div class="dsn-panel-editor-goodimg-t2" ng-show="banner.imgurl">重新选择图片</div>
			</div>
			<div class="dsn-panel-editor-line-right flex-y-center">
				<div class="flex-y-center">
					<input class="layui-input" style="width:170px" value="" ng-model="banner.hrefurl" placeholder=""/>
					<span class="layui-btn  layui-btn-primary" ng-click="chooseUrl(Edit.id, banner.id)">选择链接</span>
					<span style="margin-left:10px">{{banner.hrefname}}</span>
				</div>
			</div>
    </div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px;margin-bottom:10px" ng-click="addItemChild('banner', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个轮播</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-picture.html"><div class="dsn-panel-editor-title">单图设置<span class="tips"></span></div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div ng-repeat="picture in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
		<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,picture.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id, picture.id)">×</div>
    <div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-goodimg flex0" ng-click="uploadImgChild(Edit.id, picture.id)">
				<img ng-src="{{picture.imgurl}}" width="100%" ng-show="picture.imgurl" />
				<div class="dsn-panel-editor-goodimg-t1" ng-show="!picture.imgurl"><i class="fa fa-plus-circle"></i> 选择图片</div>
				<div class="dsn-panel-editor-goodimg-t2" ng-show="picture.imgurl">重新选择图片</div>
			</div>
			<div class="dsn-panel-editor-line-right flex-y-center">
				<div class="flex-y-center">
					<input class="layui-input" style="width:170px" value="" ng-model="picture.hrefurl" placeholder=""/>
					<span class="layui-btn layui-btn-primary" ng-click="chooseUrl(Edit.id, picture.id)">选择链接</span>
				</div>
					<span style="margin-left:10px">{{picture.hrefname}}</span>
			</div>
    </div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('picture', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个单图</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="100" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-pictures.html"><div class="dsn-panel-editor-title">多图设置<span class="tips"></span></div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">布局方式</div>
    <div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" title="堆积两列"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" title="堆积三列"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="4" ng-model="Edit.params.style" title="堆积四列"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="5" ng-model="Edit.params.style" title="橱窗样式"/>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div ng-repeat="picture in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,picture.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id, picture.id)">×</div>
    <div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-goodimg flex0" ng-click="uploadImgChild(Edit.id, picture.id)">
				<img ng-src="{{picture.imgurl}}" width="100%" ng-show="picture.imgurl" />
				<div class="dsn-panel-editor-goodimg-t1" ng-show="!picture.imgurl"><i class="fa fa-plus-circle"></i> 选择图片</div>
				<div class="dsn-panel-editor-goodimg-t2" ng-show="picture.imgurl">重新选择图片</div>
			</div>
			<div class="dsn-panel-editor-line-right">
				<div class="layui-form-item">
					<div class="layui-form-label">点击图片</div>
					<div class="layui-input-inline" style="width:280px">
						<input class="radio" type="radio" name="{{picture.id}}_gototype" value="0" ng-model="picture.gototype" title="跳转链接"/>
						<input class="radio" type="radio" name="{{picture.id}}_gototype" value="1" ng-model="picture.gototype" title="预览图片"/>
					</div>
				</div>
				<div class="layui-form-item">
					<div class="layui-form-label">链接地址</div>
					<div class="layui-input-inline" style="width:170px">
						<input class="layui-input" value="" ng-model="picture.hrefurl"/>
					</div>
					<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, picture.id)">选择链接</div>
					<div class="layui-form-mid" style="margin-left:110px"><span>{{picture.hrefname}}</span></div>
				</div>
			</div>
    </div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('pictures', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个单图</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-title.html"><div class="dsn-panel-editor-title">标题设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题名称</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.title" />
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color1"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">图标</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_showicon" value="1" ng-model="Edit.params.showicon" title="显示"/>
      <input class="radio" type="radio" name="{{Edit.id}}_showicon" value="0" ng-model="Edit.params.showicon" title="不显示"/>
    </div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==1">
		<div class="layui-form-label">选择图标</div>
		<div class="layui-form-mid" style="margin-top:-5px">
			<span class="layui-btn layui-btn-sm layui-btn-primary" ng-click="uploadImg(Edit.id,'imgurl')">上传图标</span>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showicon==1">
    <div class="layui-form-label">图标大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.iconsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.iconsize"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">横线颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.linecolor}}" ng-model="Edit.params.linecolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.linecolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-dhlist.html"><div class="dsn-panel-editor-title">列表导航设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize1"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize1"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color1}}" ng-model="Edit.params.color1"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color1"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题左间距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.titlemarginleft"></div>
		<span class="slider-span"><input ng-model="Edit.params.titlemarginleft"/> px</span>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">备注大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize2"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize2"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">备注颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color2}}" ng-model="Edit.params.color2"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color2"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">右箭头</div>
    <div class="layui-input-inline">
        <input class="radio" type="radio" name="{{Edit.id}}_arrowshow" value="1" ng-model="Edit.params.arrowshow" title="显示"/>
        <input class="radio" type="radio" name="{{Edit.id}}_arrowshow" value="0" ng-model="Edit.params.arrowshow" title="不显示"/>
    </div>
	</div>

	<div ng-repeat="dh in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,dh.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,dh.id)">×</div>
    <div class="dsn-panel-editor-line" style="padding-left:20px">
			<div class="layui-form-item" style="margin-bottom:0">
				<div class="layui-form-label">图标</div>
				<div class="layui-input-inline" style="width:350px">
					<input class="radio" type="radio" name="showicon_{{dh.id}}" value="1" ng-model="dh.showicon" title="显示"/>
					<input class="radio" type="radio" name="showicon_{{dh.id}}" value="0" ng-model="dh.showicon" title="不显示"/>
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0" ng-show="dh.showicon==1">
				<div class="layui-form-label">选择图标</div>
				<div class="layui-form-mid" style="margin-top:-5px">
					<span class="layui-btn layui-btn-sm layui-btn-primary" ng-click="uploadImgChild(Edit.id,dh.id)">上传图标</span>
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0" ng-show="dh.showicon==1">
				<div class="layui-form-label">图标大小</div>
				<div class="slider" min="10" max="40" ng-model="dh.iconsize"></div>
				<span class="slider-span"><input ng-model="dh.iconsize"/> px</span>
			</div>
			<div class="layui-form-item" style="margin-bottom:2px">
				<div class="layui-form-label">标题名称</div>
				<div class="layui-input-inline">
					<input class="layui-input" ng-model="dh.title1" />
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0">
				<div class="layui-form-label">备注内容</div>
				<div class="layui-input-inline">
					<input class="layui-input" ng-model="dh.title2" />
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0">
				<div class="layui-form-label">跳转链接</div>
				<div class="layui-input-inline">
					<input class="layui-input" value="" ng-model="dh.hrefurl"/>
				</div>
				<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id,dh.id)">选择链接</div>
				<div class="layui-form-mid">
					<span style="margin-left:10px">{{dh.hrefname}}</span>
				</div>
			</div>
		</div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('dhlist', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个导航</div>


	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-text.html"><div class="dsn-panel-editor-title">文本设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">文本内容</div>
    <div class="layui-input-inline" style="width:400px">
			<textarea class="layui-textarea" ng-model="Edit.params.content" style="height:100px;"></textarea>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">文本大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">文本行高</div>
    <div class="slider" min="10" max="50" ng-model="Edit.params.lineheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.lineheight"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">字体间距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.letter_spacing"></div>
		<span class="slider-span"><input ng-model="Edit.params.letter_spacing"/> px</span>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">字体加粗</div>
    <div class="layui-input-inline">
			<input style="display:none" type="checkbox" class="switch" lay-skin="switch" ng-model="Edit.params.fontbold">
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">对齐方向</div>
    <div class="layui-input-inline" style="width:500px">
      <input class="radio" type="radio" name="{{Edit.id}}_align" value="left" ng-model="Edit.params.align" title="居左"/>
      <input class="radio" type="radio" name="{{Edit.id}}_align" value="center" ng-model="Edit.params.align" title="居中"/>
      <input class="radio" type="radio" name="{{Edit.id}}_align" value="right" ng-model="Edit.params.align" title="居右"/>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">文字颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景图片</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgpic}}" ng-model="Edit.params.bgpic"/>
    </div>
		<div class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'bgpic')">上传</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">跳转链接</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
    </div>
		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
		<div class="layui-form-mid">
			<span style="margin-left:10px">{{Edit.params.hrefname}}</span>
    </div>
	</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-search.html"><div class="dsn-panel-editor-title">搜索框设置</div>
<div class="dsn-panel-editor-content">
    <?php if(getcustom('search_openmore')): ?>
    <div class="layui-form-item">
        <div class="layui-form-label">开启多搜索</div>
        <div class="layui-input-inline">
            <input class="radio" type="radio" name="{{Edit.id}}_openmore" value="1" ng-model="Edit.params.openmore" title="开启"/>
            <input class="radio" type="radio" name="{{Edit.id}}_openmore" value="0" ng-model="Edit.params.openmore" title="不开启"/>
        </div>
        <div class="layui-form-mid layui-word-aux">开启后下方的提示文字及跳链接将失效</div>
    </div>
    <div class="layui-form-item" ng-show="Edit.params.openmore == 1">
        <div ng-show="Edit.data" ng-repeat="dh in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
            <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,dh.id)"><i class="fa fa-arrow-up"></i></div>
            <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,dh.id)">×</div>
            <div class="dsn-panel-editor-line" style="padding-left:20px">
                <div class="layui-form-item" style="margin-bottom:2px">
                    <div class="layui-form-label">标题名称</div>
                    <div class="layui-input-inline">
                        <input class="layui-input" ng-model="dh.title1" />
                    </div>
                </div>
                <div class="layui-form-item" style="margin-bottom:2px">
                    <div class="layui-form-label">提示文字</div>
                    <div class="layui-input-inline">
                        <input class="layui-input" ng-model="dh.title2" />
                    </div>
                </div>
                <div class="layui-form-item" style="margin-bottom:0">
                    <div class="layui-form-label">跳转链接</div>
                    <div class="layui-input-inline">
                        <input class="layui-input" value="" ng-model="dh.hrefurl"/>
                    </div>
                    <div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id,dh.id)">选择链接</div>
                    <div class="layui-form-mid">
                        <span style="margin-left:10px">{{dh.hrefname}}</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('search', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个导航</div>
        <hr>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">搜索按钮</div>
        <div class="layui-input-inline">
            <input class="radio" type="radio" name="{{Edit.id}}_btn" value="1" ng-model="Edit.params.btn" title="开启"/>
            <input class="radio" type="radio" name="{{Edit.id}}_btn" value="0" ng-model="Edit.params.btn" title="不开启"/>
        </div>
    </div>
    <?php endif; ?>
	<div class="layui-form-item" ng-show="Edit.params.openmore != 1">
        <div class="layui-form-label">提示文字</div>
        <div class="layui-input-inline" style="width:320px">
           <input class="layui-input" placeholder="搜索框默认提示文字" ng-model="Edit.params.placeholder" />
        </div>
	</div>
	<div class="layui-form-item">
        <div class="layui-form-label">文字颜色</div>
        <div class="layui-input-inline">
            <input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>
        </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
        <div class="layui-form-label">边框颜色</div>
        <div class="layui-input-inline">
            <input class="layui-input" value="{{Edit.params.bordercolor}}" ng-model="Edit.params.bordercolor"/>
        </div>
		<span class="colorpicker" ng-model="Edit.params.bordercolor"></span>
	</div>
	<div class="layui-form-item">
        <div class="layui-form-label">背景颜色</div>
        <div class="layui-input-inline">
            <input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
        </div>
        <span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
    </div>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="50" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.openmore != 1">
        <div class="layui-form-label">跳转链接</div>
        <div class="layui-input-inline">
            <input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
        </div>
        <div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
        <div class="layui-form-mid">
            <span style="margin-left:10px">{{Edit.params.hrefname}}</span>
        </div>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
    <?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>
		</div>
	</div>
    <?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
    <?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
    <?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-lbssearch.html"><?php if(getcustom('lbs_search')): ?>
<div class="dsn-panel-editor-title">搜索框设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">显示级别</div>
		<div class="layui-input-inline" style="width: 50%">
			<input class="radio" type="radio" name="{{Edit.id}}_showlevel" value="1" ng-model="Edit.params.showlevel" title="省"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showlevel" value="2" ng-model="Edit.params.showlevel" title="市"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showlevel" value="3" ng-model="Edit.params.showlevel" title="县"/>
		</div>
	</div>
    <div class="layui-form-item">
        <div class="layui-form-label">搜索按钮</div>
        <div class="layui-input-inline">
            <input class="radio" type="radio" name="{{Edit.id}}_btn" value="1" ng-model="Edit.params.btn" title="开启"/>
            <input class="radio" type="radio" name="{{Edit.id}}_btn" value="0" ng-model="Edit.params.btn" title="不开启"/>
        </div>
    </div>

	<div class="layui-form-item">
    <div class="layui-form-label">提示文字</div>
    <div class="layui-input-inline" style="width:320px">
       <input class="layui-input" placeholder="搜索框默认提示文字" ng-model="Edit.params.placeholder" />
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">文字颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">边框颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bordercolor}}" ng-model="Edit.params.bordercolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bordercolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="50" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<div class="layui-form-item">
        <div class="layui-form-label">跳转链接</div>
        <div class="layui-input-inline">
    			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
        </div>
    		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
    		<div class="layui-form-mid">
    			<span style="margin-left:10px">{{Edit.params.hrefname}}</span>
        </div>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="edit-line.html"><div class="dsn-panel-editor-title">辅助线设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">选择样式</div>
    <div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="solid" ng-model="Edit.params.style" title="实线"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="dashed" ng-model="Edit.params.style" title="虚线"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="dotted" ng-model="Edit.params.style" title="圆点"/>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">辅助线高度</div>
    <div class="slider" min="1" max="40" ng-model="Edit.params.height"></div>
		<span class="slider-span"><input ng-model="Edit.params.height"/> px</span>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">设置颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
      <input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-blank.html"><div class="dsn-panel-editor-title">辅助空白设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">空白高度</div>
		<div class="slider" min="1" max="100" ng-model="Edit.params.height"></div>
		<span class="slider-span"><input ng-model="Edit.params.height"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-product.html"><div class="dsn-panel-editor-title">商城商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="waterfall" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="瀑布流"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<?php if(getcustom('product_field_buy')): ?>
	<div ng-show="Edit.params.style==2">
		<div class="layui-form-item" >
			<div class="layui-form-label">品牌</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_brand" value="1" ng-model="Edit.params.brand" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_brand" value="0" ng-model="Edit.params.brand" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">品牌为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">货号</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_barcode" value="1" ng-model="Edit.params.barcode" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_barcode" value="0" ng-model="Edit.params.barcode" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">货号为商品编码，为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">规格</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_guige" value="1" ng-model="Edit.params.guige" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_guige" value="0" ng-model="Edit.params.guige" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">规为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">单位</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_unit" value="1" ng-model="Edit.params.unit" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_unit" value="0" ng-model="Edit.params.unit" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">单位为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">库存</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_ggstock" value="1" ng-model="Edit.params.ggstock" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_ggstock" value="0" ng-model="Edit.params.ggstock" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">库存为商品第一个规格里的库存数量</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">有效期</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_valid_time" value="1" ng-model="Edit.params.valid_time" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_valid_time" value="0" ng-model="Edit.params.valid_time" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">有效期为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">备注</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_remark" value="1" ng-model="Edit.params.remark" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_remark" value="0" ng-model="Edit.params.remark" title="不显示"/>
			</div>
			<div class="layui-form-mid layui-word-aux">备注为空时不显示</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">立即购买</div>
			<div class="layui-input-inline" >
				<input class="radio" type="radio" name="{{Edit.id}}_nowbuy" value="1" ng-model="Edit.params.nowbuy" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_nowbuy" value="0" ng-model="Edit.params.nowbuy" title="不显示"/>
			</div>
		</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="销售价"/>
			<?php if(getcustom('product_nextmemberlevel_price_show')): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="3" ng-model="Edit.params.showprice" title="销售价+会员价"/>
			<?php endif; if(getcustom('product_scoredk_price_show')): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="4" ng-model="Edit.params.showprice" title="销售价+积分抵扣价"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：原价+销售价，原价大于销售价才会显示原价</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.style=='waterfall'">
		<div class="layui-form-label">商品库存</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showstock" value="1" ng-model="Edit.params.showstock" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showstock" value="0" ng-model="Edit.params.showstock" title="不显示"/>
		</div>
	</div>
	<?php if(getcustom('product_cost_show')): ?>
	<div class="layui-form-item" ng-show="Edit.params.style!='line'">
		<div class="layui-form-label">商品成本</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcost" value="1" ng-model="Edit.params.showcost" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcost" value="0" ng-model="Edit.params.showcost" title="不显示"/>
		</div>
	</div>
	<?php endif; if(getcustom('home_product_show_binfo')): ?>
	<div class="layui-form-item" ng-show="Edit.params.style=='waterfall' || Edit.params.style==1 || Edit.params.style==2 || Edit.params.style=='list'">
		<div class="layui-form-label">商家名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showbname" value="1" ng-model="Edit.params.showbname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showbname" value="0" ng-model="Edit.params.showbname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.style=='waterfall' || Edit.params.style==1 || Edit.params.style==2 || Edit.params.style=='list'">
		<div class="layui-form-label">商家距离</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showbdistance" value="1" ng-model="Edit.params.showbdistance" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showbdistance" value="0" ng-model="Edit.params.showbdistance" title="不显示"/>
		</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item" ng-show="Edit.params.style=='waterfall'">
		<div class="layui-form-label">优惠券</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcoupon" value="1" ng-model="Edit.params.showcoupon" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcoupon" value="0" ng-model="Edit.params.showcoupon" title="不显示"/>
		</div>
	</div>
	<?php if(getcustom('design_product_commission') || getcustom('home_product_show_binfo')): ?>
	<div class="layui-form-item" ng-show="Edit.params.style=='waterfall' || Edit.params.style==1 || Edit.params.style==2 || Edit.params.style=='list'">
		<div class="layui-form-label">佣金</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcommission" value="1" ng-model="Edit.params.showcommission" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcommission" value="0" ng-model="Edit.params.showcommission" title="不显示"/>
		</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item" ng-show="Edit.params.showname == 1">
		<div class="layui-form-label">购买按钮</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="0" ng-model="Edit.params.showcart" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="1" ng-model="Edit.params.showcart" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="2" ng-model="Edit.params.showcart" title="自己上传"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showcart==2">
		<div class="layui-form-label">购买图标</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.cartimg" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'cartimg')" style="float:left">上传图片</button>
		<img ng-show="Edit.params.cartimg!=''" ng-src="{{Edit.params.cartimg}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px">
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<?php if(getcustom('probgcolor')): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">商品背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.probgcolor}}" ng-model="Edit.params.probgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.probgcolor"></span>
	</div>
	<?php endif; if(getcustom('yx_invite_cashback')): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">仅邀请返现</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_icback" value="0" ng-model="Edit.params.icback" title="关闭" ng-change="getgoods(Edit.id)"/>
			<input class="radio" type="radio" name="{{Edit.id}}_icback" value="1" ng-model="Edit.params.icback" title="开启" ng-change="getgoods(Edit.id)"/>
		</div>
		<div class="layui-form-mid layui-word-aux">开启后，商品来源为分组分类的只显示邀请返现商品，关闭则都显示</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delGood(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addGood('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addGood('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getgoods(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category['all']" ng-change="getgoods(Edit.id)" title="所有分类">
				<?php if(!$type): foreach($clist as $cv): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category[<?php echo $cv['id']; ?>]" ng-change="getgoods(Edit.id)" title="<?php echo $cv['name']; ?>">
				<?php foreach($cv['child'] as $v): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category[<?php echo $v['id']; ?>]" ng-change="getgoods(Edit.id)" title="&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?>">
				<?php endforeach; ?>
				<?php endforeach; ?>
				<?php endif; ?>
			</div>
		</div>
		<?php if($bid > 0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商家商品分类</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category2['all']" ng-change="getgoods(Edit.id)" title="所有分类">
				<?php if(!$type): foreach($clist2 as $cv): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category2[<?php echo $cv['id']; ?>]" ng-change="getgoods(Edit.id)" title="<?php echo $cv['name']; ?>">
				<?php foreach($cv['child'] as $v): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.category2[<?php echo $v['id']; ?>]" ng-change="getgoods(Edit.id)" title="&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?>">
				<?php endforeach; ?>
				<?php endforeach; ?>
				<?php endif; ?>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分组</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.group['all']" ng-change="getgoods(Edit.id)" title="所有分组">
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.group[0]" ng-change="getgoods(Edit.id)" title="无分组">
				<?php if(!$type): foreach($glist as $g): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" ng-model="Edit.params.group[<?php echo $g['id']; ?>]" ng-change="getgoods(Edit.id)" title="<?php echo $g['name']; ?>">
				<?php endforeach; ?>
				<?php endif; ?>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="销量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="随机"/>
				<?php if(getcustom('prolist_showjuli')): ?>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="juli" ng-model="Edit.params.sortby" ng-change="getgoods(Edit.id)" title="距离"/>
				<?php endif; ?>
			</div>
		</div>
		<div class="layui-form-item">
		<div class="layui-form-label">显示数量</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getgoods(Edit.id)"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">分类页面</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_classifypage" value="0" ng-model="Edit.params.classifypage" title="默认分类页"/>
			<input class="radio" type="radio" name="{{Edit.id}}_classifypage" value="1" ng-model="Edit.params.classifypage" title="分类页2"/>
		</div>
	</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-cycle.html"><div class="dsn-panel-editor-title">周期购商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="市场价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getcycle(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delcollage(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addcollage('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addcollage('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getcycle(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getcycle(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($cycle_clist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getcycle(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getcycle(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getcycle(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getcycle(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getcycle(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div>
</script>
	<script type="text/ng-template" id="edit-collage.html"><div class="dsn-panel-editor-title">拼团商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>

	

	<div ng-if="Edit.params.shopstyle=='1' || !Edit.params.shopstyle" class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>

	

	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+拼团价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="只显示拼团价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getcollage(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delcollage(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addcollage('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addcollage('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getcollage(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getcollage(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($collage_clist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getcollage(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getcollage(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getcollage(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getcollage(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getcollage(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-kanjia.html"><div class="dsn-panel-editor-title">砍价商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+砍后价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="只显示砍后价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="按商家" ng-change="getkanjia(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delkanjia(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addkanjia('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.min_price}}</span> <span style="text-decoration: line-through;">￥{{good.sell_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addkanjia('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getkanjia(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
<!--		<div class="layui-form-item">-->
<!--			<div class="layui-form-label">商品分类</div>-->
<!--			<div class="layui-input-inline">-->
<!--				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getkanjia(Edit.id)">-->
<!--					<option value="">全部分类</option>-->
<!--					<?php foreach($kanjia_clist as $cv): ?>-->
<!--						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>-->
<!--						<?php foreach($cv['child'] as $v): ?>-->
<!--						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>-->
<!--						<?php endforeach; ?>-->
<!--					<?php endforeach; ?>-->
<!--				</select>-->
<!--			</div>-->
<!--		</div>-->

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getkanjia(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getkanjia(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getkanjia(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getkanjia(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getkanjia(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-seckill.html"><div class="dsn-panel-editor-title">秒杀商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>

	

	<div ng-if="Edit.params.shopstyle=='1' || !Edit.params.shopstyle" class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>

	

	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showrange" value="0" ng-model="Edit.params.showrange" title="全部" ng-change="getseckill(Edit.id)"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showrange" value="1" ng-model="Edit.params.showrange" title="进行中" ng-change="getseckill(Edit.id)"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showrange" value="2" ng-model="Edit.params.showrange" title="未开始" ng-change="getseckill(Edit.id)"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+秒杀价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="只显示秒杀价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div ng-if="Edit.params.shopstyle=='1' || !Edit.params.shopstyle" class="layui-form-item">
		<div class="layui-form-label">倒计时</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showtime" value="1" ng-model="Edit.params.showtime" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showtime" value="0" ng-model="Edit.params.showtime" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">根据时间显示文字：距开抢xx；距结束xx;已结束;(三排和左右滑动不显示时间)</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getseckill(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delseckill(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addseckill('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addseckill('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getseckill(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getseckill(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getseckill(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getseckill(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getseckill(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getseckill(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-scoreshop.html"><div class="dsn-panel-editor-title"><?php echo t('积分'); ?>兑换商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="市场价+所需<?php echo t('积分'); ?>"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="只显示所需<?php echo t('积分'); ?>"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getscoreshop(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delscoreshop(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addscoreshop('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.money_price}} + {{good.score_price}}<?php echo t('积分'); ?> </span> <span style="text-decoration: line-through;">￥{{good.sell_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addscoreshop('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if(getcustom('business_scoreshop')): if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getscoreshop(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getscoreshop(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($scoreshop_clist as $cv): ?>
						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
						<?php foreach($cv['child'] as $v): ?>
						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
						<?php endforeach; ?>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getscoreshop(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getscoreshop(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getscoreshop(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getscoreshop(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getscoreshop(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-coupon.html"><div class="dsn-panel-editor-title">商品组设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item" ng-hide="Edit.params.showname=='0'">
		<div class="layui-form-label">标题颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.titlecolor}}" ng-model="Edit.params.titlecolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.titlecolor"></span>
	</div>
	<div class="layui-form-item" ng-hide="Edit.params.showname=='0'">
		<div class="layui-form-label">备注颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.remarkcolor}}" ng-model="Edit.params.remarkcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.remarkcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景样式</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_bgpic" value="<?php echo PRE_URL; ?>/static/imgsrc/coupon1.png" ng-model="Edit.params.bgpic" title="样式一"/>
			<input class="radio" type="radio" name="{{Edit.id}}_bgpic" value="<?php echo PRE_URL; ?>/static/imgsrc/coupon2.png" ng-model="Edit.params.bgpic" title="样式二"/>
			<input class="radio" type="radio" name="{{Edit.id}}_bgpic" value="<?php echo PRE_URL; ?>/static/imgsrc/coupon3.png" ng-model="Edit.params.bgpic" title="样式三"/>
			<input class="radio" type="radio" name="{{Edit.id}}_bgpic" value="<?php echo PRE_URL; ?>/static/imgsrc/coupon4.png" ng-model="Edit.params.bgpic" title="样式四"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'bgpic')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>


	<div class="layui-form-item">
		<div class="layui-form-label">来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_couponfrom" value="0" ng-model="Edit.params.couponfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_couponfrom" value="1" ng-model="Edit.params.couponfrom" ng-change="getcoupon(Edit.id)" title="自动获取"/>
		</div>
	</div>
	<div ng-show="Edit.params.couponfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
				<div class="dsn-panel-editor-del" title="移除" ng-click="delcoupon(Edit.id, good.couponid)">×</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item" style="margin-bottom:0px">
							<div class="layui-form-label"><?php echo t('优惠券'); ?>名称</div>
							<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item" style="margin-bottom:0px" ng-show="good.type==1">
						<div class="layui-form-label">优惠金额</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.money}}</span></div>
					</div>
					<div class="layui-form-item" style="margin-bottom:0px" ng-show="good.type==1">
						<div class="layui-form-label">使用条件</div>
						<div class="layui-form-mid">满{{good.minprice}}元可用</div>
					</div>
					<div class="layui-form-item" style="margin-bottom:0px" ng-show="good.type!=1">
						<div class="layui-form-label">类型</div>
						<div class="layui-form-mid" ng-show="good.type==2">礼品券</div>
						<div class="layui-form-mid" ng-show="good.type==3">计次券</div>
						<div class="layui-form-mid" ng-show="good.type==4">运费抵扣券</div>
					</div>
					<div class="layui-form-item" style="margin-bottom:0px" ng-show="good.type==3">
						<div class="layui-form-label">可用次数</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.limit_count}}</span></div>
					</div>
					<!-- <div class="layui-form-item">
						<div class="layui-form-label"></div>
						<div class="layui-btn layui-btn-sm layui-btn-primary" ng-click="addcoupon('replace', Edit.id, good.id)">重新选择</div>
					</div> -->
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addcoupon('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个<?php echo t('优惠券'); ?></div>
	</div>
	<div ng-show="Edit.params.couponfrom == '1'">
		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
					<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getcoupon(Edit.id)" title="按排序"/>
					<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getcoupon(Edit.id)" title="创建时间↓"/></i>
					<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getcoupon(Edit.id)" title="创建时间↑"/></i>
					<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="stock" ng-model="Edit.params.sortby" ng-change="getcoupon(Edit.id)" title="库存"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getcoupon(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div>
</script>
	<script type="text/ng-template" id="edit-richtext.html"><div class="dsn-panel-editor-title">富文本设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item" style="width:500px">
		<div class="ueditor" ng-model="Edit.content" style="height:480px; width:100%; margin-top:10px;margin-bottom:15px"></div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php if(!$type): foreach($platform as $pl): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
				<?php endforeach; ?>
			<?php endif; ?>
		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php if(!$type): foreach($memberlevelList as $lv): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
				<?php endforeach; ?>
			<?php endif; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
</div>
</script>
	<script type="text/ng-template" id="edit-cube.html"><div class="dsn-panel-editor-cube">
	<div class="dsn-panel-editor-title">图片魔方</div>
	<div class="dsn-panel-editor-content">
		<div class="layui-form-item">
			<div class="layui-form-label">与上方距离</div>
			<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
			<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">背景颜色</div>
			<div class="layui-input-inline">
				<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
			</div>
			<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
		</div>

		<div class="layui-form-item">
			<div class="layui-input-inline">
				<div class="">设置图片布局</div>
				<table id="cube-editor" style ="margin-top:10px">
					<tr ng-repeat="(x, row) in Edit.params.layout ">
						<td ng-repeat="(y, col) in row" class="{{col.classname}} rows-{{col.rows}} cols-{{col.cols}}" ng-click="col['isempty'] ? showSelection(Edit, x, y) : changeItem(Edit, x, y)" ng-class="{'empty' : col.isempty, 'not-empty' : !col.isempty}" rowspan="{{col.rows}}" colspan="{{col.cols}}"  x="{{x}}" y="{{y}}">
							<div ng-if="col.isempty">+</div>
							<div ng-if="!col.imgurl && !col.isempty">{{col.cols * 160}} * {{col.rows * 160}}</div>
							<div ng-if="!col.isempty && col.imgurl"><img ng-src="{{col.imgurl}}" style="width:{{col.cols * 85}}px;max-height:{{col.rows * 85}}px;"/></div>
						</td>
					</tr>
				</table>
			</div>
		</div>
		<div class="dsn-panel-editor-relative" ng-show="Edit.params.currentLayout.isempty == false" style="margin-bottom:15px;">
			<div class="dsn-panel-editor-del" title="移除" ng-click="delCube(Edit,Edit.params.currentLayout.classname,Edit.params.currentLayout.cols,Edit.params.currentLayout.rows)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div ng-click="uploadImgChild(Edit.id, Edit.params.currentLayout.classname,'cube')" class="dsn-panel-editor-goodimg flex0" style="min-height: 100px; width: 100px;">
					<img width="100%" ng-show="Edit.params.currentLayout.imgurl" ng-src="{{Edit.params.currentLayout.imgurl}}">
					<div ng-show="!Edit.params.currentLayout.imgurl" class="dsn-panel-editor-goodimg-t1 ng-hide" style="line-height: 100px;"><i class="fa fa-plus-circle"></i> 选择图片</div>
					<div ng-show="Edit.params.currentLayout.imgurl" class="dsn-panel-editor-goodimg-t2" style="width: 100%; height: 20px; line-height: 20px;">重新选择图片</div>
				</div>
				<div class="dsn-panel-editor-line-right flex-y-center">
					<div>
						<div class="layui-form-item" style="margin-bottom:5px">
							<div class="layui-form-label">建议尺寸:</div>
							<div class="layui-form-mid">{{Edit.params.currentLayout.cols * 160}} × {{Edit.params.currentLayout.rows * 160}} 像素</div>
						</div>
						<div class="layui-form-item" style="margin-bottom:5px">
							<div class="layui-form-label">跳转链接: </div>
							<div class="layui-form-mid" style="margin-top:-5px">
								<input class="layui-input" style="width:170px" value="" ng-model="Edit.params.currentLayout.hrefurl"/>
								<span class="layui-btn layui-btn-primary" ng-click="chooseUrl(Edit.id, Edit.params.currentLayout.classname,'cube')">选择链接</span>
								<span style="margin-left:10px">{{Edit.params.currentLayout.hrefname}}</span>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div id="{{Edit.id}}-modal-cube-layout" style="display:none" role="dialog" aria-hidden="false">
			<div class="layout-table" style="padding-left:70px">
				<ul class="layout-cols layout-rows-{{col.rows}}" style="clear:both" ng-repeat="row in Edit.params.selection">
					<li data-cols="{{col.cols}}" data-rows="{{col.rows}}" ng-click="selectLayout(Edit, Edit.params.currentPos.row, Edit.params.currentPos.col, col.rows, col.cols)" ng-repeat="col in row"></li>
				</ul>
			</div>
		</div>
		<hr>
		<div class="layui-form-item">
			<div class="layui-form-label">左右边距</div>
			<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
			<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">左右内边距</div>
			<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
			<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">上下内边距</div>
			<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
			<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
		</div>
		<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">显示平台</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
				<?php foreach($platform as $pl): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
				<?php endforeach; ?>

			</div>
		</div>
		<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">显示范围</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
				<?php foreach($memberlevelList as $lv): ?>
				<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
				<?php endforeach; ?>
			</div>
		</div>
		<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>

	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>

</div></script>
	<script type="text/ng-template" id="edit-video.html"><div class="dsn-panel-editor-title">视频设置</div>

<div class="dsn-panel-editor-content form-label-w6"> 
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
	  <div class="layui-form-label">视频高度</div>
	  <div class="slider" min="30" max="100" ng-model="Edit.params.videoheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.videoheight"/> %</span>
	</div>
	<div class="layui-form-item layui-form-text">
		<div class="layui-form-label">视频来源</div>
		<div class="layui-input-inline" style="padding: 3px 0px;">
			<input class="radio" type="radio" name="{{Edit.id}}_type" value="0" ng-model="Edit.params.type" title="上传视频"/>
			<input class="radio" type="radio" name="{{Edit.id}}_type" value="1" ng-model="Edit.params.type" title="选择视频"/>
		</div>
	</div>
	<div ng-if="Edit.params.type == 0">
		<div class="layui-form-item">
			<div class="layui-form-label">视频链接</div>
			<div class="layui-input-inline flex-y-center" style="background: #F7F7F7;width: 260px;">
				<input class="layui-input" ng-model="Edit.params.src" style="margin-right:5px;" />
				<div class="icon-input" ng-click="uploadImg(Edit.id,'src')">
					<img src="<?php echo PRE_URL; ?>/static/admin/img/diyadd.png"/>
				</div>
			</div>
			<div class="layui-form-mid layui-word-aux" style="float: left;">
				填写视频链接或上传视频，视频链接必须为mp4格式的原始链接<?php if(getcustom('video_qq_url')): ?><br>腾讯视频原网页地址仅支持以https://v.qq.com/x/page/开头的网址<?php endif; ?>
			</div>
		</div>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.type == 1">
		<div class="layui-form-label">视频ID</div>
		<div class="layui-input-inline flex-y-center" style="background: #F7F7F7;width: 260px;">
			<input class="layui-input" ng-model="Edit.params.src" style="margin-right:5px;" />
			<div class="icon-input" ng-click="toChooseVideoList('',Edit.id,'')">
				<img src="<?php echo PRE_URL; ?>/static/admin/img/diyadd.png"/>
			</div>
		</div>
		<div class="layui-form-mid layui-word-aux" style="float: left;width: 100%">
			从视频管理中选择视频
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">封面图片</div>
		<div class="layui-input-inline">
			<div class="img-div" ng-click="uploadImg(Edit.id,'pic')">
				<img width="100%" ng-show="Edit.params.pic" ng-src="{{Edit.params.pic}}">
				<img ng-show="!Edit.params.pic" src="<?php echo PRE_URL; ?>/static/admin/img/uploadimg.png" style="width:88px;height:88px" />
				<div ng-show="Edit.params.pic" class="editor-goodimg">重新选择图片</div>
			</div>
			<!--			<div class="layui-form-mid layui-word-aux">若是选择视频，则该视频封面优先于所选视频的封面</div>-->
		</div>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item layui-form-text">
    <div class="layui-form-label">播放方式</div>
    <div class="layui-input-inline">
      <input class="radio" type="radio" name="{{Edit.id}}_autoplay" value="0" ng-model="Edit.params.autoplay" title="点击播放"/>
      <input class="radio" type="radio" name="{{Edit.id}}_autoplay" value="1" ng-model="Edit.params.autoplay" title="自动播放"/>
    </div>
		<?php if(in_array('mp',$platform)): ?><div class="layui-form-mid layui-word-aux">公众号不支持自动播放</div><?php endif; ?>
	</div>
	<div class="layui-form-item">
	  <div class="layui-form-label">循环播放</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_loop" value="0" ng-model="Edit.params.loop" title="关闭">
	    <input class="radio" type="radio" name="{{Edit.id}}_loop" value="1" ng-model="Edit.params.loop" title="开启">
	  </div>
	</div>
	<div class="layui-form-item">
	  <div class="layui-form-label">静音播放</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_muted" value="0" ng-model="Edit.params.muted" title="关闭">
	    <input class="radio" type="radio" name="{{Edit.id}}_muted" value="1" ng-model="Edit.params.muted" title="开启">
	  </div>
	</div>
	<div class="layui-form-item">
	  <div class="layui-form-label">播放控件</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_controls" value="1" ng-model="Edit.params.controls" title="显示">
	    <input class="radio" type="radio" name="{{Edit.id}}_controls" value="0" ng-model="Edit.params.controls" title="隐藏">
	  </div>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.controls == 1">
	  <div class="layui-form-label">全屏按钮</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_fullscreen" value="1" ng-model="Edit.params.fullscreen" title="显示">
	    <input class="radio" type="radio" name="{{Edit.id}}_fullscreen" value="0" ng-model="Edit.params.fullscreen" title="隐藏">
	  </div>
	</div>
	<div class="layui-form-item layui-form-text">
	  <div class="layui-form-label">表现形式</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_objectfit" ng-model="Edit.params.objectfit" value="contain" title="包含">
	    <input class="radio" type="radio" name="{{Edit.id}}_objectfit" ng-model="Edit.params.objectfit" value="fill" title="填充">
			<input class="radio" type="radio" name="{{Edit.id}}_objectfit" ng-model="Edit.params.objectfit" value="cover" title="覆盖">
	  </div>
			<div class="layui-form-mid layui-word-aux layui-clear">1、包含：保持原有尺寸比例，内容被缩放。	<br>2、填充：不保证保持原有的比例，内容拉伸填充整个内容容器。<br>3、覆盖：保持原有尺寸比例，但部分内容可能被剪切。</div>
	</div>
	<div class="layui-form-item">
	  <div class="layui-form-label">播放按钮位置</div>
	  <div class="layui-input-inline">
	    <input class="radio" type="radio" name="{{Edit.id}}_butposition" ng-model="Edit.params.butposition" value="center" title="居中">
	    <input class="radio" type="radio" name="{{Edit.id}}_butposition" ng-model="Edit.params.butposition" value="bottom" title="控制栏">
	  </div>
		<div class="layui-form-mid layui-word-aux">H5端<?php if(in_array('mp',$platform)): ?>和公众号<?php endif; ?>不支持选择播放按钮位置</div>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>

	<script type="text/ng-template" id="edit-article.html"><div class="dsn-panel-editor-title">文章列表设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="4" ng-model="Edit.params.style" title="左图"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="5" ng-model="Edit.params.style" title="右图"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="6" ng-model="Edit.params.style" title="瀑布流"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="7" ng-model="Edit.params.style" title="三排"/>
			
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="9" ng-model="Edit.params.style" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">标题大小</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.title_size" value="0"/>
		</div>
		<span class="layui-form-mid layui-word-aux">px 大于0时生效</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.style != 6">
		<div class="layui-form-label">图片</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showpic" value="1" ng-model="Edit.params.showpic" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showpic" value="0" ng-model="Edit.params.showpic" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.style != 6">
		<div class="layui-form-label">图片大小(宽X高)</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="layui-input" ng-model="Edit.params.pic_width" value="0" style="width: 100px;display: inline-block;" /> px X <input class="layui-input" ng-model="Edit.params.pic_height" value="0" style="width: 100px;display: inline-block;"/> px
		</div>
		<span class="layui-form-mid layui-word-aux">宽高都大于0时生效</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">发布时间</div>
		<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_showtime" value="1" ng-model="Edit.params.showtime" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_showtime" value="0" ng-model="Edit.params.showtime" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">阅读量</div>
		<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_showreadcount" value="1" ng-model="Edit.params.showreadcount" title="显示"/>
				<input class="radio" type="radio" name="{{Edit.id}}_showreadcount" value="0" ng-model="Edit.params.showreadcount" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">文章来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_articlefrom" value="0" ng-model="Edit.params.articlefrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_articlefrom" value="1" ng-model="Edit.params.articlefrom" ng-change="getarticle(Edit.id)" title="选择分类"/>
		</div>
	</div>
	<div ng-show="Edit.params.articlefrom == '0'">
		<div ng-repeat="article in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,article.id)"><i class="fa fa-arrow-up"></i></div>
				<div class="dsn-panel-editor-del" title="移除" ng-click="delGood(Edit.id, article.id)">×</div>
				<div class="dsn-panel-editor-goodimg" style="height:120px; width: 120px; position: relative;" ng-click="addArticle('replace', Edit.id, article.id)">
						<img ng-src="{{article.pic}}" width="100%" height="100%" />
						<div style="height:24px; width:100%; color:#fff; line-height:24px; font-size:14px; background:rgba(0,0,0,0.4); text-align:center; left:0px; bottom:0px; position: absolute;">重新选择文章</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item" style="margin-left:10px">{{article.name}}</div>
					<div class="layui-form-item" style="margin-left:10px;color:#999">{{article.subname}}</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addArticle('', Edit.id, '')"><i class="fa fa-plus-circle"></i> 添加一篇文章</div>
	</div>
	<div ng-show="Edit.params.articlefrom == '1'">
		<?php if(!$categroy_selmore): ?>
			<div class="layui-form-item">
				<div class="layui-form-label">文章分类</div>
				<div class="layui-input-inline">
					<select class="layui-input" style="-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getarticle(Edit.id)">
						<option value="">全部分类</option>
						<?php if(!$type): foreach($aclist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
						<?php endif; ?>
					</select>
				</div>
			</div>
		<?php else: ?>
			<div class="layui-form-item">
				<div class="layui-form-label" style="width:180px">分类模式(默认单选模式)</div>
				<div class="layui-input-inline">
					<input class="radio" type="radio" name="{{Edit.id}}_categoryseltype" value="0" ng-model="Edit.params.categoryseltype" ng-checked="!Edit.params.categoryseltype || Edit.params.categoryseltype == '0'" ng-change="getarticle(Edit.id)" title="单选模式"/>
					<input class="radio" type="radio" name="{{Edit.id}}_categoryseltype" value="1" ng-model="Edit.params.categoryseltype" ng-checked="Edit.params.categoryseltype && Edit.params.categoryseltype == '1'" ng-change="getarticle(Edit.id)" title="多选模式"/>
				</div>
			</div>
			<div ng-show="!Edit.params.categoryseltype || Edit.params.categoryseltype != '1'" class="layui-form-item">
				<div class="layui-form-label">文章分类</div>
				<div class="layui-input-inline">
					<select class="layui-input" style="-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getarticle(Edit.id)">
						<option value="">全部分类</option>
						<?php if(!$type): foreach($aclist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
						<?php endif; ?>
					</select>
				</div>
			</div>
			<div ng-show="Edit.params.categoryseltype && Edit.params.categoryseltype == '1'" class="layui-form-item">
				<div class="layui-form-item">
					<div class="layui-form-label">文章分类</div>
					<div class="layui-input-inline">
						<?php foreach($aclist as $cv): ?>
							<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $cv['name']; ?>" ng-model="Edit.params.categorymore[<?php echo $cv['id']; ?>]" ng-change="getarticle(Edit.id)"/>
						<?php endforeach; ?>
					</div>
				</div>
			</div>
		<?php endif; ?>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getarticle(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sendtimedesc" ng-model="Edit.params.sortby" ng-change="getarticle(Edit.id)" title="发布时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sendtime" ng-model="Edit.params.sortby" ng-change="getarticle(Edit.id)" title="发布时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="readcount" ng-model="Edit.params.sortby" ng-change="getarticle(Edit.id)" title="阅读量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getarticle(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>

</div></script>
	<script type="text/ng-template" id="edit-form.html"><div class="dsn-panel-editor-title">表单设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
	    <div class="layui-form-label">与上方距离</div>
	    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_top"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_top"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">选择表单</div>
		<div class="layui-btn layui-btn-primary" ng-click="addform(Edit.id)" style="float:left">选 择</div>
		<div class="layui-form-mid">
			<input class="hide" value="" ng-model="Edit.params.hrefurl"/>
			<span style="margin-left:10px">{{Edit.data.name}}</span>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.data.form_query==1">
		<div class="layui-form-label">表单查询</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_isquery" value="0" ng-model="Edit.params.isquery" title="否"/> 
			<input class="radio" type="radio" name="{{Edit.id}}_isquery" value="1" ng-model="Edit.params.isquery" title="是"/> 
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">表单样式</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" title="样式一"/> 
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" title="样式二"/> 
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">字体大小</div>
		<div class="slider" min="10" max="30" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">字体颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.color"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">输入框颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.inputbordercolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.inputbordercolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">输入框背景色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.inputbgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.inputbgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">分隔线颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.linecolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.linecolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">必填项*号</div>
		<div class="layui-input-inline">
			<input style="display:none" type="checkbox" class="switch" lay-skin="switch" ng-model="Edit.params.showmuststar">
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">提交按钮</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btntext" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮背景色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btnbgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.btnbgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮边框颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btnbordercolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.btnbordercolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮字体大小</div>
		<div class="slider" min="10" max="30" ng-model="Edit.params.btnfontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnfontsize"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮字体颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btncolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.btncolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮宽度</div>
		<div class="slider" min="20" max="340" ng-model="Edit.params.btnwidth"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnwidth"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮高度</div>
		<div class="slider" min="20" max="100" ng-model="Edit.params.btnheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnheight"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮圆角</div>
		<div class="slider" min="0" max="50" ng-model="Edit.params.btnradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnradius"/> px</span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.isquery != 1">
		<div class="layui-form-label">提交后跳转</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="chooseUrl(Edit.id, -1)" style="float:left">选择链接</button>
		<span class="layui-form-mid">&nbsp;&nbsp;{{Edit.params.hrefname}}</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">未开始提示</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.wkstpis"/>
		</div>
	</div>
	
	
	<hr>
	<div class="layui-form-item">
   	 	<div class="layui-form-label">左右外边距</div>
  	  	<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    	<div class="layui-form-label">上下外边距</div>
    	<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    	<div class="layui-form-label">左右内边距</div>
    	<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    	<div class="layui-form-label">显示用户</div>
    	<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    	</div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割</div>
	</div>
</div></script>
	<script type="text/ng-template" id="edit-map.html"><div class="dsn-panel-editor-title">地图设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">地址</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.address}}" ng-model="Edit.params.address"/></span>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">经纬度</div>
    <div class="layui-input-inline" style="width:150px">
			<input class="layui-input" value="{{Edit.params.longitude}}" ng-model="Edit.params.longitude"/>
		</div>
		<div class="layui-form-mid">,</div>
    <div class="layui-input-inline" style="width:150px">
      <input class="layui-input" value="{{Edit.params.latitude}}" ng-model="Edit.params.latitude"/>
    </div>
		<div class="layui-btn  layui-btn-primary" ng-click="choosezuobiao(Edit.id,Edit.params.address,Edit.params.longitude,Edit.params.latitude)">选择坐标</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">地图高度</div>
    <div class="slider" min="10" max="1000" ng-model="Edit.params.height"></div>
		<span class="slider-span"><input ng-model="Edit.params.height"/> px</span>
	</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-button.html"><div class="dsn-panel-editor-title">按钮设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮文字</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btntext"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮背景色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btnbgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.btnbgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">按钮边框颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btnbordercolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.btnbordercolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">按钮字体大小</div>
    <div class="slider" min="10" max="30" ng-model="Edit.params.btnfontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnfontsize"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">按钮字体颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.btncolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.btncolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">按钮宽度</div>
    <div class="slider" min="20" max="340" ng-model="Edit.params.btnwidth"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnwidth"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">按钮高度</div>
    <div class="slider" min="20" max="100" ng-model="Edit.params.btnheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnheight"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">按钮圆角</div>
    <div class="slider" min="0" max="50" ng-model="Edit.params.btnradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.btnradius"/> px</span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
		  <input class="layui-input" value="" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">跳转链接</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
    	</div>
		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
		<div class="layui-form-mid">
			<span style="margin-left:10px">{{Edit.params.hrefname}}</span>
    	</div>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-cover.html"><div class="dsn-panel-editor-title">悬浮按钮设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">类型</div>
    <div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" title="文本"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" title="图标"/>
    </div>
	</div>

	<div class="layui-form-item" ng-if="Edit.params.style==1">
    <div class="layui-form-label">文 字</div>
    <div class="layui-input-inline"><input class="layui-input" ng-model="Edit.params.text"/></div>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.style==1">
    <div class="layui-form-label">字体大小</div>
    <div class="slider" min="10" max="30" ng-model="Edit.params.fontsize"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize"/> px</span>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.style==1">
    <div class="layui-form-label">字体颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.color"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color"></span>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.style==2">
		<div class="layui-form-label">选择图标</div>
		<div class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'pic')" style="float:left">上传图片</div>
		<img ng-src="{{Edit.params.pic}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px">
	</div>
	<div class="layui-form-item" ng-if="Edit.params.style==2">
    <div class="layui-form-label">图标宽度</div>
    <div class="slider" min="20" max="100" ng-model="Edit.params.picwidth"></div>
		<span class="slider-span"><input ng-model="Edit.params.picwidth"/> px</span>
	</div>
	<div class="layui-form-item" ng-if="Edit.params.style==2">
    <div class="layui-form-label">图标高度</div>
    <div class="slider" min="20" max="100" ng-model="Edit.params.picheight"></div>
		<span class="slider-span"><input ng-model="Edit.params.picheight"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" style="width:160px" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" coloralpha="1" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">边 框</div>
    <div class="slider" min="0" max="10" ng-model="Edit.params.border"></div>
		<span class="slider-span"><input ng-model="Edit.params.border"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">边框颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" style="width:160px" ng-model="Edit.params.bordercolor"/>
    </div>
		<span class="colorpicker" coloralpha="1" ng-model="Edit.params.bordercolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">距顶端</div>
    <div class="slider" min="0" max="100" ng-model="Edit.params.top"></div>
		<span class="slider-span"><input ng-model="Edit.params.top"/> vh</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">距左端</div>
    <div class="slider" min="0" max="100" ng-model="Edit.params.left"></div>
		<span class="slider-span"><input ng-model="Edit.params.left"/> vw</span>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">宽 度</div>
    <div class="slider" min="20" max="100" ng-model="Edit.params.width"></div>
		<span class="slider-span"><input ng-model="Edit.params.width"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">高 度</div>
    <div class="slider" min="20" max="100" ng-model="Edit.params.height"></div>
		<span class="slider-span"><input ng-model="Edit.params.height"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="50" ng-model="Edit.params.radius"></div>
		<span class="slider-span"><input ng-model="Edit.params.radius"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">跳转链接</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="" ng-model="Edit.params.hrefurl"/>
    </div>
		<div class="layui-btn layui-btn-primary" style="float:left" ng-click="chooseUrl(Edit.id, -1)">选择链接</div>
		<div class="layui-form-mid">
			<span style="margin-left:10px">{{Edit.params.hrefname}}</span>
    </div>
	</div>
	<hr>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-business.html"><div class="dsn-panel-editor-title">商家设置</div>
<div class="dsn-panel-editor-content form-label-w6">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	
	<div class="layui-form-item">
		<div class="layui-form-label">评分</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showpingfen" title="显示" value="1" ng-model="Edit.params.showpingfen" />
			<input class="radio" type="radio" name="{{Edit.id}}_showpingfen" title="不显示" value="0" ng-model="Edit.params.showpingfen"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">销量</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" title="显示" value="1" ng-model="Edit.params.showsales" />
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" title="不显示" value="0" ng-model="Edit.params.showsales"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">简介</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showjianjie" title="显示" value="1" ng-model="Edit.params.showjianjie" />
			<input class="radio" type="radio" name="{{Edit.id}}_showjianjie" title="不显示" value="0" ng-model="Edit.params.showjianjie"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">地址</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showaddress" title="显示" value="1" ng-model="Edit.params.showaddress" />
			<input class="radio" type="radio" name="{{Edit.id}}_showaddress" title="不显示" value="0" ng-model="Edit.params.showaddress"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">距离</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showdistance" title="显示" value="1" ng-model="Edit.params.showdistance" />
			<input class="radio" type="radio" name="{{Edit.id}}_showdistance" title="不显示" value="0" ng-model="Edit.params.showdistance"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showproduct" title="显示" value="1" ng-model="Edit.params.showproduct" />
			<input class="radio" type="radio" name="{{Edit.id}}_showproduct" title="不显示" value="0" ng-model="Edit.params.showproduct"/>
		</div>
	</div>
	<?php if($auth_data=='all' || in_array('BusinessMaidan/*',$auth_data)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">买单导航按钮</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_showmaidan" title="显示" value="1" ng-model="Edit.params.showmaidan" />
			<input class="radio" type="radio" name="{{Edit.id}}_showmaidan" title="不显示" value="0" ng-model="Edit.params.showmaidan"/>
		</div>
	</div>
	<?php endif; ?>

	
	
	

	<div class="layui-form-item">
		<div class="layui-form-label">进入页面</div>
		<div class="layui-input-inline" style="width: 300px">
			<input class="radio" type="radio" name="{{Edit.id}}_intotype" title="设计首页" value="0" ng-model="Edit.params.intotype"/>
			<?php if(getcustom('restaurant')): if($auth_data=='all' || in_array('RestaurantTakeawayOrder/*',$auth_data) || in_array('RestaurantTakeawayComment/*',$auth_data)|| in_array('RestaurantTakeawayFreight/*',$auth_data) || in_array('RestaurantTakeawaySet/*',$auth_data) || in_array('RestaurantTakeawayAdv/*',$auth_data)): ?>
				<input class="radio" type="radio" name="{{Edit.id}}_intotype" title="外卖" value="1" ng-model="Edit.params.intotype"/>
				<?php endif; if($auth_data=='all' || in_array('RestaurantShopOrder/*',$auth_data) || in_array('RestaurantShopComment/*',$auth_data)|| in_array('RestaurantShopSet/*',$auth_data)): ?>
				<input class="radio" type="radio" name="{{Edit.id}}_intotype" title="点餐" value="2" ng-model="Edit.params.intotype"/>
				<?php endif; ?>
			<?php endif; ?>
		</div>
		<div class="layui-form-mid layui-word-aux">无设计首页则跳转默认首页</div>
	</div>
	<?php if(getcustom('yx_business_miandan')): if($auth_data=='all' || in_array('BusinessMiandan/*',$auth_data)): ?>
			<div class="layui-form-item">
				<div class="layui-form-label">商户免单</div>
				<div class="layui-input-inline">
					<input class="radio" type="radio" name="{{Edit.id}}_showbusinessmiandan" title="显示" value="1" ng-model="Edit.params.showbusinessmiandan" />
					<input class="radio" type="radio" name="{{Edit.id}}_showbusinessmiandan" title="不显示" value="0" ng-model="Edit.params.showbusinessmiandan"/>
				</div>
			</div>
		<?php endif; ?>
	<?php endif; ?>
	

	<div class="layui-form-item">
		<div class="layui-form-label">商家来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_businessfrom" value="0" ng-model="Edit.params.businessfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_businessfrom" value="1" ng-model="Edit.params.businessfrom" title="商家分类" ng-change="getbusiness(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.businessfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delbusiness(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addbusiness('replace',Edit.id, good.id)">
					<img ng-src="{{good.logo}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商家</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商家名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商家地址</div>
						<div class="layui-form-mid">{{good.address}}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addbusiness('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商家</div>
	</div>
	<div ng-show="Edit.params.businessfrom == '1'">
		<div class="layui-form-item">
			<div class="layui-form-label">商家分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getbusiness(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($blist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="scoredesc" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="评分"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="销量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="juli" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="距离"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getbusiness(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getbusiness(Edit.id)"/>
			</div>
		</div>
		<div class="layui-form-item" ng-show="Edit.params.sortby == 'juli'">
			<div class="layui-form-label">显示范围</div>
			<div class="slider" min="1" max="100" ng-model="Edit.params.distance"></div>
			<span class="slider-span"><input ng-model="Edit.params.distance"/> km</span>
		</div>
	</div>

	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-shortvideo.html"><div class="dsn-panel-editor-title">短视频列表设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">店铺图标</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showlogo" value="1" ng-model="Edit.params.showlogo" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showlogo" value="0" ng-model="Edit.params.showlogo" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">播放量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showviewnum" value="1" ng-model="Edit.params.showviewnum" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showviewnum" value="0" ng-model="Edit.params.showviewnum" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">点赞数</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showzannum" value="1" ng-model="Edit.params.showzannum" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showzannum" value="0" ng-model="Edit.params.showzannum" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">短视频来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delshortvideo(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addshortvideo('replace',Edit.id, good.id)">
					<img ng-src="{{good.coverimg}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择短视频</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">短视频名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">短视频简介</div>
						<div class="layui-form-mid">{{good.description}}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addshortvideo('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个短视频</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getshortvideo(Edit.id)">
					<option value="">全部</option>
					<option value="0">自营</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">视频分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getshortvideo(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($shortvideo_clist as $cv): ?>
						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
						<?php foreach($cv['child'] as $v): ?>
						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
						<?php endforeach; ?>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getshortvideo(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getshortvideo(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getshortvideo(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="viewnum" ng-model="Edit.params.sortby" ng-change="getshortvideo(Edit.id)" title="播放量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getshortvideo(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getshortvideo(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-liveroom.html"><div class="dsn-panel-editor-title">直播列表设置 (只支持小程序)</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">直播间来源</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_liveroomfrom" value="1" ng-model="Edit.params.liveroomfrom" title="全部" ng-change="getliveroom(Edit.id)"/>
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_liveroomfrom" value="0" ng-model="Edit.params.liveroomfrom" title="手动选择"/>
			<?php endif; ?>
		</div>
	</div>
	<div ng-show="Edit.params.liveroomfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delliveroom(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addliveroom('replace',Edit.id, good.id)" style="max-height:136px">
					<img ng-src="{{good.coverImg}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">直播间名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">主播名称</div>
						<div class="layui-form-mid">{{good.anchorName}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">直播时间</div>
						<div class="layui-form-mid">{{good.startTime}} ~ {{good.endTime}}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addliveroom('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个直播间</div>
	</div>
	<div ng-show="Edit.params.liveroomfrom == '1'">
		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="starttimedesc" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="开始时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="starttime" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="开始时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="endtimedesc" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="结束时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="endtime" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="结束时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getliveroom(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getliveroom(Edit.id)"/>
			</div>
		</div>
	</div>

	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-hotspot.html"><div class="dsn-panel-editor-title">单图设置<span class="tips"></span></div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景图片</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.imgurl}}" ng-model="Edit.params.imgurl"/>
    </div>
		<div class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'imgurl')">上传</div>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<!-- <div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div> -->
	<div ng-repeat="spot in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
		<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,spot.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,spot.id)">×</div>
    <div class="dsn-panel-editor-line flex">
			<div class="dsn-panel-editor-line-right">
				<div class="layui-form-item">
					<div class="layui-form-label">热区链接</div>
					<div class="flex-y-center">
						<input class="layui-input" style="width:170px" value="" ng-model="spot.hrefurl" placeholder=""/>
						<span class="layui-btn layui-btn-primary" ng-click="chooseUrl(Edit.id, spot.id)">选择链接</span>
						<span style="margin-left:10px">{{spot.hrefname}}</span>
					</div>
				</div>
				<div class="layui-form-item">
					<div class="layui-form-label">热区宽度</div>
					<div class="slider" min="0" max="340" ng-model="spot.width"></div>
					<span class="slider-span"><input ng-model="spot.width"/> px</span>
				</div>
				<div class="layui-form-item">
					<div class="layui-form-label">热区高度</div>
					<div class="slider" min="0" max="340" ng-model="spot.height"></div>
					<span class="slider-span"><input ng-model="spot.height"/> px</span>
				</div>
				<div class="layui-form-item">
					<div class="layui-form-label">与左方距离</div>
					<div class="slider" min="0" max="340" ng-model="spot.left"></div>
					<span class="slider-span"><input ng-model="spot.left"/> px</span>
				</div>
				<div class="layui-form-item">
					<div class="layui-form-label">与上方距离</div>
					<div class="slider" min="0" max="340" ng-model="spot.top"></div>
					<span class="slider-span"><input ng-model="spot.top"/> px</span>
				</div>
			</div>
    </div>
	</div>
	<hr>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('spot', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个热区</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-userinfo.html"><div class="dsn-panel-editor-title"><?php echo t('会员'); ?>信息设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
	  <div class="layui-form-label">与上方距离</div>
	  <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">标题样式</div>
		<div class="layui-input-inline" style="width:400px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" title="样式一"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" title="样式二"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景图片</div>
		<div class="layui-form-mid" style="margin-top:-5px">
			<span class="layui-btn layui-btn-sm layui-btn-primary" ng-click="uploadImg(Edit.id,'bgimg')">上传图片</span>
		</div>
		<div class="layui-form-mid layui-word-aux">建议尺寸：600*450像素</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('会员'); ?>等级</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_levelshow" value="1" ng-model="Edit.params.levelshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_levelshow" value="0" ng-model="Edit.params.levelshow" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.levelshow == 1">
		<div class="layui-form-label">点击等级打开升级</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_levelclick" value="1" ng-model="Edit.params.levelclick" title="是"/>
			<input class="radio" type="radio" name="{{Edit.id}}_levelclick" value="0" ng-model="Edit.params.levelclick" title="否"/>
		</div>
		<div class="layui-form-mid layui-word-aux">关闭后，点击无法打开<?php echo t('会员'); ?>升级页面</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('会员'); ?>ID</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_midshow" value="1" ng-model="Edit.params.midshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_midshow" value="0" ng-model="Edit.params.midshow" title="不显示"/>
		</div>
	</div>
	
	<div class="layui-form-item">
		<div class="layui-form-label">设置图标</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_seticonshow" value="1" ng-model="Edit.params.seticonshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_seticonshow" value="0" ng-model="Edit.params.seticonshow" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">设置图标图片</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.seticon" placeholder=""/>
		</div>
		<span class="layui-btn layui-btn-sm layui-btn-primary" ng-click="uploadImg(Edit.id,'seticon')">上传图片</span>
		<img ng-src="{{Edit.params.seticon?Edit.params.seticon:'/static/img/set.png'}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px;border: 1px solid #ccc">
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">设置图标图片大小</div>
		<div class="layui-input-inline" style="width: 280px">
			<div class="slider" min="10" max="60" ng-model="Edit.params.seticonsize"></div>
			<span class="slider-span"><input ng-model="Edit.params.seticonsize"/> px</span>
		</div>
		<div class="layui-form-mid layui-word-aux">设置大小大于0后生效</div>
	</div>
	<?php if(in_array('mp',$platform)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">会员卡</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_cardshow" value="1" ng-model="Edit.params.cardshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_cardshow" value="0" ng-model="Edit.params.cardshow" title="不显示"/>
		</div>
		<div class="layui-form-mid layui-word-aux">仅微信端有效，请先在[<a href="javascript:void(0)" onclick="openmax('<?php echo url('membercard/index'); ?>/isopen/1')">微信-微信会员卡</a>]中创建会员卡</div>
	</div>
	<?php endif; ?>
	
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('余额'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_moneyshow" value="1" ng-model="Edit.params.moneyshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_moneyshow" value="0" ng-model="Edit.params.moneyshow" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('佣金'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_commissionshow" value="1" ng-model="Edit.params.commissionshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_commissionshow" value="0" ng-model="Edit.params.commissionshow" title="不显示"/>
		</div>
		<div class="layui-form-mid layui-word-aux">该项开启时,仅有分销权限的<?php echo t('会员'); ?>才会显示</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('积分'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_scoreshow" value="1" ng-model="Edit.params.scoreshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_scoreshow" value="0" ng-model="Edit.params.scoreshow" title="不显示"/>
		</div>
	</div>
	
	<?php if(getcustom('product_bonus_pool')): ?>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('贡献值'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_bonuspoolshow" value="1" ng-model="Edit.params.bonuspoolshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_bonuspoolshow" value="0" ng-model="Edit.params.bonuspoolshow" title="不显示"/>
		</div>
	</div>
	<?php endif; if(getcustom('member_overdraft_money')): ?>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('信用额度'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_overdraftmoneyshow" value="1" ng-model="Edit.params.overdraftmoneyshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_overdraftmoneyshow" value="0" ng-model="Edit.params.overdraftmoneyshow" title="不显示"/>
		</div>
	</div>
	<?php endif; ?>
	
	
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('优惠券'); ?></div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_couponshow" value="1" ng-model="Edit.params.couponshow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_couponshow" value="0" ng-model="Edit.params.couponshow" title="不显示"/>
		</div>
	</div>
	
	
	
	
	<div class="layui-form-item">
		<div class="layui-form-label">我的订单</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_ordershow" value="1" ng-model="Edit.params.ordershow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_ordershow" value="0" ng-model="Edit.params.ordershow" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label"><?php echo t('积分'); ?>兑换订单</div>
		<div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_scoreshopordershow" value="1" ng-model="Edit.params.scoreshopordershow" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_scoreshopordershow" value="0" ng-model="Edit.params.scoreshopordershow" title="不显示"/>
		</div>
	</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-wxad.html"><div class="dsn-panel-editor-title">微信小程序广告设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">广告类型</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_adtype" value="banner" ng-model="Edit.params.adtype" title="Banner广告"/>
			<input class="radio" type="radio" name="{{Edit.id}}_adtype" value="video" ng-model="Edit.params.adtype" title="视频广告"/>
			<input class="radio" type="radio" name="{{Edit.id}}_adtype" value="custom" ng-model="Edit.params.adtype" title="原生模板广告"/>
		</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">广告ID</div>
    <div class="layui-input-inline">
      <input class="layui-input" value="" ng-model="Edit.params.unitid"/>
    </div>
		<div class="layui-form-mid layui-word-aux" style="margin-left:100px">注: 在小程序后台"流量主-广告管理-获取代码"中查找<br>如: 广告代码是&ltad-custom unit-id="adunit-74ed28bc32914a8b"&gt 则填写adunit-74ed28bc32914a8b即可</ad-custom></div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
      <input class="layui-input" value="" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-adset.html"><div class="dsn-panel-editor-title">ADSET广告设置</div>

<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">广告类型</div>
		<div class="layui-input-inline" style="width:200px">
			<input class="radio" type="radio" name="{{Edit.id}}_adtype" value="banner" ng-model="Edit.params.adtype" title="Banner广告"/>
		</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">广告ID</div>
    <div class="layui-input-inline">
      <input class="layui-input" value="" ng-model="Edit.params.adpid"/>
    </div>
		<div class="layui-form-mid layui-word-aux" style="margin-left:100px">注: 广告后台申请的广告位(adpid)</div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
      <input class="layui-input" value="" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右外边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-jidian.html"><div class="dsn-panel-editor-title">集点设置</div>
<div class="dsn-panel-editor-content">
<!--	<div class="layui-form-item">-->
<!--    <div class="layui-form-label">文字颜色</div>-->
<!--    <div class="layui-input-inline">-->
<!--			<input class="layui-input" value="{{Edit.params.color}}" ng-model="Edit.params.color"/>-->
<!--    </div>-->
<!--		<span class="colorpicker" ng-model="Edit.params.color"></span>-->
<!--	</div>-->
<!--	<div class="layui-form-item">-->
<!--    <div class="layui-form-label">边框颜色</div>-->
<!--    <div class="layui-input-inline">-->
<!--			<input class="layui-input" value="{{Edit.params.bordercolor}}" ng-model="Edit.params.bordercolor"/>-->
<!--    </div>-->
<!--		<span class="colorpicker" ng-model="Edit.params.bordercolor"></span>-->
<!--	</div>-->
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
				<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">圆角度</div>
		<div class="slider" min="0" max="50" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
		<div class="layui-form-label">显示用户</div>
		<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.showmids"/>
		</div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-tab.html"><div class="dsn-panel-editor-title">选项卡设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题大小</div>
    <div class="slider" min="10" max="40" ng-model="Edit.params.fontsize1"></div>
		<span class="slider-span"><input ng-model="Edit.params.fontsize1"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color1}}" ng-model="Edit.params.color1"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color1"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">选中颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.color2}}" ng-model="Edit.params.color2"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.color2"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">标题区背景色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">内容区背景色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor2}}" ng-model="Edit.params.bgcolor2"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor2"></span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">圆角度</div>
    <div class="slider" min="0" max="50" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>

	<div class="layui-form-item">
    <div class="layui-form-label">吸顶效果</div>
    <div class="layui-input-inline">
			<input class="radio" type="radio" name="{{Edit.id}}_fixedtop" value="1" ng-model="Edit.params.fixedtop" title="开启"/>
			<input class="radio" type="radio" name="{{Edit.id}}_fixedtop" value="0" ng-model="Edit.params.fixedtop" title="关闭"/>
    </div>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">选项条</div>
    <div class="layui-input-inline">
        <input class="radio" type="radio" name="{{Edit.id}}_arrowshow" value="1" ng-model="Edit.params.arrowshow" title="显示"/>
        <input class="radio" type="radio" name="{{Edit.id}}_arrowshow" value="0" ng-model="Edit.params.arrowshow" title="不显示"/>
    </div>
		<div ng-show="Edit.params.arrowshow==1">
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.arrowcolor}}" ng-model="Edit.params.arrowcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.arrowcolor"></span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-mid layui-word-aux">注意：表单插件不要设置多个，上一个表单选项选择内容会影响其他表单选项选择</div>
	</div>
	<div ng-repeat="dh in Edit.data" class="dsn-panel-editor-relative" style="width:600px">
    <div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,dh.id)"><i class="fa fa-arrow-up"></i></div>
    <div class="dsn-panel-editor-del" title="移除" ng-click="delItemChild(Edit.id,dh.id)">×</div>
    <div class="dsn-panel-editor-line" style="padding-left:20px">
			<div class="layui-form-item" style="margin-bottom:2px">
				<div class="layui-form-label">标题</div>
				<div class="layui-input-inline">
					<input class="layui-input" ng-model="dh.name" />
				</div>
			</div>
			<div class="layui-form-item" style="margin-bottom:0">
				<div class="layui-form-label">内容</div>
				<div class="layui-btn layui-btn-primary" style="float:left" ng-click="designerTab(Edit.id,dh.id,dh.name)">设置内容</div>
				<div class="layui-form-mid"></div>
			</div>
		</div>
	</div>
	<div class="layui-btn layui-btn-primary" style="width:600px;margin-top:10px" ng-click="addItemChild('tab', Edit.id)"><i class="fa fa-plus-circle"></i> 添加一个选项</div>


	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="edit-kecheng.html"><div class="dsn-panel-editor-title">课程列表设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">课程名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">课程价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">学习人数</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">课程属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>


	<div class="layui-form-item">
		<div class="layui-form-label">课程来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="课程类型"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delKecheng(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addKecheng('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">课程名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">课程价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addKecheng('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个课程</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getKecheng(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">课程分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getKecheng(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($kecheng_clist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getKecheng(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getKecheng(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getKecheng(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getKecheng(Edit.id)" title="销量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getKecheng(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getKecheng(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<?php if(getcustom('car_hailing')): ?>
	<script type="text/ng-template" id="edit-carhailing.html"><div class="dsn-panel-editor-title">文本设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
    <div class="layui-form-label">与上方距离</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">背景颜色</div>
    <div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
    </div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">日期筛选</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showdate" value="1" ng-model="Edit.params.showdate" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showdate" value="0" ng-model="Edit.params.showdate" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">选择分类</div>
		<div class="layui-input-inline">
			<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.cid">
				<option value="">全部分类</option>
				<?php if(!$type): foreach($carhailing_clist as $cv): ?>
						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
						<?php foreach($cv['child'] as $v): ?>
						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
						<?php endforeach; ?>
					<?php endforeach; ?>
				<?php endif; ?>
			</select>
		</div>
	</div>

	<hr>
	<div class="layui-form-item">
    <div class="layui-form-label">左右边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">左右内边距</div>
    <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
    <div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<?php endif; ?>
	<script type="text/ng-template" id="edit-restaurant_product.html"><div class="dsn-panel-editor-title">餐饮菜品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">菜品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">菜品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：原价+销售价，原价大于销售价才会显示原价</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">菜品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<!--<div class="layui-form-item" ng-show="Edit.params.showname == 1">
		<div class="layui-form-label">购买按钮</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="0" ng-model="Edit.params.showcart" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="1" ng-model="Edit.params.showcart" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="2" ng-model="Edit.params.showcart" title="自己上传"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showcart==2">
		<div class="layui-form-label">购买图标</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.cartimg" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'cartimg')" style="float:left">上传图片</button>
		<img ng-show="Edit.params.cartimg!=''" ng-src="{{Edit.params.cartimg}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px">
	</div>-->
	<div class="layui-form-item">
		<div class="layui-form-label">菜品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">展示类型</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showtype" value="0" ng-model="Edit.params.showtype" title="外卖"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showtype" value="1" ng-model="Edit.params.showtype" title="店内"/>
		</div>
	</div>


	<div class="layui-form-item">
		<div class="layui-form-label">菜品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delRestaurantGood(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addRestaurantGood('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择菜品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">菜品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">菜品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addRestaurantGood('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个菜品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getRestaurantgoods(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
<!--		<div class="layui-form-item">-->
<!--			<div class="layui-form-label">菜品分类</div>-->
<!--			<div class="layui-input-inline">-->
<!--				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getRestaurantGoods(Edit.id)">-->
<!--					<option value="">全部分类</option>-->
<!--					<?php foreach($clist as $cv): ?>-->
<!--						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>-->
<!--						<?php foreach($cv['child'] as $v): ?>-->
<!--						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>-->
<!--						<?php endforeach; ?>-->
<!--					<?php endforeach; ?>-->
<!--				</select>-->
<!--			</div>-->
<!--		</div>-->

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getRestaurantGoods(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getRestaurantGoods(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getRestaurantGoods(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getRestaurantGoods(Edit.id)" title="销量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getRestaurantGoods(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getRestaurantGoods(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-restaurant_product.html"><div class="dsn-mod dp-product" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个菜品都没有...</div>
	<!--123排-->
	<div class="dp-product-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
			</div>
		</div>
	</div>
	<div class="dp-product-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
					<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已售{{item.sales}}件</span></div>
				</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></span></div>
			</div>
		</div>
	</div>
	<div class="dp-product-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
			</div>
		</div>
	</div>
</div></script>



	<script type="text/ng-template" id="edit-tuangou.html"><div class="dsn-panel-editor-title">团购商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="销售价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：原价+销售价，原价大于销售价才会显示原价</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showname == 1">
		<div class="layui-form-label">购买按钮</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="0" ng-model="Edit.params.showcart" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="1" ng-model="Edit.params.showcart" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showcart" value="2" ng-model="Edit.params.showcart" title="自己上传"/>
		</div>
	</div>
	<div class="layui-form-item" ng-show="Edit.params.showcart==2">
		<div class="layui-form-label">购买图标</div>
		<div class="layui-input-inline">
			<input class="dsn-panel-editor-input3 hide"  value="" ng-model="Edit.params.cartimg" placeholder=""/>
		</div>
		<button class="layui-btn layui-btn-primary" ng-click="uploadImg(Edit.id,'cartimg')" style="float:left">上传图片</button>
		<img ng-show="Edit.params.cartimg!=''" ng-src="{{Edit.params.cartimg}}" style="width:30px;height:30px;margin-top:4px;margin-left:10px">
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>


	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delTuangou(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addTuangou('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addTuangou('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="gettuangou(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="gettuangou(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($tuangou_clist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="gettuangou(Edit.id)" title="默认"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="gettuangou(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="gettuangou(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="gettuangou(Edit.id)" title="销量"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="gettuangou(Edit.id)" title="随机"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="gettuangou(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>

	<script type="text/ng-template" id="show-topbar.html"><div class="dsn-mod dsn-topbar dsn-mod-nohover" style="color:#fff;background:#333;cursor:pointer">	<div style="float:left;width:100%;font-size:12px">		<div style="float:left;width:30%">&nbsp;<i class="fa fa-signal"></i> wechat <i class="fa fa-wifi"></i></div>		<div style="float:left;text-align:center;width:40%">12:00</div>		<div style="float:left;text-align:right;width:30%">100% <i class="fa fa-battery-full"></i>&nbsp;</div>	</div>	<div style="float:left;width:98%;margin:2px 1% 0 1%;">		<div style="float:left;width:30%">&nbsp;</div>		<div style="float:left;text-align:center;width:40%;font-size:16px;height:27px;line-height:27px">{{page.params.title || '默认标题'}}</div>		<div style="float:right;width:30%;border-radius:20px;width:70px;height: 25px;border:1px solid rgba(255,255,255,0.2);text;text-align:center;overflow:hidden;display:none">			<div style="float:left;width:49%;font-size:17px;height:27px;line-height:27px">				<div style="float:left;margin-left:2px">&nbsp;&bull;</div>				<div style="float:left;font-size:27px">&bull;</div>				<div style="float:left;">&bull;</div>			</div>			<div style="float:left;width:2%;"><span style="border-right:1px solid;opacity:0.2;"></span></div>			<div style="float:right;width:49%;"><i class="fa fa-dot-circle-o" style="font-size:19px;height:25px;line-height:25px"></i></div>		</div>	</div></div></script>
	<script type="text/ng-template" id="show-shop.html"><!-- 样式1 -->
<div class="dsn-mod dsn-shop1" ng-class="{'dsn-mod-select':Item.id == focus}" ng-show="Item.params.style == 1">
	<img class="img" ng-src="{{Item.params.bgimg}}"/>
	<div class="dsn-shop1-menu" ng-show="Item.params.menu == 1"  ng-style="{'color':Item.params.navcolor}">
		<a ng-repeat="menu in Item.data" href="javascript:void(0);"><div class="dsn-shop1-nav"><img ng-src="{{menu.imgurl}}" style="width:20px;height:20px"><br>{{menu.text}}</div></a>
	</div>
	<div class="dsn-shop1-shopname" ng-show="Item.params.name == 1" style="font-size: 18px;">
		<div class="dsn-shop1-name">{{system.name}}</div>
	</div>
	<div class="dsn-shop1-shoplogo" ng-show="Item.params.logo == 1"> 
		<div class="dsn-shop1-shoplogo-img">
			<img class="img" ng-src="{{system.logo || '<?php echo PRE_URL; ?>/imgsrc/picture-1.jpg'}}"/>
		</div>
	</div>
</div>
<!-- 样式2 -->
<div class="dsn-mod dsn-shop2" ng-class="{'dsn-mod-select':Item.id == focus}" ng-show="Item.params.style == 2">
	<img class="shop2-img" ng-src="{{Item.params.bgimg}}"/>
	<div class="shop2-shoplogo" ng-show="Item.params.logo == 1">
		<img class="shop2-shoplogo-img" ng-src="{{system.logo}}"/>
	</div>
	<div class="shop2-shopname" ng-show="Item.params.name == 1">{{system.name}}</div>
	<div class="shop2-menu" ng-show="Item.params.menu == 1" ng-style="{'color':Item.params.navcolor}">
		<div class="shop2-nav" ng-repeat="menu in Item.data">
			<img ng-src="{{menu.imgurl}}" style="width:18px;height:18px">
			<div style="font-size:12px;margin-top:3px">{{menu.text}}</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-notice.html"><div class="dsn-mod dsn-notice2" ng-class="{'dsn-mod-select':Item.id == focus}" style="color:{{Item.params.color}};background-color:{{Item.params.bgcolor}};margin:{{Item.params.margin_y}}px {{Item.params.margin_x}}px 0;padding:{{Item.params.padding_y}}px {{Item.params.padding_x}}px">
	<div class="left" ng-show="Item.params.showimg==1"><img class="image" ng-src="{{Item.params.img}}"/></div>
	<div class="right">
		<img class="ico" ng-src="{{Item.params.icon}}" ng-show="Item.params.showicon==1"/>
		<div class="itemlist" style="font-size:{{Item.params.fontsize}}px">
			<div class="item" ng-repeat="d in Item.data">{{d.title}}</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-menu.html"><div class="dsn-mod dsn-menu" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'font-size':Item.params.fontsize+'px','background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':(Item.params.padding_y*1+8)+'px '+Item.params.padding_x+'px '+Item.params.padding_y+'px '+Item.params.padding_x+'px','border-radius':Item.params.boxradius + 'px'}">
	<div class="dsn-menu-title" ng-if="Item.params.showtitle==1" style="color:{{Item.params.titlecolor}};font-size:{{Item.params.titlesize}}px">{{Item.params.title}}</div>
	<div class="dsn-menu-nav{{Item.params.num}} {{Item.params.showicon==0 && Item.params.showline==1?'showline':''}}" href="{{menu.hrefurl|| 'javascript:void(0);'}}" ng-repeat="menu in Item.data" ng-hide="$index >= Item.params.pernum">
		<img ng-show="Item.params.showicon==1" ng-src="{{menu.imgurl|| '/static/imgsrc/picture-1.jpg'}}" style="border-radius:{{Item.params.radius/2}}%;width:{{Item.params.iconsize}}px;height:{{Item.params.iconsize}}px"/>
		<div class="dsn-menu-text" ng-style="{'color':menu.color,'height':Item.params.fontheight+'px','line-height':Item.params.fontheight+'px'}">{{menu.text|| '按钮文字'}}</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-banner.html"><div class="dsn-mod dsn-banner" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px','font-size':Item.params.fontsize+'px'}">
		<div class="swipe" ng-style="{'border-radius':Item.params.borderradius+'px'}">
			<div class="swipe-wrap" ng-style="{'height':Item.params.height * 1.08 +'px'}">
				<li ng-repeat="d in Item.data">
					<a href="javascript:void(0);"><img ng-src="{{d.imgurl}}" /></a>
				</li>
			</div>
		</div>
		<div class='dsn-banner-dots' ng-show="Item.data.length > 1 && Item.params.indicatordots=='1'" ng-style="{'left':Item.params.padding_x+'px','bottom':Item.params.dotSite+'px','justify-content':Item.params.align=='center'?'center':(Item.params.align=='left'?'flex-start':'flex-end')}" indicatorcolor="{{Item.params.indicatorcolor}}" indicatoractivecolor="{{Item.params.indicatoractivecolor}}" dotactivewidth="{{Item.params.shape==''?'13px':'6px'}}" dotwidth="{{Item.params.shape==''?'3px':'6px'}}"> 
			<div ng-if="Item.params.shape==''" ng-repeat="d in Item.data" style="display:inline-block; list-style: none;display:flex">
				<a ng-if="$index==0" class="shape0" ng-style="{'background-color':Item.params.indicatoractivecolor,'width':'13px'}"></a>
				<a ng-if="$index!=0" class="shape0" ng-style="{'background-color':Item.params.indicatorcolor}"></a>
			</div>
			<div ng-if="Item.params.shape=='shape1'" ng-repeat="d in Item.data" style="display:inline-block; list-style: none;display:flex">
				<a ng-if="$index==0" class="shape1" ng-style="{'background-color':Item.params.indicatoractivecolor}"></a>
				<a ng-if="$index!=0" class="shape1" ng-style="{'background-color':Item.params.indicatorcolor}"></a>
			</div>
			<div ng-if="Item.params.shape=='shape2'" ng-repeat="d in Item.data" style="display:inline-block; list-style: none;display:flex">
				<a ng-if="$index==0" class="shape2" ng-style="{'background-color':Item.params.indicatoractivecolor}"></a>
				<a ng-if="$index!=0" class="shape2" ng-style="{'background-color':Item.params.indicatorcolor}"></a>
			</div>
			<div ng-if="Item.params.shape=='shape3'" ng-repeat="d in Item.data" style="display:inline-block; list-style: none;display:flex">
				<a ng-if="$index==0" class="shape3" ng-style="{'background-color':Item.params.indicatoractivecolor}"></a>
				<a ng-if="$index!=0" class="shape3" ng-style="{'background-color':Item.params.indicatorcolor}"></a>
			</div>
		</div>
</div></script>
	<script type="text/ng-template" id="show-picture.html"><div class="dsn-mod dsn-picture" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'height':Item.params.height,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">	<div ng-repeat="d in Item.data">		<a href="javascript:void(0);">			<img ng-src="{{d.imgurl}}" ng-show="d.imgurl" ng-style="{'border-radius':Item.params.borderradius+'px'}"/>		</a>	</div></div></script>
	<script type="text/ng-template" id="show-pictures.html"><div class="dsn-mod dsn-pictures" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0'}" style="overflow: hidden;">	<div ng-if="Item.params.style=='2'" class="listitem2">		<div ng-repeat="d in Item.data" class="item" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">			<img ng-src="{{d.imgurl}}"/>		</div>	</div>	<div ng-if="Item.params.style=='3'" class="listitem3">		<div ng-repeat="d in Item.data" class="item" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">			<img ng-src="{{d.imgurl}}"/>		</div>	</div>	<div ng-if="Item.params.style=='4'" class="listitem4">		<div ng-repeat="d in Item.data" class="item" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">			<img ng-src="{{d.imgurl}}"/>		</div>	</div>	<div ng-if="Item.params.style=='5'" class="listitem5">		<div class="left" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">			<img ng-src="{{Item.data[0].imgurl}}"/>		</div>		<div ng-if="Item.data.length > 2" class="right">			<div class="top" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">				<img ng-src="{{Item.data[1].imgurl}}"/>			</div>			<div ng-if="Item.data.length > 3" class="bottom">				<div class="left" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">					<img ng-src="{{Item.data[2].imgurl}}"/>				</div>				<div class="right" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">					<img ng-src="{{Item.data[3].imgurl}}"/>				</div>			</div>			<div ng-if="Item.data.length == 3" class="bottom" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">				<img ng-src="{{Item.data[2].imgurl}}"/>			</div>		</div>		<div ng-if="Item.data.length == 2" class="right" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">			<img ng-src="{{Item.data[1].imgurl}}"/>		</div>	</div>
	<div ng-if="Item.params.style=='6'" class="listitem6">
		<div ng-repeat="d in Item.data" class="item" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px','border-radius':Item.params.imageRadius+'px','width':Item.params.imageWidth * 372 * 0.01+'px','height':Item.params.imageHeight+'px',
		'margin-right':Item.params.imageRight* 372 * 0.01 +'px'}">
			<img ng-src="{{d.imgurl}}" />
		</div>
	</div></div></script>
	<script type="text/ng-template" id="show-title.html"><div class="dsn-mod dsn-title" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'text-align':Item.params.align,'color':Item.params.color,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div class="dsn-title-s1">
		<div class="dsn-title-s1-line" ng-style="{'border-color':Item.params.linecolor}"></div>
		<div class="dsn-title-s1-text">
			<div class="dsn-title-s1-text1" ng-style="{'font-size':Item.params.fontsize+'px','color':Item.params.color}">
				<img ng-src="{{Item.params.imgurl}}" ng-show="Item.params.showicon==1" style="width:{{Item.params.iconsize}}px"/>
				<span class="dsn-title-s1-title1" ng-show="Item.params.title!=''">{{Item.params.title}}</span>
			</div>
		</div>
		<div class="dsn-title-s1-line" ng-style="{'border-color':Item.params.linecolor}"></div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-dhlist.html"><div class="dsn-mod dsn-dhlist" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'color':Item.params.color,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0'}">
	<div style="line-height: 40px; text-align: center; color: #999; font-size: 16px;" ng-show="Item.data == ''">一个导航都没有...</div>
	<div class="dsn-dhlist-item" ng-repeat="d in Item.data" ng-style="{'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
		<div class="dsn-dhlist-text1" ng-style="{'font-size':Item.params.fontsize1+'px','color':Item.params.color1}">
			<img ng-src="{{d.imgurl}}" ng-show="d.showicon==1" style="width:{{d.iconsize}}px"/>
			<span class="dsn-dhlist-title1" ng-show="d.title1!=''" ng-style="{'margin-left':Item.params.titlemarginleft+'px'}">{{d.title1}}</span>
		</div>
		<div class="dsn-dhlist-text2" ng-style="{'font-size':Item.params.fontsize2+'px','color':Item.params.color2}">{{d.title2}}</div>
		<img src="/static/img/arrowright.png" style="width:16px;height:16px" ng-show="Item.params.arrowshow==1"/>
	</div>
</div></script>
	<script type="text/ng-template" id="show-text.html"><div class="dsn-mod dsn-text" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'text-align':Item.params.align,'color':Item.params.color,'background':Item.params.bgpic ? 'url('+Item.params.bgpic+')' : Item.params.bgcolor,'background-size':'100%','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
    <div style="white-space:pre-wrap;" ng-style="{'font-size':Item.params.fontsize+'px','line-height':Item.params.lineheight+'px','letter-spacing':Item.params.letter_spacing+'px','font-weight':(Item.params.fontbold?'bold':'normal')}">{{Item.params.content}}</div>
</div></script>
	<script type="text/ng-template" id="show-search.html"><div class="dsn-mod dsn-search" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div ng-show="!Item.params.openmore || Item.params.openmore<=0" class="dp-search-search"
		ng-style="{'border-color':Item.params.bordercolor,'border-radius':Item.params.borderradius+'px'}" >
		<div class="dp-search-search-f1"></div>
		<div class="dp-search-search-f2">
			<input class="dp-search-search-input" name="keyword" placeholder="{{Item.params.placeholder}}" ng-style="{color:Item.params.color}" />
		</div>
        
        
	</div>
    
</div></script>
	<script type="text/ng-template" id="show-lbssearch.html"><?php if(getcustom('lbs_search')): ?>
<div class="dsn-mod dsn-search" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
    <div style="display: flex;">
        <div  style="width: 80px;overflow: hidden;height: 36px;line-height: 36px;flex-shrink: 0">
            <select class="layui-input"  style="font-size: 13px;border: 0;height: 36px;line-height: 36px">
                <option>北京</option>
            </select>
        </div>
        <div class="dp-search-search"
            ng-style="{'border-color':Item.params.bordercolor,'border-radius':Item.params.borderradius+'px','width':'100%'}">
            <div class="dp-search-search-f1"></div>
            <div class="dp-search-search-f2">
                <input class="dp-search-search-input" name="keyword" placeholder="{{Item.data?Item.data[0]['title2']:Item.params.placeholder}}" ng-style="{color:Item.params.color}" />
            </div>
        </div>
        <div ng-show="Item.params.btn==1">
            <div style="width: 50px;text-align: center;float: right;line-height:36px;background: #f0f0f0;">
                搜索
            </div>
        </div>
    </div>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="show-line.html"><div class="dsn-mod dsn-line" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">    <div class="dsn-line-line" ng-style="{'border-top-width':Item.params.height+'px','border-top-style':Item.params.style,'border-top-color':Item.params.color,'margin-left':Item.params.margin1+'px','margin-right':Item.params.margin1+'px','margin-top':Item.params.margin2+'px','margin-bottom':Item.params.margin2+'px'}"></div></div></script>
	<script type="text/ng-template" id="show-blank.html"><div class="dsn-mod dsn-blank" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'height':Item.params.height+'px','background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px'}"></div></script>
	<script type="text/ng-template" id="show-product.html"><div class="dsn-mod dp-product" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-product-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3' || Item.params.style=='waterfall'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 || Item.params.style=='waterfall'  ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}" ng-style="{'background-color':Item.params.probgcolor}">
			<div class="product-pic" ng-style="{'background-color':Item.params.probgcolor}">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info" ng-style="{'background-color':Item.params.probgcolor}" ng-if="Item.params.showname != '0' || Item.params.showprice != '0' || Item.params.showsales!='0'">
				<div class="p1" ng-if="Item.params.showname == 1" ng-click="gotoProductList(item)">{{item.name}}</div>
				<?php if(getcustom('home_product_show_binfo')): ?>
				<div class="couponitem" ng-if="(Item.params.style!='3' && Item.params.style!='line') && (Item.params.showbname == 1 || Item.params.showbdistance == 1)" style="color: #0a87c0;font-size: 11px">
					<div class="f1" style="justify-content: space-between">
						<div class="t">
							<span ng-if="Item.params.showbname == 1">商城名称</span>
							<span ng-if="!Item.params.showbname">&nbsp;</span>
						</div>
						<div class="t" ng-if="Item.params.showbdistance == 1" >
							8.6km
						</div>
					</div>
				</div>
				<?php endif; if(getcustom('product_field_buy')): ?>
				<div ng-if="Item.params.style=='2'">
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.brand == 1 && item.brand">
						<span style="width: 50px">品牌：</span>
						<span>{{item.brand}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.barcode == 1 && item.barcode">
						<span style="width: 50px">货号：</span>
						<span>{{item.barcode}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.guige == 1 && item.ggname">
						<span style="width: 50px"> 规格：</span>
						<span>{{item.ggname}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.unit == 1 && item.unit">
						<span style="width: 50px"> 单位：</span>
						<span>{{item.unit}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.ggstock == 1">
						<span style="width: 50px"> 库存：</span>
						<span>{{item.ggstock}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.valid_time == 1 && item.valid_time">
						<span style="width: 50px"> 有效期：</span>
						<span>{{item.valid_time}}</span>
					</div>
					<div  style="line-height: 20px;border-bottom: 0;word-break: break-all;padding: 2px 0;" ng-if="Item.params.remark == 1 && item.remark">
						<span style="width: 50px"> 备注：</span>
						<span>{{item.remark}}</span>
					</div>
				</div>
				<?php endif; if((getcustom('product_cost_show'))): ?>
				<div ng-if="Item.params.showcost == '1'">
					<p style="color: #999;font-size: 12px;padding-left: 3px">成本价：￥10</p>
				</div>
				<?php endif; ?>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0' && ( item.price_type != 1 || item.sell_price > 0)">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
					<div class="p2-1" ng-if="item.xunjia_text && item.price_type == 1 && item.sell_price <= 0" style="height: 25px;line-height: 22px;">
						<span ng-if="Item.params.style!='1'" class="t1" style="color:<?php echo t('color1'); ?>;font-size: 14px">询价</span>
						<span ng-if="Item.params.style=='1'" class="t1" style="color:<?php echo t('color1'); ?>">询价</span>
						<?php if((getcustom('shop_other_infor'))): ?>
							<div ng-if="item.price_type == 1" style="background:<?php echo t('color1'); ?>;color: #fff;border-radius: 25px 25px;line-height: 25px;text-align: center;font-size: 10px;padding: 0 5px;display: inline-block;float: right;" >
							{{item.xunjia_text?item.xunjia_text:'联系TA'}}
							</div>
						<?php endif; ?>
					</div>
				</div>
				<?php if(getcustom('design_product_commission') || getcustom('home_product_show_binfo')): ?>
				<div class="couponitem" ng-if="Item.params.showcommission == 1">
					<div class="f1">
						<div class="t" style="background:rgba(<?php echo t('color2rgb'); ?>,0.1);color:<?php echo t('color2'); ?>">
							<span><?php echo t('佣金'); ?>0.99元</span>
						</div>
					</div>
				</div>
				<?php endif; if((getcustom('shop_other_infor'))): ?>
					<div class="p1" ng-if="item.merchant_name" style="color: #666;font-size: 12px;white-space: nowrap;text-overflow: ellipsis;margin-top: 3px;height: 15px;font-weight: normal;">
						<span>{{item.merchant_name}}</span>
					</div>
                	<div class="p1" ng-if="item.main_business" style="color: #666;font-size: 12px;margin-top: 2px;font-weight: normal;">
                		<span>{{item.main_business}}</span>
                	</div>
				<?php endif; ?>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<!-- <div ng-if="Item.params.showsales=='1' && item.sales>0" style="height: 22px;"></div> -->
				<?php if(getcustom('product_field_buy')): ?>
				<div ng-if="Item.params.style=='2' && Item.params.nowbuy == 1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>;width:80px;line-height:30px;text-align: center;border-radius: 2px;margin-top: 5px;" >
					立即购买
				</div>
				<?php endif; ?>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1 && !item.price_type"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2 && !item.price_type"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
			</div>
		</div>
	</div>
	<div class="dp-product-itemlist" ng-show="Item.params.style=='list'">
		<div ng-repeat="item in Item.data" ng-style="{'background-color':Item.params.probgcolor}">
			<div class="item">
				<div class="product-pic" ng-style="{'background-color':Item.params.probgcolor}">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<?php if((getcustom('product_cost_show'))): ?>
					<div ng-if="Item.params.showcost == 1" class="t" style="color: #999;font-size: 12px;padding-left: 3px">
						<span>成本价：￥10</span>
					</div>
					<?php endif; ?>
					<div class="p2" ng-if="Item.params.showprice != '0' && ( item.price_type != 1 || item.sell_price > 0)" style="height: 25px;line-height: 22px;">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
					<div class="p2" ng-if="item.xunjia_text && item.price_type == 1 && item.sell_price <= 0">
						<span class="t1" style="color:<?php echo t('color1'); ?>;font-size: 14px">询价</span>
						<?php if((getcustom('shop_other_infor'))): ?>
							<div ng-if="item.price_type == 1" style="background:<?php echo t('color1'); ?>;color: #fff;border-radius: 25px 25px;line-height: 25px;text-align: center;font-size: 10px;padding: 0 5px;display: inline-block;float: right;" >
							{{item.xunjia_text?item.xunjia_text:'联系TA'}}
							</div>
						<?php endif; ?>
					</div>
					<?php if((getcustom('home_product_show_binfo'))): ?>
					<div ng-if="Item.params.showcommission == 1" class="t" style="background:rgba(<?php echo t('color2rgb'); ?>,0.1);color:<?php echo t('color2'); ?>">
						<span><?php echo t('佣金'); ?>0.99元</span>
					</div>
					<?php endif; if((getcustom('shop_other_infor'))): ?>
					<div class="p1" ng-if="item.merchant_name" style="color: #666;font-size: 12px;white-space: nowrap;text-overflow: ellipsis;margin-top: 3px;height: 15px;font-weight: normal;"><span>{{item.merchant_name}}</span></div>
					<div class="p1" ng-if="item.main_business" style="color: #666;font-size: 12px;margin-top: 2px;font-weight: normal;"><span>{{item.main_business}}</span></div>
					<?php endif; ?>
					<div class="p3">
						<div class="p3-1" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已售{{item.sales}}件</span></div>
					</div>
					<div ng-if="Item.params.showsales!='1' || item.sales<=0" style="height: 22px;"></div>
					<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1 && !item.price_type"><span class="iconfont icon_gouwuche"></span></div>
					<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2 && !item.price_type"><img ng-src="{{Item.params.cartimg}}" class="img"/></span></div>
				</div>
			</div>
			<?php if(getcustom('home_product_show_binfo')): ?>
			<div ng-if="Item.params.showbname == 1 || Item.params.showbdistance == 1" style="display: flex;justify-content: space-between;color: #0a87c0;font-size: 11px">
				<div class="t">
					<span ng-if="Item.params.showbname == 1">商城名称</span>
					<span ng-if="!Item.params.showbname">&nbsp;</span>
				</div>
				<div class="t" ng-if="Item.params.showbdistance == 1" >
					8.6km
				</div>
			</div>
			<?php endif; ?>
		</div>
	</div>
	<div class="dp-product-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data" ng-style="{'background-color':Item.params.probgcolor}" >
			<div class="product-pic" ng-style="{'background-color':Item.params.probgcolor}">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0' && ( item.price_type != 1 || item.sell_price > 0)" style="height: 25px;line-height: 22px;">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
					<div class="p2-1" ng-if="item.xunjia_text && item.price_type == 1 && item.sell_price <= 0">
						<span class="t1" style="color:<?php echo t('color1'); ?>;font-size: 14px">询价</span>
						<?php if((getcustom('shop_other_infor'))): ?>
							<div ng-if="item.price_type == 1" style="background:<?php echo t('color1'); ?>;color: #fff;border-radius: 25px 25px;line-height: 25px;text-align: center;font-size: 10px;padding: 0 5px;display: inline-block;float: right;" >
							{{item.xunjia_text?item.xunjia_text:'联系TA'}}
							</div>
						<?php endif; ?>
					</div>
				</div>
				<?php if((getcustom('shop_other_infor'))): ?>
				<div class="p1" ng-if="item.merchant_name" style="color: #666;font-size: 12px;white-space: nowrap;text-overflow: ellipsis;margin-top: 3px;height: 15px;font-weight: normal;"><span>{{item.merchant_name}}</span></div>
                <div class="p1" ng-if="item.main_business" style="color: #666;font-size: 12px;margin-top: 2px;font-weight: normal;"><span>{{item.main_business}}</span></div>
				<?php endif; ?>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<div ng-if="Item.params.showsales!='1' || item.sales<=0" style="height: 22px;"></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1 && !item.price_type"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2 && !item.price_type"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
				
			</div>
		</div>
	</div>
	<?php if(getcustom('shop_yingxiao_tag')): ?>
	<div class="dp-product-itemlist" ng-show="Item.params.style=='yxlist'">
		<div ng-repeat="item in Item.data" ng-style="{'background-color':Item.params.probgcolor}">
			<div class="item">
				<div class="product-pic" ng-style="{'background-color':Item.params.probgcolor}">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<?php if((getcustom('product_cost_show'))): ?>
					<div ng-if="Item.params.showcost == 1" class="t" style="color: #999;font-size: 12px;padding-left: 3px">
						<span>成本价：￥10</span>
					</div>
					<?php endif; ?>
					<div class="p2 flex-y-center " ng-if="Item.params.showprice != '0' && ( item.price_type != 1 || item.sell_price > 0)" style="height: 25px;line-height: 22px;justify-content: space-between">
						<div>
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
						<div>
							<div class="p3-1" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已返{{item.sales}}人</span></div>
						</div>

					</div>
					<div class="p2" ng-if="item.xunjia_text && item.price_type == 1 && item.sell_price <= 0">
						<span class="t1" style="color:<?php echo t('color1'); ?>;font-size: 14px">询价</span>
						<?php if((getcustom('shop_other_infor'))): ?>
						<div ng-if="item.price_type == 1" style="background:<?php echo t('color1'); ?>;color: #fff;border-radius: 25px 25px;line-height: 25px;text-align: center;font-size: 10px;padding: 0 5px;display: inline-block;float: right;" >
							{{item.xunjia_text?item.xunjia_text:'联系TA'}}
						</div>
						<?php endif; ?>
					</div>
					<?php if((getcustom('home_product_show_binfo'))): ?>
					<div ng-if="Item.params.showcommission == 1" class="t" style="background:rgba(<?php echo t('color2rgb'); ?>,0.1);color:<?php echo t('color2'); ?>">
						<span><?php echo t('佣金'); ?>0.99元</span>
					</div>
					<?php endif; if((getcustom('shop_other_infor'))): ?>
					<div class="p1" ng-if="item.merchant_name" style="color: #666;font-size: 12px;white-space: nowrap;text-overflow: ellipsis;margin-top: 3px;height: 15px;font-weight: normal;"><span>{{item.merchant_name}}</span></div>
					<div class="p1" ng-if="item.main_business" style="color: #666;font-size: 12px;margin-top: 2px;font-weight: normal;"><span>{{item.main_business}}</span></div>
					<?php endif; ?>

					<div class="p3 flex-y-center">
						<div class="left" style=";">参与活动，免费拿产品</div>
						
						<div class="right" ">
							<div class="yuandian" ></div>
							立即参与
						</div>
					</div>
					
				</div>
			</div>
			<?php if(getcustom('home_product_show_binfo')): ?>
			<div ng-if="Item.params.showbname == 1 || Item.params.showbdistance == 1" style="display: flex;justify-content: space-between;color: #0a87c0;font-size: 11px">
				<div class="t">
					<span ng-if="Item.params.showbname == 1">商城名称</span>
					<span ng-if="!Item.params.showbname">&nbsp;</span>
				</div>
				<div class="t" ng-if="Item.params.showbdistance == 1" >
					8.6km
				</div>
			</div>
			<?php endif; ?>
		</div>
	</div>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-cycle.html"><div class="dsn-mod dp-collage" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-collage-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">{{item.pspl}}</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已售{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-collage-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
					<span class="t2" v-if="showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">{{item.pspl}}</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已售{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-collage-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>

			</div>
		</div>
	</div>
</div>
</script>
	<script type="text/ng-template" id="show-collage.html"><div class="dsn-mod dp-collage" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div ng-show="Item.params.shopstyle=='1' || !Item.params.shopstyle" style="width: 100%;">
		<div class="dp-collage-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
			<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2">
						<div class="p2-1" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
					</div>
					<div class="p3">
						<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">{{item.teamnum}}人团</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已拼成{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemlist" ng-show="Item.params.style=='list'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
					<div class="p3">
						<div class="p3-1">{{item.teamnum}}人团</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已拼成{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemline" ng-show="Item.params.style=='line'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2">
						<div class="p2-1" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
					</div>
					<div class="p3">
						<div class="p3-1">{{item.teamnum}}人团</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已拼成{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
</div></script>
	<script type="text/ng-template" id="show-kanjia.html"><div class="dsn-mod dp-collage" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-collage-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.min_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1'">￥{{item.sell_price}}</span>
					</div>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">砍价</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已砍走{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-collage-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.min_price}}</span>
					<span class="t2" ng-if="Item.params.showprice == '1'">￥{{item.sell_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">砍价</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已砍走{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-collage-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.min_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1'">￥{{item.sell_price}}</span>
					</div>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">砍价</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已砍走{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-seckill.html"><div class="dsn-mod dp-collage" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<?php if(getcustom('design_seckill')): ?>
	<div ng-show="Item.params.shopstyle=='2'" style="width: 100%;">
		<div ng-show="Item.params.showtitle=='1'" style="width: 100%;">
			<div ng-show="Item.params.titlestyle=='1'" class="dp-time">
				<img src="<?php echo PRE_URL; ?>/static/imgsrc/decoration_crush.png" alt="" class="dp-time-back"/>
				<div class="dp-time-content">
					<div class="dp-time-title">限时秒杀</div>
					<div class="dp-time-text">
						距离结束<div class="dp-time-time">09</div>:<div class="dp-time-time">09</div>:<div class="dp-time-time">09</div>
					</div>
				</div>
			</div>
			<div ng-show="Item.params.titlestyle=='2'" class="dp-bTime">
				<img src="<?php echo PRE_URL; ?>/static/imgsrc/decoration_crush.png" alt="" class="dp-bTime-back"/>
				<div class="dp-bTime-content">
					<div class="dp-bTime-title">限时秒杀</div>
					<div class="dp-bTime-text">
						距离结束<div class="dp-bTime-time">09</div>:<div class="dp-bTime-time">09</div>:<div class="dp-bTime-time">09</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<?php endif; ?>
	
	<div ng-show="Item.params.shopstyle=='1' || !Item.params.shopstyle" style="width: 100%;">
		<div class="dp-collage-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
			<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2">
						<div class="p2-1" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
					</div>
					<div class="p4" ng-if="Item.params.showtime == 1 && Item.params.style!='3'">
						<div ng-if="item.seckill_status == 2">活动已结束</div>
						<div ng-if="item.seckill_status == 1" class="flex-row"><div class="h24">还剩余</div><div class="flex1"></div><div><span>{{item.hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div></div>
						<div ng-if="item.seckill_status == 0" class="flex-row"><div class="h24">距开抢</div><div class="flex1"></div><div><span>{{item.hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div></div>
					</div>
					<div class="p3">
						<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">秒杀</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已抢{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemlist" ng-show="Item.params.style=='list'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
					<div class="p4" ng-if="Item.params.showtime == 1">
						<div ng-if="item.seckill_status == 2">活动已结束</div>
						<div ng-if="item.seckill_status == 1" class="flex-row"><div class="h24">距活动结束</div><div class="flex1"></div>
							<div ng-if="item.day > 0"><span>{{item.day}}</span>天<span>{{item.day_hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div>
							<div ng-else><span>{{item.hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div>
						</div>
						<div ng-if="item.seckill_status == 0" class="flex-row"><div class="h24">距活动开始</div><div class="flex1"></div>
							<div ng-if="item.day > 0"><span>{{item.day}}</span>天<span>{{item.day_hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div>
							<div ng-else><span>{{item.hour}}</span>:<span>{{item.minute}}</span>:<span>{{item.second}}</span></div>
						</div>
					</div>
					<div class="p3">
						<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">秒杀</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已抢{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemline" ng-show="Item.params.style=='line'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="p2">
						<div class="p2-1" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
					</div>
					<div class="p3">
						<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">秒杀</div>
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已抢{{item.sales}}件</span></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- 
		shopstyle商品风格 风格一(1) 风格二(2)
		showtitle标题倒计时 显示(1) 不显示(2)
		titlestyle标题风格 风格一(1) 风格二(2)
	-->
	<?php if(getcustom('design_seckill')): ?>
	<div ng-show="Item.params.shopstyle=='2'" style="width: 100%;">
		<div class="dp-collage-item" ng-show="Item.params.style=='2'">
			<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div class="rate" ng-if="Item.params.style=='2'">
						<img src="<?php echo PRE_URL; ?>/static/imgsrc/decoration_rate.png"/>
						<span class="text">仅剩1件</span>
					</div>
					<div class="p5">原价:<span class="text">￥{{item.market_price}}</span></div>
					<div class="price" style="color:<?php echo t('color1'); ?>">
						<span class="price_text">￥{{item.sell_price}}</span>
						<div class="price_add" style="background:<?php echo t('color1'); ?>">+</div>
					</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemlist" ng-show="Item.params.style=='list'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic product-pic1">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>
				<div class="product-info">
					<div class="p5" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<!-- <div class="p6">平价实用</div> -->
					<div class="rate"><img width="100" src="<?php echo PRE_URL; ?>/static/imgsrc/decoration_rate.png"/><span>仅剩1件</span></div>
					<div ng-if="Item.params.showprice != '0'">
						<div class="p7">原价:<span>{{item.market_price}}</span></div>
						<div ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1" style="color:<?php echo t('color1'); ?>" class="p8">￥{{item.sell_price}}</div>
					</div>
					<div style="background:<?php echo t('color1'); ?>" class="btn">马上抢</div>
				</div>
			</div>
		</div>
		<div class="dp-collage-itemline1" ng-show="Item.params.style=='line'">
			<div class="item" ng-repeat="item in Item.data">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}"/>
					<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
					<div class="tag" style="background:<?php echo t('color1'); ?>">秒杀</div>
				</div>
				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
					<div style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>" class="surplus">剩余1件</div>
					<div class="price" style="color:<?php echo t('color1'); ?>">
						<span class="price_text">￥{{item.sell_price}}</span>
						<div class="price_add" style="background:<?php echo t('color1'); ?>">+</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-scoreshop.html"><div class="dsn-mod dp-socreshop" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-socreshop-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.score_price}}<?php echo t('积分'); ?><text ng-if="item.money_price>0 && Item.params.showprice == '1'">+{{item.money_price}}元</text></span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已兑换{{item.sales}}件</div>
			</div>
		</div>
	</div>
	<div class="dp-socreshop-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.score_price}}<?php echo t('积分'); ?><text ng-if="item.money_price>0 && Item.params.showprice == '1'">+{{item.money_price}}元</text></span>
					<span class="t2" ng-if="showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已兑换{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-socreshop-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.score_price}}<?php echo t('积分'); ?><text ng-if="item.money_price>0 && Item.params.showprice == '1'">+{{item.money_price}}元</text></span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已兑换{{item.sales}}件</div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-coupon.html"><div class="dsn-mod dsn-coupon" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">	<div style="line-height:60px; text-align: center; color: #999; font-size: 16px;" ng-show="Item.data == ''">暂无<?php echo t('优惠券'); ?>...</div>	<div class="couponlist">		<div class="coupon" ng-repeat="item in Item.data" style="background:url('{{Item.params.bgpic}}');background-size:100%">			<div class="f1" ng-show="item.type==1" style="color:{{Item.params.titlecolor}}"><span style="font-size:10px">￥</span>{{item.money}}<span style="font-size:12px"> <?php echo t('优惠券'); ?></span></div>			<div class="f1" ng-show="item.type!=1" style="color:{{Item.params.titlecolor}}"><span style="font-size:14px">{{item.name}}</span></div>			<div class="f2" style="color:{{Item.params.remarkcolor}}" ng-show="item.type==1 && item.minprice!=0">满{{item.minprice}}元可用</div>			<div class="f2" style="color:{{Item.params.remarkcolor}}" ng-show="item.type==1 && item.minprice==0">无门槛</div>			<div class="f2" style="color:{{Item.params.remarkcolor}}" ng-show="item.type==2">礼品券</div>			<div class="f2" style="color:{{Item.params.remarkcolor}}" ng-show="item.type==3">计次券</div>			<div class="f2" style="color:{{Item.params.remarkcolor}}" ng-show="item.type==4">运费抵扣券</div>		</div>	</div></div></script>
	<script type="text/ng-template" id="show-richtext.html"><div class="dsn-mod dsn-richtext" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div string-html="Item.content"></div>
	<div ng-show="!Item.content">
		<p><span style="font-size: 20px;">这里是『富文本』区域</span></p>
		<p>你可以对文字进行<strong>加粗</strong>、<em>斜体</em>、<span style="text-decoration: underline;">下划线</span>、<span style="text-decoration: line-through;">删除线</span>、文字<span style="color: rgb(0, 176, 240);">颜色</span>、<span style="background-color: rgb(255, 192, 0); color: rgb(255, 255, 255);">背景色</span>、以及字号<span style="font-size: 20px;">大</span><span style="font-size: 14px;">小</span>等简单排版操作。
		</p>
		<p>也可在这里插入图片</p>
		<p></p>
		<p></p>
		<p></p>
	</div>
</div></script>
	<script type="text/ng-template" id="show-cube.html"><!-- <div class="dsn-mod dsn-cube" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor}">
    <div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-if="!hasCube(Item)">未设置魔方</div>
    <div class="inner">
        <table>
            <tr ng-repeat="row in Item.params.layout" ng-init="rowindex = $index">
                <td ng-init="colindex = $index" ng-repeat="col in row" class="{{col.classname}} rows-{{col.rows}} cols-{{col.cols}}" 
                    ng-class="{'empty' : col.isempty, 'not-empty' : !col.isempty}" 
                    rowspan="{{col.rows}}" 
                    colspan="{{col.cols}}">
                    <div ng-if="!col.isempty && col.imgurl"><a href="{{col.hrefurl}}"><img ng-src="{{col.imgurl}}" style="width: 100%;height: auto;" /></a></div>
                </td>
            </tr> 
        </table>
    </div>
</div>
 -->

<div class="dsn-mod dsn-cube" ng-class="{'dsn-mod-select':Item.id == focus}" style="display:block;position:relative;background:{{Item.params.bgcolor}};height:{{Item.params.maxheight*85 - Item.params.margin_y*2}}px;margin:{{Item.params.margin_y}}px {{Item.params.margin_x}}px 0;padding:{{Item.params.padding_y}}px {{Item.params.padding_x}}px">
  <div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-if="!hasCube(Item)">未设置魔方</div>
	<div ng-if="!show">
		<span ng-repeat="(idx,row) in Item.params.layout">
			<span ng-repeat="(idx2,col) in row">
				<div ng-show="!col.isempty" style="position:absolute;top:{{idx*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4-3+Item.params.padding_y*1}}px;left:{{idx2*(340-Item.params.margin_x*2-Item.params.padding_x*2)/4-2+Item.params.padding_x*1}}px;width:{{col.cols*(340-Item.params.margin_x*2-Item.params.padding_x*2)/4}}px;height:{{col.rows*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4}}px;line-height:{{col.rows*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4}}px;"><img ng-src="{{col.imgurl}}" style="width:100%;max-height:100%;"/></div>
			</span>
		</span>
	</div>
	<div ng-if="show">
		<span ng-repeat="(idx,row) in Item.params.layout">
			<span ng-repeat="(idx2,col) in row">
				<div ng-show="!col.isempty" style="position:absolute;top:{{idx*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4+Item.params.padding_y*1}}px;left:{{idx2*(340-Item.params.margin_x*2-Item.params.padding_x*2)/4+Item.params.padding_x*1}}px;width:{{col.cols*(340-Item.params.margin_x*2-Item.params.padding_x*2)/4}}px;height:{{col.rows*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4}}px;line-height:{{col.rows*(340-Item.params.margin_y*2-Item.params.padding_y*2)/4}}px;"><img ng-src="{{col.imgurl}}" style="width:100%;max-height:100%;"/></div>
			</span>
		</span>
	</div>
</div>
 </script>
	<script type="text/ng-template" id="show-video.html"><div class="dsn-mod dsn-video" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'height':Item.params.height,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">		<a href="{{Item.params.src|| 'javascript:void(0);'}}">				<div style="position:relative;width:100%;height:auto;display:flex;flex-direction:column;align-items:center;justify-content:center" ng-style="{'height':560*(Item.params.videoheight)/100 +'px'}">					<img ng-src="{{Item.params.pic}}" style="min-height:168px;background:#999"/>					<div style="position:absolute;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.7)"><div style=";width:100%;height:100%;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff;"><i class="fa fa-play" style="font-size:20px"></i><div style="margin-top:5px;font-size:16px">00:00</div></div></div>				</div>		</a></div></script>
	<script type="text/ng-template" id="show-article.html"><div class="dsn-mod dp-article" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-show="Item.data == ''">一篇文章都没有...</div>
	<!--单排-->
	<div ng-show="Item.params.style=='1'" ng-repeat="item in Item.data" class="article-item1" style="{{Item.params.showline==1?'border-bottom: 1px solid '+Item.params.linecolor:''}};border-radius:{{Item.params.borderradius}}px">
		<div class="article-pic" ng-if="Item.params.showpic==1">
			<img class="image" ng-src="{{item.pic}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
		</div>
		<div class="article-info" >
			<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
			
			<div class="p2">
				<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
				<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
			</div>
		</div>
	</div>
	<!--双排-->
	<div ng-show="Item.params.style=='2' || Item.params.style=='6'" ng-repeat="item in Item.data" class="article-item2" ng-init="index = $index" style="margin-right:{{index%2==0?'2%':'0'}}">
		<div class="article-pic" ng-if="Item.params.style=='6' || Item.params.showpic==1">
			<img class="image" ng-src="{{item.pic}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
		</div>
		<div class="article-info" >
			<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
			
			<div class="p2">
				<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
				<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
			</div>
		</div>
	</div>
	<!--左图-->
	<div ng-show="Item.params.style=='4'" ng-repeat="item in Item.data" class="article-itemlist" style="{{Item.params.showline==1?'border-bottom: 1px solid '+Item.params.linecolor:''}};border-radius:{{Item.params.borderradius}}px">
		<div class="article-pic" ng-if="Item.params.showpic==1">
			<img class="image" ng-src="{{item.pic}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
		</div>
		<div class="article-info" >
			<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
			
			<div class="p2">
				<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
				<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
			</div>
		</div>
	</div>
	<!--右图-->
	<div ng-show="Item.params.style=='5'" ng-repeat="item in Item.data" class="article-itemlist" style="{{Item.params.showline==1?'border-bottom: 1px solid '+Item.params.linecolor:''}};border-radius:{{Item.params.borderradius}}px">
		<div class="article-info" style="padding-left:5px;">
			<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
			
			<div class="p2">
				<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
				<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
			</div>
		</div>
		<div class="article-pic" ng-if="Item.params.showpic==1">
			<img class="image" ng-src="{{item.pic}}"/>
		</div>
	</div>
	<!--三排-->
	<div ng-show="Item.params.style=='7'" ng-repeat="item in Item.data" class="article-item2" ng-init="index = $index" style="margin-right:{{(index+1)%3==0?'0':'2%'}};width: 32%;">
		<div class="article-info">
    		<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
    	</div>
    	
		<div class="article-pic" ng-if="Item.params.showpic==1">
			<img class="image" ng-src="{{item.pic}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
		</div>
		<div class="article-info">
			<div class="p2">
				<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
				<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
			</div>
		</div>
	</div>
	
	<!--左右滑动-->
	<div style="width: 100%;overflow-x: scroll;white-space: nowrap;">
		<div ng-show="Item.params.style=='9'" ng-repeat="item in Item.data" class="article-item2" ng-init="index = $index" style="display: inline-block;margin-right: 10px;">
			<div class="article-info">
				<div class="p1" style="{{Item.params.title_size>0?'font-size: '+Item.params.title_size+'px':''}}">{{item.name}}</div>
			</div>
			
			<div class="article-pic" ng-if="Item.params.showpic==1">
				<img class="image" ng-src="{{item.pic}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
			</div>
			<div class="article-info">
				<div class="p2">
					<span style="overflow:hidden" class="flex1" ng-if="Item.params.showtime==1">{{item.createtime}}</span>
					<span style="overflow:hidden" ng-if="Item.params.showreadcount==1">阅读 {{item.readcount}}</span>
				</div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-form.html"><div class="dsn-mod dsn-form" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'color':Item.params.color,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','margin-top':Item.params.margin_top*1+Item.params.margin_y*1+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px','font-size':Item.params.fontsize+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-if="Item.data == ''">没有表单信息...</div>
	
	<div class="{{Item.params.style==1?'item':'item2'}}" ng-repeat="(idx,item) in Item.data.content" style="border-color:{{Item.params.linecolor}}" ng-if="Item.params.isquery!=1 || item.query == 1">
    <span class='label' style="height: auto">{{item.val1}}<span ng-if="item.val3==1 && Item.params.showmuststar && Item.params.isquery!=1" style="color:red"> *</span></span>
		<input ng-if="item.key=='input'" type="text" name="form{{idx}}" class="input" placeholder="{{item.val2}}" style="background-color:{{Item.params.inputbgcolor}};border-color:{{Item.params.inputbordercolor}}"/>
		<textarea ng-if="item.key=='textarea'" name="form{{idx}}" class='textarea' placeholder="{{item.val2}}" style="background-color:{{Item.params.inputbgcolor}};border-color:{{Item.params.inputbordercolor}}"></textarea>
		<div class="radio1" ng-if="item.key=='radio'" style="flex-wrap:wrap;height: auto;">
			<div ng-repeat="item1 in item.val2" class="radio2">
				<div class="myradio"></div>{{item1}}<span style="padding-left:10px"></span>
			</div>
		</div>
		<div class="checkbox1" ng-if="item.key=='checkbox'" style="flex-wrap:wrap">
			<div ng-repeat="item1 in item.val2" class='checkbox2'>
				<div class="mycheckbox"></div>{{item1}}<span style="padding-left:10px"></span>
			</div>
		</div>
		<div ng-if="item.key=='switch'" class="layui-unselect layui-form-switch" lay-skin="_switch"><em></em><i></i></div>
	
		<picker ng-if="item.key=='selector'" mode="selector" name="form{{idx}}" value="" class='xyy-pic' range="{{item.val2}}" bindchange="bindPickerChange" data-idx="{{idx}}">
			<div class="picker" ng-if="item.val2[formdata[idx]]">当前选择: {{item.val2[formdata[idx]]}}</div>
			<div wx:else>请选择</div>
		</picker>
		<picker ng-if="item.key=='time'" mode="time" name="form{{idx}}" value="" start="{{item.val2[0]}}" end="{{item.val2[1]}}" class="xyy-pic" range="{{item.val2}}" bindchange="bindPickerChange" data-idx="{{idx}}">
			<div class="picker" ng-if="formdata[idx]">当前选择: {{formdata[idx]}}</div>
			<div wx:else>请选择</div>
		</picker>
		<picker ng-if="item.key=='date'" mode="date" name="form{{idx}}" value="" start="{{item.val2[0]}}" end="{{item.val2[1]}}" class="xyy-pic" range="{{item.val2}}" bindchange="bindPickerChange" data-idx="{{idx}}">
			<div class="picker" ng-if="formdata[idx]">当前选择: {{formdata[idx]}}</div>
			<div wx:else>请选择</div>
		</picker>
		<picker ng-if="item.key=='region'" mode="region" name="form{{idx}}" value="" class="xyy-pic" bindchange="bindPickerChange" data-idx="{{idx}}">
			<div class="picker" ng-if="formdata[idx]">当前选择: {{formdata[idx]}}</div>
			<div wx:else>请选择省市区</div>
		</picker>
		<div ng-if="item.key=='upload'" style="margin-left:10px">
			<img src="/static/imgsrc/upload.png" style="width:60px;height:60px"/>
		</div>
		<div ng-if="item.key=='upload_file'" style="margin-left:10px">
			<img src="/static/imgsrc/upload.png" style="width:60px;height:60px"/>
		</div>
		<div ng-if="item.key=='upload_video'" style="margin-left:10px">
			<img src="/static/imgsrc/upload.png" style="width:60px;height:60px"/>
		</div>
	</div>
	<div class="item" ng-if="Item.data.payset==1 && Item.params.isquery!=1" style="border: none;padding-left: 16px;">
		<span class='label' style="font-weight: bold;width:100px ;">支付金额：</span>
		<input type="text" class="input" name="money" value='{{Item.data.price}}' ng-if="Item.data.priceedit==1" style="font-weight: bold;"/>
		<span class="" ng-if="Item.data.priceedit==0" style="font-weight: bold;">{{Item.data.price}}</span>
		<span style="font-weight: bold;" >元</span>
	</div>
	<div ng-if="Item.data != ''" class="form-btn" style="background-color:{{Item.params.btnbgcolor}};border:1px solid {{Item.params.btnbordercolor}};font-size:{{Item.params.btnfontsize}}px;color:{{Item.params.btncolor}};width:{{Item.params.btnwidth}}px;height:{{Item.params.btnheight}}px;line-height:{{Item.params.btnheight}}px;border-radius:{{Item.params.btnradius}}px">{{Item.params.btntext}}</div>
</div></script>
	<script type="text/ng-template" id="show-map.html"><div class="dsn-mod dsn-map" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">    <div id="showmp_{{Item.id}}" style="width:100%;height:{{Item.params.height}}px"></div></div></script>
	<script type="text/ng-template" id="show-button.html"><div class="dsn-mod dsn-button" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px','font-size':Item.params.fontsize+'px'}">
	<div class="form-btn" style="background-color:{{Item.params.btnbgcolor}};border:1px solid {{Item.params.btnbordercolor}};font-size:{{Item.params.btnfontsize}}px;color:{{Item.params.btncolor}};width:{{Item.params.btnwidth}}px;height:{{Item.params.btnheight}}px;line-height:{{Item.params.btnheight}}px;border-radius:{{Item.params.btnradius}}px;margin: 0 auto;">{{Item.params.btntext}}</div>
</div></script>
	<script type="text/ng-template" id="show-cover.html"><div ng-if="!show">
	<div class="dsn-mod dsn-cover" ng-click="setfocus(Item.id,$event)" style="cursor:move;color:{{Item.params.color}};background-color:{{Item.params.bgcolor}};width:{{Item.params.width}}px;height:{{Item.params.height}}px;margin:{{Item.params.margin_y}}px {{Item.params.margin_x}}px;padding:{{Item.params.padding_y}}px {{Item.params.padding_x}}px;font-size:{{Item.params.fontsize}}px;border:{{Item.params.border}}px solid {{Item.params.bordercolor}};border-radius:{{Item.params.radius}}px;">
		<span ng-show="Item.params.style==1" style="padding:0 2px">{{Item.params.text}}</span>
		<img ng-show="Item.params.style==2" ng-src="{{Item.params.pic}}" style="width:{{Item.params.picwidth}}px;height:{{Item.params.picheight}}px;"/>
	</div>
</div>

<div ng-if="show">
	<div class="dsn-mod dsn-cover" style="position:fixed;z-index:99999;top:{{Item.params.top*5.6}}px;left:{{Item.params.left*3.4}}px;color:{{Item.params.color}};background-color:{{Item.params.bgcolor}};width:{{Item.params.width}}px;height:{{Item.params.height}}px;margin:{{Item.params.margin_y}}px {{Item.params.margin_x}}px;padding:{{Item.params.padding_y}}px {{Item.params.padding_x}}px;font-size:{{Item.params.fontsize}}px;border:{{Item.params.border}}px solid {{Item.params.bordercolor}};border-radius:{{Item.params.radius}}px;">
		<span ng-show="Item.params.style==1" style="padding:0 2px">{{Item.params.text}}</span>
		<img ng-show="Item.params.style==2" ng-src="{{Item.params.pic}}" style="width:{{Item.params.picwidth}}px;height:{{Item.params.picheight}}px;"/>
	</div>
</div></script>
	<script type="text/ng-template" id="show-business.html"><div class="dsn-mod dsn-business" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商家都没有...</div>

	<div ng-show="Item.params.showstyle==1 || !Item.params.showstyle" style="background: linear-gradient(180deg, <?php echo t('color1'); ?> 0%, rgba(<?php echo t('color1rgb'); ?>,0) 100%);">
		<div class="buslist">
			<div ng-repeat="item in Item.data" ng-init="idx = $index" class="busbox">
				<div class="businfo">
					<div class="f1"><img ng-src="{{item.logo}}"/></div>
					<div class="f2">
						<div class="title">{{item.name}}</div>
						<div class="score" ng-show="Item.params.showpingfen == 1"><img ng-src="/static/img/star{{item.commentscore}}.png"/>{{item.comment_score}}分</div>
						
						
						<div class="sales" ng-show="Item.params.showsales == 1"><span>销量：</span>{{item.sales}}</div>
						<div class="address" ng-show="Item.params.showjianjie == 1">{{item.content}}</div>
						<div class="address flex"><div class="flex1"><span ng-show="Item.params.showaddress == 1">{{item.address}}</span></div><div ng-show="Item.params.showdistance == 1" style="color:<?php echo t('color1'); ?>">200m</div></div>
						
						
						
					</div>
				</div>
				<div class="buspro" ng-show="Item.params.showproduct == 1">
					<div class="item" ng-repeat="item2 in item.prolist" ng-init="index = $index" style="{{'width:23%;margin-right:'+(index%4!=3?'2%':0)}}">
						<div class="product-pic">
							<img class="image" ng-src="{{item2.pic}}"/>
						</div>
						<div class="product-info">
							<div class="p1">{{item2.name}}</div>
							<div class="p2">
								<div class="p2-1">
									<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item2.sell_price}}</span>
									<!-- <span class="t2" ng-if="item2.market_price*1 > item2.sell_price*1">￥{{item2.market_price}}</span> -->
								</div>
							</div>
							<!-- <div class="p3" ng-if="item.sales>0">已售{{item2.sales}}件</div> -->
							<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>"><span class="iconfont icon_gouwuche"></span></div>
						</div>
					</div>
				</div>
				
			</div>
		</div>
	</div>
	</script>
	<script type="text/ng-template" id="show-shortvideo.html"><div class="dsn-mod dsn-shortvideolist" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个短视频都没有...</div>
	<div class="shortvideolist">
		<div class="dsn-shortvideolist-item" ng-repeat="item in Item.data" ng-init="idx = $index" style="margin-right:{{idx%2==0?'2%':'0'}};">
			<img class="ff" ng-src="{{item.coverimg}}"/>
			<div class="f2">
				<div class="t1" ng-if="Item.params.showlogo==1"><img class="touxiang" ng-src="{{item.logo}}"/></div>
				<div class="t2" ng-if="Item.params.showviewnum==1"><img class="tubiao" src="/static/img/shortvideo_playnum.png"/>{{item.view_num}}</div>
				<div class="t3" ng-if="Item.params.showzannum==1"><img class="tubiao" src="/static/img/shortvideo_likenum.png"/>{{item.zan_num}}</div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-liveroom.html"><div class="dsn-mod dsn-livelist" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个直播间都没有...</div>
	<div class="livelist">
		<div class="livebox" ng-repeat="item in Item.data" ng-init="idx = $index" style="margin-right:{{idx%2==0?'2%':'0'}};">
			<div class="bgpic">
				<img ng-src="{{item.coverImg}}"/>
			</div>
			<div class="f1" ng-if="item.status=='0'"><div class="t1">预告</div><div class="t2">{{item.showtime}}</div></div>
			<div class="f2" ng-if="item.status=='1'"><img src="/static/img/liveing.gif" class="t1"/><div class="t2">直播中</div></div>
			<div class="f3" ng-if="item.status=='2'"><div class="t1">已结束</div></div>
			<div class="f10">
				 <div class="title">{{item.name}}</div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-hotspot.html"><div class="dsn-mod dsn-hotspot" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'height':Item.params.height,'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0'}">	<div>		<img ng-src="{{Item.params.imgurl}}"/>		<div ng-repeat="d in Item.data" ng-style="{'width':d.width+'px','height':d.height+'px','left':d.left+'px','top':d.top+'px'}" class="hotarea">{{d.hrefname}}</div>	</div></div></script>
	<script type="text/ng-template" id="show-userinfo.html"><div class="dsn-mod" ng-class="{'dsn-mod-select':Item.id == focus}">
	<div ng-show="Item.params.style==1" style="background: linear-gradient(180deg, <?php echo t('color1'); ?> 0%, rgba(<?php echo t('color1rgb'); ?>,0) 100%);">
		<div class="dp-userinfo" ng-style="{'background':'url('+Item.params.bgimg+') no-repeat', 'background-size':'cover','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px '+ '0px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px '+'0px','overflow':'hidden'}">
			<div class="banner">
				<div class="info">
					<div class="f1">
						<img src="/static/img/touxiang.png" background-size="cover" class="headimg"/>
						<div class="flex-y-center">
							<div class="nickname">昵称</div>
							<div class='user-level' ng-show="Item.params.levelshow==1">
								<img class="level-img" src="/static/imgsrc/level_1.png" />
								<div class='level-name'>普通<?php echo t('会员'); ?></div>
							</div>
						</div>
					</div>
					<div class='usercard' ng-show="Item.params.cardshow==1">
						<img src="/static/img/ico-card.png" class="img"/>
						<span class="t1">会员卡</span>
					</div>
				</div>
				<div class="custom_field" ng-show="Item.params.moneyshow==1 || Item.params.scoreshow==1 || Item.params.couponshow==1 || Item.params.commissionshow==1 || Item.params.overdraftmoneyshow==1 ">
					<div class='item' ng-show="Item.params.moneyshow==1">
						<span class='t2'>0.00</span>
						<span class="t1"><?php echo t('余额'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.commissionshow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('佣金'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.scoreshow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('积分'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.bscoreshow==1">
						<span class='t2'>0</span>
						<span class="t1">总<?php echo t('积分'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.couponshow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('优惠券'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.xiaofeishow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('冻结佣金'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.bonuspoolshow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('贡献值'); ?></span>
					</div>
					<div class='item' ng-show="Item.params.overdraftmoneyshow==1">
						<span class='t2'>0</span>
						<span class="t1"><?php echo t('信用额度'); ?></span>
					</div>
					
					
					
					
					
					
					
				</div>
			</div>
			<div ng-if="Item.params.seticonsize && Item.params.seticonsize>0">
				<div class="userset usersetl" ng-show="Item.params.membercodeshow=='1'" style="right: {{(Item.params.seticonsize) * 2.8}}px">
					<img ng-src="/static/img/qrcode.png" class="img" style="width: {{Item.params.seticonsize}}px;height: {{Item.params.seticonsize}}px;" />
				</div>
			</div>
			<div ng-if="Item.params.seticonsize && Item.params.seticonsize>0">
				<div class="userset" ng-show="Item.params.seticonshow!=='0'" style="right: {{Item.params.seticonsize}}px">
					<img ng-src="{{Item.params.seticon?Item.params.seticon:'/static/img/set.png'}}" class="img" style="width: {{Item.params.seticonsize}}px;height: {{Item.params.seticonsize}}px;"/>
				</div>
			</div>
			<div ng-if="!Item.params.seticonsize">
				<div class="userset" ng-show="Item.params.seticonshow!=='0'">
					<img ng-src="{{Item.params.seticon?Item.params.seticon:'/static/img/set.png'}}" class="img"/>
				</div>
			</div>
		</div>
	</div>
	<div ng-show="Item.params.style==2" style="background: linear-gradient(45deg, <?php echo t('color1'); ?> 0%, rgba(<?php echo t('color1rgb'); ?>, 0.8) 100%);">
		<div class="dp-userinfo2" ng-style="{'background':'url('+Item.params.bgimg+') no-repeat', 'background-size':'cover','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px '+'0px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
			<div class="info">
				<img src="/static/img/touxiang.png" background-size="cover" class="headimg"/>
				<div class="nickname">
					<div class="nick">昵称</div>
					<div class='user-level' ng-show="Item.params.levelshow==1">
						<img class="level-img" src="/static/imgsrc/level_1.png" />
						<div class='level-name'>普通<?php echo t('会员'); ?></div>
					</div>
				</div>
			</div>
			<div class='usercard' ng-show="Item.params.cardshow==1">
				<img src="/static/img/ico-card2.png" class="img"/>
				<span class="t1">会员卡</span>
			</div>
			<div class="custom_field" ng-show="Item.params.moneyshow==1 || Item.params.scoreshow==1 || Item.params.couponshow==1 || Item.params.commissionshow==1">
				<div class='item' ng-show="Item.params.moneyshow==1">
					<span class='t2'>0.00</span>
					<span class="t1"><?php echo t('余额'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.commissionshow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('佣金'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.scoreshow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('积分'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.bscoreshow==1">
					<span class='t2'>0</span>
					<span class="t1">总<?php echo t('积分'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.couponshow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('优惠券'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.xiaofeishow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('冻结佣金'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.bonuspoolshow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('贡献值'); ?></span>
				</div>
				<div class='item' ng-show="Item.params.overdraftmoneyshow==1">
					<span class='t2'>0</span>
					<span class="t1"><?php echo t('信用额度'); ?></span>
				</div>
				
				
				
				
				
				
				
			</div>

			<div ng-if="Item.params.seticonsize && Item.params.seticonsize>0">
				<div class="userset usersetl" ng-show="Item.params.membercodeshow=='1'" style="right: {{(Item.params.seticonsize) * 2.8}}px">
					<img ng-src="/static/img/qrcode.png" class="img" style="width: {{Item.params.seticonsize}}px;height: {{Item.params.seticonsize}}px;" />
				</div>
			</div>
			<div ng-if="Item.params.seticonsize && Item.params.seticonsize>0">
				<div class="userset" ng-show="Item.params.seticonshow!=='0'" style="right: {{Item.params.seticonsize}}px">
					<img ng-src="{{Item.params.seticon?Item.params.seticon:'/static/img/set.png'}}" class="img" style="width: {{Item.params.seticonsize}}px;height: {{Item.params.seticonsize}}px;" />
				</div>
			</div>
			<div ng-if="!Item.params.seticonsize" >
				<div class="userset" ng-show="Item.params.seticonshow!=='0'">
					<img ng-src="{{Item.params.seticon?Item.params.seticon:'/static/img/set.png'}}" class="img"/>
				</div>
			</div>
		</div>
	</div>
	<!-- ,'margin-top': Item.params.style==2 ? (Item.params.moneyshow==1 || Item.params.scoreshow==1 || Item.params.couponshow==1 || Item.params.commissionshow==1) ? (Item.params.padding_y ==0 && ) ? '-30px':Item.params.padding_y+'px':'-128px' : Item.params.padding_y ? Item.params.padding_y+'px':'10px'  -->
	<div class="dp-userinfo-order" ng-style="{'margin':(Item.params.padding_y || 10)+'px '+Item.params.padding_x+'px','margin-top':Item.params.style==2 ? (((Item.params.moneyshow==1 || Item.params.scoreshow==1 || Item.params.couponshow==1 || Item.params.commissionshow==1) ? -75 : -110 )+ Item.params.padding_y*2.2)+'px':(Item.params.padding_y || 10)+'px'}" ng-show="Item.params.ordershow==1">
		<div class="head">
			<span class="f1">我的订单</span>
			<div class="f2"><span>查看全部订单</span><img src="/static/img/arrowright.png" class="image"/></div>
		</div>
		<div class="content">
			 <div class="item">
					<span class="iconfont icondaifukuan" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待付款</span>
			 </div>
			 <div class="item">
					<span class="iconfont icondaifahuo" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待发货</span>
			 </div>
			 <div class="item">
					<span class="iconfont icondaishouhuo" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待收货</span>
			 </div>
			 <div class="item">
					<span class="iconfont iconyiwancheng" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">退款/售后</span>
			 </div>
		</div>
	</div>
	<div class="dp-userinfo-order" ng-style="{'margin':Item.params.padding_y+'px '+Item.params.padding_x+'px','margin-top':Item.params.style==2 ? (Item.params.ordershow==1 ? (Item.params.padding_y || 10)+'px':((Item.params.moneyshow==1 || Item.params.scoreshow==1 || Item.params.couponshow==1 || Item.params.commissionshow==1) ? -75 + Item.params.padding_y*2.2+'px':-110 + Item.params.padding_y*2.2+'px')):(Item.params.padding_y || 10)+'px'}" ng-show="Item.params.scoreshopordershow==1">
		<div class="head">
			<span class="f1">积分兑换订单</span>
			<div class="f2"><span>查看全部订单</span><img src="/static/img/arrowright.png" class="image"/></div>
		</div>
		<div class="content">
			 <div class="item">
					<span class="iconfont icondaifukuan" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待付款</span>
			 </div>
			 <div class="item">
					<span class="iconfont icondaifahuo" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待发货</span>
			 </div>
			 <div class="item">
					<span class="iconfont icondaishouhuo" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">待收货</span>
			 </div>
			 <div class="item" ng-show="Item.params.scoreshowrefund==1">
					<span class="iconfont iconyiwancheng" style="font-size:30px;color:<?php echo t('color1'); ?>;"></span>
					<span class="t3">退款/售后</span>
			 </div>
		</div>
	</div>
</div></script>
	<!--预约服务-->
	<script type="text/ng-template" id="edit-yuyue.html"><div class="dsn-panel-editor-title">预约服务设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="3" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="三排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="line" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="左右滑动"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">服务名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	
	<div class="layui-form-item">
		<div class="layui-form-label">价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getyylist(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delcollage(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addyuyue('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">服务价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> </div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addyuyue('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个服务商品</div>
	</div>

	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getyuyue(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
							<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">服务类型</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getyuyue(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($yuyue_clist as $cv): ?>
							<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
							<?php foreach($cv['child'] as $v): ?>
							<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
							<?php endforeach; ?>
						<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getyuyue(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getyuyue(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getyuyue(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getyuyue(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getyuyue(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-yuyue.html"><style type="text/css">
.fuwu:before {
	content: "";
    display: inline-block;
    vertical-align: middle;
    margin-top: -3px;
    margin-right: 3px;
    width:12px;
    height: 12px;
    background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURUdwTOU5O+Q5POU5POQ4O+U4PN80P+M4O+Q4O+Q4POQ5POQ4OuQ4O+Q4O+I4PuQ5PJxkAycAAAAPdFJOUwAf+VSoeAvzws7ka7miLboUzckAAADJSURBVBjTY2BgYGCMWVR5VIABDBid/gPBFwjP/JOzQKKtfjGIzf3fEUSJ/N8AJO21Iao3fQbqqA+AcLi/CzCwfGGAAn8HBnlFMIttBoP4R4b4C2BOzk8G3q8M5w3AnPsLGZj/MKwHW8b6/QED4y8G/QQQx14ZSHwCcWYkMOtvAHOAyvqnPf8KcuMvkAGZP9eDjAQaEO/AwDb/D0gj0GiQpRnTQIYIfUR1DopDGexVIZygz8ieC4B6WyzRBOJtBkZ/pAABBZUWOKgAispF5e7ibycAAAAASUVORK5CYII=) no-repeat;
    background-size: 12px auto;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAwUExURUdwTOU5O+Q5POU5POQ4O+U4PN80P+M4O+Q4O+Q4POQ5POQ4OuQ4O+Q4O+I4PuQ5PJxkAycAAAAPdFJOUwAf+VSoeAvzws7ka7miLboUzckAAADJSURBVBjTY2BgYGCMWVR5VIABDBid/gPBFwjP/JOzQKKtfjGIzf3fEUSJ/N8AJO21Iao3fQbqqA+AcLi/CzCwfGGAAn8HBnlFMIttBoP4R4b4C2BOzk8G3q8M5w3AnPsLGZj/MKwHW8b6/QED4y8G/QQQx14ZSHwCcWYkMOtvAHOAyvqnPf8KcuMvkAGZP9eDjAQaEO/AwDb/D0gj0GiQpRnTQIYIfUR1DopDGexVIZygz8ieC4B6WyzRBOJtBkZ/pAABBZUWOKgAispF5e7ibycAAAAASUVORK5CYII=);
    background-repeat-x: no-repeat;
    background-repeat-y: no-repeat;
}
</style>
<div class="dsn-mod dp-yuyue" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 14px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-yuyue-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic" style="position: relative;">
				<img class="image" ng-src="{{item.pic}}"/>
				<div ng-if="Item.params.showisopen == 1" style="position: absolute;width: 100%;bottom: 0; left:0;background: {{item.is_open?item.color1:'#CCC'}};color: #fff;text-align: center;line-height: 20px;font-size: 12px;">
					{{item.is_open?item.opentip:item.noopentip}}
				</div>
				<div ng-if="Item.params.showfwtype == 1" >
					<div ng-if="item.fwtype.indexOf('1')>=0" style="position: absolute;width: auto;top: 0; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						到店服务
					</div>
					<div ng-if="item.fwtype.indexOf('2')>=0" style="position: absolute;width: auto;top: {{item.fwtypetop2}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						上门服务
					</div>
					<div ng-if="item.fwtype.indexOf('3')>=0" style="position: absolute;width: auto;top: {{item.fwtypetop3}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;opacity: 0.7">
						到商家服务
					</div>
				</div>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1 || Item.params.showcat == 1"><span ng-if="Item.params.showcat == 1" style="font-size:14px;color:red">{{item.catnames}}</span><span ng-if="Item.params.showname == 1">{{item.name}}</span></div>
				<div ng-if="Item.params.showsellpoint == 1" style="line-height: 18px;word-break: break-all;white-space: pre-wrap;">{{item.sellpoint}}</div>
				<div ng-if="Item.params.showfuwu== 1" style="line-height: 18px;display: flex;overflow: hidden;flex-wrap:wrap;font-size: 13px;">
					<div ng-repeat="item2 in item.fuwulist" style="margin-right: 5px;">
						<div class="fuwu">{{item2}}</div>
					</div>
				</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.sell_price}}<span style="font-size:12px;padding-left:2px">元/{{item.danwei}}</span></span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales != '0'">已售{{item.sales}}</div>
				
			</div>
		</div>
	</div>
	<div class="dp-yuyue-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic" style="position: relative;">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<div ng-if="Item.params.showisopen == 1" style="position: absolute;width: 100%;bottom: 0; left:0;background: {{item.is_open?item.color1:'#CCC'}};color: #fff;text-align: center;line-height: 20px;font-size: 12px;">
					{{item.is_open?item.opentip:item.noopentip}}
				</div>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1 || Item.params.showcat == 1"><span ng-if="Item.params.showcat == 1" style="font-size:14px;color:red">{{item.catnames}}</span><span ng-if="Item.params.showname == 1">{{item.name}}</span></div>
				<div ng-if="Item.params.showsellpoint == 1" style="line-height: 18px;word-break: break-all;white-space: pre-wrap;">{{item.sellpoint}}</div>
				<div ng-if="Item.params.showfuwu== 1" style="line-height: 18px;display: flex;overflow: hidden;flex-wrap:wrap;font-size: 13px;">
					<div ng-repeat="item2 in item.fuwulist" style="margin-right: 5px;">
						<div class="fuwu">{{item2}}</div>
					</div>
				</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.sell_price}}<span style="font-size:12px;padding-left:2px">元/{{item.danwei}}</span></span>
				</div>
				<div class="p3" ng-if="Item.params.showsales != '0'">已售{{item.sales}}</div>
				<div ng-if="Item.params.showfwtype == 1" >
					<div ng-if="item.fwtype.indexOf('1')>=0" style="position: absolute;width: auto;top: 0; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						到店服务
					</div>
					<div ng-if="item.fwtype.indexOf('2')>=0" style="position: absolute;width: auto;top:{{item.fwtypetop2}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						上门服务
					</div>
					<div ng-if="item.fwtype.indexOf('3')>=0" style="position: absolute;width: auto;top: {{item.fwtypetop3}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;opacity: 0.7">
						到商家服务
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-yuyue-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic" style="position: relative;">
				<img class="image" ng-src="{{item.pic}}"/>
				<div ng-if="Item.params.showisopen == 1" style="position: absolute;width: 100%;bottom: 0; left:0;background: {{item.is_open?item.color1:'#CCC'}};color: #fff;text-align: center;line-height: 20px;font-size: 12px;">
					{{item.is_open?item.opentip:item.noopentip}}
				</div>
				<div ng-if="Item.params.showfwtype == 1" >
					<div ng-if="item.fwtype.indexOf('1')>=0" style="position: absolute;width: auto;top: 0; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						到店服务
					</div>
					<div ng-if="item.fwtype.indexOf('2')>=0" style="position: absolute;width: auto;top: {{item.fwtypetop2}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;margin-bottom: 5px;opacity: 0.7">
						上门服务
					</div>
					<div ng-if="item.fwtype.indexOf('3')>=0" style="position: absolute;width: auto;top: {{item.fwtypetop3}}px; right:0px;background: #EC9100;color: #fff;text-align: center;line-height: 18px;font-size: 12px;padding:0 10px;border-radius: 2px;opacity: 0.7">
						到商家服务
					</div>
				</div>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1 || Item.params.showcat== 1"><span ng-if="Item.params.showcat== 1" style="font-size:14px;color:red">{{item.catnames}}</span><span ng-if="Item.params.showname == 1">{{item.name}}</span></div>
				<div ng-if="Item.params.showsellpoint == 1" style="line-height: 18px;word-break: break-all;white-space: pre-wrap;">{{item.sellpoint}}</div>
				<div ng-if="Item.params.showfuwu== 1" style="line-height: 18px;display: flex;overflow: hidden;flex-wrap:wrap;font-size: 13px;">
					<div ng-repeat="item2 in item.fuwulist" style="margin-right: 5px;">
						<div class="fuwu">{{item2}}</div>
					</div>
				</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>">{{item.sell_price}}<span style="font-size:12px;padding-left:2px">元/{{item.danwei}}</span></span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales != '0'">已售{{item.sales}}</div>
				
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-tuangou.html"><div class="dsn-mod dp-tuangou" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-tuangou-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">低至￥</span>{{item.min_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
			</div>
		</div>
	</div>
	<div class="dp-tuangou-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">低至￥</span>{{item.min_price}}</span>
					<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已售{{item.sales}}件</span></div>
				</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></span></div>
			</div>
		</div>
	</div>
	<div class="dp-tuangou-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">低至￥</span>{{item.min_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3" ng-if="Item.params.showsales=='1' && item.sales>0">已售{{item.sales}}件</div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==1"><span class="iconfont icon_gouwuche"></span></div>
				<div class="p4" style="background:rgba(<?php echo t('color1rgb'); ?>,0.1);color:<?php echo t('color1'); ?>" ng-if="Item.params.showcart==2"><img ng-src="{{Item.params.cartimg}}" class="img"/></div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="edit-luckycollage.html"><div class="dsn-panel-editor-title">幸运拼团商品设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="list" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="横排"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品名称</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="1" ng-model="Edit.params.showname" title="显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showname" value="0" ng-model="Edit.params.showname" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品价格</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="1" ng-model="Edit.params.showprice" title="原价+拼团价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="2" ng-model="Edit.params.showprice" title="只显示拼团价"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showprice" value="0" ng-model="Edit.params.showprice" title="不显示"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品销量</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="0" ng-model="Edit.params.showsales" title="不显示"/>
			<input class="radio" type="radio" name="{{Edit.id}}_showsales" value="1" ng-model="Edit.params.showsales" title="显示"/>
		</div>
		<span class="layui-form-mid layui-word-aux">提示：显示销量时，销量大于0才会显示</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">商品属性</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="" ng-model="Edit.params.saleimg" title="无"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-tj.png" ng-model="Edit.params.saleimg" title="推荐"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-rx.png" ng-model="Edit.params.saleimg" title="热销"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xp.png" ng-model="Edit.params.saleimg" title="新上"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-xs.png" ng-model="Edit.params.saleimg" title="限时"/>
			<input class="radio" type="radio" name="{{Edit.id}}_saleimg" value="<?php echo PRE_URL; ?>/static/imgsrc/sale-cx.png" ng-model="Edit.params.saleimg" title="促销"/>
			<span class="dsn-panel-editor-btn" ng-click="uploadImg(Edit.id,'saleimg')">自己上传</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">商品来源</div>
		<div class="layui-input-inline" style="width:500px">
			<?php if(!$type): ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="0" ng-model="Edit.params.productfrom" title="手动选择"/>
			<?php endif; ?>
			<input class="radio" type="radio" name="{{Edit.id}}_productfrom" value="1" ng-model="Edit.params.productfrom" title="分组分类" ng-change="getluckycollage(Edit.id)"/>
		</div>
	</div>
	<div ng-show="Edit.params.productfrom == '0'">
		<div ng-repeat="good in Edit.data" class="dsn-panel-editor-relative">
			<div class="dsn-panel-editor-del" style="right:30px;font-size:12px" title="上移" ng-click="upItemChild(Edit.id,good.id)"><i class="fa fa-arrow-up"></i></div>
			<div class="dsn-panel-editor-del" title="移除" ng-click="delcollage(Edit.id,good.id)">×</div>
			<div class="dsn-panel-editor-line flex">
				<div class="dsn-panel-editor-goodimg flex0" ng-click="addluckycollage('replace',Edit.id, good.id)">
					<img ng-src="{{good.pic}}" width="100%"/>
					<div class="dsn-panel-editor-goodimg-t2">重新选择商品</div>
				</div>
				<div class="dsn-panel-editor-line-right">
					<div class="layui-form-item">
						<div class="layui-form-label">商品名称</div>
						<div class="layui-form-mid">{{good.name}}</div>
					</div>
					<div class="layui-form-item">
						<div class="layui-form-label">商品价格</div>
						<div class="layui-form-mid"><span style="font-size: 16px;">￥{{good.sell_price}}</span> <span style="text-decoration: line-through;">￥{{good.market_price}}</span></div>
					</div>
				</div>
			</div>
		</div>
		<div class="layui-btn layui-btn-primary" style="width:500px;margin-top:10px" ng-click="addluckycollage('',Edit.id,'')"><i class="fa fa-plus-circle"></i> 添加一个商品</div>
	</div>
	<div ng-show="Edit.params.productfrom == '1'">
		<?php if($bid==0): ?>
		<div class="layui-form-item">
			<div class="layui-form-label">所属商家</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.bid" ng-change="getluckycollage(Edit.id)">
					<option value="0">自营</option>
					<option value="">全部</option>
					<?php if(!$type): foreach($bnlist as $bv): ?>
						<option value="<?php echo $bv['id']; ?>"><?php echo $bv['name']; ?></option>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>
		<?php endif; ?>
		<div class="layui-form-item">
			<div class="layui-form-label">商品分类</div>
			<div class="layui-input-inline">
				<select class="layui-input" style="width:200px;-webkit-appearance:menulist" lay-ignore ng-model="Edit.params.category" ng-change="getluckycollage(Edit.id)">
					<option value="">全部分类</option>
					<?php if(!$type): foreach($luckycollage_clist as $cv): ?>
						<option value="<?php echo $cv['id']; ?>"><?php echo $cv['name']; ?></option>
						<?php foreach($cv['child'] as $v): ?>
						<option value="<?php echo $v['id']; ?>">&nbsp;&nbsp;&nbsp;<?php echo $v['name']; ?></option>
						<?php endforeach; ?>
					<?php endforeach; ?>
					<?php endif; ?>
				</select>
			</div>
		</div>

		<div class="layui-form-item">
			<div class="layui-form-label">排序方式</div>
			<div class="layui-input-inline" style="width:500px">
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getluckycollage(Edit.id)" title="按排序"/>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getluckycollage(Edit.id)" title="创建时间↓"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getluckycollage(Edit.id)" title="创建时间↑"/></i>
				<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sales" ng-model="Edit.params.sortby" ng-change="getluckycollage(Edit.id)" title="销量"/>
			</div>
		</div>
		<div class="layui-form-item">
			<div class="layui-form-label">显示数量</div>
			<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.proshownum" ng-blur="getluckycollage(Edit.id)"/>
			</div>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
    <div class="layui-form-label">显示用户</div>
    <div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
    </div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-luckycollage.html"><div class="dsn-mod dp-luckycollage" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个商品都没有...</div>
	<!--123排-->
	<div class="dp-collage-item" ng-show="Item.params.style=='2'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
				<div class="desc">
					<span>{{item.teamnum}}人拼团 {{item.gua_num}}人得商品</span>
					<span>{{item.teamnum-item.gua_num}}人各得{{item.money}}元参与奖</span>
				</div>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px">￥</span>{{item.sell_price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3">
					<div class="p3-1" style="background:rgba(<?php echo t('color1rgb'); ?>,0.12);color:<?php echo t('color1'); ?>">{{item.teamnum}}人团</div>
					<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"><span style="overflow:hidden">已拼成{{item.sales}}件</span></div>
				</div>
			</div>
		</div>
	</div>
	<div class="dp-collage-itemlist lucky_itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data" style="display:inline-block">
			<div class="flex">
				<div class="product-pic">
					<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
					<img class="saleimg" ng-src="{{saleimg}}" ng-if="Item.params.saleimg!=''"/>
				</div>

				<div class="product-info">
					<div class="p1" ng-if="Item.params.showname == 1">	<span class="team_text">{{item.teamnum}}人团</span>{{item.name}}</div>
					<div class="box_2 flex" style="justify-content: space-between;">
						<div class="p2" ng-if="Item.params.showprice != '0'">
							<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px">￥</span>{{item.sell_price}}</span>
							<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.sell_price*1">￥{{item.market_price}}</span>
						</div>
						<div ng-if="Item.params.showsales=='1' && item.sales>0" style="overflow:hidden;float:right;line-height:30px">已拼成{{item.sales}}件</div>
					</div>
					<div class="p3">
						<div class="p3-2" ng-if="Item.params.showsales=='1' && item.sales>0"> </div>
					</div>
				</div>
			</div>
			<div class="desc"><span>{{item.teamnum}}人拼团 {{item.gua_num}}人得商品</span><span v-if="item.gua_num>0">{{item.teamnum-item.gua_num}}人各得{{item.money}}元参与奖</span></div>
			
		</div>
	</div>
</div></script>

	<script type="text/ng-template" id="show-wxad.html"><div class="dsn-mod dsn-wxad" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">	<img src="/static/imgsrc/wxad.png" style="width:100%;height:auto"></div></script>
	<script type="text/ng-template" id="show-adset.html"><div class="dsn-mod dsn-adset" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">	<img src="/static/imgsrc/adset.png" style="width:100%;height:auto"></div></script>
	<script type="text/ng-template" id="show-jidian.html"><div class="dsn-mod dsn-jidian-warp" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'border-radius':Item.params.borderradius+'px','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div class="dp-jidian"
		ng-style="{}">
		<div class="dp-jidian-f1"></div>
		<div class="dp-jidian-f2">
			<p class="text-big">集满5单返券</p>
			<p>再下<span>4单</span>得<span>4元无门槛</span>优惠券</p>
		</div>
		<div class="dp-jidian-f3">
			<span class="circle circleCheck"><i></i></span>
			<span class="circle"></span>
			<span class="circle"></span>
			<span class="circle"></span>
			<span class="circle"></span>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-tab.html"><div class="dsn-mod dsn-tab" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'color':Item.params.color,'border-radius':Item.params.borderradius+'px','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0'}">	<div class="dsn-tab-box" ng-style="{'background-color':Item.params.bgcolor,'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">		<div ng-repeat="d in Item.data" class="dsn-tab-item" ng-style="{'color':Item.params.selectindex==$index?Item.params.color2:Item.params.color1,'font-size':Item.params.fontsize1+'px'}">{{d.name}}<div class="dsn-tab-item-after" ng-style="{background:Item.params.arrowcolor}" ng-show="Item.params.arrowshow==1 && Item.params.selectindex==$index"></div></div>	</div>	<div style="height:200px;line-height:200px; text-align: center; color: #999; font-size: 16px;" ng-style="{'background-color':Item.params.bgcolor2,'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">选项卡内容区域</div></div></script>
	<script type="text/ng-template" id="show-kecheng.html"><style>
	.product-details{position: absolute;right: 10px;bottom: 10px;font-size: 13px;}
</style>
<div class="dsn-mod dp-product" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;width:100%" ng-show="Item.data == ''">一个课程都没有...</div>
	<!--123排-->
	<div class="dp-product-item" ng-show="Item.params.style=='1' || Item.params.style=='2' || Item.params.style=='3'">
		<div class="item" ng-repeat="item in Item.data" ng-init="index = $index" style="{{Item.params.style==2 ? 'width:49%;margin-right:'+(index%2==0?'2%':0) : (Item.params.style==3 ? 'width:32%;margin-right:'+(index%3!=2?'2%':0) :'width:100%')}}">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px" ng-if="item.price>0">￥</span>{{item.price==0?'免费':item.price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3">共{{item.count}}节<span ng-if="Item.params.showsales=='1'"> | {{item.join_num}}人已加入学习</span></div>
			</div>
		</div>
	</div>
	<div class="dp-product-itemlist" ng-show="Item.params.style=='list'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic" ng-if="Item.params.showpic == 1">
				<img class="image" ng-src="{{item.pic}}" mode="widthFix"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info" style="{{Item.params.showpic == 0 ? 'width:100%':''}}">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2" ng-if="Item.params.showprice != '0'">
					<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px;padding-right:1px" ng-if="item.price>0">￥</span>{{item.price==0?'免费':item.price}}</span>
					<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.price*1">￥{{item.market_price}}</span>
				</div>
				<div class="p3">
					<div class="p3-1">共{{item.count}}节<span ng-if="Item.params.showsales=='1'"> | {{item.join_num}}人已加入学习</span></div>
				</div>
			</div>
			<div class="product-details" style="color:<?php echo t('color1'); ?>">
				查看详情
			</div>
		</div>
	</div>
	<div class="dp-product-itemline" ng-show="Item.params.style=='line'">
		<div class="item" ng-repeat="item in Item.data">
			<div class="product-pic">
				<img class="image" ng-src="{{item.pic}}"/>
				<img class="saleimg" ng-src="{{Item.params.saleimg}}" ng-if="Item.params.saleimg!=''"/>
			</div>
			<div class="product-info">
				<div class="p1" ng-if="Item.params.showname == 1">{{item.name}}</div>
				<div class="p2">
					<div class="p2-1" ng-if="Item.params.showprice != '0'">
						<span class="t1" style="color:<?php echo t('color1'); ?>"><span style="font-size:12px" ng-if="item.price>0">￥</span>{{item.price==0?'免费':item.price}}</span>
						<span class="t2" ng-if="Item.params.showprice == '1' && item.market_price*1 > item.price*1">￥{{item.market_price}}</span>
					</div>
				</div>
				<div class="p3">共{{item.count}}节<span ng-if="Item.params.showsales=='1'"> | {{item.join_num}}人已加入学习</span></div>
			</div>
		</div>
	</div>
</div></script>
	<script type="text/ng-template" id="show-zhaopin.html"><?php if(getcustom('zhaopin')): ?>
<div class="dsn-mod dp-article" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
    <div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-show="Item.data == ''">一条招聘都没有...</div>
    <!--单排-->
    <div ng-show="Item.params.style=='1'" ng-repeat="item in Item.data" class="article-itemlist">
        <div class="article-pic">
            <img class="image" ng-src="{{item.thumb}}" style="{{Item.params.pic_width>0&&Item.params.pic_height>0?'width: '+Item.params.pic_width+'px;height: '+Item.params.pic_height+'px':''}}"/>
        </div>
        <div class="article-info">
        <div class="p1">{{item.title}}</div>
        <div class="p2">
            <span style="overflow:hidden" class="flex1">{{item.num}}人</span>
            <span style="overflow:hidden">{{item.salary}}</span>
        </div>
        <div class="p3" style="color: #666666">
            {{item.welfare}}
        </div>
        <div class="p3" style="color: #666666">
            {{item.address}}
        </div>
    </div>
</div>
    <!--双排-->
    <div ng-show="Item.params.style=='2'" ng-repeat="item in Item.data" class="article-item2" ng-init="index = $index" style="margin-right:{{index%2==0?'2%':'0'}}">
        <div class="article-pic">
            <img class="image" ng-src="{{item.thumb}}"/>
        </div>
        <div class="article-info">
            <div class="p1">{{item.title}}</div>
            <div class="p2">
                <span style="overflow:hidden" class="flex1" >{{item.num}}人</span>
                <span style="overflow:hidden" >{{item.salary}}</span>
            </div>
        </div>
    </div>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="edit-zhaopin.html"><?php if(getcustom('zhaopin')): ?>
<div class="dsn-panel-editor-title">招聘设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">样式选择</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
			<input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
		</div>
	</div>

	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
			<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">排序方式</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getZhaopin(Edit.id)" title="按排序"/>
			<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getZhaopin(Edit.id)" title="发布时间↓"/></i>
			<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getZhaopin(Edit.id)" title="发布时间↑"/></i>
			<input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getZhaopin(Edit.id)" title="随机"/>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">显示数量</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getZhaopin(Edit.id)"/>
		</div>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">左右内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">上下内边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
		<div class="layui-form-label">显示用户</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.showmids"/>
		</div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
		</div>
	</div>
	<?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="show-qiuzhi.html"><?php if(getcustom('zhaopin')): ?>
<div class="dsn-mod dp-article" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
    <div style="line-height: 170px; text-align: center; color: #999; font-size: 16px;" ng-show="Item.data == ''">一条求职都没有...</div>
    <!--单排-->
    <div ng-show="Item.params.style=='1'" ng-repeat="item in Item.data" class="article-itemlist">
        <div class="article-pic">
            <img class="image" ng-src="{{item.thumb}}" style="{{(item.secret_type==2 || item.secret_type==3)?('filter: blur('+item.mohu+'px);-webkit-filter: blur('+item.mohu+'px);-moz-filter: blur('+item.mohu+'px)'):''}}"/>
        </div>
        <div class="article-info">
            <div class="p1">{{item.title}}</div>
            <div class="p2">
                <span style="overflow:hidden" class="flex1">{{item.name}}
                    <span ng-if="item.sex=='1'">/男</span>
                    <span ng-if="item.sex=='2'">/女</span>
                    /{{item.age}}岁</span>
                <span style="overflow:hidden">{{item.salary}}</span>
            </div>
            <div class="p3" style="color: #666666">
                {{item.cnames}}
            </div>
<!--            <div class="p3" style="color: #666666">-->
<!--                {{item.area}}-->
<!--            </div>-->
        </div>
    </div>
    <!--双排-->
    <div ng-show="Item.params.style=='2'" ng-repeat="item in Item.data" class="article-item2" ng-init="index = $index" style="margin-right:{{index%2==0?'2%':'0'}}">
        <div class="article-pic">
            <img class="image" ng-src="{{item.thumb}}"/>
        </div>
        <div class="article-info">
            <div class="p1">{{item.name}}</div>
            <div class="p2">
<!--                <span style="overflow:hidden" class="flex1" >-->
<!--                    <span ng-if="item.sex=='1'">/男</span>-->
<!--                    <span ng-if="item.sex=='2'">/女</span>-->
<!--                    /{{item.age}}岁</span>-->
<!--                </span>-->
                <span style="overflow:hidden" >{{item.cnames}}</span>
            </div>
        </div>
    </div>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="edit-qiuzhi.html"><?php if(getcustom('zhaopin')): ?>
<div class="dsn-panel-editor-title">求职设置</div>
<div class="dsn-panel-editor-content">
    <div class="layui-form-item">
        <div class="layui-form-label">与上方距离</div>
        <div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
        <span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">样式选择</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="radio" type="radio" name="{{Edit.id}}_style" value="1" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="单排"/>
            <input class="radio" type="radio" name="{{Edit.id}}_style" value="2" ng-model="Edit.params.style" ng-change="changeImg(Edit.id, Edit.params.style)" title="双排"/>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-form-label">背景颜色</div>
        <div class="layui-input-inline">
            <input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
        </div>
        <span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">排序方式</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="radio" type="radio" name="{{Edit.id}}_sortby" value="sort" ng-model="Edit.params.sortby" ng-change="getzhaopin(Edit.id)" title="按排序"/>
            <input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtimedesc" ng-model="Edit.params.sortby" ng-change="getzhaopin(Edit.id)" title="发布时间↓"/></i>
            <input class="radio" type="radio" name="{{Edit.id}}_sortby" value="createtime" ng-model="Edit.params.sortby" ng-change="getzhaopin(Edit.id)" title="发布时间↑"/></i>
            <input class="radio" type="radio" name="{{Edit.id}}_sortby" value="rand" ng-model="Edit.params.sortby" ng-change="getzhaopin(Edit.id)" title="随机"/>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">显示数量</div>
        <div class="layui-input-inline">
            <input class="layui-input" ng-model="Edit.params.shownum" ng-blur="getzhaopin(Edit.id)"/>
        </div>
    </div>
    <hr>
    <div class="layui-form-item">
        <div class="layui-form-label">左右边距</div>
        <div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
        <span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">左右内边距</div>
        <div class="slider" min="0" max="40" ng-model="Edit.params.padding_x"></div>
        <span class="slider-span"><input ng-model="Edit.params.padding_x"/> px</span>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">上下内边距</div>
        <div class="slider" min="0" max="40" ng-model="Edit.params.padding_y"></div>
        <span class="slider-span"><input ng-model="Edit.params.padding_y"/> px</span>
    </div>
    <?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
    <div class="layui-form-item">
        <div class="layui-form-label">显示平台</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
            <?php foreach($platform as $pl): ?>
            <input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
            <?php endforeach; ?>

        </div>
    </div>
    <?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
    <div class="layui-form-item">
        <div class="layui-form-label">显示范围</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
            <?php foreach($memberlevelList as $lv): ?>
            <input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
            <?php endforeach; ?>
        </div>
    </div>
    <?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
    <hr>
    <div class="layui-form-item">
        <div class="layui-form-label">显示门店</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
            <?php foreach($mendianlist as $md): ?>
            <input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
            <?php endforeach; ?>
        </div>
    </div>
    <div class="layui-form-item">
        <div class="layui-form-label">显示类型</div>
        <div class="layui-input-inline" style="width:500px">
            <input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
            <input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
        </div>
    </div>
    <div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
        <div class="layui-form-label">显示范围</div>
        <div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
        <span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
    </div>
    <hr>
    <?php endif; ?>
    <?php endif; ?>
    <div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
        <div class="layui-form-label">显示用户</div>
        <div class="layui-input-inline">
            <input class="layui-input" ng-model="Edit.params.showmids"/>
        </div>
        <div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
        </div>
    </div>
    <?php else: ?>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
        <input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
    <?php endif; ?>
</div>
<?php endif; ?></script>
	<script type="text/ng-template" id="edit-form-log.html"><div class="dsn-panel-editor-title">表单动态设置</div>
<div class="dsn-panel-editor-content">
	<div class="layui-form-item">
		<div class="layui-form-label">与上方距离</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_y"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_y"/> px</span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">选择表单</div>
		<div class="layui-btn layui-btn-primary" ng-click="addform(Edit.id)" style="float:left">选 择</div>
		<div class="layui-form-mid">
			<input class="hide" value="" ng-model="Edit.params.hrefurl"/>
			<span style="margin-left:10px">{{Edit.data.name}}</span>
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">标题名称</div>
		<div class="layui-input-inline">
			<input class="layui-input" ng-model="Edit.params.title" />
		</div>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">背景颜色</div>
		<div class="layui-input-inline">
				<input class="layui-input" value="{{Edit.params.bgcolor}}" ng-model="Edit.params.bgcolor"/>
		</div>
		<span class="colorpicker" ng-model="Edit.params.bgcolor"></span>
	</div>
	<div class="layui-form-item">
		<div class="layui-form-label">圆角度</div>
		<div class="slider" min="0" max="50" ng-model="Edit.params.borderradius"></div>
		<span class="slider-span"><input ng-model="Edit.params.borderradius"/> px</span>
	</div>
	<hr>
	<div class="layui-form-item">
		<div class="layui-form-label">左右外边距</div>
		<div class="slider" min="0" max="40" ng-model="Edit.params.margin_x"></div>
		<span class="slider-span"><input ng-model="Edit.params.margin_x"/> px</span>
	</div>
	<?php if(!$type): if(!$noshow_modules || !in_array('ModulePlatform',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示平台</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
			<?php foreach($platform as $pl): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo getplatformname($pl); ?>" name="{{Edit.id}}_platform['<?php echo $pl; ?>']" ng-model="Edit.params.platform['<?php echo $pl; ?>']"/>
			<?php endforeach; ?>

		</div>
	</div>
	<?php endif; if(!$noshow_modules || !in_array('ModuleQuanxian',$noshow_modules)): ?>
	<div class="layui-form-item">
		<div class="layui-form-label">显示范围</div>
		<div class="layui-input-inline" style="width:500px">
			<input class="checkbox" type="checkbox" lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
			<?php foreach($memberlevelList as $lv): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $lv['name']; ?>" name="{{Edit.id}}_quanxian[<?php echo $lv['id']; ?>]" ng-model="Edit.params.quanxian[<?php echo $lv['id']; ?>]"/>
			<?php endforeach; ?>
		</div>
	</div>
	<?php endif; if(getcustom('show_location')): if($sysset['mode']==3): ?>
<hr>
<div class="layui-form-item">
	<div class="layui-form-label">显示门店</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="checkbox" type="checkbox" lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
		<?php if(!$type): foreach($mendianlist as $md): ?>
			<input class="checkbox" type="checkbox" lay-skin="primary" title="<?php echo $md['name']; ?>" name="{{Edit.id}}_mendian['md_<?php echo $md['id']; ?>']" ng-model="Edit.params.mendian['md_<?php echo $md['id']; ?>']"/>
			<?php endforeach; ?>
		<?php endif; ?>
	</div>
</div>
<!--<div class="layui-form-item">
	<div class="layui-form-label">显示类型</div>
	<div class="layui-input-inline" style="width:500px">
		<input class="radio" type="radio"  title="全部" name="{{Edit.id}}_mendian_sort" value="sort" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
		<input class="radio" type="radio"  title="按距离" name="{{Edit.id}}_mendian_sort" value="juli" ng-model="Edit.params.mendian_sort" ng-change="getMendianSort(Edit.id)"/>
	</div>
</div>
<div class="layui-form-item" ng-show="Edit.params.mendian_sort == 'juli'">
	<div class="layui-form-label">显示范围</div>
	<div class="slider" min="1" max="100" ng-model="Edit.params.mendian_distance"></div>
	<span class="slider-span"><input ng-model="Edit.params.mendian_distance"/> km</span>
</div>-->
<hr>
<?php endif; ?>
<?php endif; ?>
	<div class="layui-form-item" ng-show="!Edit.params.quanxian['all']">
		<div class="layui-form-label">显示用户</div>
		<div class="layui-input-inline">
				<input class="layui-input" ng-model="Edit.params.showmids"/>
		</div>
		<div class="layui-form-mid layui-word-aux">填写用户ID，多个用英文标点逗号(,)分割
	</div>
	<?php else: ?>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有平台" name="{{Edit.id}}_platform['all']" ng-model="Edit.params.platform['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有人" name="{{Edit.id}}_quanxian['all']" ng-model="Edit.params.quanxian['all']"/>
		<input class="checkbox" type="hidden" checked='true' lay-skin="primary" title="所有门店" name="{{Edit.id}}_mendian['all']" ng-model="Edit.params.mendian['all']"/>
	<?php endif; ?>
</div></script>
	<script type="text/ng-template" id="show-form-log.html"><div class="dsn-mod dsn-form-log-warp" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'background-color':Item.params.bgcolor,'border-radius':Item.params.borderradius+'px','margin':Item.params.margin_y+'px '+Item.params.margin_x+'px','padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">
	<div class="dp-form-log" ng-style="{}">
		<div class="flex head">
			<div class="left">{{Item.params.title}}</div>
			<div class="right">全部xx条<img src="/static/img/arrowright.png" style="width:16px;height:16px"/></div>
		</div>
		<div class="text">
			<div class="title">昵称xx 填写了{{Item.data.name}}</div>
			<div>2020-11-11 10:00</div>
		</div>
	</div>
</div></script>

	<?php if(getcustom('car_hailing')): ?>
	<script type="text/ng-template" id="show-carhailing.html"><div class="dsn-mod dsn-carhailing" ng-class="{'dsn-mod-select':Item.id == focus}" ng-style="{'color':Item.params.color,'margin':Item.params.margin_y+'px '+Item.params.margin_x+'px 0'}">	<div style="height:200px;line-height:200px; text-align: center; color: #999; font-size: 16px;" ng-style="{'background-color':Item.params.bgcolor,'padding':Item.params.padding_y+'px '+Item.params.padding_x+'px'}">约车列表内容区域</div></div></script>
	<?php endif; ?>
</div>

<script>var ngisfinish = 0;</script>
<script type="text/javascript" src="/static/admin/layui/layui.all.js?v=20210226"></script>
<script type="text/javascript" src="/static/admin/layui/lay/modules/flow.js?v=1"></script>
<script type="text/javascript" src="/static/admin/layui/lay/modules/formSelects-v4.js"></script>
<script type="text/javascript" src="/static/admin/js/jquery-ui.min.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/ueditor/ueditor.js?v=20220707"></script>
<script type="text/javascript" src="/static/admin/ueditor/135editor.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/webuploader/webuploader.js?v=2024"></script>
<script type="text/javascript" src="/static/admin/js/qrcode.min.js?v=20200228"></script>
<script type="text/javascript" src="/static/admin/js/dianda.js?v=2022"></script>
<script type="text/javascript" src="/static/admin/js/inputTags.js?v=2026"></script>

<div id="NewsToolBox"></div>
<script type="text/javascript">
		// 解释文字浮层展示
		$('.layui-text-popover').mouseenter(function(){
			let pageHeight = $(window).height() + $(document).scrollTop();
			let bottom = pageHeight - $(this).offset().top
			let topNum = ($(this).offset().top - $(document).scrollTop()).toFixed(2);
			let Height = $(this).find('.layui-textpopover-div').outerHeight();
			$(this).find('.layui-textpopover-div').show()
			let that = this;
			setTimeout(function(){
				if(topNum < (Height/2-15)){
					$(that).find('.layui-textpopover-div').css({'top':-topNum+10+'px','opacity':1,'transition':'opacity .3s'})	
				}else if(bottom < (Height/2-15)){
					$(that).find('.layui-textpopover-div').css({'top': bottom-Height-10 +'px','opacity':1,'transition':'opacity .3s'})	
				}else{
					$(that).find('.layui-textpopover-div').css({'top':-(Height/2-15)+'px','opacity':1,'transition':'opacity .3s'})	
				}
			},100)
		}) 
		$('.layui-text-popover').mouseleave(function(){
			$(this).find('.layui-textpopover-div').css({'opacity':0})	
			$(this).find('.layui-textpopover-div').hide()
		}) 
		$('.layui-textpopover-div').mouseenter(function(){
			$(this).find('.layui-textpopover-div').show()
		})
		$('.layui-textpopover-div').mouseleave(function(){
			$(this).find('.layui-textpopover-div').css({'opacity':0})
			$(this).find('.layui-textpopover-div').hide()
		})
		// 图片浮层展示 示例
		$('.layui-popover').mouseenter(function(){
			let pageHeight = $(window).height() + $(document).scrollTop();
			let bottom = pageHeight - $(this).offset().top
			let topNum = ($(this).offset().top - $(document).scrollTop()).toFixed(2);
			let Height = $(this).find('.layui-popover-div').outerHeight();
			$(this).find('.layui-popover-div').show()
			let that = this;
			setTimeout(function(){
				if(topNum < (Height/2-15)){
					$(that).find('.layui-popover-div').css({'top':-topNum+10+'px','opacity':1,'transition':'opacity .3s'})	
				}else if(bottom < (Height/2-15)){
					$(that).find('.layui-popover-div').css({'top': bottom-Height-10 +'px','opacity':1,'transition':'opacity .3s'})	
				}else{
					$(that).find('.layui-popover-div').css({'top':-(Height/2-15)+'px','opacity':1,'transition':'opacity .3s'})	
				}
			},100)
		}) 
		$('.layui-popover').mouseleave(function(){
			$(this).find('.layui-popover-div').css({'opacity':0})	
			$(this).find('.layui-popover-div').hide()
		}) 
    function copyText(text) {
        var top = document.documentElement.scrollTop;
        var textarea = document.createElement("textarea"); //创建input对象
        var currentFocus = document.activeElement; //当前获得焦点的元素
        var toolBoxwrap = document.getElementById('NewsToolBox'); //将文本框插入到NewsToolBox这个之后
        toolBoxwrap.appendChild(textarea); //添加元素
        textarea.value = text;
        textarea.focus();
        document.documentElement.scrollTop = top;
        if (textarea.setSelectionRange) {
            textarea.setSelectionRange(0, textarea.value.length); //获取光标起始位置到结束位置
        } else {
            textarea.select();
        }
        try {
            var flag = document.execCommand("copy"); //执行复制
        } catch (eo) {
            var flag = false;
        }
        toolBoxwrap.removeChild(textarea); //删除元素
        currentFocus.focus();
        if(flag) layer.msg('复制成功');
        return flag;
    }
		// 查看链接
		function viewLink(path,url=''){
			var pagepath = path;
			if(!url){
				var url = "<?php echo m_url('"+pagepath+"'); ?>"; //拼接 H5 链接
			}
			<?php if(!in_array('mp',$platform)): ?>
				showwxqrcode(pagepath);
				return;
			<?php endif; ?>
			var html = '';
			html+='<div style="margin:20px">';
			html+='	<div style="width:100%;margin:10px 0" id="urlqr"></div>';
			<?php if(in_array('wx',$platform)): ?>
			html+='	<div style="width:100%;text-align:center"><button class="layui-btn layui-btn-sm layui-btn-primary" onclick="showwxqrcode(\''+pagepath+'\')">查看小程序码</button></div>';
			<?php endif; ?>
			html+='	<div style="line-height:25px;"><div><span style="width: 70px;display: inline-block;">链接地址：</span><button class="layui-btn layui-btn-xs layui-btn-primary" onclick="copyText(\''+url+'\')">复制</button></div><div>'+url+'</div></div>';
			html+='	<div style="height:50px;line-height:25px;"><div><span style="width: 70px;display: inline-block;">页面路径：</span><button style="box-sizing: border-box;" class="layui-btn layui-btn-xs layui-btn-primary" onclick="copyText(\'/'+pagepath+'\')">复制</button></div><div>/'+pagepath+'</div></div>';
			html+='</div>';
			layer.open({type:1,'title':'查看链接',area:['500px','430px'],shadeClose:true,'content':html})
			var qrcode = new QRCode('urlqr', {
					text: 'your content',
					width: 200,
					height: 200,
					colorDark : '#000000',
					colorLight : '#ffffff',
					correctLevel : QRCode.CorrectLevel.L
				});
				qrcode.clear();
				qrcode.makeCode(url);
		}
		// 查看小程序码
		function showwxqrcode(pagepath){
			var index = layer.load();
			$.post("<?php echo url('DesignerPage/getwxqrcode'); ?>",{path:pagepath},function(res){
				layer.close(index);
				if(res.status==0){
					layer.open({type:1,area:['300px','350px'],content:'<div style="margin:auto auto;text-align:center"><div style="color:red;width:280px;height:180px;margin-top:100px">'+res.msg+'</div><div style="height:25px;line-height:25px;">'+'/'+pagepath+'</div></div>',title:false,shadeClose:true})
				}else{
					layer.open({type:1,area:['300px','350px'],content:'<div style="margin:auto auto;text-align:center"><img src="'+res.url+'" style="margin-top:20px;max-width:280px;max-height:280px"/><div style="height:25px;line-height:25px;">'+'/'+pagepath+'</div></div>',title:false,shadeClose:true})
				}
			})
		}
</script>
<!-------使用js导出excel文件--------->
<script src="/static/admin/excel/excel.js?v=2024"></script>
<script src="/static/admin/excel/layui_exts/excel.js"></script>
<script>

    var excel = new Excel();
    var excel_name = '<?php echo $excel_name; ?>';
    excel.bind(function (data,title) {
        var excel_field = JSON.parse('<?php echo $excel_field; ?>');
        if(title && title!=undefined){
            //接口返回的title
            var excel_title = title;
        }else{
            //excel_field.php 配置的title
            var excel_title = JSON.parse('<?php echo $excel_title; ?>');
        }
        if(!excel_title || excel_title.length<=0){
            //上面两种都没有title,读取table表格cols中的title，同时filed也更新为table表格cols中的field
            excel_title = [];
            excel_field = [];
            var cols = tableIns.config.cols;
            cols.forEach(function (cols_item, cols_index) {
                console.log(cols_item);
                cols_item.forEach(function (cols_item2, cols_index2) {
                    console.log(cols_item2);
                    if(cols_item2.title){
                        excel_title.push(cols_item2.title)
                        excel_field.push(cols_item2.field)
                    }
                })
            })
        }
        // if(!excel_title || excel_title.length<=0){
        //     layer.msg('未设置标题');
        //     return;
        // }

        // 设置表格内容
        data.forEach(function (item, index) {
            var _data = [];
            excel_title.forEach(function (title, index2) {
                var field = excel_field[index2];
                if(item[field] && item[field]!=undefined){
                    //有filed 匹配field
                    var field_val = item[field];
                    //是整数 长度为10 字段名包含time 判定为时间戳
                    if(parseInt(field_val) == field_val && (field_val.toString()).length==10 && field.includes('time')){
                        field_val = date('Y-m-d H:i:s',field_val);
                    }
                }else{
                    //没有filed 根据顺序来
                    var field_val = item[index2];
                }
                _data.push(field_val);
            })
            data[index] = _data;
        });
        // 设置表头内容
        if(excel_title && excel_title.length>0){
            data.unshift(excel_title);
        }
        // 应用表格样式
        return this.withStyle(data);

    }, excel_name+layui.util.toDateString(Date.now(), '_yyyyMMdd_HHmmss'));

</script>
<script type="text/javascript" src="<?php echo PRE_URL; ?>/static/admin/js/bootstrap.min.js"></script>
<script type="text/javascript" src="<?php echo PRE_URL; ?>/static/admin/js/angular.min.js"></script>
<script type="text/javascript" src="<?php echo PRE_URL; ?>/static/admin/js/angular-ueditor.js?v=0329"></script>
<script type="text/javascript" src="<?php echo PRE_URL; ?>/static/admin/js/hhSwipe.js"></script>
<script type="text/javascript" src="<?php echo PRE_URL; ?>/static/admin/js/iconpicker.js"></script>
<script type="text/javascript" charset="utf-8" src="https://map.qq.com/api/js?v=2.exp&key=<?php echo $sysset_webinfo['map_key_qq']; ?>"></script>

<script>
$( "#editor-content" ).sortable({ stop:function(event,ui){
		var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
		var arr = [];
		$(".dsn-repeat").find(".dsn-parent").each(function(i, val) {
			arr[i] = val.id;
		});
		var newarr = [];
		angular.forEach(arr, function(aid) {
			angular.forEach($scope.Items, function(obj) {
				if (obj.id == aid) {
					newarr.push(obj);
					return false;
				}
			});
		});
		console.log(newarr)
		$scope.Items = newarr;
		$scope.$apply();
	}})
function deal_scope(id,content = ''){
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.addItem(id,content);
}
function clone(myObj) {
	if (typeof(myObj) != 'object' || myObj == null) return myObj;
	var newObj = new Object();
	for (var i in myObj) {
		newObj[i] = clone(myObj[i]);
	}
	return newObj;
}
function cloneArr(arr) {
	var newArr = [];
	$(arr).each(function(i, val) {
		newArr.push(clone(val));
	});
	return newArr;
}

function initswipe(jobj) {
	var bullets = jobj.next().get(0).getElementsByTagName('a');
	var banner = Swipe(jobj.get(0), {
		auto: 2000,
		continuous: true,
		disableScroll: false,
		callback: function(pos) {
			var i = bullets.length;
			if(isNaN(pos)){
				initswipe(jobj)
				return;
			}
			while (i--) {
				$(bullets[i]).css({'background-color':$(jobj.next()).attr('indicatorcolor'),'width':$(jobj.next()).attr('dotwidth')});
			}
			//console.log($(jobj.next()).attr('indicatorcolor'))
			//console.log($(jobj.next()).attr('indicatoractivecolor'))
			$(bullets[pos]).css({'background-color':$(jobj.next()).attr('indicatoractivecolor'),'width':$(jobj.next()).attr('dotactivewidth')});
			}
	})
}

function isUndefined(n) {
	return void 0 === n
}

var myModel = angular.module('FoxEditor', ['ng.ueditor']);
myModel.filter('price', function() {
    return function(text){
        return parseFloat(text).toString().split('.')[0];
    }
});
myModel.filter('price_dot', function() {
    return function(text){
        var pricearr = parseFloat(text).toString().split('.');
				if(pricearr[1]) return '.'+pricearr[1];
				else return '';
    }
});
myModel.controller('FoxController', ['$scope', function($scope) {
	$scope.navs = [
			<?php if(!$noshow_modules || !in_array('ModuleNotice',$noshow_modules)): ?>
			{id:'notice',name:'公告',params:{showimg:0,img:'<?php echo PRE_URL; ?>/static/imgsrc/hotdot3.png',showicon:1,icon:'<?php echo PRE_URL; ?>/static/imgsrc/notice2.png',color:'#666666',bgcolor:'#ffffff',scroll:3,fontsize:'14',padding_x:'5',padding_y:'7',margin_x:'0',margin_y:'0',borderradius:0,quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},'identity':{'all':true},mendian_sort:'sort'},
				data:[{id:'N001',title:'这里是第一条自定义公告的标题',hrefurl:''},{id:'N002',title:'这里是第二条自定义公告的标题',hrefurl:''}]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleBanner',$noshow_modules)): ?>
			{id:'banner',name:'轮播图',params:{shape:'',align:'center',bgcolor:'#ffffff',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',height:'200',borderradius:'0',dotSite:'8',indicatordots:'1',indicatorcolor:'#edeef0',indicatoractivecolor:'#3db51e',interval:5,previous_margin:0,next_margin:0,quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},'identity':{'all':true},mendian_sort:'sort'},
				 data:[
						 {id:'B0000000000001',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/banner-1.jpg',hrefurl:''},
						 {id:'B0000000000002',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/banner-2.jpg',hrefurl:''}
				 ]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleShop',$noshow_modules)): ?>
			{id:'shop',name:'店招',params:{style:'1',bgimg:'<?php echo PRE_URL; ?>/static/imgsrc/banner-1.jpg',logo:'1',name:'1',menu:'1',navcolor:'#ffffff',bid:'<?php echo $bid; ?>',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},
				 data:[
				 {id:'S001',text:'首页',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/shop-home.png',color:'#fff',hrefurl:''},
				 {id:'S002',text:'全部商品',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/shop-proall.png',color:'#fff',hrefurl:''},
				 {id:'S003',text:'促销商品',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/shop-procx.png',color:'#fff',hrefurl:''},
				 {id:'S004',text:'店铺公告',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/shop-notice.png',color:'#fff',hrefurl:''}]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleSearch',$noshow_modules)): ?>
			{id:'search',name:'搜索框',params:{placeholder:'输入关键字搜索您感兴趣的商品','color':'#666666','bgcolor':'#F6F6F6',borderradius:5,'bordercolor':'#FFFFFF',hrefurl:'/pages/shop/search<?php echo $bid==0 ? '' : '?bid='.$bid; ?>',hrefname:'基础功能>商品搜索',margin_x:'0',margin_y:'0',padding_x:'6',padding_y:'6',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort','openmore':false,'scan_code':false,bid:'<?php echo $bid; ?>'},
				data:[
						{id:'S001',title1:'列表1',title2:'输入搜索信息',hrefurl:''},
						{id:'S002',title1:'列表2',title2:'输入搜索信息',hrefurl:''},
						{id:'S003',title1:'列表3',title2:'输入搜索信息',hrefurl:''},
					]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModulePicture',$noshow_modules)): ?>
			{id:'picture',name:'单图',params:{bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',borderradius:'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},
				data:[{id:'P0000000000001',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/banner-1.jpg',hrefurl:'',option:'0'}]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModulePictures',$noshow_modules)): ?>
			{id:'pictures',name:'多图',params:{style:'2',bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},
				data:[
					{id:'PS000000000001',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-1.jpg',hrefurl:'',option:'0',gototype:'0'},
					{id:'PS000000000002',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-2.jpg',hrefurl:'',option:'0',gototype:'0'},
					{id:'PS000000000003',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-3.jpg',hrefurl:'',option:'0',gototype:'0'},
					{id:'PS000000000004',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-4.jpg',hrefurl:'',option:'0',gototype:'0'}
				]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleCube',$noshow_modules)): ?>
			{id: "cube",name: "图片魔方",params: {bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',layout: {},showIndex: 0,selection: {},currentPos: {},currentLayout: {isempty: 1},quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if(!$noshow_modules || !in_array('ModuleRichtext',$noshow_modules)): ?>
			{id:'richtext',name:'富文本',params:{bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'10',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},content:''},
			<?php endif; if(!$noshow_modules || !in_array('ModuleVideo',$noshow_modules)): ?>
			{id:'video',name:'视频',params:{bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',type:0,'pic':'','src':'http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort',autoplay:'0',loop:'0',muted:'0',controls:'1',fullscreen:'1',butposition:'center',objectfit:'contain',videoheight:'30'}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleTitle',$noshow_modules)): ?>
			{id:'title',name:'标题',params:{bgcolor:'#F6F6F6',title:'猜你喜欢',fontsize:'14',color:'#333',showicon:1,iconsize:'14',imgurl:'<?php echo PRE_URL; ?>/static/img/xihuan.png',linecolor:'#dddddd',margin_x:'0',margin_y:'0',padding_x:'30',padding_y:'5',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleDhlist',$noshow_modules)): ?>
			{id:'dhlist',name:'列表导航',params:{titlemarginleft:'8',bgcolor:'#ffffff',fontsize1:'16',fontsize2:'12',color1:'#333',color2:'#999',margin_x:'0',margin_y:'8',padding_x:'5',padding_y:'10',arrowshow:1,quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},
				data:[
					{id:'D001',title1:'列表1',title2:'备注信息',showicon:1,iconcolor:'#CB5858',iconsize:'16',imgurl:'<?php echo PRE_URL; ?>/static/img/xihuan.png'},
					{id:'D002',title1:'列表2',title2:'备注信息',showicon:1,iconcolor:'#CB5858',iconsize:'16',imgurl:'<?php echo PRE_URL; ?>/static/img/xihuan.png'}
				]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleText',$noshow_modules)): ?>
			{id:'text',name:'文本',params:{content:'文本内容',bgcolor:'#ffffff',fontsize:'14',lineheight:'20',letter_spacing:'0',bgpic:'',align:'left',color:'#000',margin_x:'0',margin_y:'0',padding_x:'5',padding_y:'5',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort',hrefurl:''}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleButton',$noshow_modules)): ?>
			{id:'button',name:'按钮',params:{bgcolor:'#ffffff',btntext:'按钮文字',btnbgcolor:'<?php echo t('color1'); ?>',btnbordercolor:'<?php echo t('color1'); ?>',btnfontsize:'14',btncolor:'#ffffff',btnwidth:'300',btnheight:'40',btnradius:'20',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'10',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},hrefurl:''},
			<?php endif; if(!$noshow_modules || !in_array('ModuleMenu',$noshow_modules)): ?>
			{id:'menu',name:'按钮导航',params:{num:'5',radius:'0',fontsize:'14',fontheight:'30',pernum:'10',bgcolor:'#ffffff',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'5',iconsize:'40',showicon:'1',showline:'0',showtitle:'0','title':'导航标题','titlesize':'16','titlecolor':'#333333','boxradius':'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},
					data:[
						{id:'F0000000000001',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-1.jpg',text:'按钮1',hrefurl:'',color:'#666666'},
						{id:'F0000000000002',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-2.jpg',text:'按钮2',hrefurl:'',color:'#666666'},
						{id:'F0000000000003',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-3.jpg',text:'按钮3',hrefurl:'',color:'#666666'},
						{id:'F0000000000004',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-4.jpg',text:'按钮4',hrefurl:'',color:'#666666'},
						{id:'F0000000000005',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-1.jpg',text:'按钮5',hrefurl:'',color:'#666666'}
					]
			},
			<?php endif; if(!$noshow_modules || !in_array('ModuleCover',$noshow_modules)): ?>
			{id:'cover',name:'悬浮按钮',params:{style:'1',text:'咨询',fontsize:'14',bgcolor:'rgba(51, 136, 255, 0.7)',color:'#ffffff',border:0,bordercolor:'rgba(255, 255, 255, 0.7)',top:80,left:80,width:'50',height:'50',radius:'25',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',hrefurl:'/pages/kefu/index<?php echo $bid==0 ? '' : '?bid='.$bid; ?>',hrefname:'功能>在线客服',pic:'<?php echo PRE_URL; ?>/static/img/zixun.png',picwidth:50,picheight:50,'alignstyle':'1',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleLine',$noshow_modules)): ?>
			{id:'line',name:'辅助线',params:{height:'2',style:'dashed',color:'#666666','bgcolor':'#F6F6F6',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'10',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleBlank',$noshow_modules)): ?>
			{id:'blank',name:'辅助空白',params:{height:'50',bgcolor:'#F6F6F6',margin_x:'0',margin_y:'0',quanxian:{'all':true},'platform':{'all':true}}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleTab',$noshow_modules)): ?>
			{id:'tab',name:'选项卡',params:{bgcolor:'#F7F7F8',bgcolor2:'#FFFFFF',selectindex:0,fontsize1:'14',color1:'#333',color2:'<?php echo t('color1'); ?>',arrowshow:'1',arrowcolor:'<?php echo t('color1'); ?>',borderradius:'0',fixedtop:'0',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[
				{id:'T0000000000001',name:'选项一',tabid:''},
				{id:'T0000000000002',name:'选项二',tabid:''},
				{id:'T0000000000003',name:'选项三',tabid:''}
			]},
			<?php endif; if(!$noshow_modules || !in_array('ModuleMap',$noshow_modules)): ?>
			{id:'map',name:'地图',params:{height:'300','bgcolor':'#F6F6F6',address:'天安门广场',longitude:'116.397827',latitude:'39.90374',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'}},
			<?php endif; if(!$noshow_modules || !in_array('ModuleHotspot',$noshow_modules)): ?>
			{id:'hotspot',name:'热区',params:{bgcolor:'#FFFFFF',margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/banner-1.jpg',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort',lookquanxian:{'all':true},tip:''},data:[
				{id:'H0000000000001',hrefurl:'',hrefname:'',left:'0',top:'0',width:'50',height:'50'}
			]},
			<?php endif; if(!$noshow_modules || !in_array('ModuleProduct',$noshow_modules)): if($auth_data=='all' || in_array('ShopProduct/*',$auth_data)): ?>
			{id:'product',name:'商城商品',params:{showbdistance:0,style:'2',bgcolor:'#ffffff',probgcolor:'#ffffff',showname:'1',showcart:'1',cartimg:'<?php echo PRE_URL; ?>/static/imgsrc/cart.svg',showprice:'1',showsales:'1',saleimg:'',showstock:'0',showbname:'0',showcoupon:'0',icback:'0',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',group:{'all':true},quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; ?>
			<?php endif; if($auth_data=='all' || in_array('CollageProduct/*',$auth_data)): ?>
			{id:'collage',name:'拼团商品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,shopstyle:1,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('CycleProduct/*',$auth_data)): ?>
		    {id:'cycle',name:'周期购商品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('KanjiaProduct/*',$auth_data)): ?>
			{id:'kanjia',name:'砍价商品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('SeckillProduct/*',$auth_data)): ?>
			{id:'seckill',name:'秒杀商品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showprice:'1',showsales:'1',showrange:'0',showtime:'0',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,shopstyle:1,showtitle:1,titlestyle:1,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('TuangouProduct/*',$auth_data)): ?>
			{id:'tuangou',name:'团购商品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showcart:'1',cartimg:'<?php echo PRE_URL; ?>/static/imgsrc/cart.svg',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('LuckyCollageProduct/*',$auth_data)): ?>
			{id:'luckycollage',name:'幸运拼团',params:{style:'2',bgcolor:'#ffffff',showname:'1',showcart:'1',cartimg:'<?php echo PRE_URL; ?>/static/imgsrc/cart.svg',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('Restaurant/*',$auth_data)): ?>
			{id:'restaurant_product',name:'餐饮菜品',params:{style:'2',bgcolor:'#ffffff',showname:'1',showcart:'0',showtype:'0',cartimg:'<?php echo PRE_URL; ?>/static/imgsrc/cart.svg',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($bid==0 && ($auth_data=='all' || in_array('ScoreshopProduct/*',$auth_data))): ?>
			{id:'scoreshop',name:'<?php echo t('积分'); ?>兑换',params:{style:'2',bgcolor:'#ffffff',showname:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('Coupon/*',$auth_data)): ?>
			{id:'coupon',name:'<?php echo t('优惠券'); ?>',params:{style:'1',titlecolor:'#fff',remarkcolor:'#e5e5e5',bgcolor:'#FFF',bgpic:'<?php echo PRE_URL; ?>/static/imgsrc/coupon1.png',couponfrom:'1',sortby:'sort',bid:'<?php echo $bid; ?>',shownum:6,margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'4',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if(!$noshow_modules || !in_array('ModuleArticle',$noshow_modules)): if($auth_data=='all' || in_array('Article/*',$auth_data)): ?>
			{id:'article',name:'文章列表',params:{style:'4',showpic:'1',articlefrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',shownum:6,showtime:'1',showreadcount:'1',margin_x:'0',margin_y:'0',padding_x:'5',padding_y:'5',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort',articlefrom:'1'},data:[]},
			<?php endif; ?>
			<?php endif; if($auth_data=='all' || in_array('Form/*',$auth_data)): ?>
			{id:'form',name:'表单',params:{style:'1',fontsize:'14',color:'#000000',showmuststar:true,inputbordercolor:'#eeeeee',inputbgcolor:'#ffffff','linecolor':'#ffffff',bgcolor:'#ffffff',btntext:'提 交',btnbgcolor:'<?php echo t('color1'); ?>',btnbordercolor:'<?php echo t('color1'); ?>',btnfontsize:'14',btncolor:'#ffffff',btnwidth:'300',btnheight:'40',btnradius:'20',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'10',hrefurl:'/pagesA/form/formlog',hrefname:'基础功能>提交记录','isquery':'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort','show_submember':false,'is_jingmo':'0'},data:[]},
			
			<?php endif; if(!$noshow_modules || !in_array('ModuleShortvideo',$noshow_modules)): if($auth_data=='all' || in_array('Shortvideo/*',$auth_data)): ?>
			{id:'shortvideo',name:'短视频',params:{bgcolor:'#ffffff',showlogo:'1',showviewnum:'1',showzannum:'1',productfrom:'1',bid:'',sortby:'sort',shownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',category:'',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; ?>
			<?php endif; if($bid==0 && in_array('wx',$platform) && ($auth_data=='all' || in_array('Live/*',$auth_data))): ?>
			{id:'liveroom',name:'直播列表',params:{titlecolor:'#333',bgcolor:'#F6F6F6',liveroomfrom:'1',sortby:'sort',shownum:12,margin_x:'0',margin_y:'0',padding_x:'6',padding_y:'6',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($bid==0 && ($auth_data=='all' || in_array('Business/*',$auth_data))): ?>
			{id:'business',name:'商家',params:{titlecolor:'#333',bgcolor:'#F6F6F6',businessfrom:'1',showpingfen:'1',showsales:'1',showaddress:'1',showjianjie:'0',showdistance:'0',showproduct:'0',showseckill:'0',showtuangou:'0',showkanjia:'0',showcollage:'0',showluckycollage:'0',distance:'30',sortby:'sort',shownum:6,margin_x:'0',margin_y:'0',padding_x:'0',padding_y:'0',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort','intotype':0,showcategroy:'0'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('YuyueList/*',$auth_data)): ?>
			{id:'yuyue',name:'预约服务',params:{style:'2',bgcolor:'#ffffff',showname:'1',showcart:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',showisopen:'0',showcat:'0',showfwtype:'0',showsellpoint:'0',showfuwu:'0',group:{'all':true},quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if($auth_data=='all' || in_array('KechengList/*',$auth_data)): ?>
			{id:'kecheng',name:'课程列表',params:{style:'2',bgcolor:'#F7F7F8',showpic:'1',showname:'1',showcart:'1',showprice:'1',showsales:'1',saleimg:'',productfrom:'1',bid:'<?php echo $bid; ?>',sortby:'sort',proshownum:6,margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',group:{'all':true},quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort',kctype:'all',chaptertype:'all'},data:[]},
			<?php endif; if(getcustom('car_hailing')): ?>
			{id:'carhailing',name:'约车列表',params:{bgcolor:'#F7F7F8',bid:'<?php echo $bid; ?>',cid:'','showdate':'1',sortby:'sort',margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',group:{'all':true},quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; if(!$noshow_modules || !in_array('ModuleWxad',$noshow_modules)): if(in_array('wx',$platform)): ?>
			{id:'wxad',name:'小程序广告',params:{adtype:'banner',unitid:'',bgcolor:'#ffffff',margin_x:'0',margin_y:'0',padding_x:'8',padding_y:'8',quanxian:{'all':true},'platform':{"all":false,"wx":true},'mendian':{'all':true},mendian_sort:'sort'},data:[]},
			<?php endif; ?>
			<?php endif; if(!$noshow_modules || !in_array('ModuleUserinfo',$noshow_modules)): ?>
			{id:'userinfo',name:'<?php echo t('会员'); ?>信息',params:{moneyshow:'1',scoreshow:'1',couponshow:'1',seticonshow:'1',cardshow:'0',membercodeshow:'0',levelshow:'1',levelclick:'1',ordershow:'1',commissionshow:'1',midshow:'0',bgimg:'<?php echo PRE_URL; ?>/static/imgsrc/userinfobg.png',style:'2',margin_x:'0',margin_y:'0',padding_x:'10',padding_y:'10',quanxian:{'all':true},'platform':{'all':true},'mendian':{'all':true},mendian_sort:'sort','seticonsize':'17','showinviteredpacket':'0',shopscoreshow:'0',dedamountshow:'0'}},
			<?php endif; ?>

	];
	<?php 
	if($bid==0){
		$sysset = db('admin_set')->field('name,logo')->where('aid',aid)->find();
	}else{
		$sysset = db('business')->field('name,logo')->where('id',$bid)->find();
	}
	 ?>

	$scope.pages = [];
	$scope.system = { name: "<?php echo $sysset['name']; ?>",logo: "<?php echo $sysset['logo']; ?>"};
	$scope.Items = <?php echo $pagedata; ?>; //初始数据
	if($scope.Items[0]){
		$scope.focus = $scope.Items[0].id;
	}
	$scope.contenttop = 0;
	$scope.contentleft = 0;
	$scope.hasCube = function(Item) {
		var has = false;
		var row = 0,col = 0;
		for(var i = row; i < 4; i++) {
			for(var j = col; j < 4; j++) {
				if(!isUndefined(Item.params.layout[i][j]) && !Item.params.layout[i][j].isempty) {
					has = true;
					break;
				}
			}
		}
		return has;
	}
	$scope.showSelection = function(Edit, row, col){
		Edit.params.currentPos = {row: row,col: col};
		Edit.params.selection = {};
		var maxrow = 4,maxcol = 4,end = false;
		for(var i = row; i <= 3; i++) {
			if(isUndefined(Edit.params.layout[i][col]) || !isUndefined(Edit.params.layout[i][col]) && !Edit.params.layout[i][col].isempty) {
				maxrow = i;
				end = true;
			}
			if (end) {break;}
		}
		end = false;
		for(var j = col; j <= 3; j++) {
			if(isUndefined(Edit.params.layout[row][j]) || !isUndefined(Edit.params.layout[row][j]) && !Edit.params.layout[row][j].isempty) {
				maxcol = j;
				end = true;
			}
			if(end) {break;}
		}
		var f = maxcol,n=-1,g = 1;
		for(var i = row; i < maxrow; i++) {
			var y = 1;
			Edit.params.selection[g] = {};
			for(var j = col; j < maxcol; j++) {
				if(f>j && (!isUndefined(Edit.params.layout[i][j]) && Edit.params.layout[i][j].isempty)) {
					Edit.params.selection[g][y] = {rows: g,cols: y};
					y++;
				}else if(f > j){
					f = j
				}
			}
			g++;
		}
		//console.log(Edit.params.selection)

		$(".layout-table li").removeClass("selected");
		//$scope.modalobj = $("#" + Edit.id + "-modal-cube-layout").modal({show: true});
		$scope.modalobj = layer.open({type:1,content:$("#" + Edit.id + "-modal-cube-layout"),area:['400px','400px'],title:'选择布局',shadeClose:true})
		$('#' + Edit.id + '-modal-cube-layout').find(".layout-table").unbind('mouseover').mouseover(function(a) {
			if ("LI" == a.target.tagName) {
				$(".layout-table li").removeClass("selected");
				var c = $(a.target).attr("data-rows"),d = $(a.target).attr("data-cols");
				$(".layout-table li").filter(function(a, e) {
					return $(e).attr("data-rows") <= c && $(e).attr("data-cols") <= d
				}).addClass("selected")
			}
		});
		return true;
	}
	$scope.selectLayout = function(Edit, currentRow, currentCol, rows, cols) {
		if (isUndefined(rows)) {rows = 0;}
		if (isUndefined(cols)) {cols = 0;}
		Edit.params.layout[currentRow][currentCol] = {
			cols: cols,
			rows: rows,
			isempty: false,
			imgurl: "",
			classname: "index-" + Edit.params.showIndex
		};
		for (var i = parseInt(currentRow); i < parseInt(currentRow) + parseInt(rows); i++) {
			for (var j = parseInt(currentCol); j < parseInt(currentCol) + parseInt(cols); j++) {
				if (currentRow != i || currentCol != j) {
					delete Edit.params.layout[i][j];
				}
			}
		}
		Edit.params.showIndex++;
		layer.close($scope.modalobj);

		var maxheight = 0;
		for(var i in Edit.params.layout){
			for(var j in Edit.params.layout[i]){
				var col = Edit.params.layout[i][j];
				if(!isUndefined(col['rows']) && !col['isempty'] && parseInt(i) + parseInt(col['rows']) > maxheight){
					maxheight = parseInt(i) + parseInt(col['rows']);
				}
			}
		}
		console.log(maxheight)
		Edit.params.maxheight = maxheight;


		$scope.changeItem(Edit, currentRow, currentCol);

		return true;
	}
	$scope.changeItem = function(Edit, row, col) {
		$("#cube-editor td").removeClass("current").filter(function(a, e) {
			return $(e).attr("x") == row && $(e).attr("y") == col
		}).addClass("current");
		$("#cube_thumb").attr("src", "");
		Edit.params.currentLayout = Edit.params.layout[row][col];
	}
	$scope.delCube = function(Edit, Cid, cols, rows) {
		if (Edit && Cid && cols && rows) {
			var len = Edit.params.layout.length;
			$.each(Edit.params.layout, function(row, a) {
				$.each(Edit.params.layout[row], function(col, b) {
					if (col != '$$hashKey') {
						if (b.classname == Edit.params.currentLayout.classname) {
							row = parseInt(row);
							col = parseInt(col);
							rows = parseInt(rows);
							cols = parseInt(cols);
							for (var i = row; i < row + rows; i++) {
								for (var j = col; j < col + cols; j++) {
									Edit.params.layout[i][j] = {
										cols: 1,
										rows: 1,
										isempty: true,
										imgurl: "",
										classname: ""
									};
								}
							}
						}
					}
				});
			});
		}
	}
	// 1.1 添加一条子级(good,picture,banner,dhlist,search)
	$scope.addItemChild = function(type, Mid) {
		if (type && Mid) {
			t = '';
			if (type == 'good') {
				t = 'G';
			} else if (type == 'picture') {
				t = 'P';
			} else if (type == 'pictures') {
				t = 'PS';
			} else if (type == 'banner') {
				t = 'B';
			} else if (type == 'dhlist') {
				t = 'D';
			} else if (type == 'menu') {
				t = 'M';
			} else if (type == 'spot') {
				t = 'H';
			} else if (type == 'tab') {
				t = 'T';
			} else if (type == 'search') {
				t = 'S';
			}
			var var_id = t + new Date().getTime() + parseInt(Math.random() * 1000000);
			var push = {
				banner: {
					id: var_id,
					imgurl: '<?php echo PRE_URL; ?>/static/imgsrc/banner-2.jpg',
					hrefurl: ''
				},
				picture: {
					id: var_id,
					imgurl: '<?php echo PRE_URL; ?>/static/imgsrc/banner-2.jpg',
					hrefurl: ''
				},
				pictures: {
					id: var_id,
					imgurl: '<?php echo PRE_URL; ?>/static/imgsrc/picture-1.jpg',
					hrefurl: '',
					gototype:'0'
				},
				good: {},
				dhlist: {id:var_id,title1:'列表名称',title2:'备注信息',showicon:1,icon:'fa fa-heart',iconcolor:'#333',iconsize:'16',imgurl:''},
				notice2: {id:var_id,title:'这里是一条自定义公告的标题',hrefurl:''},
				menu: {id:var_id,imgurl:'<?php echo PRE_URL; ?>/static/imgsrc/picture-1.jpg',text:'按钮文字',hrefurl:'',color:'#666666'},
				spot: {id:var_id,width:'50',height:'50',left:0,top:0,hrefurl:'',hrefname:''},
				tab: {id:var_id,name:'选项X',tabid:''},
				search: {id:var_id,title1:'列表名称',title2:'输入搜索信息'},
			};
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index) {
				if (m.id == Mid) {
					if(!m.data){
						m.data = [];
					}
					m.data.push(push[type]);
				}
			});
		}
	}

	// 1.1 删除一条子级
	$scope.delItemChild = function(Mid, Cid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(c, index2) {
					if (c.id == Cid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	//上移子级
	$scope.upItemChild = function(Mid, Cid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(c, index2) {
					if (c.id == Cid) {
						if(index2 == 0){
							layer.msg('已经到顶了');
							return;
						}
						m.data[index2] = m.data.splice(index2-1, 1, m.data[index2])[0];
					}
				});
			}
		});
	}

	$scope.iconImg = function(Mid){
			fileUploader.show(function(data){
				 var Items = $scope.Items;
				 angular.forEach(Items, function(m,index1) {
						 if(m.id==Mid){
								 m.params.icon = data['url'];
								 $("div[mid="+Mid+"]").mouseover();
						 }
				 });
			}, {type :'image',tabs:{selecticon:'active',upload: '',browser:''}});
	}
	$scope.selecticon = function(Mid,paramsName){
		iconpicker.show(function(data) {
			console.log(data)
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if(m.id == Mid){
					m.params[paramsName] = data;
					$("div[mid=" + Mid + "]").mouseover();
					$scope.$apply();
				}
			});
		})
	}
	$scope.selecticon2 = function(Mid,Cid,paramsName){
		iconpicker.show(function(data) {
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if(m.id == Mid){
					angular.forEach(m.data, function(c, index2) {
						if(c.id == Cid) {
							c[paramsName] = data;
							$("div[mid=" + Mid + "]").mouseover();
							$scope.$apply();
						}
					});
				}
			});
		})
	}
	// 1.1 上传图片
	$scope.uploadImg = function(Mid,paramsName) {
		fileUploader.show(function(data) {
			if(Mid == 'M0000000000000' || Mid == 'M0000000000001' || Mid == 'M0000000000002'){
				$scope.pages[0].params[paramsName] = data['url'];
				$scope.$apply();
				return;
			}
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if(m.id == Mid){
					m.params[paramsName] = data['url'];
					$("div[mid=" + Mid + "]").mouseover();
				}
			});
		}, {type: 'image'});
	}
	$scope.uploadImgChild = function(Mid, Cid, Type) {
		fileUploader.show(function(data) {
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if(m.id == Mid){
					if(Type == 'cube'){
						m.params.currentLayout.imgurl = data['url'];
						$("div[mid=" + Mid + "]").mouseover();
					}else{
						angular.forEach(m.data, function(c, index2) {
							if(c.id == Cid) {
								c.imgurl = data['url'];
								$("div[mid=" + Mid + "]").mouseover();
							}
						});
					}
				}
			});
		}, {type: 'image'});
	}

	$scope.chooseUrlCube = function(Mid, Cid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m) {
			if(m.id == Mid) {
				m.params.currentLayout.url = 'http://www.qq.com';
				$("div[mid=" + Mid + "]").mouseover();
			}
		});
	}

	$scope.designerTab = function(Mid, Cid,tabname) {

		var designerTabLayer = layer.open({type:2,shadeClose: false,area: ['94%', '94%'],'title': '设置选项卡内容',content:"<?php echo url('DesignerPage/designer_tab'); ?>&tabid="+Mid+"&tabindexid="+Cid+'&tabname='+tabname,btn:['确定','取消'],yes:function(index, layero){
			var iframeWin = window[layero.find('iframe')[0]['name']]; //得到iframe页的窗口对象
			var tabpagedata = iframeWin.geteditordata();
			layer.close(designerTabLayer);
			var index = layer.load();
			$.post("<?php echo url('DesignerPage/designer_tab_save'); ?>",{tabid:Mid,tabindexid:Cid,tabpagedata:tabpagedata},function(data){
				layer.close(index);
			})
		}})
	}
	//地图 选择坐标
	$scope.choosezuobiao = function(Mid,address,jd,wd){
		var choosezblayer = layer.open({type:2,shadeClose: true,area: ['800px', '560px'],'title': '选择坐标',content: "<?php echo url('DesignerPage/choosezuobiao'); ?>/Mid/"+Mid+'&address='+(address?address:'')+'&jd='+(jd?jd:'')+'&wd='+(wd?wd:''),btn:['确定','取消'],yes:function(index, layero){
			var longitude = layero.find('iframe').contents().find('#mapjd').val();
			var latitude = layero.find('iframe').contents().find('#mapwd').val();
			angular.forEach($scope.Items, function(m, index1) {
				if(m.id == Mid){
					m.params.longitude = longitude;
					m.params.latitude = latitude;
					var center = new qq.maps.LatLng(latitude,longitude);
					var map = new qq.maps.Map(document.getElementById("showmp_"+Mid), {
						center: center,      // 地图的中心地理坐标。
						zoom:15              // 地图的中心地理坐标。
					});
					var marker = new qq.maps.Marker({ position:center, map: map});

					$("div[mid=" + Mid + "]").mouseover();
				}
			});
			layer.close(choosezblayer);
		}});
	}
	// 1.1 选择链接
	$scope.chooseUrl = function(Mid, Cid) {
		layer.open({type:2,shadeClose: true,area: ['1100px', '650px'],'title': '选择链接',content: "<?php echo url('DesignerPage/chooseurl'); ?>/fromdsn/1/args/"+Mid+','+Cid})
	}
	$scope.chooseLink = function(urlname,url,args) {
		var argsArr = args.split(',');
		var Mid = argsArr[0];
		var Cid = argsArr[1];
		if (url && Mid && Cid){
			if(Mid == 'M0000000000000' || Mid == 'M0000000000001' || Mid == 'M0000000000002'){
				if(Cid == -2){
					$scope.pages[0].params['hrefurl2'] = url;
				}else{
					$scope.pages[0].params['hrefurl'] = url;
				}
				$scope.$apply();
				return;
			}
			angular.forEach($scope.Items, function(m, index1) {
				if(m.id == Mid){
					if(m.temp == 'cube'){
						m.params.currentLayout.hrefurl = url;
						m.params.currentLayout.hrefname = urlname;
						$("div[mid=" + Mid + "]").mouseover();
					}else{
						if(Cid == -1){
							m.params.hrefurl = url;
							m.params.hrefname = urlname
						}else if(Cid == -2){
							m.params.hrefurl2 = url;
							m.params.hrefname2 = urlname
						}else{
							angular.forEach(m.data, function(c, index2) {
								if(c.id == Cid) {
									c.hrefurl = url;
									console.log(c.hrefurl)
									c.hrefname = urlname
								}
							});
						}
					}
				}
			});
			layer.closeAll();
		}
	}
	$scope.toChooseVideoList = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择视频',content:"<?php echo url('VideoList/choosevideolist'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.temp = {notcie: []};
	//商城商品
	$scope.getgoods = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var category = m.params.category
				var category2 = m.params.category2
				var group = m.params.group
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				var icback   = m.params.icback || 0
				var categoryseltype = m.params.categoryseltype || 0
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectproduct",
					data: {
						bid: bid,
						cid: category,
						cid2: category2,
						giddata: group,
						sortby: sortby,
						proshownum: proshownum,
						icback:icback,
						categoryseltype: categoryseltype
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales,
								merchant_name: data[i].merchant_name? data[i].merchant_name:'',
								main_business: data[i].main_business?data[i].main_business:'',

								brand: data[i].brand?data[i].brand:'',
								barcode: data[i].barcode?data[i].barcode:'',
								ggname: data[i].ggname?data[i].ggname:'',
								unit: data[i].unit?data[i].unit:'',
								ggstock: data[i].ggstock?data[i].ggstock:0,
								valid_time: data[i].valid_time?data[i].valid_time:'',
								remark: data[i].remark?data[i].remark:'',

							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addGood = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['1000px', '560px'],'title':'选择商品',content:"<?php echo url('ShopProduct/chooseproduct'); ?>/showallbusiness/true/args/"+action+','+Mid+','+Gid});
	}
	$scope.delGood = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushGood = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.sell_price = prodata.sell_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						sell_price: prodata.sell_price,
						sales: prodata.sales
					});
				}
			}
		});
	}
	//餐饮商品
	$scope.getRestaurantGoods = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				console.log(bid)
				var category = m.params.category
				var group = m.params.group
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectRestaurantproduct",
					data: {
						bid: bid,
						cid: category,
						giddata: group,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询菜品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addRestaurantGood = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择菜品',content:"<?php echo url('RestaurantProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delRestaurantGood = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	//拼团商品
	$scope.getcollage = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var category = m.params.category
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectcollage",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales,
								teamnum: data[i].teamnum
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addcollage = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('CollageProduct/chooseproduct'); ?>/showallbusiness/true/args/"+action+','+Mid+','+Gid});
	}
	$scope.delcollage = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushcollage = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.sell_price = prodata.sell_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						sell_price: prodata.sell_price,
						sales: prodata.sales
					});
				}
			}
		});
	}

	//周期购
	$scope.getcycle = function(Mid) {
			angular.forEach($scope.Items, function(m, index1) {
				if (m.id == Mid) {
					var bid = m.params.bid
					var category = m.params.category
					var sortby = m.params.sortby
					var proshownum = m.params.proshownum
					$.ajax({
						type: 'post',
						dataType: 'json',
						url: "<?php echo url('DesignerPage/api'); ?>/op/selectcycle",
						data: {
							bid: bid,
							cid: category,
							sortby: sortby,
							proshownum: proshownum
						},
						success: function(data) {
							m.data = [];
							angular.forEach(data, function(d, i) {
								var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
								// 执行添加
								m.data.push({
									id: Gid,
									pic: data[i].pic,
									proid: data[i].id,
									name: data[i].name,
									market_price: data[i].market_price,
									sell_price: data[i].sell_price,
									sales: data[i].sales,
									pspl: data[i].pspl,
								});
							});
							$("div[mid=" + Mid + "]").mouseover();
						},
						error: function() {
							layer.msg('查询商品信息失败！请刷新页面。');
						}
					});
				}
			});
		}
	$scope.addcycle = function(action, Mid, Gid) {
			layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('CycleProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
		}
	$scope.delcycle = function(Mid, Gid) {
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if (m.id == Mid) {
					angular.forEach(m.data, function(g, index2) {
						if (g.id == Gid) {
							m.data.splice(index2, 1);
						}
					});
				}
			});
		}
	$scope.pushcycle = function(prodata,args){
			var argsArr = args.split(',');
			var action = argsArr[0];
			var Mid = argsArr[1];
			var oldGid = argsArr[2];
			angular.forEach($scope.Items, function(m, index1) {
				if(m.id == Mid){
					if(action == 'replace' && oldGid){
						// 执行替换
						angular.forEach(m.data, function(r, index3){
							if(r.id == oldGid){
								var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
								r.id = Gid;
								r.pic = prodata.pic;
								r.proid = prodata.id;
								r.name = prodata.name;
								r.market_price = prodata.market_price;
								r.sell_price = prodata.sell_price;
								r.sales = prodata.sales;
								r.pspl = prodata.pspl;
							}
						});
					}else if(!action){
						var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
						// 执行添加
						m.data.push({
							id: Gid,
							pic: prodata.pic,
							proid: prodata.id,
							name: prodata.name,
							market_price: prodata.market_price,
							sell_price: prodata.sell_price,
							sales: prodata.sales,
							pspl: prodata.pspl,
						});
					}
				}
			});
		}
	//幸运拼团商品
	$scope.getluckycollage = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var category = m.params.category
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectluckycollage",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales,
								teamnum: data[i].teamnum,
								money:data[i].money,
								gua_num:data[i].gua_num
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addluckycollage = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('LuckyCollageProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delluckycollage = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushluckycollage = function(prodata,args){
		//console.log(prodata);
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.sell_price = prodata.sell_price;
							r.sales = prodata.sales;
							r.teamnum = prodata.teamnum;
							r.gua_num=prodata.gua_num;
							r.money=prodata.money
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						sell_price: prodata.sell_price,
						sales: prodata.sales,
						teamnum:prodata.teamnum,
						gua_num:prodata.gua_num,
						money:prodata.money,
					});
				}
			}
		});
	}

	//砍价商品
	$scope.getkanjia = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectkanjia",
					data: {
						bid: bid,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								min_price: data[i].min_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addkanjia = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('KanjiaProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delkanjia = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushkanjia = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.min_price = prodata.min_price;
							r.sell_price = prodata.sell_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						min_price: prodata.min_price,
						sell_price: prodata.sell_price,
						sales: prodata.sales
					});
				}
			}
		});
	}
	//秒杀商品
	$scope.getseckill = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				var showrange = m.params.showrange
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectseckill",
					data: {
						bid: bid,
						sortby: sortby,
						proshownum: proshownum,
						showrange:showrange
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								sales: data[i].sales
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addseckill = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('SeckillProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delseckill = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushseckill = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.sell_price = prodata.sell_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						sell_price: prodata.sell_price,
						sales: prodata.sales
					});
				}
			}
		});
	}

	//积分兑换商品
	$scope.getscoreshop = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var category = m.params.category
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectscoreshop",
					data: {
						cid: category,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								sell_price: data[i].sell_price,
								money_price: data[i].money_price,
								score_price: data[i].score_price,
								sales: data[i].sales
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addscoreshop = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('ScoreshopProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delscoreshop = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushscoreshop = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.sell_price = prodata.sell_price;
							r.score_price = prodata.score_price;
							r.money_price = prodata.money_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						sell_price: prodata.sell_price,
						score_price: prodata.score_price,
						money_price: prodata.money_price,
						sales: prodata.sales
					});
				}
			}
		});
	}

	//团购商品
	$scope.gettuangou = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				console.log(bid)
				var category = m.params.category
				var group = m.params.group
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selecttuangou",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						proshownum: proshownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								sell_price: data[i].sell_price,
								min_price: data[i].min_price,
								sales: data[i].sales
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addTuangou = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('TuangouProduct/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delTuangou = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushTuangou = function(prodata,args){
		console.log(prodata)
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.sell_price = prodata.sell_price;
							r.min_price = prodata.min_price;
							r.sales = prodata.sales;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						sell_price: prodata.sell_price,
						min_price: prodata.min_price,
						sales: prodata.sales
					});
				}
			}
		});
	}
	//课程商品
	$scope.getKecheng = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				console.log(bid)
				var category = m.params.category
				var sortby = m.params.sortby
				var proshownum = m.params.proshownum
				var kctype = m.params.kctype
				var chaptertype = m.params.chaptertype
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectkecheng",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						proshownum: proshownum,
						kctype:kctype,
						chaptertype:chaptertype
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								proid: data[i].id,
								name: data[i].name,
								market_price: data[i].market_price,
								price: data[i].price,
								join_num: data[i].join_num,
								count: data[i].count,
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addKecheng = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择课程',content:"<?php echo url('KechengList/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delKecheng = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushKecheng = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = prodata.pic;
							r.proid = prodata.id;
							r.name = prodata.name;
							r.market_price = prodata.market_price;
							r.price = prodata.price;
							r.join_num = prodata.join_num;
							r.count = prodata.count;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: prodata.pic,
						proid: prodata.id,
						name: prodata.name,
						market_price: prodata.market_price,
						price: prodata.price,
						join_num: prodata.join_num,
						count: prodata.count
					});
				}
			}
		});
	}


		//zhaopin
		$scope.getZhaopin = function(Mid) {
			angular.forEach($scope.Items, function(m, index1) {
				if (m.id == Mid) {
					var bid = m.params.bid
					console.log('--------------ddddd------------------------')
					console.log(m.data)
					console.log('---------------dddd-----------------------')
					var sortby = m.params.sortby
					var shownum = m.params.shownum
					$.ajax({
						type: 'post',
						dataType: 'json',
						url: "<?php echo url('DesignerPage/api'); ?>/op/selectzhaopin",
						data: {
							bid: bid,
							sortby: sortby,
							shownum: shownum
						},
						success: function(data) {

							console.log('--------------------------------------')
							console.log(data)
							console.log('--------------------------------------')
							m.data = [];
							angular.forEach(data, function(d, i) {
								var Gid = 'Z' + new Date().getTime() + parseInt(Math.random() * 1000000);
								// 执行添加
								m.data.push({
									id: Gid,
									thumb: data[i].thumb,
									proid: data[i].id,
									title: data[i].title,
									area: data[i].area,
									salary: data[i].salary,
									num: data[i].num,
								});
							});
							$("div[mid=" + Mid + "]").mouseover();
						},
						error: function() {
							layer.msg('查询信息失败！请刷新页面。');
						}
					});
				}
			});
		}
		$scope.addZhaopin = function(action, Mid, Gid) {
			layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择招聘',content:"<?php echo url('Zhaopin/choosezhaopin'); ?>/args/"+action+','+Mid+','+Gid});
		}
		$scope.delZhaopin = function(Mid, Gid) {
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if (m.id == Mid) {
					angular.forEach(m.data, function(g, index2) {
						if (g.id == Gid) {
							m.data.splice(index2, 1);
						}
					});
				}
			});
		}
		$scope.pushZhaopin = function(prodata,args){
			var argsArr = args.split(',');
			var action = argsArr[0];
			var Mid = argsArr[1];
			var oldGid = argsArr[2];
			angular.forEach($scope.Items, function(m, index1) {
				if(m.id == Mid){
					if(action == 'replace' && oldGid){
						// 执行替换
						angular.forEach(m.data, function(r, index3){
							if(r.id == oldGid){
								var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
								r.id = Gid;
								r.thumb = prodata.thumb;
								r.proid = prodata.id;
								r.title = prodata.title;
								r.salary = prodata.salary;
								r.area = prodata.area
								r.count = prodata.count;
							}
						});
					}else if(!action){
						var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
						// 执行添加
						m.data.push({
							id: Gid,
							thumb: prodata.thumb,
							proid: prodata.id,
							title: prodata.title,
							salary: prodata.salary,
							area: prodata.area,
							num: prodata.num
						});
					}
				}
			});
		}
		//zhaopin end

		//qiuzhi
		$scope.getQiuzhi = function(Mid) {
			angular.forEach($scope.Items, function(m, index1) {
				if (m.id == Mid) {
					var bid = m.params.bid
					console.log(bid)
					var sortby = m.params.sortby
					var shownum = m.params.shownum
					$.ajax({
						type: 'post',
						dataType: 'json',
						url: "<?php echo url('DesignerPage/api'); ?>/op/selectqiuzhi",
						data: {
							bid: bid,
							sortby: sortby,
							shownum: shownum
						},
						success: function(data) {
							m.data = [];
							angular.forEach(data, function(d, i) {
								var Gid = 'Q' + new Date().getTime() + parseInt(Math.random() * 1000000);
								// 执行添加
								m.data.push({
									id: Gid,
									thumb: data[i].thumb,
									proid: data[i].id,
									title: data[i].title,
									name: data[i].name,
									cnames: data[i].names,
									age: data[i].age,
									sex: data[i].sex,
									has_job: data[i].has_job,
									area: data[i].area,
									salary: data[i].salary,
									secret_type:data[i].secret_type,
									mohu:data[i].mohu
								});
							});
							$("div[mid=" + Mid + "]").mouseover();
						},
						error: function() {
							layer.msg('查询信息失败！请刷新页面。');
						}
					});
				}
			});
		}
		$scope.addQiuzhi = function(action, Mid, Gid) {
			layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择求职',content:"<?php echo url('ZhaopinQiuzhi/chooseqiuzhi'); ?>/args/"+action+','+Mid+','+Gid});
		}
		$scope.delQiuzhi = function(Mid, Gid) {
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1) {
				if (m.id == Mid) {
					angular.forEach(m.data, function(g, index2) {
						if (g.id == Gid) {
							m.data.splice(index2, 1);
						}
					});
				}
			});
		}
		$scope.pushQiuzhi = function(prodata,args){
			var argsArr = args.split(',');
			var action = argsArr[0];
			var Mid = argsArr[1];
			var oldGid = argsArr[2];
			angular.forEach($scope.Items, function(m, index1) {
				if(m.id == Mid){
					if(action == 'replace' && oldGid){
						// 执行替换
						angular.forEach(m.data, function(r, index3){
							if(r.id == oldGid){
								var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
								r.id = Gid;
								r.thumb = prodata.thumb;
								r.proid = prodata.id;
								r.title = prodata.title;
								r.name = prodata.name;
								r.cnames = prodata.cnames;
								r.age = prodata.age;
								r.sex = prodata.sex;
								r.has_job = prodata.has_job;
								r.salary = prodata.salary;
								r.area = prodata.area;
								r.secret_type = prodata.secret_type;
								r.mohu = prodata.mohu;
							}
						});
					}else if(!action){
						var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
						// 执行添加
						m.data.push({
							id: Gid,
							thumb: prodata.thumb,
							proid: prodata.id,
							name: prodata.name,
							cnames: prodata.cnames,
							title: prodata.title,
							age:prodata.age,
							sex:prodata.sex,
							has_job:prodata.has_job,
							salary: prodata.salary,
							area: prodata.area,
							secret_type:prodata.secret_type,
							mohu:prodata.mohu
						});
					}
				}
			});
		}
		//zhaopin end

	//商家
	$scope.getbusiness = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var category = m.params.category
				var sortby = m.params.sortby
				var shownum = m.params.shownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectbusiness",
					data: {
						cid: category,
						sortby: sortby,
						shownum: shownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								logo: data[i].logo,
								bid: data[i].id,
								name: data[i].name,
								address: data[i].address,
								sales: data[i].sales,
								content: data[i].content,
								comment_score: data[i].comment_score,
								commentscore: Math.floor(data[i].comment_score),
								prolist: data[i].prolist,
								catname: data[i].catname
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询商品信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addbusiness = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择商品',content:"<?php echo url('Business/choosebusiness'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delbusiness = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushbusiness = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.logo = prodata.logo;
							r.bid = prodata.id;
							r.name = prodata.name;
							r.comment_score = prodata.comment_score;
							r.commentscore = Math.floor(prodata.comment_score);
							r.address = prodata.address;
							r.sales = prodata.sales;
							r.content = prodata.content;
							r.prolist = prodata.prolist;
							r.catname = prodata.catname;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						logo: prodata.logo,
						bid: prodata.id,
						name: prodata.name,
						comment_score: prodata.comment_score,
						commentscore: Math.floor(prodata.comment_score),
						address: prodata.address,
						sales: prodata.sales,
						content: prodata.content,
						prolist: prodata.prolist,
						catname:prodata.catname
					});
				}
			}
		});
	}
	//短视频分类
	$scope.getshortvideocategory = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var categoryseltype = m.params.categoryseltype?parseInt(m.params.categoryseltype):0;
				var bid 	 = categoryseltype==1?m.params.bidmore:m.params.bid;
				if(categoryseltype == 0){
					$.ajax({
						type: 'post',
						dataType: 'json',
						url: "<?php echo url('DesignerPage/getCategory'); ?>",
						data: {
							bid: bid,
						},
						success: function(data) {
							var data = data.data;
							var options = '<option value="">全部分类</option>';  
					        for (var i = 0; i < data.length; i++) {  
					            options += '<option value="' + data[i].id + '">' + data[i].name + '</option>';  
					            if (data[i].child) {  
					                for (var j = 0; j < data[i].child.length; j++) {  
					                    options += '<option value="' + data[i].child[j].id + '">&nbsp;&nbsp;&nbsp;' + data[i].child[j].name + '</option>';  
					                }  
					            }  
					        }  
					        $("select.layui-input").each(function() {  
						        if ($(this).attr("ng-model") == "Edit.params.category") {  
						            $(this).html(options);  
						        }  
						    });  
						    
						},
						error: function() {
							layer.msg('查询信息失败！请刷新页面。');
						}
					});
				}
			
			}
		});
	}
	//短视频
	$scope.getshortvideo = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var cid = m.params.category
				var sortby = m.params.sortby
				var shownum = m.params.shownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectshortvideo",
					data: {
						bid: bid,
						cid: cid,
						sortby: sortby,
						shownum: shownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								videoId: data[i].videoId,
								logo: data[i].logo,
								name: data[i].name,
								description: data[i].description,
								coverimg: data[i].coverimg,
								view_num: data[i].view_num,
								zan_num: data[i].zan_num
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addshortvideo = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择短视频',content:"<?php echo url('Shortvideo/choosevideo'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delshortvideo = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushshortvideo = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.videoId = prodata.id;
							r.logo = prodata.logo;
							r.name = prodata.name;
							r.description = prodata.description;
							r.coverimg = prodata.coverimg;
							r.view_num = prodata.view_num;
							r.zan_num = prodata.zan_num;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						videoId: prodata.id,
						logo: prodata.logo,
						name: prodata.name,
						description: prodata.description,
						coverimg: prodata.coverimg,
						view_num: prodata.view_num,
						zan_num: prodata.zan_num
					});
				}
			}
		});
	}
	//直播间
	$scope.getliveroom = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var sortby = m.params.sortby
				var shownum = m.params.shownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectliveroom",
					data: {
						sortby: sortby,
						shownum: shownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								roomId: data[i].roomId,
								bid: data[i].bid,
								name: data[i].name,
								coverImg: data[i].coverImg,
								shareImg: data[i].shareImg,
								anchorName: data[i].anchorName,
								startTime: data[i].startTime,
								endTime: data[i].endTime,
								showtime: data[i].showtime,
								status: data[i].status
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addliveroom = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择直播间',content:"<?php echo url('Live/chooseliveroom'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delliveroom = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushliveroom = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.roomId = prodata.roomId;
							r.bid = prodata.bid;
							r.name = prodata.name;
							r.coverImg = prodata.coverImg;
							r.shareImg = prodata.shareImg;
							r.anchorName = prodata.anchorName;
							r.startTime = prodata.startTime;
							r.endTime = prodata.endTime;
							r.showtime = prodata.showtime;
							r.status = prodata.status;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						roomId: prodata.roomId,
						bid: prodata.bid,
						name: prodata.name,
						coverImg: prodata.coverImg,
						shareImg: prodata.shareImg,
						startTime: prodata.startTime,
						endTime: prodata.endTime,
						showtime: prodata.showtime,
						status: prodata.status
					});
				}
			}
		});
	}


	$scope.getarticle = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var category = m.params.category
				var sortby = m.params.sortby
				var shownum = m.params.shownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectarticle",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						shownum: shownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								pic: data[i].pic,
								pics: data[i].pics,
								artid: data[i].id,
								name: data[i].name,
								subname: data[i].subname,
								readcount: data[i].readcount,
								createtime: date('Y-m-d H:i',data[i].createtime)
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addArticle = function(action, Mid, Gid) {
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择文章',content:"<?php echo url('Article/choosearticle'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delArticle = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.id == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushArticle = function(artdata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					console.log(oldGid)
					// 执行替换
					angular.forEach(m.data, function(r, index3){
					console.log(r.id)
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.pic = artdata.pic;
							r.artid = artdata.id;
							r.name = artdata.name;
							r.subname = artdata.subname;
							r.createtime = date('Y-m-d H:i',artdata.createtime);
							r.readcount = artdata.readcount;
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						pic: artdata.pic,
						artid: artdata.id,
						name: artdata.name,
						subname: artdata.subname,
						createtime: date('Y-m-d H:i',artdata.createtime),
						readcount: artdata.readcount
					});
				}
			}
		});
	}


//预约服务商品
$scope.getyuyue = function(Mid) {
	angular.forEach($scope.Items, function(m, index1) {
		if (m.id == Mid) {
			var bid = m.params.bid
			var sortby = m.params.sortby
			var proshownum = m.params.proshownum
			var category = m.params.category
			$.ajax({
				type: 'post',
				dataType: 'json',
				url: "<?php echo url('DesignerPage/api'); ?>/op/selectyuyue",
				data: {
					bid: bid,
					sortby: sortby,
					proshownum: proshownum,
					cid: category,
				},
				success: function(data) {
					m.data = [];
					angular.forEach(data, function(d, i) {
						var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
						// 执行添加
						m.data.push({
							id: Gid,
							pic: data[i].pic,
							proid: data[i].id,
							name: data[i].name,
							sell_price: data[i].sell_price,
							danwei:data[i].danwei,
							sales:data[i].sales,
							fwtype:data[i].fwtype,
							is_open:data[i].is_open,
							sellpoint:data[i].sellpoint,
							fuwulist:data[i].fuwulist,
							color1:data[i].color1,
							opentip:data[i].opentip,
							noopentip:data[i].noopentip,
							fwtypetop1:data[i].fwtypetop1,
                        	fwtypetop2:data[i].fwtypetop2,
                        	fwtypetop3:data[i].fwtypetop3,
						});
					});
					$("div[mid=" + Mid + "]").mouseover();
				},
				error: function() {
					layer.msg('查询商品信息失败！请刷新页面。');
				}
			});
		}
	});
}
$scope.addyuyue = function(action, Mid, Gid) {
	layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择服务',content:"<?php echo url('YuyueList/chooseproduct'); ?>/args/"+action+','+Mid+','+Gid});
}
$scope.delyuyue = function(Mid, Gid) {
	var Items = $scope.Items;
	angular.forEach(Items, function(m, index1) {
		if (m.id == Mid) {
			angular.forEach(m.data, function(g, index2) {
				if (g.id == Gid) {
					m.data.splice(index2, 1);
				}
			});
		}
	});
}
$scope.pushyuyue = function(prodata,args){
	var argsArr = args.split(',');
	var action = argsArr[0];
	var Mid = argsArr[1];
	var oldGid = argsArr[2];
	angular.forEach($scope.Items, function(m, index1) {
		if(m.id == Mid){
			if(action == 'replace' && oldGid){
				// 执行替换
				angular.forEach(m.data, function(r, index3){
					if(r.id == oldGid){
						var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
						r.id = Gid;
						r.pic = prodata.pic;
						r.proid = prodata.id;
						r.name = prodata.name;
						r.sell_price = prodata.sell_price;
						r.sales = prodata.sales;
					}
				});
			}else if(!action){
				var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
				// 执行添加
				m.data.push({
					id: Gid,
					pic: prodata.pic,
					proid: prodata.id,
					name: prodata.name,
					sell_price: prodata.sell_price,
				});
			}
		}
	});
}

	$scope.getcoupon = function(Mid) {
		angular.forEach($scope.Items, function(m, index1) {
			if (m.id == Mid) {
				var bid = m.params.bid
				var category = m.params.category
				var sortby = m.params.sortby
				var shownum = m.params.shownum
				$.ajax({
					type: 'post',
					dataType: 'json',
					url: "<?php echo url('DesignerPage/api'); ?>/op/selectcoupon",
					data: {
						bid: bid,
						cid: category,
						sortby: sortby,
						shownum: shownum
					},
					success: function(data) {
						m.data = [];
						angular.forEach(data, function(d, i) {
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							// 执行添加
							m.data.push({
								id: Gid,
								couponid: data[i].id,
								type: data[i].type,
								limit_count: data[i].limit_count,
								name: data[i].name,
								money: data[i].money,
								minprice: data[i].minprice,
								starttime: date('Y-m-d H:i',data[i].starttime),
								endtime: date('Y-m-d H:i',data[i].endtime)
							});
						});
						$("div[mid=" + Mid + "]").mouseover();
					},
					error: function() {
						layer.msg('查询信息失败！请刷新页面。');
					}
				});
			}
		});
	}
	$scope.addcoupon = function(action, Mid, Gid) {
		console.log(Gid)
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择<?php echo t('优惠券'); ?>',content:"<?php echo url('Coupon/choosecoupon'); ?>/args/"+action+','+Mid+','+Gid});
	}
	$scope.delcoupon = function(Mid, Gid) {
		var Items = $scope.Items;
		angular.forEach(Items, function(m, index1) {
			if (m.id == Mid) {
				angular.forEach(m.data, function(g, index2) {
					if (g.couponid == Gid) {
						m.data.splice(index2, 1);
					}
				});
			}
		});
	}
	$scope.pushcoupon = function(coupondata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		console.log(coupondata)
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				if(action == 'replace' && oldGid){
					console.log(oldGid)
					// 执行替换
					angular.forEach(m.data, function(r, index3){
						if(r.id == oldGid){
							var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
							r.id = Gid;
							r.couponid = coupondata.id;
							r.type = coupondata.type;
							r.limit_count = coupondata.limit_count;
							r.name = coupondata.name;
							r.money = coupondata.money;
							r.minprice = coupondata.minprice;
							r.starttime = date('Y-m-d H:i',coupondata.starttime);
							r.endtime = date('Y-m-d H:i',coupondata.endtime);
						}
					});
				}else if(!action){
					var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
					// 执行添加
					m.data.push({
						id: Gid,
						couponid: coupondata.id,
						type: coupondata.type,
						limit_count: coupondata.limit_count,
						name: coupondata.name,
						money: coupondata.money,
						minprice: coupondata.minprice,
						starttime: date('Y-m-d H:i',coupondata.starttime),
						endtime: date('Y-m-d H:i',coupondata.endtime)
					});
				}
			}
		});
	}
	$scope.addform = function(Mid){
		layer.open({type:2,shadeClose:true,area:['920px', '560px'],'title':'选择表单',content:"<?php echo url('Form/chooseform'); ?>/args/"+Mid});
	}
	$scope.pushform = function(Mid,formdata){
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				formdata.content = $.parseJSON(formdata.content);
				m.data = formdata
				console.log(m.data)
			}
		});
	}
	$scope.pushVideoList = function(prodata,args){
		var argsArr = args.split(',');
		var action = argsArr[0];
		var Mid = argsArr[1];
		var oldGid = argsArr[2];
		angular.forEach($scope.Items, function(m, index1) {
			if(m.id == Mid){
				var Gid = 'G' + new Date().getTime() + parseInt(Math.random() * 1000000);
				// 执行添加
				m.params.src = '[视频ID:'+prodata.id+']';
			}
		});
	}

	$scope.load = function() {
		console.log(11)
	}
	$scope.changeImg = function(Mid, n) {
		width = parseInt($(".dsn-mod-move").width());
		height = (width * parseInt(n.replace("%", "")) / 100) - 16;
		$("div[mid=" + Mid + "] .dsn-8-main-img img").height(height);
	};
	$scope.setimg = function(Mid, n) {
		width = $(".dsn-mod-move").width();
		n = n.replace("%", "");
		n = n / 100;
		$("div[mid=" + Mid + "] .dsn-12 img").height(width * n - 30);
	}
	$scope.setfocus = function(Mid, e) {
		$scope.focus = Mid;
		//ccc = $("div[id=" + Mid + "]").offset().top;
		//ddd = (ccc - 280) >= 0 ? (ccc - 280) : 0;
	}
	$scope.addItem = function(Nid,content='') {
		var Mid = 'M' + new Date().getTime() + parseInt(Math.random() * 1000000);
		var Navs = $scope.navs;
		angular.forEach(Navs, function(n, index) {
			if (n.id == Nid) {
				newparams = !clone(n.params) ? '' : clone(n.params);
				newdata = !n.data ? '' : cloneArr(n.data);
				newother = !clone(n.other) ? '' : clone(n.other);
				if(content){
					newcontent = content;
				}else{
					newcontent = !clone(n.content) ? '' : clone(n.content);
				}
				if (Nid == 'cube') {
					for (row = 0; row < 4; row++) {
						for (newparams.layout[row] = {}, col = 0; col < 4; col++) {
							newparams.layout[row][col] = {cols: 1,rows: 1,isempty: !0,imgurl: "",classname: ""};
						}
					}
				}
				var newitem = {id: Mid,temp: Nid,params: newparams,data: newdata,other: newother,content: newcontent};
				var insertindex = -1;
				if ($scope.focus != '') {
					var Items = $scope.Items;
					angular.forEach(Items, function(a, index) {
						if (a.id == $scope.focus) {
							insertindex = index;
						}
					});
				}
				if (insertindex == -1) {
					$scope.Items.push(newitem);
				} else {
					$scope.Items.splice(insertindex + 1, 0, newitem);
				}
				$scope.focus = newitem.id;
				if(Nid == 'product'){
					$scope.getgoods(newitem.id);
				}
				if(Nid == 'collage'){
					$scope.getcollage(newitem.id);
				}
				if(Nid == 'cycle'){
					$scope.getcycle(newitem.id);
				}
				if(Nid == 'luckycollage'){
					$scope.getluckycollage(newitem.id);
				}
				if(Nid == 'kanjia'){
					$scope.getkanjia(newitem.id);
				}
				if(Nid == 'seckill'){
					$scope.getseckill(newitem.id);
				}
				if(Nid == 'scoreshop'){
					$scope.getscoreshop(newitem.id);
				}
				if(Nid == 'restaurant_product'){
					$scope.getRestaurantGoods(newitem.id);
				}
				if(Nid == 'article'){
					$scope.getarticle(newitem.id);
				}
				if(Nid == 'coupon'){
					$scope.getcoupon(newitem.id);
				}
				if(Nid == 'business'){
					$scope.getbusiness(newitem.id);
				}
				if(Nid == 'shortvideo'){
					$scope.getshortvideo(newitem.id);
				}
				if(Nid == 'liveroom'){
					$scope.getliveroom(newitem.id);
				}
				if(Nid == 'yuyue'){
					$scope.getyuyue(newitem.id);
				}
				if(Nid == 'tuangou'){
					$scope.gettuangou(newitem.id);
				}
				if(Nid == 'kecheng'){
					$scope.getKecheng(newitem.id);
				}
				if(Nid == 'zhaopin'){
					$scope.getZhaopin(newitem.id);
				}
				if(Nid == 'qiuzhi'){
					$scope.getQiuzhi(newitem.id);
				}
			}
		});
	}

	$scope.delItem = function(id) {
		var Items = $scope.Items;
		angular.forEach(Items, function(a, index) {
			if (a.id == id) {
				Items.splice(index, 1);
				$scope.focus = '';
				layer.msg('移除成功');
			}
		});
	}
	$scope.over = function(id){
		$("div[id=" + id + "]").parent().find(".dsn-del").stop().show();
	}
	$scope.out = function(id){
		$("div[id=" + id + "]").parent().find(".dsn-del").stop().hide();
	}
	$scope.shopImg = function(Mid){
		fileUploader.show(function(data){
			var Items = $scope.Items;
			angular.forEach(Items, function(m, index1){
				if(m.id == Mid){
					m.params.bgimg = data['url'];
					$("div[mid=" + Mid + "]").mouseover();
				}
			});
		},{type: 'image'});
	}
	$scope.pageImg = function(Mid, type){
		fileUploader.show(function(data){
			if(type == 'floatimg'){
				$scope.pages[0].params.floatimg = data['url'];
			}else{
				$scope.pages[0].params.img = data['url'];
			}
			$("div[mid=" + Mid + "]").trigger("click");
		},{type:'image'});
	}

	$scope.$on('ngRepeatFinished', function(ngRepeatFinishedEvent) {
		console.log('ngRepeatFinished')
		layui.form.render();
		$('.dsn-banner .swipe').each(function() {
			initswipe($(this));
		})
		angular.forEach($scope.Items, function(m, index1) {
			if(m.temp == 'map'){
				var center = new qq.maps.LatLng(m.params.latitude,m.params.longitude);
				var map = new qq.maps.Map(document.getElementById("showmp_"+m.id), {
					center: center,      // 地图的中心地理坐标。
					zoom:15              // 地图的中心地理坐标。
				});
				var marker = new qq.maps.Marker({ position:center, map: map});
			}
		})
		//$("div[mid=" + Mid + "]").mouseover();
	});

	$scope.getdata = function(n) {
		var items = cloneArr($scope.Items);
		angular.forEach(items, function(m, index1) {
			if (m.temp == 'richtext') {
				m.content = encodeURIComponent(m.content);
			}
		});
		var datas = angular.toJson(items);
		var pageinfo = angular.toJson($scope.pages);
		return datas;
		return {'datainfo': datas,'pageinfo': pageinfo};
	}
}]);

myModel.directive('stringHtml', function() {
	return function(scope, el, attr) {
		if (attr.stringHtml) {
			scope.$watch(attr.stringHtml, function(html) {
				el.html(html || '');
			});
		}
	};
});

myModel.directive("onFinishRenderFilters", function($timeout) {
	return {
		restrict: 'A',
		link: function(scope, element, attr) {
			if (scope.$last === true) {
				$timeout(function() {
					if(ngisfinish==0){
						layui.form.render();
					}
					ngisfinish = 1;
					scope.$emit('ngRepeatFinished');
				});
			}
		}
	};
});
$(function(){
	changeconentxy();
	$(window).scroll(function(){
		changeconentxy();
	});
	layui.form.render();
})

function changeconentxy(){
		var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
		$scope.contenttop = $('#editor-content').offset().top - $(window).scrollTop();
		$scope.contentleft = $('#editor-content').offset().left - $(window).scrollLeft();
		$scope.$apply();
}

function choosepro(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushGood(prodata.product,args);
	$scope.$apply();
}
function choosescoreshop(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushscoreshop(prodata,args);
	$scope.$apply();
}
function choosecollage(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushcollage(prodata,args);
	$scope.$apply();
}
function chooseluckycollage(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushluckycollage(prodata,args);
	$scope.$apply();
}
function choosekanjia(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushkanjia(prodata,args);
	$scope.$apply();
}
function chooseseckill(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushseckill(prodata,args);
	$scope.$apply();
}
function choosetuangou(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushTuangou(prodata,args);
	$scope.$apply();
}
function chooseArticle(artdata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushArticle(artdata,args);
	$scope.$apply();
}
function choosecoupon(cpdata,args){
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushcoupon(cpdata,args);
	$scope.$apply();
}
function chooseform(formdata,args){
	console.log(args)
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushform(args,formdata);
	$scope.$apply();
}
function choosebusiness(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushbusiness(prodata,args);
	$scope.$apply();
}
function chooseliveroom(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushliveroom(prodata,args);
	$scope.$apply();
}
function chooseLink(urlname,url,args) {
	//url =  url + (url.indexOf('?') > -1 ? '&' : '?') + 'x=<?php echo $x; ?>';
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.chooseLink(urlname,url,args);
	$scope.$apply();
}
function chooseshortvideo(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushshortvideo(prodata.product,args);
	$scope.$apply();
}
//预约服务
function chooseyuyue(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushyuyue(prodata.product,args);
	$scope.$apply();
}

function choosekecheng(prodata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushKecheng(prodata.product,args);
	$scope.$apply();
}
function chooseVideoList(vdata,args) {
	var $scope = angular.element(document.querySelector('[ng-controller=FoxController]')).scope();
	$scope.pushVideoList(vdata,args);
	$scope.$apply();
}
function geteditordata() {
	//通过controller来获取Angular应用
	var appElement = document.querySelector('[ng-controller=FoxController]');
	//获取$scope变量
	var $scope = angular.element(appElement).scope();
	return $scope.getdata()
}
</script>



	<div class="layui-form-item">
		<label class="layui-form-label"></label>
		<div class="layui-input-block">
			<button class="layui-btn layui-btn-normal" onclick="gonext(2)">上一步:编辑商品参数</button>
			<button class="layui-btn layui-btn-danger" lay-submit lay-filter="formsubmit">提 交</button>
		</div>
	</div>
</div>
<div class="layui-tab-item">
	<div class="layui-form-item">
		<label class="layui-form-label">分享标题：</label>
		<div class="layui-input-inline" style="width:300px">
			<input type="text" class="layui-input" name="info[sharetitle]" value="<?php echo $info['sharetitle']; ?>"/>
		</div>
		<div class="layui-form-mid layui-word-aux">默认为商品名称</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">分享图标：</label>
		<input type="hidden" name="info[sharepic]" id="sharepic" lay-verType="tips" class="layui-input" value="<?php echo $info['sharepic']; ?>">
		<button style="float:left;" type="button" class="layui-btn layui-btn-primary" upload-input="sharepic" upload-preview="sharepicPreview" onclick="uploader(this)">上传图片</button>
		<div class="layui-form-mid layui-word-aux" style="margin-left:10px;">建议尺寸：400*400像素，默认为商品主图</div>
		<div id="sharepicPreview" class="picsList-class-padding">
			<div class="layui-imgbox" style="width:100px;"><div class="layui-imgbox-img"><img src="<?php echo $info['sharepic']; ?>"/></div></div>
		</div>
	</div>
	<div class="layui-form-item">
		<label class="layui-form-label">分享描述：</label>
		<div class="layui-input-inline" style="width:300px">
			<input type="text" class="layui-input" name="info[sharedesc]" value="<?php echo $info['sharedesc']; ?>"/>
		</div>
		<div class="layui-form-mid layui-word-aux">默认为商品卖点</div>
	</div>
	<!-- <div class="layui-form-item">
        <label class="layui-form-label">分享链接：</label>
        <div class="layui-input-inline" style="width:300px">
            <input type="text" class="layui-input" name="info[sharelink]" value="<?php echo $info['sharelink']; ?>"/>
        </div>
        <div class="layui-form-mid layui-word-aux">默认为商品链接，非特殊需求无需填写</div>
    </div> -->
	<div class="layui-form-item">
		<label class="layui-form-label"></label>
		<div class="layui-input-block">
			<button class="layui-btn layui-btn-normal" onclick="gonext(3)">上一步:编辑商品详情</button>
			<button class="layui-btn layui-btn-danger" lay-submit lay-filter="formsubmit">提 交</button>
		</div>
	</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<video id="myvideo" style="display:none"></video>

<script>
	var fillstate =false;
	layui.form.verify({
		positiveWholeNumberRequiredTrue:[/^[+]{0,1}(\d+)$/,'只能填写正整数'],//必填，且只能输入
	})
	var formSelects = layui.formSelects;
	layui.form.on('radio(group_status)',function(data){
		if(data.value == 1){
			$('.group_status1').show();
		}else{
			$('.group_status1').hide();
		}

	})
	$(".layui-form input#video").bind("input change propertychange",function(event){
		var videourl = $('#video').val();
		if(videourl){
			$("#myvideo").prop("src", videourl);
			$("#myvideo")[0].addEventListener("loadedmetadata", function() {
				var tol = Math.floor(this.duration); //获取总时长
				$('#video_duration').val(tol);
			});
		}else{
			$('#video_duration').val(0);
		}
	})
	//var ueditor = UE.getEditor('content');
	layui.form.on('radio(freighttypeset)', function(data){
		if(data.value == '1'){
			$('#setfreight').hide();
			$('#freighttype3').hide();
			$('#freighttype4').hide();
			$('#freighttype3_4').hide();
		}else if(data.value == '3'){
			$('#setfreight').hide();
			$('#freighttype3').show();
			$('#freighttype3_4').show();
			$('#freighttype4').hide();
		}else if(data.value == '4'){
			$('#setfreight').hide();
			$('#freighttype3').hide();
			$('#freighttype3_4').show();
			$('#freighttype4').show();
		}else{
			$('#setfreight').show();
			$('#freighttype3').hide();
			$('#freighttype4').hide();
			$('#freighttype3_4').hide();
		}
	})


	layui.form.on('radio(weighttype)', function(data){
		if(data.value == '2'){
			$('#setweight').show();
		}else{
			$('#setweight').hide();
		}
	})

	layui.form.on('radio(set_status)',function(data){
		if(data.value=="0" || data.value=="1"){
			$('#set_status2').hide();
			$('#set_status3').hide();
		}
		if(data.value=="2"){
			$('#set_status2').show();
			$('#set_status3').hide();
		}
		if(data.value=="3"){
			$('#set_status2').hide();
			$('#set_status3').show();
		}
	});

	layui.laydate.render({
		elem: '#start_hours',
		type: 'time',
		format:'HH:mm',
		trigger: 'click'
	});
	layui.laydate.render({
		elem: '#end_hours',
		type: 'time',
		format:'HH:mm',
		trigger: 'click'
	});
	layui.laydate.render({
		elem: '#start_time',
		type: 'datetime',
		trigger: 'click'
	});
	layui.laydate.render({
		elem: '#end_time',
		type: 'datetime',
		trigger: 'click'
	});

	layui.form.on('switch(isfuwu)',function(data){
		if(data.elem.checked){
			$('#isfuwudiv').show();
		}else{
			$('#isfuwudiv').hide();
		}
	})
	layui.form.on('radio(commissionset)', function(data){
		if(data.value == '1'){
			$('#commissionset1').show();
			$('#commissionset2').hide();
			$('#commissionset3').hide();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').hide();
			$('#commission_butie2').show();
			<?php endif; ?>
		}else if(data.value == '2'){
			$('#commissionset1').hide();
			$('#commissionset2').show();
			$('#commissionset3').hide();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').show();
			$('#commission_butie2').hide();
			<?php endif; ?>
		}else if(data.value == '3'){
			$('#commissionset1').hide();
			$('#commissionset2').hide();
			$('#commissionset3').show();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').hide();
			$('#commission_butie2').hide();
			<?php endif; ?>
		}else if(data.value == '5'){
			$('#commissionset1').show();
			$('#commissionset2').hide();
			$('#commissionset3').show();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').hide();
			$('#commission_butie2').show();
			<?php endif; ?>
		}else if(data.value == '6'){
			$('#commissionset1').hide();
			$('#commissionset2').show();
			$('#commissionset3').show();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').show();
			$('#commission_butie2').hide();
			<?php endif; ?>
		}else if(data.value == '7'){
			$('#commissionset1').hide();
			$('#commissionset2').hide();
			$('#commissionset3').hide();
			$('#commissionset4').show();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').hide();
			$('#commission_butie2').hide();
			<?php endif; ?>
		}else{
			$('#commissionset1').hide();
			$('#commissionset2').hide();
			$('#commissionset3').hide();
			$('#commissionset4').hide();
			<?php if(getcustom('commission_butie')): ?>
			$('#commission_butie').hide();
			$('#commission_butie2').hide();
			<?php endif; ?>
		}
	});
	layui.form.on('radio(commissionpingjiset)', function(data){
		if(data.value == '1'){
			$('#commissionpingjiset1').show();
			$('#commissionpingjiset2').hide();
		}else if(data.value == '2'){
			$('#commissionpingjiset1').hide();
			$('#commissionpingjiset2').show();
		}else{
			$('#commissionpingjiset1').hide();
			$('#commissionpingjiset2').hide();
		}
	})
	<?php if(getcustom('commission_parent_bcy_send_once')): ?>
	layui.form.on('radio(commissionbcyset)', function(data){
		if(data.value == '1'){
			$('#commissionbcyset1').show();
			$('#commissionbcyset2').hide();
		}else if(data.value == '2'){
			$('#commissionbcyset1').hide();
			$('#commissionbcyset2').show();
		}else{
			$('#commissionbcyset1').hide();
			$('#commissionbcyset2').hide();
		}
	})
	<?php endif; if(getcustom('commission_bole')): ?>
	//分销伯乐奖
	layui.form.on('radio(commissionboleset)', function(data){
		if(data.value == '1'){
			$('#commissionboleset1').show();
			$('#commissionboleset2').hide();
		}else if(data.value == '2'){
			$('#commissionboleset1').hide();
			$('#commissionboleset2').show();
		}else{
			$('#commissionboleset1').hide();
			$('#commissionboleset2').hide();
		}
	})
	<?php endif; ?>
	//购车基金
	layui.form.on('radio(gouchebonusset)', function(data){
		if(data.value == '1'){
			$('#gouchebonusset1').show();
			$('#gouchebonusset2').hide();
		}else if(data.value == '2'){
			$('#gouchebonusset1').hide();
			$('#gouchebonusset2').show();
		}else{
			$('#gouchebonusset1').hide();
			$('#gouchebonusset2').hide();
		}
	})
	//旅游基金
	layui.form.on('radio(lvyoubonusset)', function(data){
		if(data.value == '1'){
			$('#lvyoubonusset1').show();
			$('#lvyoubonusset2').hide();
		}else if(data.value == '2'){
			$('#lvyoubonusset1').hide();
			$('#lvyoubonusset2').show();
		}else{
			$('#lvyoubonusset1').hide();
			$('#lvyoubonusset2').hide();
		}
	})
	layui.form.on('radio(fenhongset)', function(data){
		if(data.value == '1'){
			$('#fenhongset').show();
		}else{
			$('#fenhongset').hide();
		}
	})

	layui.form.on('radio(scoredkmaxset)', function(data){
		if(data.value == '1'){
			$('#scoredkmaxset1').show();
			$('#scoredkmaxunit').html('%');
		}else if(data.value == '2'){
			$('#scoredkmaxset1').show();
			$('#scoredkmaxunit').html('元');
		}else{
			$('#scoredkmaxset1').hide();
		}
	})
	<?php if(getcustom('product_givetongzheng')): ?>
	layui.form.on('radio(tongzhengdkmaxset)', function(data){
		if(data.value == '1'){
			$('#tongzhengdkmaxset1').show();
			$('#tongzhengdkmaxunit').html('%');
		}else if(data.value == '2'){
			$('#tongzhengdkmaxset1').show();
			$('#tongzhengdkmaxunit').html('元');
		}else{
			$('#tongzhengdkmaxset1').hide();
		}
	})
	<?php endif; ?>


	layui.form.on('radio(mendianhexiaoset)', function(data){
		if(data.value == '1'){
			$('#mendianhexiaoset1').show();
			$('#mendianhexiaoset2').hide();
		}else if(data.value == '2'){
			$('#mendianhexiaoset1').hide();
			$('#mendianhexiaoset2').show();
		}else{
			$('#mendianhexiaoset1').hide();
			$('#mendianhexiaoset2').hide();
		}
	})
	<?php if(getcustom('shoporder_ranking')): ?>
	layui.form.on('radio(rankingset)', function(data){
		if(data.value == '1'){
			$('#rankingset1').show();
		}else{
			$('#rankingset1').hide();
		}
	})
	<?php endif; if(getcustom('member_levelup_givechild')): ?>
	layui.form.on('radio(give_team_levelup)', function(data){
		if(data.value == '1'){
			$('.team_levelup_div').show();
		}else{
			$('.team_levelup_div').hide();
		}
	})
	<?php endif; ?>

	function gonext(layid){
		$(window).scrollTop(0);
		layui.element.tabChange('mytab', layid);
	}
	layui.element.on('tab(mytab)', function(){
		try{
			changeconentxy();
		}catch(e){}
	})
	//var ueditor = UE.getEditor('editor');
	var oldgglist = <?php echo json_encode($newgglist); ?>;
	var Copyoldgglist = <?php echo json_encode($newgglist); ?>;
	$(function(){
		refreshgg();
	})
	function addggtype(){
        <?php if(getcustom('product_show_guige_type')): ?>
        var guigeType = $("input[name='info[guige_show_type]']:checked").val();
        var trCount = $('#ggnamediv tbody tr').length;
        if(guigeType == 1 && trCount >= 2){
            layer.msg('[纵横交叉]展示方式下，最多只能添加两个规格分组');
            return;
        }
        <?php endif; ?>
		var gghtml = '<tr>';
		gghtml += '<td><input type="text" name="ggname" class="layui-input" value="" style="width:120px;margin-bottom: 5px;" placeholder="请输入规格分组"/></td>';
		gghtml += '<td><div><input type="text" name="ggnameguige" class="layui-input" style="width:180px;margin-bottom:5px" value="" placeholder="请输入规格名称"> <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="addggname(this)" style="margin-top:-3px;"><i class="fa fa-plus" style="font-size:14px!important"></i></button>';
		<?php if(getcustom('more_productunit_guige')): ?>
			var product_type = $(".product_type").val();
			var style_prounit = 'style="margin-top:-3px;"';
			if(product_type !=6){
				var style_prounit = 'style="display:none;margin-top:-3px;"';
			}
			gghtml +=' <button title="上移" type="button" class="layui-btn layui-btn-primary layui-btn-sm prounit_show" '+ style_prounit+' onclick="toup(this)"><i class="fa fa-arrow-up" style="font-size:14px!important"></i></button>';
		<?php endif; ?>
		gghtml +='</div></td>';
		gghtml += '<td><button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="$(this).parent().parent().remove()">删除</button></td>';
		gghtml += '</tr>';
		$('#ggnamediv').append(gghtml);
	}
	function addggname(obj){
		var pichtml = '';
		<?php if(getcustom('more_productunit_guige')): ?>
		var product_type = $(".product_type").val();
		var style_prounit = 'style="margin-top:-3px;"';
			if(product_type !=6){ 
				var style_prounit = 'style="display:none;margin-top:-3px;"';
			}
		pichtml +=' <button title="上移" type="button" class="layui-btn layui-btn-primary layui-btn-sm prounit_show" '+ style_prounit+' onclick="toup(this)"><i class="fa fa-arrow-up" style="font-size:14px!important"></i></button>';								
		<?php endif; if(getcustom('product_wholesale')): ?>
		var tdindex = $(obj).parent().parent().parent().index();
		if(tdindex == 0){
			var randomNum = Math.floor(Math.random() * 100);
			var lt = $(obj).parent().siblings().length;
			var product_type = $(".product_type").val();
			if(product_type !=4){ 
				var style = 'style="display:none"';
			}
			pichtml+='<div id="ggpic_wholesale'+randomNum+lt+'" class="jieti_discount" '+ style+'  ><input type="hidden" name="ggpic_wholesale" id="ggpic_wholesale_val'+randomNum+lt+'" value=""/><div class="guigeimg" style="margin-bottom:6px;" ><img class="thumb_img" src="" style="max-width:50px;"/><a  style="display: none;" class="layui-imgbox-close" href="javascript:void(0)" onclick="$(this).prev(\'.thumb_img\').attr(\'src\',\'\');$(this).parent().prev(\'input\').val(\'\');$(this).hide();"  title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a></div> <button class="layui-btn layui-btn-sm layui-btn-primary" style="margin-bottom:6px;"  onclick="uploader(this)" upload-input="ggpic_wholesale_val'+randomNum+lt+'" upload-preview="ggpic_wholesale'+randomNum+lt+'" type="button">上传</button></div>';
		}
		<?php endif; ?>		
		var ggnameobj = $(obj).parent().parent().append('<div><input class="layui-input" name="ggnameguige" type="text" style="width:180px;margin-bottom:5px" value="" placeholder="请输入规格名称"> <button type="button" class="layui-btn layui-btn-sm layui-btn-primary" onclick="delggname(this,1)" style="margin-top:-3px;"><i class="fa fa-remove" style="font-size:14px!important"></i></button>'+pichtml+'</div>');
	}
	function delggname(obj,type){
		let ksarrdel = [];
		let haskongdel = 0;
		$('#ggnamediv').find("input").each(function(){
			if($(this).val()=='') haskongdel = 1
		})
		if(haskongdel){
			$(obj).parent().remove();return;
		}
		var product_type = $(".product_type").val();
		// 获取点击规格名称的索引
		var mcid= $(obj).parent().index();
		var fzid = $(obj).parent().parent().parent().index();
		$(obj).parent().remove();
		specs = [];
		var i=0;
		// 规格分组
		$('input[name=ggname]').each(function(){
			var ggval = [];
			var j=0;
			$(this).parent().next().find('input[name=ggnameguige]').each(function(){
				
				if(product_type ==4){
					var ggpic_wholesale = $(this).nextAll().find('input[name=ggpic_wholesale]').val();
					ggval.push({ 'k':j,'title':$(this).val(),'ggpic_wholesale':ggpic_wholesale});
				}else{
					ggval.push({ 'k':j,'title':$(this).val()});
				}
				//ggval.push({ 'k':j,'title':$(this).val()});
				j++
			})
			specs.push({ 'k':i,'title':$(this).val(),'items':ggval});
			i++;
		});
		var len = specs.length;
		var newlen = 1;
		var h = new Array(len);
		var rowspans = new Array(len);
		for(var i=0;i<len;i++){
			var itemlen = specs[i].items.length;
			if(itemlen<=0) { itemlen = 1 };
			newlen*=itemlen;
			h[i] = new Array(newlen);
			for(var j=0;j<newlen;j++){
				h[i][j] = new Array();
			}
			var l = specs[i].items.length;
			rowspans[i] = 1;
			for(j=i+1;j<len;j++){
				rowspans[i]*= specs[j].items.length;
			}
		}	
		for(var m=0;m<len;m++){
			var k = 0,kid = 0,n=0;
			for(var j=0;j<newlen;j++){
				var rowspan = rowspans[m];
				if( j % rowspan==0){
					h[m][j]={ k:specs[m].items[kid].k,title: specs[m].items[kid].title,id: specs[m].items[kid].id};
				}else{
					h[m][j]={ k:specs[m].items[kid].k,title:specs[m].items[kid].title,id: specs[m].items[kid].id};
				}
				n++;
				if(n==rowspan){
					kid++; if(kid>specs[m].items.length-1) { kid=0; }
					n=0;
				}
			}
		}
		for(var i=0;i<newlen;i++){
			var ks = [];
			for(var j=0;j<len;j++){
				ks.push( h[j][i].k);
			}
			ks =ks.join(',');
			ksarrdel.push(ks)
		}
	if(type){
		let oldgglistcopys = {}
		Object.keys(oldgglist).forEach(item => {
			if(item.split(',')[fzid] == mcid){
				delete oldgglist[item]
			}
		})
		ksarrdel.forEach((item,index) => {
			oldgglistcopys[item] = Object.values(oldgglist)[index]
		})
		oldgglist = oldgglistcopys
		return;
	}
		let oldgglistcopy = {}
		Object.keys(Copyoldgglist).forEach(item => {
			if(item.split(',')[$(obj).attr('data-id')] == $(obj).attr('id')){
				delete Copyoldgglist[item]
			}
		})
		if(Object.values(Copyoldgglist).length < ksarrdel.length){
			// 编辑时添加新规格删除
			let idarr = Object.values(Copyoldgglist).map(item => item.id);
			let arr = [];
			Object.values(oldgglist).forEach((item,index) => {
				// 通过数据唯一值id筛选未删除的数据
				if(item.id != undefined){
					if(idarr.some(i => i == item.id)){
						arr.push(item)
					}
				}else{
					// 判断当前数据的值是否为选中取消的
					if(Object.keys(oldgglist)[index].split(',')[fzid] != mcid){
						arr.push(item)
					}
				}
			})
			ksarrdel.forEach((item,index) => {
				oldgglistcopy[item] = arr[index];
			})
			// key值重新编译，数据按照顺序赋值
		}else{
			ksarrdel.forEach((item,index) => {
				oldgglistcopy[item] = Object.values(Copyoldgglist)[index]
			})
		}
		// 
		oldgglist = oldgglistcopy
	}
	function lvpriceset(){
		var lvprice = $("input[name='info[lvprice]']").val();
		if(lvprice == 0){
			$("input[name='info[lvprice]']").val('1');
			$('#lvpricebtn').text('关闭会员价');
			$('#commissionset4input').show();
			$('#commissionset4tips').show();
			$('#lvpricesetWithRate').show();
			//layui.form.render();
		}else{
			fillstate = false;
			$("input[name='info[lvprice]']").val('0');
			$('#lvpricebtn').text('开启会员价');
			$('#commissionset4input').hide();
			$('#commissionset4tips').hide();
			$('#lvpricesetWithRate').hide();
		}
		refreshgg()
	}
	<?php if(getcustom('product_service_fee')): ?>
	function serviceFeeSet(){
		var serviceFeeSwitch = $("input[name='info[service_fee_switch]']").val();
        if(serviceFeeSwitch == 0){
            $("input[name='info[service_fee_switch]']").val(1);
            $('#serviceFeeBtn').text('关闭<?php echo t('服务费'); ?>');
        }
        else{
            $("input[name='info[service_fee_switch]']").val(0);
            $('#serviceFeeBtn').text('开启<?php echo t('服务费'); ?>');
        }
		refreshgg()
	}
	<?php endif; ?>
	function lvpricesetWithRate()
	{
		fillstate = true;
		refreshgg()
		//todo 等级列表$levellist，费率字段price_rate
	}
	var ismoveggname = false;
	<?php if(getcustom('more_productunit_guige')): ?>
	function toup(obj){
		var onthis=$(obj).parent();  
		var getUp=onthis.prev(); 
		if (getUp.length<=0)  {  
		layer.msg("到顶了");  
		return;  
		}  
		ismoveggname = true;
		onthis.after(getUp);  
	}
	<?php endif; ?>
	var specs = [];
	var prounit = [];
	function refreshgg(){
		var haskong = 0
		var ksarr = [];
		$('#ggnamediv').find("input[name=ggname]").each(function(){
			if($(this).val()=='') haskong = 1
		})
		if(haskong){
			layer.msg('请填写完整');return;
		}
		var lvprice = $("input[name='info[lvprice]']").val();

		<?php if(getcustom('product_service_fee')): ?>
		var serviceFeeSwitch = $("input[name='info[service_fee_switch]']").val();
		<?php endif; if(getcustom('product_show_guige_type')): ?>
            var guigeType = $("input[name='info[guige_show_type]']:checked").val();
            var trCount = $('#ggnamediv tbody tr').length;
            if(guigeType == 1 && trCount > 2){
                layer.msg('[纵横交叉]展示方式下，最多只能添加两个规格分组');
                return;
            }
		<?php endif; ?>

		var product_type = $(".product_type").val();
		if(ismoveggname){
			oldgglist = [];
			ismoveggname = false;
		}
		specs = [];
		var i=0;
		// 规格分组
		$('input[name=ggname]').each(function(){
			var ggval = [];
			var j=0;
			$(this).parent().next().find('input[name=ggnameguige]').each(function(){
				
				if(product_type ==4){
					var ggpic_wholesale = $(this).nextAll().find('input[name=ggpic_wholesale]').val();
					ggval.push({ 'k':j,'title':$(this).val(),'ggpic_wholesale':ggpic_wholesale});
				}else{
					ggval.push({ 'k':j,'title':$(this).val()});
				}
				//ggval.push({ 'k':j,'title':$(this).val()});
				j++
			})

			specs.push({ 'k':i,'title':$(this).val(),'items':ggval});

			
			i++;
		});	
		<?php if(getcustom('more_productunit_guige')): ?>
		prounit = [];
		$('#prounit input').each(function(index,value){
			var val = $(this).val();
			if(val && index > 0){
				prounit.push(val);
			}
		});
		<?php endif; ?>
		console.log(specs)
		var len = specs.length;
		var newlen = 1;
		var h = new Array(len);
		var rowspans = new Array(len);
		var html = '<thead><tr>';
		for(var i=0;i<len;i++){
			html+="<th>" + specs[i].title + "</th>";
			var itemlen = specs[i].items.length;
			if(itemlen<=0) { itemlen = 1 };
			newlen*=itemlen;
			h[i] = new Array(newlen);
			for(var j=0;j<newlen;j++){
				h[i][j] = new Array();
			}
			var l = specs[i].items.length;
			rowspans[i] = 1;
			for(j=i+1;j<len;j++){
				rowspans[i]*= specs[j].items.length;
			}
		}
		var product_type = $(".product_type").val();
		<?php if(getcustom('product_handwork')): ?>
			var product_type = $(".product_type").val();
		<?php endif; ?>
		html += '<th>规格编号</th>';
		<?php if(getcustom('more_productunit_guige')): ?>
		prounit.map(function(value,index){
				if(product_type == 6){
					html += '<th class="prounit_show" style="text-align:center">'+ value +'(单位换算数量)</th>';
				}else{
					html += '<th class="prounit_show" style="text-align:center;display:none">'+ value +'(单位换算数量)</th>';
				}
			})
		<?php endif; ?>
		html += '<th>市场价（元）</th>';
		html += '<th>成本价（元）</th>';
		if(lvprice==1){
			<?php foreach($levellist as $level): ?>
			html += '<th><?php echo $level['name']; ?>（元）</th>';
			<?php endforeach; ?>
			}else{
				html += '<th>销售价（元）</th>';
			}
			<?php if(getcustom('price_dollar') && usdrate>0): ?>
			html += '<th>美元</th>';
			<?php endif; ?>
				html += '<th>重量（克）</th>';
				html += '<th>库存</th>';
				<?php if($bid==0 || $business_selfscore==1): ?>
				html += '<th>赠<?php echo t('积分'); ?>(个)</th>';
				<?php endif; if(getcustom('consumer_value_add') && ($auth_data=='all' || in_array('Consumer/*',$auth_data))): ?>
					html += '<th>赠<?php echo t('绿色积分'); ?>(元)</th>';
					html += '<th><?php echo t('奖金池'); ?>(元)</th>';
					<?php endif; if($bid==0 && getcustom('commission_duipeng_score_withdraw') && ($auth_data=='all' || in_array('CommissionWithdrawScorePower/authscorelog',$auth_data))): ?>
				html += '<th>自购赠提现积分(个)</th>';
				html += '<th>直推赠提现积分(个)</th>';
				<?php endif; if(getcustom('product_givetongzheng')): ?>
					html += '<th>赠<?php echo t('通证'); ?>(个)</th>';
					<?php endif; if(getcustom('product_handwork')): ?>
					if(product_type == 3){
						html += '<th class="handfee">手工费</th>';
					}else{
						html += '<th class="handfee" style="display:none">手工费</th>';
					}
				<?php endif; if($bid==0): if($ShopSendSilvermoney): ?>
					html += '<th>赠<?php echo t('银值'); ?>(个)</th>';
					<?php endif; if($ShopSendGoldmoney): ?>
					html += '<th>赠<?php echo t('金值'); ?>(个)</th>';
					<?php endif; ?>
				<?php endif; if(getcustom('guige_limit_start')): ?>
					html += '<th>起售数量</th>';
					<?php endif; if(getcustom('product_stock_warning')): ?>
					html += '<th>预警值</th>';
					<?php endif; if(getcustom('member_commission_max') && $member_commission_max==1): ?>
						html += '<th>赠送<?php echo t('佣金上限'); ?></th>';
						<?php endif; ?>
					if(product_type == 4){
						html += '<th class="showguigeimg" style="display:none">图片</th>';
					}else{
						html += '<th class="showguigeimg" >图片</th>';
					}
						html += '</tr></thead>';

						for(var m=0;m<len;m++){
							var k = 0,kid = 0,n=0;
							for(var j=0;j<newlen;j++){
								var rowspan = rowspans[m];
								if( j % rowspan==0){
									h[m][j]={ k:specs[m].items[kid].k,title: specs[m].items[kid].title, html: "<td rowspan='" +rowspan + "'>"+ specs[m].items[kid].title+"</td>\r\n",id: specs[m].items[kid].id};
								}else{
									h[m][j]={ k:specs[m].items[kid].k,title:specs[m].items[kid].title, html: "",id: specs[m].items[kid].id};
								}
								n++;
								if(n==rowspan){
									kid++; if(kid>specs[m].items.length-1) { kid=0; }
									n=0;
								}
							}
						}

						var hh = "";
						for(var i=0;i<newlen;i++){

							hh+="<tr>";
							var ks = [];
							var titles = [];
							for(var j=0;j<len;j++){
								hh+=h[j][i].html;
								ks.push( h[j][i].k);
								titles.push( h[j][i].title);
							}
							ks2 =ks.join('_');
							ks =ks.join(',');
							titles =titles.join(',');
							ksarr.push(ks)							
							
							if(typeof(oldgglist[ks])!='undefined'){
								var val = oldgglist[ks];
							}else{
								if(Object.values(oldgglist).length == 0){
									oldgglist ={}
								}
								var val = { procode:'',market_price:'',cost_price:'',sell_price:'',weight:'100',stock:'1000',givescore:'0',givetongzheng:'0',pic:'',lvprice_data:null,caneditstock:1};
								if(product_type == 6){
									var val = { prounit:'',procode:'',market_price:'',cost_price:'',sell_price:'',weight:'100',stock:'1000',givescore:'0',givetongzheng:'0',pic:'',lvprice_data:null};
								}
								oldgglist[ks] = val;
							}
							//hh += '<td>';
							//hh += '	<input name="option['+ks+'][procode]" class="layui-input" type="text" style="width:100px" value="'+(val.procode==null?'':val.procode)+'"/>';
							//if(i==0){
							//	hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'procode\')"></i>';
							//}
							// hh += '</td>';
							hh += '<td>';
							hh += '	<input name="option['+ks+'][barcode]" class="layui-input" id="'+ks+'" oninput="barcodeChange(this)" type="text" style="width:100px;" value="'+(val.barcode==null?'':val.barcode)+'"/>';
							if(i==0){
								hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'barcode\')"></i>';
							}
							hh += '</td>';
							<?php if(getcustom('more_productunit_guige')): ?>
							prounit.map(function(value,index){       
								if(product_type == 6){
									hh += '<td class="prounit_show">';
								}else{
									hh += '<td class="prounit_show" style="display:none">';
								}
								prounit_index ='prounit_'+index;
								hh += '	<input name="option['+ks+'][prounit_'+index+']" class="layui-input" type="text" style="width:100px" value="'+(val['prounit_'+index]==null?'':val['prounit_'+index])+'"/>';
								if(i==0){
									hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'prounit_'+index+'\')"></i>';
								}
								hh += '</td>';
							})
							<?php endif; ?>
							hh += '<td>';
							hh += '	<input name="option['+ks+'][name]" type="hidden" value="'+titles+'" class="layui-input"/><input name="option['+ks+'][market_price]" type="text" class="layui-input" id="'+ks+'" oninput="marketPriceChange(this)" style="width:70px" value="'+(val.market_price==null?'':val.market_price)+'"/>';
							if(i==0){
								hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'market_price\')"></i>';
							}
							hh += '</td>';
							hh += '<td>';
							hh += '	<input name="option['+ks+'][cost_price]" id="'+ks+'" oninput="costPriceChange(this)" type="text" class="layui-input" style="width:70px;" value="'+(val.cost_price==null?'':val.cost_price)+'" <?php if($costPriceDisabled): ?>disabled="disabled"<?php endif; ?> />';
							if(i==0){
								hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'cost_price\')"></i>';
							}
							hh += '</td>';
							if(lvprice==1){
								<?php foreach($levellist as $lk=>$level): ?>
								hh += '<td>';
								if(fillstate){
									 <?php if($level['price_rate']): ?>
									 hh += '<input name="option['+ks+'][sell_price_<?php echo $level['id']; ?>]" type="text" style="width:70px;" value="'+(val.sell_price==null?'':val.sell_price*<?php echo $level['price_rate']; ?>).toFixed(2)+'" class="layui-input" id="levelprice_'+i+'_<?php echo $lk; ?>"/>';
									 <?php else: ?>
									 hh += '<input name="option['+ks+'][sell_price_<?php echo $level['id']; ?>]" type="text" style="width:70px;" value="'+(val.sell_price==null?'':val.sell_price)+'" class="layui-input" id="levelprice_'+i+'_<?php echo $lk; ?>"/>';
									 <?php endif; ?>
								}else{
									hh += '	<input name="option['+ks+'][sell_price_<?php echo $level['id']; ?>]" type="text" style="width:70px" value="'+(val.lvprice_data==null || val.lvprice_data[<?php echo $level['id']; ?>]==null?'':val.lvprice_data[<?php echo $level['id']; ?>])+'" class="layui-input" id="levelprice_'+i+'_<?php echo $lk; ?>"/>';
								}
									<?php if(getcustom('product_service_fee')): ?>
									if(serviceFeeSwitch == 1){
										hh += '<input name="option['+ks+'][service_fee_<?php echo $level['id']; ?>]" type="text"  style="width:70px" value="'+(val.service_fee_data==null || val.service_fee_data[<?php echo $level['id']; ?>]==null?'':val.service_fee_data[<?php echo $level['id']; ?>])+'"  placeholder="<?php echo t('服务费'); ?>"  class="layui-input" id="servicefee_'+i+'_<?php echo $lk; ?>"/>';
									}
									<?php endif; ?>

									if(i==0){
									<?php if($lk==0): ?>
									hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'sell_price_<?php echo $level['id']; ?>\')"></i>';
									<?php else: ?>
									hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plsetlevelprice(\''+i+'\',\'<?php echo $lk; ?>\')"></i>';
									<?php endif; ?>
									}
									hh += '</td>';
									<?php endforeach; ?>
									}else{
										hh += '<td>';
										hh += '<input name="option['+ks+'][sell_price]" id="'+ks+'" oninput="getusd(this,'+i+')"  type="text" style="width:70px;" value="'+(val.sell_price==null?'':val.sell_price)+'" class="layui-input"/>';
										<?php if(getcustom('product_service_fee')): ?>
										if(serviceFeeSwitch == 1){
											hh += '<input name="option['+ks+'][service_fee]" style="width:70px" value="'+(val.service_fee==null ?'':val.service_fee)+'"  placeholder="<?php echo t('服务费'); ?>"  class="layui-input"/>';
										}
										<?php endif; ?>
										if(i==0){
											hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'sell_price\')"></i>';
										}
										hh += '</td>';
									}
									<?php if(getcustom('price_dollar') && usdrate>0): ?>
									hh += '<td>';
									hh += '	<input  type="text" id="usdprice'+i+'" class="layui-input" style="width:70px" value="'+(val.usdprice?val.usdprice:'')+'"/>';
									if(i==0){
										hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'cost_price\')"></i>';
									}
									hh += '</td>';
									<?php endif; ?>

										hh += '<td>';
										hh += ' <input name="option['+ks+'][weight]" type="text" style="width:60px" value="'+(val.weight==null?'':val.weight)+'" class="layui-input"/>';
										if(i==0){
											hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'weight\')"></i>';
										}
										hh += '</td>';
										hh += '<td>';
										console.log('---------------');
										console.log(val)
										if(val.caneditstock==1) {
											hh += ' <input name="option[' + ks + '][stock]" type="text" style="width:60px" value="' + (val.stock == null ? '' : val.stock) + '" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'stock\')"></i>';
											}
										}else{
											hh += '-';
										}
										<?php if(getcustom('product_stock_warning')): ?>
											if(val.stock<val.stock_warning){
												hh += '<a style="color:red"> 库存不足</a>';
											}
										<?php endif; ?>

									
										hh += '</td>';
										<?php if($bid==0 || $business_selfscore==1): ?>
										hh += '<td>';
										hh += ' <input name="option['+ks+'][givescore]" type="text" style="width:60px" value="'+(val.givescore==null?'':val.givescore)+'" class="layui-input"/>';
										if(i==0){
											hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'givescore\')"></i>';
										}
										hh += '</td>';
										<?php endif; if(getcustom('consumer_value_add') && ($auth_data=='all' || in_array('Consumer/*',$auth_data))): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][give_green_score]" type="text" style="width:60px" value="'+(val.give_green_score==null?'':val.give_green_score)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'give_green_score\')"></i>';
											}
											hh += '</td>';

											hh += '<td>';
											hh += ' <input name="option['+ks+'][give_bonus_pool]" type="text" style="width:60px" value="'+(val.give_bonus_pool==null?'':val.give_bonus_pool)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'give_bonus_pool\')"></i>';
											}
											hh += '</td>';
											<?php endif; if($bid==0 && getcustom('commission_duipeng_score_withdraw') && ($auth_data=='all' || in_array('CommissionWithdrawScorePower/authscorelog',$auth_data))): ?>
										hh += '<td>';
										hh += ' <input name="option['+ks+'][give_withdraw_score]" type="text" style="width:60px" value="'+(val.give_withdraw_score==null?'':val.give_withdraw_score)+'" class="layui-input"/>';
										if(i==0){
											hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'give_withdraw_score\')"></i>';
										}
										hh += '</td>';

										hh += '<td>';
										hh += ' <input name="option['+ks+'][give_parent1_withdraw_score]" type="text" style="width:60px" value="'+(val.give_parent1_withdraw_score==null?'':val.give_parent1_withdraw_score)+'" class="layui-input"/>';
										if(i==0){
											hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'give_parent1_withdraw_score\')"></i>';
										}
										hh += '</td>';
										<?php endif; if(getcustom('product_givetongzheng')): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][givetongzheng]" type="text" style="width:60px" value="'+(val.givetongzheng==null?'':val.givetongzheng)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'givetongzheng\')"></i>';
											}
											hh += '</td>';
											<?php endif; if(getcustom('product_handwork')): ?>
											if(product_type == 3){
												hh += '<td class="handfee">';
											}else{
												hh += '<td class="handfee" style="display:none">';
											}
											hh += ' <input name="option['+ks+'][hand_fee]" type="number" min="0" style="width:60px" value="'+(val.hand_fee<=0?'0':val.hand_fee)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'hand_fee\')"></i>';
											}
											hh += '</td>';
										<?php endif; if($bid==0): if($ShopSendSilvermoney): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][givesilvermoney]" type="number" min="0" style="width:60px" value="'+(val.givesilvermoney<=0?'0':val.givesilvermoney)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'givesilvermoney\')"></i>';
											}
											hh += '</td>';
											<?php endif; if($ShopSendGoldmoney): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][givegoldmoney]" type="number" min="0" style="width:60px" value="'+(val.givegoldmoney<=0?'0':val.givegoldmoney)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'givegoldmoney\')"></i>';
											}
											hh += '</td>';
											<?php endif; ?>
										<?php endif; if(getcustom('guige_limit_start')): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][limit_start]" type="number" min="0" style="width:60px" value="'+(val.limit_start<=0?'0':val.limit_start)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'limit_start\')"></i>';
											}
											hh += '</td>';
											<?php endif; if(getcustom('product_stock_warning')): ?>
											hh += '<td>';
											hh += ' <input name="option['+ks+'][stock_warning]" type="number" min="0" style="width:60px" value="'+(val.stock_warning<=0?'0':val.stock_warning)+'" class="layui-input"/>';
											if(i==0){
												hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'limit_start\')"></i>';
											}
											hh += '</td>';
											<?php endif; if(getcustom('member_commission_max') && $member_commission_max==1): ?>
												hh += '<td>';
												hh += ' <input name="option['+ks+'][give_commission_max]" type="number" min="0" style="width:60px" value="'+(val.give_commission_max<=0?'0':val.give_commission_max)+'" class="layui-input"/>';
												if(i==0){
													hh += ' <i class="fa fa-hand-o-down" style="cursor:pointer" title="批量设置" onclick="plset(\'give_commission_max\')"></i>';
												}
												hh += '</td>';
												<?php endif; ?>
												if(product_type == 4){
													hh += '<td class="showguigeimg" id="ggpic'+ks2+'" style="display:none">';
												}else{
													hh += '<td class="showguigeimg" id="ggpic'+ks2+'">';
												}
												hh += '<input type="hidden" name="option['+ks+'][pic]" id="ggpicval'+ks2+'" value="'+(val.pic==null?'':val.pic)+'"/><div class="guigeimg"><img class="thumb_img" src="'+(val.pic?val.pic:'')+'" style="max-width:50px;"/><a class="layui-imgbox-close guigeimg_close" style="'+(val.pic=='' ||val.pic==null?'display:none':'display:block')+'"    href="javascript:void(0)" onclick="$(this).prev(\'.thumb_img\').attr(\'src\',\'\');$(this).parent().prev(\'input\').val(\'\');$(this).hide();" title="删除"><i class="layui-icon layui-icon-close-fill-opaque"></i></a></div> <button class="layui-btn layui-btn-sm layui-btn-primary" onclick="uploader(this)" upload-input="ggpicval'+ks2+'" upload-preview="ggpic'+ks2+'" type="button">上传</button></td>';
												hh += "</tr>";
											}
											let copyarr = {}
											ksarr.forEach(item => {
												Object.keys(oldgglist).forEach(items => {
													if(item == items){
														copyarr[items] =oldgglist[items]
													}
												})
											})
											oldgglist = copyarr;
											html+=hh;
											$("#ggvaldiv").html(html);
											
										}
										function marketPriceChange(obj){
											oldgglist[obj.id].market_price = obj.value;
										}
										function barcodeChange(obj){
											oldgglist[obj.id].barcode = obj.value;
										}
									function costPriceChange(obj){
										oldgglist[obj.id].cost_price = obj.value;
									}
										function getusd(obj,ks){
											oldgglist[obj.id].sell_price = obj.value;
											var price = obj.value;
											var usdrate = '<?php echo $usdrate; ?>';
											var usdprice = (price/usdrate).toFixed(2);
											console.log(usdprice);
											$("#usdprice"+ks).val(usdprice);
										}
										function plset(name){
											if(name =='procode'){
												var procode = $("input[name$='["+name+"]']").eq(0).val();
												if(procode == '') procode = randomString(6);
												$("input[name$='["+name+"]']").each(function(i,v){
													if(i>0) $(this).val(procode+ '-'+i);
												})
											}else{
												if(name =='barcode' || name == 'market_price' || name == "cost_price" || name == 'sell_price'){
													Object.values(oldgglist).forEach(item => {
														if(name == 'barcode') return item.barcode = $("input[name$='["+name+"]']").eq(0).val()
														if(name == 'market_price') return item.market_price = $("input[name$='["+name+"]']").eq(0).val()
														if(name == 'cost_price') return item.cost_price = $("input[name$='["+name+"]']").eq(0).val()
														if(name == 'sell_price') return item.sell_price = $("input[name$='["+name+"]']").eq(0).val()
													})
												}

												<?php if(getcustom('product_service_fee')): ?>
													var thisname = name.replace(/sell_price/, "service_fee");
													$("input[name$='["+thisname+"]']").val($("input[name$='["+thisname+"]']").eq(0).val());
												<?php endif; ?>
												$("input[name$='["+name+"]']").val($("input[name$='["+name+"]']").eq(0).val());
											}
										}
										function plsetlevelprice(i,k){
											var thisprice = $('#levelprice_'+i+'_'+k).val();
											console.log(thisprice)
											var level0price = $('#levelprice_0_0').val();
											console.log(level0price)
											var pricepercent = thisprice / level0price;
											console.log(pricepercent)

											<?php if(getcustom('product_service_fee')): ?>
											var servicefee = $('#servicefee_'+i+'_'+k).val();
											<?php endif; ?>
											$("input[name$='][market_price]']").each(function(i2,v2){
												var this_price = ($('#levelprice_'+i2+'_0').val() * pricepercent).toFixed(2);
												console.log(this_price)
												this_price = parseInt(this_price*100)/100;
												$('#levelprice_'+i2+'_'+k).val(this_price);
												<?php if(getcustom('product_service_fee')): ?>
												$('#servicefee_'+i2+'_'+k).val(servicefee);
												<?php endif; ?>
											})
										}
										function randomString(len) {
											len = len || 32;
											var $chars = 'ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678';    /****默认去掉了容易混淆的字符oOLl,9gq,Vv,Uu,I1****/
											var maxPos = $chars.length;
											var pwd = '';
											for (i = 0; i < len; i++) {
												pwd += $chars.charAt(Math.floor(Math.random() * maxPos));
											}
											return pwd;
										}

										layui.form.on('checkbox(gettjset)', function(data){
											console.log(data)
											if(data.elem.checked){
												$('#gettjset').hide();
											}else{
												$('#gettjset').show();
											}
										});
										var chooseUrlField = '';
										function chooseUrl2(field){
											chooseUrlField = field;
											layer.open({type:2,shadeClose:true,area:['1200px', '650px'],'title':'选择链接',content:"<?php echo url('DesignerPage/chooseurl'); ?>&callback=chooseLink2"})
										}
										function chooseLink2(urlname,url){
											$("#"+chooseUrlField).val(url);
										}

										function showChooseCategory(){
											layer.open({type:2,title:'选择类目',content:"<?php echo url('Wxvideo/allcategory'); ?>&ischoose=1",area:['900px','600px'],shadeClose:true});
										}
										function chooseCategory(data){
											console.log(data)
											$("input[name='info[wxvideo_third_cat_id]']").val(data.third_cat_id);
										}

										/**
										 * 1.监听select的选中与取消
										 *
										 * formSelects.on(ID, Function);
										 *
										 * @param ID        xm-select的值
										 * @param Function  自定义处理方法
										 * @param isEnd     是否获取实时数据, true/false
										 */
										var formSelects = layui.formSelects;
										var paramdata='<?php echo $info['paramdata']; ?>';
									    if(paramdata !='' && paramdata != null){
											paramdata = JSON.parse(paramdata);
									    }
										formSelects.on('selectCid', function(id, vals, val, isAdd, isDisabled){
											//console.log($("input[name='info[cid]']").val())
											var cid = $("input[name='info[cid]']").val();
											$.post("<?php echo url('getParam'); ?>",{cid:cid},function(data){
												if(data.status == 1){
													var paramlist = data.paramlist;
													var html = '';
													for(var i=0;i<paramlist.length;i++){
														html += '<div class="layui-form-item">';
														html += '	<label class="layui-form-label">';
														if(paramlist[i]['is_required']==1) html += '<span class="redstar">*</span>';
														html += paramlist[i]['name'];html += '：</label>';
														if(paramlist[i]['type']=='0'){
															html += '<div class="layui-input-inline" style="width:240px">';
															html += '<input type="text" class="layui-input" name="paramdata['+paramlist[i]['name']+']" ';
															if(typeof (paramdata[paramlist[i]['name']]) != 'undefined')
																html +=' value="'+ paramdata[paramlist[i]['name']]+'"';
															if(paramlist[i]['is_required']==1) html += ' lay-verify="required" lay-verType="tips"';
															html += ' placeholder="'+paramlist[i]['tips']+'"/>';
															html += '</div>';
														}else if(paramlist[i]['type']=='1'){
															html += '<div class="layui-input-inline" style="width:240px">';
															html += '	<select name="paramdata['+paramlist[i]['name']+']"';
															if(paramlist[i]['is_required']==1) html += ' lay-verify="required" lay-verType="tips"';
															html += '	>';
															html += '<option value="">'+paramlist[i]['tips']+'</option>';
															//console.log(paramlist[i]['params'])
															var parsms = JSON.parse(paramlist[i]['params']);
															for(var j=0;j<parsms.length;j++){
																if (paramdata[paramlist[i]['name']] == parsms[j]){
																	html += '<option selected>'+parsms[j]+'</option>';
																}else{
																	html += '<option>'+parsms[j]+'</option>';
																}
															}
															html += '</select></div>';
														}else if(paramlist[i]['type']=='2'){
															html += '<div class="layui-input-inline" style="width:240px">';
															var parsms = JSON.parse(paramlist[i]['params']);
															for(var j=0;j<parsms.length;j++){
																html += '<input type="checkbox" name="paramdata['+paramlist[i]['name']+'][]" value="'+parsms[j]+'" title="'+parsms[j]+'" lay-skin="primary" ';
																if(Array.isArray(paramdata[paramlist[i]['name']]) && paramdata[paramlist[i]['name']].indexOf(parsms[j]) != -1) html += ' checked';
																html += ' />';
															}
															html += '</div>';
															html += '<div class="layui-form-mid layui-word-aux" style="clear:left;margin-left:130px"><?php echo $param['tips']; ?></div>';
														}

														html += '</div>';

													}
													if(paramlist.length == 0){
														html = '<div class="layui-form-item"><label class="layui-form-label"></label><div class="layui-form-mid">暂未添加商品参数或当前商品分类下无参数，<a href="javascript:void(0)" onclick="openmax(\'<?php echo url('ShopParam/index'); ?>&isopen=1\')">去添加</a></div></div>';
													}
// console.log(html);
													$(".paramTab").html(html);

													layui.form.render();
												}
											})
											//id:           点击select的id
											//vals:         当前select已选中的值
											//val:          当前select点击的值
											//isAdd:        当前操作选中or取消
											//isDisabled:   当前选项是否是disabled

											//如果return false, 那么将取消本次操作
											// return false;
										},true);
</script>
<script type="text/javascript">
	function chooseUrlWindow(){
		layer.open({type:2,shadeClose: true,area: ['1100px', '650px'],'title': '选择链接',content: "<?php echo url('DesignerPage/chooseurl'); ?>&callback=chooseLinkWindow"})
	}
	function chooseLinkWindow(link_name,link_url,arg=''){
		if (link_url){
			$('#buybtn_link_url').val(link_url);
			$('#buybtn_link_name').val(link_name);
			$('.buybtn_link_name').html(link_name);
			layer.closeAll();
		}
	}
	function chooseUrlWindow2(){
		layer.open({type:2,shadeClose: true,area: ['1100px', '650px'],'title': '选择链接',content: "<?php echo url('DesignerPage/chooseurl'); ?>&callback=chooseLinkWindow2"})
	}
	function chooseLinkWindow2(link_name,link_url,arg=''){
		if (link_url){
			$('#addcart_link_url').val(link_url);
			$('#addcart_link_name').val(link_name);
			$('.addcart_link_name').html(link_name);
			layer.closeAll();
		}
	}
</script>
<script>
	layui.form.on('radio(show_recommend)',function(data){
		if(data.value == 2){
			$('.show_recommend2').show();
		}else{
			$('.show_recommend2').hide();
		}
	})
	layui.form.on('submit(formsubmit)', function(obj){
		var field = obj.field
		field.specs = JSON.stringify(specs)
		//field['info[detail]'] = ueditor.getContent();
		field['info[detail]'] = geteditordata();
		//console.log(field);return;
		if(field['info[freighttype]'] == 0 && field['info[freightdata]'] == ''){
			dialog('请选择运费模板');
			return;
		}
		var index = layer.load();
		$.post("<?php echo url('save'); ?>",field,function(data){

			dialog(data.msg,data.status);
			if(data.status == 1){
				setTimeout(function(){
					parent.layer.closeAll();
					parent.tableIns.reload()
				},1000)
			}else{
                layer.close(index);
            }
		})
	})
	layui.form.on('radio(price_type)',function(data){
		if(data.value==1){
			$('#xunjia_item').show();
		}else{
			$('#xunjia_item').hide();
		}
	})
	layui.form.on('radio(show_xunjia_btn)',function(data){
		if(data.value==1){
			$('#xunjia_btn_txt').show();
		}else{
			$('#xunjia_btn_txt').hide();
		}
	})
	<?php if(getcustom('product_xunjia_btn')): ?>
	var chooseUrlFieldCt = '';
	function showChooseContactLink(field){
		chooseUrlFieldCt = field;
		layer.open({type:2,shadeClose:true,area:['1200px', '650px'],'title':'选择链接',content:"<?php echo url('DesignerPage/chooseurl'); ?>&callback=chooseLinkContact"})
	}
	function chooseLinkContact(urlname,url){
		$("#"+chooseUrlFieldCt).val(url);
	}
	<?php endif; ?>
	
	layui.form.on('radio(productType)',function(data){
		$(".product_type").val(data.value);
		<?php if(getcustom('product_handwork')): ?>
			if(data.value!=3){
				$('.handfee').hide();
			}else if(data.value==3){
				$('.handfee').show();
			}
		<?php endif; if(getcustom('product_wholesale')): ?>
			if(data.value!=4){
				$('.jieti_discount').hide();
				$('.showguigeimg').show();

			}else if(data.value==4){
				$('.jieti_discount').show();
				$('.showguigeimg').hide();
			}
		<?php endif; if(getcustom('product_pingce')): ?>
			if(data.value == 9){
				$(".freighttype").hide();	
			}else{
				$(".freighttype").show();			 
			}
		<?php endif; if(getcustom('shop_product_fenqi_pay')): ?>
			if(data.value!=5){
				$('.fenqi_pro').hide();
			}else if(data.value==5){
				$('.fenqi_pro').show();
			}
		<?php endif; if(getcustom('more_productunit_guige')): ?>
			if(data.value!=6){
				$('.prounit_show').hide();
			}else if(data.value==6){
				$('.prounit_show').show();
			}
		<?php endif; if(getcustom('product_quanyi')): ?>
			if(data.value!=8){
				$('.quanyi_pro').hide();
			}else if(data.value==8){
				$('.quanyi_pro').show();
			}
		<?php endif; ?>
		if(data.value!=9){
			$('.product_type9').hide();
		}else{
			$('.product_type9').show();
		}
	})
		<?php if(getcustom('commission_parent_pj_stop_product')): ?>
		layui.form.on('radio(commissionpj)', function(data){
			if(data.value == '1'){
				$('.commissionpj').show();
			}else{
				$('.commissionpj').hide();
			}
		})
		<?php endif; if(getcustom('shop_product_fenqi_pay')): ?>
		var chooseCouponLayer;									
		function showChooseCoupon(jx){
			chooseCouponLayer = layer.open({type:2,title:'选择<?php echo t('优惠券'); ?>',content:"<?php echo url('Coupon/choosecoupon'); ?>/args/"+jx,area:['1000px','600px'],shadeClose:true});
		}
		function choosecoupon(res,args){	
			layer.close(chooseCouponLayer);
			if(args == 1){
				$("input[name='info[fenqigive_couponid]']").val(res.id);
			}
			if(args == 2){
				$("input[name='info[fenqigive_fx_couponid]']").val(res.id);
			}

		}
		<?php endif; if(getcustom('level_teamfenhong')): ?>
		layui.form.on('radio(level_teamfenhongset)', function(data){
			if(data.value == '1'){
				$('#levelteamfenhongset').show();
			}else{
				$('#levelteamfenhongset').hide();
			}
		})
		<?php endif; if(getcustom('commission_max_times')): ?>
			layui.form.on('radio(commission_max_times_status)', function(data){
				if(data.value == '1'){
					$('#commission_max_times_status').show();
				}else{
					$('#commission_max_times_status').hide();
				}
			})
			<?php endif; ?>
		var chooseVideoListLayer = '';
		var chooseVideoForField = '';
		function toChooseVideoList(field){
			chooseVideoForField = field;
			chooseVideoListLayer = layer.open({type:2,title:'选择视频',content:"<?php echo url('VideoList/choosevideolist'); ?>/callback/proChooseVideoList",area:['1000px','800px'],shadeClose:true});
		}
		function proChooseVideoList(data,args) {
			$('#'+chooseVideoForField).val('[视频ID:'+data.id+']');
		}
		<?php if(getcustom('supply_zhenxin')): ?>
			function refreshzxfreight(id){
				var index = layer.load();
				$.post("<?php echo url('refreshzxfreight'); ?>",{id:id},function(data){
					layer.close(index);
					dialog(data.msg,data.status);
					if(data.status == 1){
						$('#zxhtml').html(data.zxhtml)
					}
				})
			}
		<?php endif; if(getcustom('money_dec_product')): ?>
		layui.form.on('radio(moneydecset)', function(data){
			if(data.value == '1'){
				$('#moneydecset1').show();
				$('#moneydecunit').html('%');
			}else if(data.value == '2'){
				$('#moneydecset1').show();
				$('#moneydecunit').html('元');
			}else{
				$('#moneydecset1').hide();
			}
		})
		<?php endif; ?>
</script>
<script>
	layui.form.on('radio(bonuspool_gold_set)', function(data){
		if(data.value == '1'){
			$('#bonuspool_gold_set').show();
			$('.bonuspool_gold_set_text').text('比例(%)');
		}else if(data.value == '2'){
			$('#bonuspool_gold_set').show();
			$('.bonuspool_gold_set_text').text('(元)');
		}else{
			$('#bonuspool_gold_set').hide();
		}
	})
	layui.form.on('radio(member_gold_set)', function(data){
		if(data.value == '1'){
			$('#member_gold_set').show();
			$('.member_gold_set_text').text('比例(%)');
		}else if(data.value == '2'){
			$('#member_gold_set').show();
			$('.member_gold_set_text').text('(元)');
		}else{
			$('#member_gold_set').hide();
		}
	})
</script>

<!-- 仓库商品选择功能 -->
<script>
    // 确保回调函数在全局作用域中定义
    window.chooseStoreProduct = function(product, guige) {
        console.log('选择仓库商品回调函数被调用');
        console.log('选择的商品:', product);
        console.log('选择的规格:', guige);
        
        // 填充商品名称
        $('input[name="info[name]"]').val(product.name);
        
        // 填充商品编码
        if (guige.barcode) {
            // 尝试填充商品编码到商品主编码
            $('input[name="info[procode]"]').val(guige.barcode);
            // 尝试填充商品编码到规格表中
            var firstSpecRow = $('#specTable tbody tr:first');
            if (firstSpecRow.length > 0) {
                firstSpecRow.find('input[name^="option["][name$="]\[procode\]"]').val(guige.barcode);
            }
        }
        
        // 显示成功提示
        layer.msg('仓库商品选择成功');
    };
    
    // 显示选择仓库商品弹窗
    function showChooseStoreProduct() {
        console.log('显示选择仓库商品弹窗');
        var url = '<?php echo url("showChooseStoreProduct"); ?>';
        console.log('弹窗URL:', url);
        
        // 保存当前window引用到全局，方便调试
        window.currentEditWindow = window;
        
        var index = layer.open({
            type: 2,
            title: '选择仓库商品',
            content: url,
            area: ['1000px', '600px'],
            shadeClose: true,
            success: function(layero, index) {
                console.log('弹窗打开成功');
                console.log('弹窗iframe:', layero.find('iframe')[0]);
            },
            end: function() {
                console.log('弹窗关闭');
            }
        });
    }
    
    // 加载上一次记录
    function loadLastRecord() {
        layer.msg('选择上一次记录功能待实现');
    }
</script>


</body>
</html>
